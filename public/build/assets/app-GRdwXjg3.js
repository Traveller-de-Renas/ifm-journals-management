function WX(p,g){return function(){return p.apply(g,arguments)}}const{toString:aQ}=Object.prototype,{getPrototypeOf:eK}=Object,X6=(p=>g=>{const w=aQ.call(g);return p[w]||(p[w]=w.slice(8,-1).toLowerCase())})(Object.create(null)),Ug=p=>(p=p.toLowerCase(),g=>X6(g)===p),J6=p=>g=>typeof g===p,{isArray:yk}=Array,hM=J6("undefined");function iQ(p){return p!==null&&!hM(p)&&p.constructor!==null&&!hM(p.constructor)&&_h(p.constructor.isBuffer)&&p.constructor.isBuffer(p)}const ZX=Ug("ArrayBuffer");function cQ(p){let g;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?g=ArrayBuffer.isView(p):g=p&&p.buffer&&ZX(p.buffer),g}const lQ=J6("string"),_h=J6("function"),jX=J6("number"),Q6=p=>p!==null&&typeof p=="object",uQ=p=>p===!0||p===!1,C6=p=>{if(X6(p)!=="object")return!1;const g=eK(p);return(g===null||g===Object.prototype||Object.getPrototypeOf(g)===null)&&!(Symbol.toStringTag in p)&&!(Symbol.iterator in p)},dQ=Ug("Date"),fQ=Ug("File"),mQ=Ug("Blob"),hQ=Ug("FileList"),gQ=p=>Q6(p)&&_h(p.pipe),pQ=p=>{let g;return p&&(typeof FormData=="function"&&p instanceof FormData||_h(p.append)&&((g=X6(p))==="formdata"||g==="object"&&_h(p.toString)&&p.toString()==="[object FormData]"))},bQ=Ug("URLSearchParams"),[vQ,yQ,wQ,CQ]=["ReadableStream","Request","Response","Headers"].map(Ug),SQ=p=>p.trim?p.trim():p.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wM(p,g,{allOwnKeys:w=!1}={}){if(p===null||typeof p>"u")return;let E,M;if(typeof p!="object"&&(p=[p]),yk(p))for(E=0,M=p.length;E<M;E++)g.call(null,p[E],E,p);else{const z=w?Object.getOwnPropertyNames(p):Object.keys(p),K=z.length;let Z;for(E=0;E<K;E++)Z=z[E],g.call(null,p[Z],Z,p)}}function qX(p,g){g=g.toLowerCase();const w=Object.keys(p);let E=w.length,M;for(;E-- >0;)if(M=w[E],g===M.toLowerCase())return M;return null}const GX=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,KX=p=>!hM(p)&&p!==GX;function $G(){const{caseless:p}=KX(this)&&this||{},g={},w=(E,M)=>{const z=p&&qX(g,M)||M;C6(g[z])&&C6(E)?g[z]=$G(g[z],E):C6(E)?g[z]=$G({},E):yk(E)?g[z]=E.slice():g[z]=E};for(let E=0,M=arguments.length;E<M;E++)arguments[E]&&wM(arguments[E],w);return g}const xQ=(p,g,w,{allOwnKeys:E}={})=>(wM(g,(M,z)=>{w&&_h(M)?p[z]=WX(M,w):p[z]=M},{allOwnKeys:E}),p),EQ=p=>(p.charCodeAt(0)===65279&&(p=p.slice(1)),p),_Q=(p,g,w,E)=>{p.prototype=Object.create(g.prototype,E),p.prototype.constructor=p,Object.defineProperty(p,"super",{value:g.prototype}),w&&Object.assign(p.prototype,w)},TQ=(p,g,w,E)=>{let M,z,K;const Z={};if(g=g||{},p==null)return g;do{for(M=Object.getOwnPropertyNames(p),z=M.length;z-- >0;)K=M[z],(!E||E(K,p,g))&&!Z[K]&&(g[K]=p[K],Z[K]=!0);p=w!==!1&&eK(p)}while(p&&(!w||w(p,g))&&p!==Object.prototype);return g},kQ=(p,g,w)=>{p=String(p),(w===void 0||w>p.length)&&(w=p.length),w-=g.length;const E=p.indexOf(g,w);return E!==-1&&E===w},AQ=p=>{if(!p)return null;if(yk(p))return p;let g=p.length;if(!jX(g))return null;const w=new Array(g);for(;g-- >0;)w[g]=p[g];return w},OQ=(p=>g=>p&&g instanceof p)(typeof Uint8Array<"u"&&eK(Uint8Array)),DQ=(p,g)=>{const E=(p&&p[Symbol.iterator]).call(p);let M;for(;(M=E.next())&&!M.done;){const z=M.value;g.call(p,z[0],z[1])}},RQ=(p,g)=>{let w;const E=[];for(;(w=p.exec(g))!==null;)E.push(w);return E},MQ=Ug("HTMLFormElement"),NQ=p=>p.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(w,E,M){return E.toUpperCase()+M}),nX=(({hasOwnProperty:p})=>(g,w)=>p.call(g,w))(Object.prototype),PQ=Ug("RegExp"),YX=(p,g)=>{const w=Object.getOwnPropertyDescriptors(p),E={};wM(w,(M,z)=>{let K;(K=g(M,z,p))!==!1&&(E[z]=K||M)}),Object.defineProperties(p,E)},BQ=p=>{YX(p,(g,w)=>{if(_h(p)&&["arguments","caller","callee"].indexOf(w)!==-1)return!1;const E=p[w];if(_h(E)){if(g.enumerable=!1,"writable"in g){g.writable=!1;return}g.set||(g.set=()=>{throw Error("Can not rewrite read-only method '"+w+"'")})}})},IQ=(p,g)=>{const w={},E=M=>{M.forEach(z=>{w[z]=!0})};return yk(p)?E(p):E(String(p).split(g)),w},LQ=()=>{},FQ=(p,g)=>p!=null&&Number.isFinite(p=+p)?p:g,AG="abcdefghijklmnopqrstuvwxyz",oX="0123456789",XX={DIGIT:oX,ALPHA:AG,ALPHA_DIGIT:AG+AG.toUpperCase()+oX},$Q=(p=16,g=XX.ALPHA_DIGIT)=>{let w="";const{length:E}=g;for(;p--;)w+=g[Math.random()*E|0];return w};function HQ(p){return!!(p&&_h(p.append)&&p[Symbol.toStringTag]==="FormData"&&p[Symbol.iterator])}const VQ=p=>{const g=new Array(10),w=(E,M)=>{if(Q6(E)){if(g.indexOf(E)>=0)return;if(!("toJSON"in E)){g[M]=E;const z=yk(E)?[]:{};return wM(E,(K,Z)=>{const ie=w(K,M+1);!hM(ie)&&(z[Z]=ie)}),g[M]=void 0,z}}return E};return w(p,0)},zQ=Ug("AsyncFunction"),UQ=p=>p&&(Q6(p)||_h(p))&&_h(p.then)&&_h(p.catch),Rt={isArray:yk,isArrayBuffer:ZX,isBuffer:iQ,isFormData:pQ,isArrayBufferView:cQ,isString:lQ,isNumber:jX,isBoolean:uQ,isObject:Q6,isPlainObject:C6,isReadableStream:vQ,isRequest:yQ,isResponse:wQ,isHeaders:CQ,isUndefined:hM,isDate:dQ,isFile:fQ,isBlob:mQ,isRegExp:PQ,isFunction:_h,isStream:gQ,isURLSearchParams:bQ,isTypedArray:OQ,isFileList:hQ,forEach:wM,merge:$G,extend:xQ,trim:SQ,stripBOM:EQ,inherits:_Q,toFlatObject:TQ,kindOf:X6,kindOfTest:Ug,endsWith:kQ,toArray:AQ,forEachEntry:DQ,matchAll:RQ,isHTMLForm:MQ,hasOwnProperty:nX,hasOwnProp:nX,reduceDescriptors:YX,freezeMethods:BQ,toObjectSet:IQ,toCamelCase:NQ,noop:LQ,toFiniteNumber:FQ,findKey:qX,global:GX,isContextDefined:KX,ALPHABET:XX,generateString:$Q,isSpecCompliantForm:HQ,toJSONObject:VQ,isAsyncFn:zQ,isThenable:UQ};function As(p,g,w,E,M){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=p,this.name="AxiosError",g&&(this.code=g),w&&(this.config=w),E&&(this.request=E),M&&(this.response=M)}Rt.inherits(As,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Rt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const JX=As.prototype,QX={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(p=>{QX[p]={value:p}});Object.defineProperties(As,QX);Object.defineProperty(JX,"isAxiosError",{value:!0});As.from=(p,g,w,E,M,z)=>{const K=Object.create(JX);return Rt.toFlatObject(p,K,function(ie){return ie!==Error.prototype},Z=>Z!=="isAxiosError"),As.call(K,p.message,g,w,E,M),K.cause=p,K.name=p.name,z&&Object.assign(K,z),K};const WQ=null;function HG(p){return Rt.isPlainObject(p)||Rt.isArray(p)}function eJ(p){return Rt.endsWith(p,"[]")?p.slice(0,-2):p}function sX(p,g,w){return p?p.concat(g).map(function(M,z){return M=eJ(M),!w&&z?"["+M+"]":M}).join(w?".":""):g}function ZQ(p){return Rt.isArray(p)&&!p.some(HG)}const jQ=Rt.toFlatObject(Rt,{},null,function(g){return/^is[A-Z]/.test(g)});function e7(p,g,w){if(!Rt.isObject(p))throw new TypeError("target must be an object");g=g||new FormData,w=Rt.toFlatObject(w,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ct,Xe){return!Rt.isUndefined(Xe[Ct])});const E=w.metaTokens,M=w.visitor||de,z=w.dots,K=w.indexes,ie=(w.Blob||typeof Blob<"u"&&Blob)&&Rt.isSpecCompliantForm(g);if(!Rt.isFunction(M))throw new TypeError("visitor must be a function");function Ee(Mt){if(Mt===null)return"";if(Rt.isDate(Mt))return Mt.toISOString();if(!ie&&Rt.isBlob(Mt))throw new As("Blob is not supported. Use a Buffer instead.");return Rt.isArrayBuffer(Mt)||Rt.isTypedArray(Mt)?ie&&typeof Blob=="function"?new Blob([Mt]):Buffer.from(Mt):Mt}function de(Mt,Ct,Xe){let dn=Mt;if(Mt&&!Xe&&typeof Mt=="object"){if(Rt.endsWith(Ct,"{}"))Ct=E?Ct:Ct.slice(0,-2),Mt=JSON.stringify(Mt);else if(Rt.isArray(Mt)&&ZQ(Mt)||(Rt.isFileList(Mt)||Rt.endsWith(Ct,"[]"))&&(dn=Rt.toArray(Mt)))return Ct=eJ(Ct),dn.forEach(function(ce,Ke){!(Rt.isUndefined(ce)||ce===null)&&g.append(K===!0?sX([Ct],Ke,z):K===null?Ct:Ct+"[]",Ee(ce))}),!1}return HG(Mt)?!0:(g.append(sX(Xe,Ct,z),Ee(Mt)),!1)}const Ye=[],Ut=Object.assign(jQ,{defaultVisitor:de,convertValue:Ee,isVisitable:HG});function Lt(Mt,Ct){if(!Rt.isUndefined(Mt)){if(Ye.indexOf(Mt)!==-1)throw Error("Circular reference detected in "+Ct.join("."));Ye.push(Mt),Rt.forEach(Mt,function(dn,Nt){(!(Rt.isUndefined(dn)||dn===null)&&M.call(g,dn,Rt.isString(Nt)?Nt.trim():Nt,Ct,Ut))===!0&&Lt(dn,Ct?Ct.concat(Nt):[Nt])}),Ye.pop()}}if(!Rt.isObject(p))throw new TypeError("data must be an object");return Lt(p),g}function rX(p){const g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(p).replace(/[!'()~]|%20|%00/g,function(E){return g[E]})}function tK(p,g){this._pairs=[],p&&e7(p,this,g)}const tJ=tK.prototype;tJ.append=function(g,w){this._pairs.push([g,w])};tJ.toString=function(g){const w=g?function(E){return g.call(this,E,rX)}:rX;return this._pairs.map(function(M){return w(M[0])+"="+w(M[1])},"").join("&")};function qQ(p){return encodeURIComponent(p).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function nJ(p,g,w){if(!g)return p;const E=w&&w.encode||qQ,M=w&&w.serialize;let z;if(M?z=M(g,w):z=Rt.isURLSearchParams(g)?g.toString():new tK(g,w).toString(E),z){const K=p.indexOf("#");K!==-1&&(p=p.slice(0,K)),p+=(p.indexOf("?")===-1?"?":"&")+z}return p}class aX{constructor(){this.handlers=[]}use(g,w,E){return this.handlers.push({fulfilled:g,rejected:w,synchronous:E?E.synchronous:!1,runWhen:E?E.runWhen:null}),this.handlers.length-1}eject(g){this.handlers[g]&&(this.handlers[g]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(g){Rt.forEach(this.handlers,function(E){E!==null&&g(E)})}}const oJ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},GQ=typeof URLSearchParams<"u"?URLSearchParams:tK,KQ=typeof FormData<"u"?FormData:null,YQ=typeof Blob<"u"?Blob:null,XQ={isBrowser:!0,classes:{URLSearchParams:GQ,FormData:KQ,Blob:YQ},protocols:["http","https","file","blob","url","data"]},nK=typeof window<"u"&&typeof document<"u",JQ=(p=>nK&&["ReactNative","NativeScript","NS"].indexOf(p)<0)(typeof navigator<"u"&&navigator.product),QQ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",eee=nK&&window.location.href||"http://localhost",tee=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:nK,hasStandardBrowserEnv:JQ,hasStandardBrowserWebWorkerEnv:QQ,origin:eee},Symbol.toStringTag,{value:"Module"})),zg={...tee,...XQ};function nee(p,g){return e7(p,new zg.classes.URLSearchParams,Object.assign({visitor:function(w,E,M,z){return zg.isNode&&Rt.isBuffer(w)?(this.append(E,w.toString("base64")),!1):z.defaultVisitor.apply(this,arguments)}},g))}function oee(p){return Rt.matchAll(/\w+|\[(\w*)]/g,p).map(g=>g[0]==="[]"?"":g[1]||g[0])}function see(p){const g={},w=Object.keys(p);let E;const M=w.length;let z;for(E=0;E<M;E++)z=w[E],g[z]=p[z];return g}function sJ(p){function g(w,E,M,z){let K=w[z++];if(K==="__proto__")return!0;const Z=Number.isFinite(+K),ie=z>=w.length;return K=!K&&Rt.isArray(M)?M.length:K,ie?(Rt.hasOwnProp(M,K)?M[K]=[M[K],E]:M[K]=E,!Z):((!M[K]||!Rt.isObject(M[K]))&&(M[K]=[]),g(w,E,M[K],z)&&Rt.isArray(M[K])&&(M[K]=see(M[K])),!Z)}if(Rt.isFormData(p)&&Rt.isFunction(p.entries)){const w={};return Rt.forEachEntry(p,(E,M)=>{g(oee(E),M,w,0)}),w}return null}function ree(p,g,w){if(Rt.isString(p))try{return(g||JSON.parse)(p),Rt.trim(p)}catch(E){if(E.name!=="SyntaxError")throw E}return(w||JSON.stringify)(p)}const CM={transitional:oJ,adapter:["xhr","http","fetch"],transformRequest:[function(g,w){const E=w.getContentType()||"",M=E.indexOf("application/json")>-1,z=Rt.isObject(g);if(z&&Rt.isHTMLForm(g)&&(g=new FormData(g)),Rt.isFormData(g))return M?JSON.stringify(sJ(g)):g;if(Rt.isArrayBuffer(g)||Rt.isBuffer(g)||Rt.isStream(g)||Rt.isFile(g)||Rt.isBlob(g)||Rt.isReadableStream(g))return g;if(Rt.isArrayBufferView(g))return g.buffer;if(Rt.isURLSearchParams(g))return w.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),g.toString();let Z;if(z){if(E.indexOf("application/x-www-form-urlencoded")>-1)return nee(g,this.formSerializer).toString();if((Z=Rt.isFileList(g))||E.indexOf("multipart/form-data")>-1){const ie=this.env&&this.env.FormData;return e7(Z?{"files[]":g}:g,ie&&new ie,this.formSerializer)}}return z||M?(w.setContentType("application/json",!1),ree(g)):g}],transformResponse:[function(g){const w=this.transitional||CM.transitional,E=w&&w.forcedJSONParsing,M=this.responseType==="json";if(Rt.isResponse(g)||Rt.isReadableStream(g))return g;if(g&&Rt.isString(g)&&(E&&!this.responseType||M)){const K=!(w&&w.silentJSONParsing)&&M;try{return JSON.parse(g)}catch(Z){if(K)throw Z.name==="SyntaxError"?As.from(Z,As.ERR_BAD_RESPONSE,this,null,this.response):Z}}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zg.classes.FormData,Blob:zg.classes.Blob},validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Rt.forEach(["delete","get","head","post","put","patch"],p=>{CM.headers[p]={}});const aee=Rt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iee=p=>{const g={};let w,E,M;return p&&p.split(`
`).forEach(function(K){M=K.indexOf(":"),w=K.substring(0,M).trim().toLowerCase(),E=K.substring(M+1).trim(),!(!w||g[w]&&aee[w])&&(w==="set-cookie"?g[w]?g[w].push(E):g[w]=[E]:g[w]=g[w]?g[w]+", "+E:E)}),g},iX=Symbol("internals");function rM(p){return p&&String(p).trim().toLowerCase()}function S6(p){return p===!1||p==null?p:Rt.isArray(p)?p.map(S6):String(p)}function cee(p){const g=Object.create(null),w=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let E;for(;E=w.exec(p);)g[E[1]]=E[2];return g}const lee=p=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(p.trim());function OG(p,g,w,E,M){if(Rt.isFunction(E))return E.call(this,g,w);if(M&&(g=w),!!Rt.isString(g)){if(Rt.isString(E))return g.indexOf(E)!==-1;if(Rt.isRegExp(E))return E.test(g)}}function uee(p){return p.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(g,w,E)=>w.toUpperCase()+E)}function dee(p,g){const w=Rt.toCamelCase(" "+g);["get","set","has"].forEach(E=>{Object.defineProperty(p,E+w,{value:function(M,z,K){return this[E].call(this,g,M,z,K)},configurable:!0})})}class vf{constructor(g){g&&this.set(g)}set(g,w,E){const M=this;function z(Z,ie,Ee){const de=rM(ie);if(!de)throw new Error("header name must be a non-empty string");const Ye=Rt.findKey(M,de);(!Ye||M[Ye]===void 0||Ee===!0||Ee===void 0&&M[Ye]!==!1)&&(M[Ye||ie]=S6(Z))}const K=(Z,ie)=>Rt.forEach(Z,(Ee,de)=>z(Ee,de,ie));if(Rt.isPlainObject(g)||g instanceof this.constructor)K(g,w);else if(Rt.isString(g)&&(g=g.trim())&&!lee(g))K(iee(g),w);else if(Rt.isHeaders(g))for(const[Z,ie]of g.entries())z(ie,Z,E);else g!=null&&z(w,g,E);return this}get(g,w){if(g=rM(g),g){const E=Rt.findKey(this,g);if(E){const M=this[E];if(!w)return M;if(w===!0)return cee(M);if(Rt.isFunction(w))return w.call(this,M,E);if(Rt.isRegExp(w))return w.exec(M);throw new TypeError("parser must be boolean|regexp|function")}}}has(g,w){if(g=rM(g),g){const E=Rt.findKey(this,g);return!!(E&&this[E]!==void 0&&(!w||OG(this,this[E],E,w)))}return!1}delete(g,w){const E=this;let M=!1;function z(K){if(K=rM(K),K){const Z=Rt.findKey(E,K);Z&&(!w||OG(E,E[Z],Z,w))&&(delete E[Z],M=!0)}}return Rt.isArray(g)?g.forEach(z):z(g),M}clear(g){const w=Object.keys(this);let E=w.length,M=!1;for(;E--;){const z=w[E];(!g||OG(this,this[z],z,g,!0))&&(delete this[z],M=!0)}return M}normalize(g){const w=this,E={};return Rt.forEach(this,(M,z)=>{const K=Rt.findKey(E,z);if(K){w[K]=S6(M),delete w[z];return}const Z=g?uee(z):String(z).trim();Z!==z&&delete w[z],w[Z]=S6(M),E[Z]=!0}),this}concat(...g){return this.constructor.concat(this,...g)}toJSON(g){const w=Object.create(null);return Rt.forEach(this,(E,M)=>{E!=null&&E!==!1&&(w[M]=g&&Rt.isArray(E)?E.join(", "):E)}),w}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([g,w])=>g+": "+w).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(g){return g instanceof this?g:new this(g)}static concat(g,...w){const E=new this(g);return w.forEach(M=>E.set(M)),E}static accessor(g){const E=(this[iX]=this[iX]={accessors:{}}).accessors,M=this.prototype;function z(K){const Z=rM(K);E[Z]||(dee(M,K),E[Z]=!0)}return Rt.isArray(g)?g.forEach(z):z(g),this}}vf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Rt.reduceDescriptors(vf.prototype,({value:p},g)=>{let w=g[0].toUpperCase()+g.slice(1);return{get:()=>p,set(E){this[w]=E}}});Rt.freezeMethods(vf);function DG(p,g){const w=this||CM,E=g||w,M=vf.from(E.headers);let z=E.data;return Rt.forEach(p,function(Z){z=Z.call(w,z,M.normalize(),g?g.status:void 0)}),M.normalize(),z}function rJ(p){return!!(p&&p.__CANCEL__)}function wk(p,g,w){As.call(this,p??"canceled",As.ERR_CANCELED,g,w),this.name="CanceledError"}Rt.inherits(wk,As,{__CANCEL__:!0});function aJ(p,g,w){const E=w.config.validateStatus;!w.status||!E||E(w.status)?p(w):g(new As("Request failed with status code "+w.status,[As.ERR_BAD_REQUEST,As.ERR_BAD_RESPONSE][Math.floor(w.status/100)-4],w.config,w.request,w))}function fee(p){const g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(p);return g&&g[1]||""}function mee(p,g){p=p||10;const w=new Array(p),E=new Array(p);let M=0,z=0,K;return g=g!==void 0?g:1e3,function(ie){const Ee=Date.now(),de=E[z];K||(K=Ee),w[M]=ie,E[M]=Ee;let Ye=z,Ut=0;for(;Ye!==M;)Ut+=w[Ye++],Ye=Ye%p;if(M=(M+1)%p,M===z&&(z=(z+1)%p),Ee-K<g)return;const Lt=de&&Ee-de;return Lt?Math.round(Ut*1e3/Lt):void 0}}function hee(p,g){let w=0;const E=1e3/g;let M=null;return function(){const K=this===!0,Z=Date.now();if(K||Z-w>E)return M&&(clearTimeout(M),M=null),w=Z,p.apply(null,arguments);M||(M=setTimeout(()=>(M=null,w=Date.now(),p.apply(null,arguments)),E-(Z-w)))}}const T6=(p,g,w=3)=>{let E=0;const M=mee(50,250);return hee(z=>{const K=z.loaded,Z=z.lengthComputable?z.total:void 0,ie=K-E,Ee=M(ie),de=K<=Z;E=K;const Ye={loaded:K,total:Z,progress:Z?K/Z:void 0,bytes:ie,rate:Ee||void 0,estimated:Ee&&Z&&de?(Z-K)/Ee:void 0,event:z,lengthComputable:Z!=null};Ye[g?"download":"upload"]=!0,p(Ye)},w)},gee=zg.hasStandardBrowserEnv?function(){const g=/(msie|trident)/i.test(navigator.userAgent),w=document.createElement("a");let E;function M(z){let K=z;return g&&(w.setAttribute("href",K),K=w.href),w.setAttribute("href",K),{href:w.href,protocol:w.protocol?w.protocol.replace(/:$/,""):"",host:w.host,search:w.search?w.search.replace(/^\?/,""):"",hash:w.hash?w.hash.replace(/^#/,""):"",hostname:w.hostname,port:w.port,pathname:w.pathname.charAt(0)==="/"?w.pathname:"/"+w.pathname}}return E=M(window.location.href),function(K){const Z=Rt.isString(K)?M(K):K;return Z.protocol===E.protocol&&Z.host===E.host}}():function(){return function(){return!0}}(),pee=zg.hasStandardBrowserEnv?{write(p,g,w,E,M,z){const K=[p+"="+encodeURIComponent(g)];Rt.isNumber(w)&&K.push("expires="+new Date(w).toGMTString()),Rt.isString(E)&&K.push("path="+E),Rt.isString(M)&&K.push("domain="+M),z===!0&&K.push("secure"),document.cookie=K.join("; ")},read(p){const g=document.cookie.match(new RegExp("(^|;\\s*)("+p+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove(p){this.write(p,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bee(p){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(p)}function vee(p,g){return g?p.replace(/\/?\/$/,"")+"/"+g.replace(/^\/+/,""):p}function iJ(p,g){return p&&!bee(g)?vee(p,g):g}const cX=p=>p instanceof vf?{...p}:p;function BS(p,g){g=g||{};const w={};function E(Ee,de,Ye){return Rt.isPlainObject(Ee)&&Rt.isPlainObject(de)?Rt.merge.call({caseless:Ye},Ee,de):Rt.isPlainObject(de)?Rt.merge({},de):Rt.isArray(de)?de.slice():de}function M(Ee,de,Ye){if(Rt.isUndefined(de)){if(!Rt.isUndefined(Ee))return E(void 0,Ee,Ye)}else return E(Ee,de,Ye)}function z(Ee,de){if(!Rt.isUndefined(de))return E(void 0,de)}function K(Ee,de){if(Rt.isUndefined(de)){if(!Rt.isUndefined(Ee))return E(void 0,Ee)}else return E(void 0,de)}function Z(Ee,de,Ye){if(Ye in g)return E(Ee,de);if(Ye in p)return E(void 0,Ee)}const ie={url:z,method:z,data:z,baseURL:K,transformRequest:K,transformResponse:K,paramsSerializer:K,timeout:K,timeoutMessage:K,withCredentials:K,withXSRFToken:K,adapter:K,responseType:K,xsrfCookieName:K,xsrfHeaderName:K,onUploadProgress:K,onDownloadProgress:K,decompress:K,maxContentLength:K,maxBodyLength:K,beforeRedirect:K,transport:K,httpAgent:K,httpsAgent:K,cancelToken:K,socketPath:K,responseEncoding:K,validateStatus:Z,headers:(Ee,de)=>M(cX(Ee),cX(de),!0)};return Rt.forEach(Object.keys(Object.assign({},p,g)),function(de){const Ye=ie[de]||M,Ut=Ye(p[de],g[de],de);Rt.isUndefined(Ut)&&Ye!==Z||(w[de]=Ut)}),w}const cJ=p=>{const g=BS({},p);let{data:w,withXSRFToken:E,xsrfHeaderName:M,xsrfCookieName:z,headers:K,auth:Z}=g;g.headers=K=vf.from(K),g.url=nJ(iJ(g.baseURL,g.url),p.params,p.paramsSerializer),Z&&K.set("Authorization","Basic "+btoa((Z.username||"")+":"+(Z.password?unescape(encodeURIComponent(Z.password)):"")));let ie;if(Rt.isFormData(w)){if(zg.hasStandardBrowserEnv||zg.hasStandardBrowserWebWorkerEnv)K.setContentType(void 0);else if((ie=K.getContentType())!==!1){const[Ee,...de]=ie?ie.split(";").map(Ye=>Ye.trim()).filter(Boolean):[];K.setContentType([Ee||"multipart/form-data",...de].join("; "))}}if(zg.hasStandardBrowserEnv&&(E&&Rt.isFunction(E)&&(E=E(g)),E||E!==!1&&gee(g.url))){const Ee=M&&z&&pee.read(z);Ee&&K.set(M,Ee)}return g},yee=typeof XMLHttpRequest<"u",wee=yee&&function(p){return new Promise(function(w,E){const M=cJ(p);let z=M.data;const K=vf.from(M.headers).normalize();let{responseType:Z}=M,ie;function Ee(){M.cancelToken&&M.cancelToken.unsubscribe(ie),M.signal&&M.signal.removeEventListener("abort",ie)}let de=new XMLHttpRequest;de.open(M.method.toUpperCase(),M.url,!0),de.timeout=M.timeout;function Ye(){if(!de)return;const Lt=vf.from("getAllResponseHeaders"in de&&de.getAllResponseHeaders()),Ct={data:!Z||Z==="text"||Z==="json"?de.responseText:de.response,status:de.status,statusText:de.statusText,headers:Lt,config:p,request:de};aJ(function(dn){w(dn),Ee()},function(dn){E(dn),Ee()},Ct),de=null}"onloadend"in de?de.onloadend=Ye:de.onreadystatechange=function(){!de||de.readyState!==4||de.status===0&&!(de.responseURL&&de.responseURL.indexOf("file:")===0)||setTimeout(Ye)},de.onabort=function(){de&&(E(new As("Request aborted",As.ECONNABORTED,M,de)),de=null)},de.onerror=function(){E(new As("Network Error",As.ERR_NETWORK,M,de)),de=null},de.ontimeout=function(){let Mt=M.timeout?"timeout of "+M.timeout+"ms exceeded":"timeout exceeded";const Ct=M.transitional||oJ;M.timeoutErrorMessage&&(Mt=M.timeoutErrorMessage),E(new As(Mt,Ct.clarifyTimeoutError?As.ETIMEDOUT:As.ECONNABORTED,M,de)),de=null},z===void 0&&K.setContentType(null),"setRequestHeader"in de&&Rt.forEach(K.toJSON(),function(Mt,Ct){de.setRequestHeader(Ct,Mt)}),Rt.isUndefined(M.withCredentials)||(de.withCredentials=!!M.withCredentials),Z&&Z!=="json"&&(de.responseType=M.responseType),typeof M.onDownloadProgress=="function"&&de.addEventListener("progress",T6(M.onDownloadProgress,!0)),typeof M.onUploadProgress=="function"&&de.upload&&de.upload.addEventListener("progress",T6(M.onUploadProgress)),(M.cancelToken||M.signal)&&(ie=Lt=>{de&&(E(!Lt||Lt.type?new wk(null,p,de):Lt),de.abort(),de=null)},M.cancelToken&&M.cancelToken.subscribe(ie),M.signal&&(M.signal.aborted?ie():M.signal.addEventListener("abort",ie)));const Ut=fee(M.url);if(Ut&&zg.protocols.indexOf(Ut)===-1){E(new As("Unsupported protocol "+Ut+":",As.ERR_BAD_REQUEST,p));return}de.send(z||null)})},Cee=(p,g)=>{let w=new AbortController,E;const M=function(ie){if(!E){E=!0,K();const Ee=ie instanceof Error?ie:this.reason;w.abort(Ee instanceof As?Ee:new wk(Ee instanceof Error?Ee.message:Ee))}};let z=g&&setTimeout(()=>{M(new As(`timeout ${g} of ms exceeded`,As.ETIMEDOUT))},g);const K=()=>{p&&(z&&clearTimeout(z),z=null,p.forEach(ie=>{ie&&(ie.removeEventListener?ie.removeEventListener("abort",M):ie.unsubscribe(M))}),p=null)};p.forEach(ie=>ie&&ie.addEventListener&&ie.addEventListener("abort",M));const{signal:Z}=w;return Z.unsubscribe=K,[Z,()=>{z&&clearTimeout(z),z=null}]},See=function*(p,g){let w=p.byteLength;if(!g||w<g){yield p;return}let E=0,M;for(;E<w;)M=E+g,yield p.slice(E,M),E=M},xee=async function*(p,g,w){for await(const E of p)yield*See(ArrayBuffer.isView(E)?E:await w(String(E)),g)},lX=(p,g,w,E,M)=>{const z=xee(p,g,M);let K=0;return new ReadableStream({type:"bytes",async pull(Z){const{done:ie,value:Ee}=await z.next();if(ie){Z.close(),E();return}let de=Ee.byteLength;w&&w(K+=de),Z.enqueue(new Uint8Array(Ee))},cancel(Z){return E(Z),z.return()}},{highWaterMark:2})},uX=(p,g)=>{const w=p!=null;return E=>setTimeout(()=>g({lengthComputable:w,total:p,loaded:E}))},t7=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",lJ=t7&&typeof ReadableStream=="function",VG=t7&&(typeof TextEncoder=="function"?(p=>g=>p.encode(g))(new TextEncoder):async p=>new Uint8Array(await new Response(p).arrayBuffer())),Eee=lJ&&(()=>{let p=!1;const g=new Request(zg.origin,{body:new ReadableStream,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!g})(),dX=64*1024,zG=lJ&&!!(()=>{try{return Rt.isReadableStream(new Response("").body)}catch{}})(),k6={stream:zG&&(p=>p.body)};t7&&(p=>{["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!k6[g]&&(k6[g]=Rt.isFunction(p[g])?w=>w[g]():(w,E)=>{throw new As(`Response type '${g}' is not supported`,As.ERR_NOT_SUPPORT,E)})})})(new Response);const _ee=async p=>{if(p==null)return 0;if(Rt.isBlob(p))return p.size;if(Rt.isSpecCompliantForm(p))return(await new Request(p).arrayBuffer()).byteLength;if(Rt.isArrayBufferView(p))return p.byteLength;if(Rt.isURLSearchParams(p)&&(p=p+""),Rt.isString(p))return(await VG(p)).byteLength},Tee=async(p,g)=>{const w=Rt.toFiniteNumber(p.getContentLength());return w??_ee(g)},kee=t7&&(async p=>{let{url:g,method:w,data:E,signal:M,cancelToken:z,timeout:K,onDownloadProgress:Z,onUploadProgress:ie,responseType:Ee,headers:de,withCredentials:Ye="same-origin",fetchOptions:Ut}=cJ(p);Ee=Ee?(Ee+"").toLowerCase():"text";let[Lt,Mt]=M||z||K?Cee([M,z],K):[],Ct,Xe;const dn=()=>{!Ct&&setTimeout(()=>{Lt&&Lt.unsubscribe()}),Ct=!0};let Nt;try{if(ie&&Eee&&w!=="get"&&w!=="head"&&(Nt=await Tee(de,E))!==0){let jt=new Request(g,{method:"POST",body:E,duplex:"half"}),ne;Rt.isFormData(E)&&(ne=jt.headers.get("content-type"))&&de.setContentType(ne),jt.body&&(E=lX(jt.body,dX,uX(Nt,T6(ie)),null,VG))}Rt.isString(Ye)||(Ye=Ye?"cors":"omit"),Xe=new Request(g,{...Ut,signal:Lt,method:w.toUpperCase(),headers:de.normalize().toJSON(),body:E,duplex:"half",withCredentials:Ye});let ce=await fetch(Xe);const Ke=zG&&(Ee==="stream"||Ee==="response");if(zG&&(Z||Ke)){const jt={};["status","statusText","headers"].forEach(Jt=>{jt[Jt]=ce[Jt]});const ne=Rt.toFiniteNumber(ce.headers.get("content-length"));ce=new Response(lX(ce.body,dX,Z&&uX(ne,T6(Z,!0)),Ke&&dn,VG),jt)}Ee=Ee||"text";let Kn=await k6[Rt.findKey(k6,Ee)||"text"](ce,p);return!Ke&&dn(),Mt&&Mt(),await new Promise((jt,ne)=>{aJ(jt,ne,{data:Kn,headers:vf.from(ce.headers),status:ce.status,statusText:ce.statusText,config:p,request:Xe})})}catch(ce){throw dn(),ce&&ce.name==="TypeError"&&/fetch/i.test(ce.message)?Object.assign(new As("Network Error",As.ERR_NETWORK,p,Xe),{cause:ce.cause||ce}):As.from(ce,ce&&ce.code,p,Xe)}}),UG={http:WQ,xhr:wee,fetch:kee};Rt.forEach(UG,(p,g)=>{if(p){try{Object.defineProperty(p,"name",{value:g})}catch{}Object.defineProperty(p,"adapterName",{value:g})}});const fX=p=>`- ${p}`,Aee=p=>Rt.isFunction(p)||p===null||p===!1,uJ={getAdapter:p=>{p=Rt.isArray(p)?p:[p];const{length:g}=p;let w,E;const M={};for(let z=0;z<g;z++){w=p[z];let K;if(E=w,!Aee(w)&&(E=UG[(K=String(w)).toLowerCase()],E===void 0))throw new As(`Unknown adapter '${K}'`);if(E)break;M[K||"#"+z]=E}if(!E){const z=Object.entries(M).map(([Z,ie])=>`adapter ${Z} `+(ie===!1?"is not supported by the environment":"is not available in the build"));let K=g?z.length>1?`since :
`+z.map(fX).join(`
`):" "+fX(z[0]):"as no adapter specified";throw new As("There is no suitable adapter to dispatch the request "+K,"ERR_NOT_SUPPORT")}return E},adapters:UG};function RG(p){if(p.cancelToken&&p.cancelToken.throwIfRequested(),p.signal&&p.signal.aborted)throw new wk(null,p)}function mX(p){return RG(p),p.headers=vf.from(p.headers),p.data=DG.call(p,p.transformRequest),["post","put","patch"].indexOf(p.method)!==-1&&p.headers.setContentType("application/x-www-form-urlencoded",!1),uJ.getAdapter(p.adapter||CM.adapter)(p).then(function(E){return RG(p),E.data=DG.call(p,p.transformResponse,E),E.headers=vf.from(E.headers),E},function(E){return rJ(E)||(RG(p),E&&E.response&&(E.response.data=DG.call(p,p.transformResponse,E.response),E.response.headers=vf.from(E.response.headers))),Promise.reject(E)})}const dJ="1.7.2",oK={};["object","boolean","number","function","string","symbol"].forEach((p,g)=>{oK[p]=function(E){return typeof E===p||"a"+(g<1?"n ":" ")+p}});const hX={};oK.transitional=function(g,w,E){function M(z,K){return"[Axios v"+dJ+"] Transitional option '"+z+"'"+K+(E?". "+E:"")}return(z,K,Z)=>{if(g===!1)throw new As(M(K," has been removed"+(w?" in "+w:"")),As.ERR_DEPRECATED);return w&&!hX[K]&&(hX[K]=!0,console.warn(M(K," has been deprecated since v"+w+" and will be removed in the near future"))),g?g(z,K,Z):!0}};function Oee(p,g,w){if(typeof p!="object")throw new As("options must be an object",As.ERR_BAD_OPTION_VALUE);const E=Object.keys(p);let M=E.length;for(;M-- >0;){const z=E[M],K=g[z];if(K){const Z=p[z],ie=Z===void 0||K(Z,z,p);if(ie!==!0)throw new As("option "+z+" must be "+ie,As.ERR_BAD_OPTION_VALUE);continue}if(w!==!0)throw new As("Unknown option "+z,As.ERR_BAD_OPTION)}}const WG={assertOptions:Oee,validators:oK},Ny=WG.validators;class NS{constructor(g){this.defaults=g,this.interceptors={request:new aX,response:new aX}}async request(g,w){try{return await this._request(g,w)}catch(E){if(E instanceof Error){let M;Error.captureStackTrace?Error.captureStackTrace(M={}):M=new Error;const z=M.stack?M.stack.replace(/^.+\n/,""):"";try{E.stack?z&&!String(E.stack).endsWith(z.replace(/^.+\n.+\n/,""))&&(E.stack+=`
`+z):E.stack=z}catch{}}throw E}}_request(g,w){typeof g=="string"?(w=w||{},w.url=g):w=g||{},w=BS(this.defaults,w);const{transitional:E,paramsSerializer:M,headers:z}=w;E!==void 0&&WG.assertOptions(E,{silentJSONParsing:Ny.transitional(Ny.boolean),forcedJSONParsing:Ny.transitional(Ny.boolean),clarifyTimeoutError:Ny.transitional(Ny.boolean)},!1),M!=null&&(Rt.isFunction(M)?w.paramsSerializer={serialize:M}:WG.assertOptions(M,{encode:Ny.function,serialize:Ny.function},!0)),w.method=(w.method||this.defaults.method||"get").toLowerCase();let K=z&&Rt.merge(z.common,z[w.method]);z&&Rt.forEach(["delete","get","head","post","put","patch","common"],Mt=>{delete z[Mt]}),w.headers=vf.concat(K,z);const Z=[];let ie=!0;this.interceptors.request.forEach(function(Ct){typeof Ct.runWhen=="function"&&Ct.runWhen(w)===!1||(ie=ie&&Ct.synchronous,Z.unshift(Ct.fulfilled,Ct.rejected))});const Ee=[];this.interceptors.response.forEach(function(Ct){Ee.push(Ct.fulfilled,Ct.rejected)});let de,Ye=0,Ut;if(!ie){const Mt=[mX.bind(this),void 0];for(Mt.unshift.apply(Mt,Z),Mt.push.apply(Mt,Ee),Ut=Mt.length,de=Promise.resolve(w);Ye<Ut;)de=de.then(Mt[Ye++],Mt[Ye++]);return de}Ut=Z.length;let Lt=w;for(Ye=0;Ye<Ut;){const Mt=Z[Ye++],Ct=Z[Ye++];try{Lt=Mt(Lt)}catch(Xe){Ct.call(this,Xe);break}}try{de=mX.call(this,Lt)}catch(Mt){return Promise.reject(Mt)}for(Ye=0,Ut=Ee.length;Ye<Ut;)de=de.then(Ee[Ye++],Ee[Ye++]);return de}getUri(g){g=BS(this.defaults,g);const w=iJ(g.baseURL,g.url);return nJ(w,g.params,g.paramsSerializer)}}Rt.forEach(["delete","get","head","options"],function(g){NS.prototype[g]=function(w,E){return this.request(BS(E||{},{method:g,url:w,data:(E||{}).data}))}});Rt.forEach(["post","put","patch"],function(g){function w(E){return function(z,K,Z){return this.request(BS(Z||{},{method:g,headers:E?{"Content-Type":"multipart/form-data"}:{},url:z,data:K}))}}NS.prototype[g]=w(),NS.prototype[g+"Form"]=w(!0)});class sK{constructor(g){if(typeof g!="function")throw new TypeError("executor must be a function.");let w;this.promise=new Promise(function(z){w=z});const E=this;this.promise.then(M=>{if(!E._listeners)return;let z=E._listeners.length;for(;z-- >0;)E._listeners[z](M);E._listeners=null}),this.promise.then=M=>{let z;const K=new Promise(Z=>{E.subscribe(Z),z=Z}).then(M);return K.cancel=function(){E.unsubscribe(z)},K},g(function(z,K,Z){E.reason||(E.reason=new wk(z,K,Z),w(E.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(g){if(this.reason){g(this.reason);return}this._listeners?this._listeners.push(g):this._listeners=[g]}unsubscribe(g){if(!this._listeners)return;const w=this._listeners.indexOf(g);w!==-1&&this._listeners.splice(w,1)}static source(){let g;return{token:new sK(function(M){g=M}),cancel:g}}}function Dee(p){return function(w){return p.apply(null,w)}}function Ree(p){return Rt.isObject(p)&&p.isAxiosError===!0}const ZG={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ZG).forEach(([p,g])=>{ZG[g]=p});function fJ(p){const g=new NS(p),w=WX(NS.prototype.request,g);return Rt.extend(w,NS.prototype,g,{allOwnKeys:!0}),Rt.extend(w,g,null,{allOwnKeys:!0}),w.create=function(M){return fJ(BS(p,M))},w}const Hc=fJ(CM);Hc.Axios=NS;Hc.CanceledError=wk;Hc.CancelToken=sK;Hc.isCancel=rJ;Hc.VERSION=dJ;Hc.toFormData=e7;Hc.AxiosError=As;Hc.Cancel=Hc.CanceledError;Hc.all=function(g){return Promise.all(g)};Hc.spread=Dee;Hc.isAxiosError=Ree;Hc.mergeConfig=BS;Hc.AxiosHeaders=vf;Hc.formToJSON=p=>sJ(Rt.isHTMLForm(p)?new FormData(p):p);Hc.getAdapter=uJ.getAdapter;Hc.HttpStatusCode=ZG;Hc.default=Hc;window.axios=Hc;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var Mee=function(){function p(g,w){w===void 0&&(w=[]),this._eventType=g,this._eventFunctions=w}return p.prototype.init=function(){var g=this;this._eventFunctions.forEach(function(w){typeof window<"u"&&window.addEventListener(g._eventType,w)})},p}(),Nee=function(){function p(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{},InputCounter:{},CopyClipboard:{},Datepicker:{}}}return p.prototype.addInstance=function(g,w,E,M){if(M===void 0&&(M=!1),!this._instances[g])return console.warn("Flowbite: Component ".concat(g," does not exist.")),!1;if(this._instances[g][E]&&!M){console.warn("Flowbite: Instance with ID ".concat(E," already exists."));return}M&&this._instances[g][E]&&this._instances[g][E].destroyAndRemoveInstance(),this._instances[g][E||this._generateRandomId()]=w},p.prototype.getAllInstances=function(){return this._instances},p.prototype.getInstances=function(g){return this._instances[g]?this._instances[g]:(console.warn("Flowbite: Component ".concat(g," does not exist.")),!1)},p.prototype.getInstance=function(g,w){if(this._componentAndInstanceCheck(g,w)){if(!this._instances[g][w]){console.warn("Flowbite: Instance with ID ".concat(w," does not exist."));return}return this._instances[g][w]}},p.prototype.destroyAndRemoveInstance=function(g,w){this._componentAndInstanceCheck(g,w)&&(this.destroyInstanceObject(g,w),this.removeInstance(g,w))},p.prototype.removeInstance=function(g,w){this._componentAndInstanceCheck(g,w)&&delete this._instances[g][w]},p.prototype.destroyInstanceObject=function(g,w){this._componentAndInstanceCheck(g,w)&&this._instances[g][w].destroy()},p.prototype.instanceExists=function(g,w){return!(!this._instances[g]||!this._instances[g][w])},p.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},p.prototype._componentAndInstanceCheck=function(g,w){return this._instances[g]?this._instances[g][w]?!0:(console.warn("Flowbite: Instance with ID ".concat(w," does not exist.")),!1):(console.warn("Flowbite: Component ".concat(g," does not exist.")),!1)},p}(),Ws=new Nee;typeof window<"u"&&(window.FlowbiteInstances=Ws);var A6=function(){return A6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},A6.apply(this,arguments)},O6={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},Pee={id:null,override:!0},mJ=function(){function p(g,w,E,M){g===void 0&&(g=null),w===void 0&&(w=[]),E===void 0&&(E=O6),M===void 0&&(M=Pee),this._instanceId=M.id?M.id:g.id,this._accordionEl=g,this._items=w,this._options=A6(A6({},O6),E),this._initialized=!1,this.init(),Ws.addInstance("Accordion",this,this._instanceId,M.override)}return p.prototype.init=function(){var g=this;this._items.length&&!this._initialized&&(this._items.forEach(function(w){w.active&&g.open(w.id);var E=function(){g.toggle(w.id)};w.triggerEl.addEventListener("click",E),w.clickHandler=E}),this._initialized=!0)},p.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach(function(g){g.triggerEl.removeEventListener("click",g.clickHandler),delete g.clickHandler}),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("Accordion",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getItem=function(g){return this._items.filter(function(w){return w.id===g})[0]},p.prototype.open=function(g){var w,E,M=this,z=this.getItem(g);this._options.alwaysOpen||this._items.map(function(K){var Z,ie;K!==z&&((Z=K.triggerEl.classList).remove.apply(Z,M._options.activeClasses.split(" ")),(ie=K.triggerEl.classList).add.apply(ie,M._options.inactiveClasses.split(" ")),K.targetEl.classList.add("hidden"),K.triggerEl.setAttribute("aria-expanded","false"),K.active=!1,K.iconEl&&K.iconEl.classList.add("rotate-180"))}),(w=z.triggerEl.classList).add.apply(w,this._options.activeClasses.split(" ")),(E=z.triggerEl.classList).remove.apply(E,this._options.inactiveClasses.split(" ")),z.triggerEl.setAttribute("aria-expanded","true"),z.targetEl.classList.remove("hidden"),z.active=!0,z.iconEl&&z.iconEl.classList.remove("rotate-180"),this._options.onOpen(this,z)},p.prototype.toggle=function(g){var w=this.getItem(g);w.active?this.close(g):this.open(g),this._options.onToggle(this,w)},p.prototype.close=function(g){var w,E,M=this.getItem(g);(w=M.triggerEl.classList).remove.apply(w,this._options.activeClasses.split(" ")),(E=M.triggerEl.classList).add.apply(E,this._options.inactiveClasses.split(" ")),M.targetEl.classList.add("hidden"),M.triggerEl.setAttribute("aria-expanded","false"),M.active=!1,M.iconEl&&M.iconEl.classList.add("rotate-180"),this._options.onClose(this,M)},p.prototype.updateOnOpen=function(g){this._options.onOpen=g},p.prototype.updateOnClose=function(g){this._options.onClose=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function rK(){document.querySelectorAll("[data-accordion]").forEach(function(p){var g=p.getAttribute("data-accordion"),w=p.getAttribute("data-active-classes"),E=p.getAttribute("data-inactive-classes"),M=[];p.querySelectorAll("[data-accordion-target]").forEach(function(z){if(z.closest("[data-accordion]")===p){var K={id:z.getAttribute("data-accordion-target"),triggerEl:z,targetEl:document.querySelector(z.getAttribute("data-accordion-target")),iconEl:z.querySelector("[data-accordion-icon]"),active:z.getAttribute("aria-expanded")==="true"};M.push(K)}}),new mJ(p,M,{alwaysOpen:g==="open",activeClasses:w||O6.activeClasses,inactiveClasses:E||O6.inactiveClasses})})}typeof window<"u"&&(window.Accordion=mJ,window.initAccordions=rK);var D6=function(){return D6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},D6.apply(this,arguments)},gX={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},Bee={id:null,override:!0},jG=function(){function p(g,w,E,M){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=gX),M===void 0&&(M=Bee),this._instanceId=M.id?M.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=D6(D6({},gX),E),this._visible=!1,this._initialized=!1,this.init(),Ws.addInstance("Collapse",this,this._instanceId,M.override)}return p.prototype.init=function(){var g=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){g.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("Collapse",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},p.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},p.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},p.prototype.updateOnCollapse=function(g){this._options.onCollapse=g},p.prototype.updateOnExpand=function(g){this._options.onExpand=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function aK(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(p){var g=p.getAttribute("data-collapse-toggle"),w=document.getElementById(g);w?Ws.instanceExists("Collapse",w.getAttribute("id"))?new jG(w,p,{},{id:w.getAttribute("id")+"_"+Ws._generateRandomId()}):new jG(w,p):console.error('The target element with id "'.concat(g,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=jG,window.initCollapses=aK);var RS=function(){return RS=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},RS.apply(this,arguments)},x6={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},Iee={id:null,override:!0},hJ=function(){function p(g,w,E,M){g===void 0&&(g=null),w===void 0&&(w=[]),E===void 0&&(E=x6),M===void 0&&(M=Iee),this._instanceId=M.id?M.id:g.id,this._carouselEl=g,this._items=w,this._options=RS(RS(RS({},x6),E),{indicators:RS(RS({},x6.indicators),E.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),Ws.addInstance("Carousel",this,this._instanceId,M.override)}return p.prototype.init=function(){var g=this;this._items.length&&!this._initialized&&(this._items.map(function(w){w.el.classList.add("absolute","inset-0","transition-transform","transform")}),this.getActiveItem()?this.slideTo(this.getActiveItem().position):this.slideTo(0),this._indicators.map(function(w,E){w.el.addEventListener("click",function(){g.slideTo(E)})}),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("Carousel",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getItem=function(g){return this._items[g]},p.prototype.slideTo=function(g){var w=this._items[g],E={left:w.position===0?this._items[this._items.length-1]:this._items[w.position-1],middle:w,right:w.position===this._items.length-1?this._items[0]:this._items[w.position+1]};this._rotate(E),this._setActiveItem(w),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},p.prototype.next=function(){var g=this.getActiveItem(),w=null;g.position===this._items.length-1?w=this._items[0]:w=this._items[g.position+1],this.slideTo(w.position),this._options.onNext(this)},p.prototype.prev=function(){var g=this.getActiveItem(),w=null;g.position===0?w=this._items[this._items.length-1]:w=this._items[g.position-1],this.slideTo(w.position),this._options.onPrev(this)},p.prototype._rotate=function(g){if(this._items.map(function(w){w.el.classList.add("hidden")}),this._items.length===1){g.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),g.middle.el.classList.add("translate-x-0","z-20");return}g.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),g.left.el.classList.add("-translate-x-full","z-10"),g.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),g.middle.el.classList.add("translate-x-0","z-30"),g.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-30"),g.right.el.classList.add("translate-x-full","z-20")},p.prototype.cycle=function(){var g=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){g.next()},this._intervalDuration))},p.prototype.pause=function(){clearInterval(this._intervalInstance)},p.prototype.getActiveItem=function(){return this._activeItem},p.prototype._setActiveItem=function(g){var w,E,M=this;this._activeItem=g;var z=g.position;this._indicators.length&&(this._indicators.map(function(K){var Z,ie;K.el.setAttribute("aria-current","false"),(Z=K.el.classList).remove.apply(Z,M._options.indicators.activeClasses.split(" ")),(ie=K.el.classList).add.apply(ie,M._options.indicators.inactiveClasses.split(" "))}),(w=this._indicators[z].el.classList).add.apply(w,this._options.indicators.activeClasses.split(" ")),(E=this._indicators[z].el.classList).remove.apply(E,this._options.indicators.inactiveClasses.split(" ")),this._indicators[z].el.setAttribute("aria-current","true"))},p.prototype.updateOnNext=function(g){this._options.onNext=g},p.prototype.updateOnPrev=function(g){this._options.onPrev=g},p.prototype.updateOnChange=function(g){this._options.onChange=g},p}();function iK(){document.querySelectorAll("[data-carousel]").forEach(function(p){var g=p.getAttribute("data-carousel-interval"),w=p.getAttribute("data-carousel")==="slide",E=[],M=0;p.querySelectorAll("[data-carousel-item]").length&&Array.from(p.querySelectorAll("[data-carousel-item]")).map(function(Ee,de){E.push({position:de,el:Ee}),Ee.getAttribute("data-carousel-item")==="active"&&(M=de)});var z=[];p.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(p.querySelectorAll("[data-carousel-slide-to]")).map(function(Ee){z.push({position:parseInt(Ee.getAttribute("data-carousel-slide-to")),el:Ee})});var K=new hJ(p,E,{defaultPosition:M,indicators:{items:z},interval:g||x6.interval});w&&K.cycle();var Z=p.querySelector("[data-carousel-next]"),ie=p.querySelector("[data-carousel-prev]");Z&&Z.addEventListener("click",function(){K.next()}),ie&&ie.addEventListener("click",function(){K.prev()})})}typeof window<"u"&&(window.Carousel=hJ,window.initCarousels=iK);var R6=function(){return R6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},R6.apply(this,arguments)},pX={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},Lee={id:null,override:!0},gJ=function(){function p(g,w,E,M){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=pX),M===void 0&&(M=Lee),this._instanceId=M.id?M.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=R6(R6({},pX),E),this._initialized=!1,this.init(),Ws.addInstance("Dismiss",this,this._instanceId,M.override)}return p.prototype.init=function(){var g=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){g.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("Dismiss",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.hide=function(){var g=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){g._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},p.prototype.updateOnHide=function(g){this._options.onHide=g},p}();function cK(){document.querySelectorAll("[data-dismiss-target]").forEach(function(p){var g=p.getAttribute("data-dismiss-target"),w=document.querySelector(g);w?new gJ(w,p):console.error('The dismiss element with id "'.concat(g,'" does not exist. Please check the data-dismiss-target attribute.'))})}typeof window<"u"&&(window.Dismiss=gJ,window.initDismisses=cK);var yf="top",kh="bottom",Ah="right",wf="left",lK="auto",SM=[yf,kh,Ah,wf],hk="start",gM="end",Fee="clippingParents",pJ="viewport",aM="popper",$ee="reference",bX=SM.reduce(function(p,g){return p.concat([g+"-"+hk,g+"-"+gM])},[]),bJ=[].concat(SM,[lK]).reduce(function(p,g){return p.concat([g,g+"-"+hk,g+"-"+gM])},[]),Hee="beforeRead",Vee="read",zee="afterRead",Uee="beforeMain",Wee="main",Zee="afterMain",jee="beforeWrite",qee="write",Gee="afterWrite",Kee=[Hee,Vee,zee,Uee,Wee,Zee,jee,qee,Gee];function f1(p){return p?(p.nodeName||"").toLowerCase():null}function hm(p){if(p==null)return window;if(p.toString()!=="[object Window]"){var g=p.ownerDocument;return g&&g.defaultView||window}return p}function IS(p){var g=hm(p).Element;return p instanceof g||p instanceof Element}function Th(p){var g=hm(p).HTMLElement;return p instanceof g||p instanceof HTMLElement}function uK(p){if(typeof ShadowRoot>"u")return!1;var g=hm(p).ShadowRoot;return p instanceof g||p instanceof ShadowRoot}function Yee(p){var g=p.state;Object.keys(g.elements).forEach(function(w){var E=g.styles[w]||{},M=g.attributes[w]||{},z=g.elements[w];!Th(z)||!f1(z)||(Object.assign(z.style,E),Object.keys(M).forEach(function(K){var Z=M[K];Z===!1?z.removeAttribute(K):z.setAttribute(K,Z===!0?"":Z)}))})}function Xee(p){var g=p.state,w={popper:{position:g.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(g.elements.popper.style,w.popper),g.styles=w,g.elements.arrow&&Object.assign(g.elements.arrow.style,w.arrow),function(){Object.keys(g.elements).forEach(function(E){var M=g.elements[E],z=g.attributes[E]||{},K=Object.keys(g.styles.hasOwnProperty(E)?g.styles[E]:w[E]),Z=K.reduce(function(ie,Ee){return ie[Ee]="",ie},{});!Th(M)||!f1(M)||(Object.assign(M.style,Z),Object.keys(z).forEach(function(ie){M.removeAttribute(ie)}))})}}const Jee={name:"applyStyles",enabled:!0,phase:"write",fn:Yee,effect:Xee,requires:["computeStyles"]};function d1(p){return p.split("-")[0]}var PS=Math.max,M6=Math.min,gk=Math.round;function qG(){var p=navigator.userAgentData;return p!=null&&p.brands&&Array.isArray(p.brands)?p.brands.map(function(g){return g.brand+"/"+g.version}).join(" "):navigator.userAgent}function vJ(){return!/^((?!chrome|android).)*safari/i.test(qG())}function pk(p,g,w){g===void 0&&(g=!1),w===void 0&&(w=!1);var E=p.getBoundingClientRect(),M=1,z=1;g&&Th(p)&&(M=p.offsetWidth>0&&gk(E.width)/p.offsetWidth||1,z=p.offsetHeight>0&&gk(E.height)/p.offsetHeight||1);var K=IS(p)?hm(p):window,Z=K.visualViewport,ie=!vJ()&&w,Ee=(E.left+(ie&&Z?Z.offsetLeft:0))/M,de=(E.top+(ie&&Z?Z.offsetTop:0))/z,Ye=E.width/M,Ut=E.height/z;return{width:Ye,height:Ut,top:de,right:Ee+Ye,bottom:de+Ut,left:Ee,x:Ee,y:de}}function dK(p){var g=pk(p),w=p.offsetWidth,E=p.offsetHeight;return Math.abs(g.width-w)<=1&&(w=g.width),Math.abs(g.height-E)<=1&&(E=g.height),{x:p.offsetLeft,y:p.offsetTop,width:w,height:E}}function yJ(p,g){var w=g.getRootNode&&g.getRootNode();if(p.contains(g))return!0;if(w&&uK(w)){var E=g;do{if(E&&p.isSameNode(E))return!0;E=E.parentNode||E.host}while(E)}return!1}function Gb(p){return hm(p).getComputedStyle(p)}function Qee(p){return["table","td","th"].indexOf(f1(p))>=0}function Hy(p){return((IS(p)?p.ownerDocument:p.document)||window.document).documentElement}function n7(p){return f1(p)==="html"?p:p.assignedSlot||p.parentNode||(uK(p)?p.host:null)||Hy(p)}function vX(p){return!Th(p)||Gb(p).position==="fixed"?null:p.offsetParent}function ete(p){var g=/firefox/i.test(qG()),w=/Trident/i.test(qG());if(w&&Th(p)){var E=Gb(p);if(E.position==="fixed")return null}var M=n7(p);for(uK(M)&&(M=M.host);Th(M)&&["html","body"].indexOf(f1(M))<0;){var z=Gb(M);if(z.transform!=="none"||z.perspective!=="none"||z.contain==="paint"||["transform","perspective"].indexOf(z.willChange)!==-1||g&&z.willChange==="filter"||g&&z.filter&&z.filter!=="none")return M;M=M.parentNode}return null}function xM(p){for(var g=hm(p),w=vX(p);w&&Qee(w)&&Gb(w).position==="static";)w=vX(w);return w&&(f1(w)==="html"||f1(w)==="body"&&Gb(w).position==="static")?g:w||ete(p)||g}function fK(p){return["top","bottom"].indexOf(p)>=0?"x":"y"}function lM(p,g,w){return PS(p,M6(g,w))}function tte(p,g,w){var E=lM(p,g,w);return E>w?w:E}function wJ(){return{top:0,right:0,bottom:0,left:0}}function CJ(p){return Object.assign({},wJ(),p)}function SJ(p,g){return g.reduce(function(w,E){return w[E]=p,w},{})}var nte=function(g,w){return g=typeof g=="function"?g(Object.assign({},w.rects,{placement:w.placement})):g,CJ(typeof g!="number"?g:SJ(g,SM))};function ote(p){var g,w=p.state,E=p.name,M=p.options,z=w.elements.arrow,K=w.modifiersData.popperOffsets,Z=d1(w.placement),ie=fK(Z),Ee=[wf,Ah].indexOf(Z)>=0,de=Ee?"height":"width";if(!(!z||!K)){var Ye=nte(M.padding,w),Ut=dK(z),Lt=ie==="y"?yf:wf,Mt=ie==="y"?kh:Ah,Ct=w.rects.reference[de]+w.rects.reference[ie]-K[ie]-w.rects.popper[de],Xe=K[ie]-w.rects.reference[ie],dn=xM(z),Nt=dn?ie==="y"?dn.clientHeight||0:dn.clientWidth||0:0,ce=Ct/2-Xe/2,Ke=Ye[Lt],Kn=Nt-Ut[de]-Ye[Mt],jt=Nt/2-Ut[de]/2+ce,ne=lM(Ke,jt,Kn),Jt=ie;w.modifiersData[E]=(g={},g[Jt]=ne,g.centerOffset=ne-jt,g)}}function ste(p){var g=p.state,w=p.options,E=w.element,M=E===void 0?"[data-popper-arrow]":E;M!=null&&(typeof M=="string"&&(M=g.elements.popper.querySelector(M),!M)||yJ(g.elements.popper,M)&&(g.elements.arrow=M))}const rte={name:"arrow",enabled:!0,phase:"main",fn:ote,effect:ste,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function bk(p){return p.split("-")[1]}var ate={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ite(p,g){var w=p.x,E=p.y,M=g.devicePixelRatio||1;return{x:gk(w*M)/M||0,y:gk(E*M)/M||0}}function yX(p){var g,w=p.popper,E=p.popperRect,M=p.placement,z=p.variation,K=p.offsets,Z=p.position,ie=p.gpuAcceleration,Ee=p.adaptive,de=p.roundOffsets,Ye=p.isFixed,Ut=K.x,Lt=Ut===void 0?0:Ut,Mt=K.y,Ct=Mt===void 0?0:Mt,Xe=typeof de=="function"?de({x:Lt,y:Ct}):{x:Lt,y:Ct};Lt=Xe.x,Ct=Xe.y;var dn=K.hasOwnProperty("x"),Nt=K.hasOwnProperty("y"),ce=wf,Ke=yf,Kn=window;if(Ee){var jt=xM(w),ne="clientHeight",Jt="clientWidth";if(jt===hm(w)&&(jt=Hy(w),Gb(jt).position!=="static"&&Z==="absolute"&&(ne="scrollHeight",Jt="scrollWidth")),jt=jt,M===yf||(M===wf||M===Ah)&&z===gM){Ke=kh;var Bn=Ye&&jt===Kn&&Kn.visualViewport?Kn.visualViewport.height:jt[ne];Ct-=Bn-E.height,Ct*=ie?1:-1}if(M===wf||(M===yf||M===kh)&&z===gM){ce=Ah;var Qt=Ye&&jt===Kn&&Kn.visualViewport?Kn.visualViewport.width:jt[Jt];Lt-=Qt-E.width,Lt*=ie?1:-1}}var Fe=Object.assign({position:Z},Ee&&ate),ve=de===!0?ite({x:Lt,y:Ct},hm(w)):{x:Lt,y:Ct};if(Lt=ve.x,Ct=ve.y,ie){var so;return Object.assign({},Fe,(so={},so[Ke]=Nt?"0":"",so[ce]=dn?"0":"",so.transform=(Kn.devicePixelRatio||1)<=1?"translate("+Lt+"px, "+Ct+"px)":"translate3d("+Lt+"px, "+Ct+"px, 0)",so))}return Object.assign({},Fe,(g={},g[Ke]=Nt?Ct+"px":"",g[ce]=dn?Lt+"px":"",g.transform="",g))}function cte(p){var g=p.state,w=p.options,E=w.gpuAcceleration,M=E===void 0?!0:E,z=w.adaptive,K=z===void 0?!0:z,Z=w.roundOffsets,ie=Z===void 0?!0:Z,Ee={placement:d1(g.placement),variation:bk(g.placement),popper:g.elements.popper,popperRect:g.rects.popper,gpuAcceleration:M,isFixed:g.options.strategy==="fixed"};g.modifiersData.popperOffsets!=null&&(g.styles.popper=Object.assign({},g.styles.popper,yX(Object.assign({},Ee,{offsets:g.modifiersData.popperOffsets,position:g.options.strategy,adaptive:K,roundOffsets:ie})))),g.modifiersData.arrow!=null&&(g.styles.arrow=Object.assign({},g.styles.arrow,yX(Object.assign({},Ee,{offsets:g.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ie})))),g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-placement":g.placement})}const lte={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:cte,data:{}};var g6={passive:!0};function ute(p){var g=p.state,w=p.instance,E=p.options,M=E.scroll,z=M===void 0?!0:M,K=E.resize,Z=K===void 0?!0:K,ie=hm(g.elements.popper),Ee=[].concat(g.scrollParents.reference,g.scrollParents.popper);return z&&Ee.forEach(function(de){de.addEventListener("scroll",w.update,g6)}),Z&&ie.addEventListener("resize",w.update,g6),function(){z&&Ee.forEach(function(de){de.removeEventListener("scroll",w.update,g6)}),Z&&ie.removeEventListener("resize",w.update,g6)}}const dte={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ute,data:{}};var fte={left:"right",right:"left",bottom:"top",top:"bottom"};function E6(p){return p.replace(/left|right|bottom|top/g,function(g){return fte[g]})}var mte={start:"end",end:"start"};function wX(p){return p.replace(/start|end/g,function(g){return mte[g]})}function mK(p){var g=hm(p),w=g.pageXOffset,E=g.pageYOffset;return{scrollLeft:w,scrollTop:E}}function hK(p){return pk(Hy(p)).left+mK(p).scrollLeft}function hte(p,g){var w=hm(p),E=Hy(p),M=w.visualViewport,z=E.clientWidth,K=E.clientHeight,Z=0,ie=0;if(M){z=M.width,K=M.height;var Ee=vJ();(Ee||!Ee&&g==="fixed")&&(Z=M.offsetLeft,ie=M.offsetTop)}return{width:z,height:K,x:Z+hK(p),y:ie}}function gte(p){var g,w=Hy(p),E=mK(p),M=(g=p.ownerDocument)==null?void 0:g.body,z=PS(w.scrollWidth,w.clientWidth,M?M.scrollWidth:0,M?M.clientWidth:0),K=PS(w.scrollHeight,w.clientHeight,M?M.scrollHeight:0,M?M.clientHeight:0),Z=-E.scrollLeft+hK(p),ie=-E.scrollTop;return Gb(M||w).direction==="rtl"&&(Z+=PS(w.clientWidth,M?M.clientWidth:0)-z),{width:z,height:K,x:Z,y:ie}}function gK(p){var g=Gb(p),w=g.overflow,E=g.overflowX,M=g.overflowY;return/auto|scroll|overlay|hidden/.test(w+M+E)}function xJ(p){return["html","body","#document"].indexOf(f1(p))>=0?p.ownerDocument.body:Th(p)&&gK(p)?p:xJ(n7(p))}function uM(p,g){var w;g===void 0&&(g=[]);var E=xJ(p),M=E===((w=p.ownerDocument)==null?void 0:w.body),z=hm(E),K=M?[z].concat(z.visualViewport||[],gK(E)?E:[]):E,Z=g.concat(K);return M?Z:Z.concat(uM(n7(K)))}function GG(p){return Object.assign({},p,{left:p.x,top:p.y,right:p.x+p.width,bottom:p.y+p.height})}function pte(p,g){var w=pk(p,!1,g==="fixed");return w.top=w.top+p.clientTop,w.left=w.left+p.clientLeft,w.bottom=w.top+p.clientHeight,w.right=w.left+p.clientWidth,w.width=p.clientWidth,w.height=p.clientHeight,w.x=w.left,w.y=w.top,w}function CX(p,g,w){return g===pJ?GG(hte(p,w)):IS(g)?pte(g,w):GG(gte(Hy(p)))}function bte(p){var g=uM(n7(p)),w=["absolute","fixed"].indexOf(Gb(p).position)>=0,E=w&&Th(p)?xM(p):p;return IS(E)?g.filter(function(M){return IS(M)&&yJ(M,E)&&f1(M)!=="body"}):[]}function vte(p,g,w,E){var M=g==="clippingParents"?bte(p):[].concat(g),z=[].concat(M,[w]),K=z[0],Z=z.reduce(function(ie,Ee){var de=CX(p,Ee,E);return ie.top=PS(de.top,ie.top),ie.right=M6(de.right,ie.right),ie.bottom=M6(de.bottom,ie.bottom),ie.left=PS(de.left,ie.left),ie},CX(p,K,E));return Z.width=Z.right-Z.left,Z.height=Z.bottom-Z.top,Z.x=Z.left,Z.y=Z.top,Z}function EJ(p){var g=p.reference,w=p.element,E=p.placement,M=E?d1(E):null,z=E?bk(E):null,K=g.x+g.width/2-w.width/2,Z=g.y+g.height/2-w.height/2,ie;switch(M){case yf:ie={x:K,y:g.y-w.height};break;case kh:ie={x:K,y:g.y+g.height};break;case Ah:ie={x:g.x+g.width,y:Z};break;case wf:ie={x:g.x-w.width,y:Z};break;default:ie={x:g.x,y:g.y}}var Ee=M?fK(M):null;if(Ee!=null){var de=Ee==="y"?"height":"width";switch(z){case hk:ie[Ee]=ie[Ee]-(g[de]/2-w[de]/2);break;case gM:ie[Ee]=ie[Ee]+(g[de]/2-w[de]/2);break}}return ie}function pM(p,g){g===void 0&&(g={});var w=g,E=w.placement,M=E===void 0?p.placement:E,z=w.strategy,K=z===void 0?p.strategy:z,Z=w.boundary,ie=Z===void 0?Fee:Z,Ee=w.rootBoundary,de=Ee===void 0?pJ:Ee,Ye=w.elementContext,Ut=Ye===void 0?aM:Ye,Lt=w.altBoundary,Mt=Lt===void 0?!1:Lt,Ct=w.padding,Xe=Ct===void 0?0:Ct,dn=CJ(typeof Xe!="number"?Xe:SJ(Xe,SM)),Nt=Ut===aM?$ee:aM,ce=p.rects.popper,Ke=p.elements[Mt?Nt:Ut],Kn=vte(IS(Ke)?Ke:Ke.contextElement||Hy(p.elements.popper),ie,de,K),jt=pk(p.elements.reference),ne=EJ({reference:jt,element:ce,strategy:"absolute",placement:M}),Jt=GG(Object.assign({},ce,ne)),Bn=Ut===aM?Jt:jt,Qt={top:Kn.top-Bn.top+dn.top,bottom:Bn.bottom-Kn.bottom+dn.bottom,left:Kn.left-Bn.left+dn.left,right:Bn.right-Kn.right+dn.right},Fe=p.modifiersData.offset;if(Ut===aM&&Fe){var ve=Fe[M];Object.keys(Qt).forEach(function(so){var Me=[Ah,kh].indexOf(so)>=0?1:-1,Pe=[yf,kh].indexOf(so)>=0?"y":"x";Qt[so]+=ve[Pe]*Me})}return Qt}function yte(p,g){g===void 0&&(g={});var w=g,E=w.placement,M=w.boundary,z=w.rootBoundary,K=w.padding,Z=w.flipVariations,ie=w.allowedAutoPlacements,Ee=ie===void 0?bJ:ie,de=bk(E),Ye=de?Z?bX:bX.filter(function(Mt){return bk(Mt)===de}):SM,Ut=Ye.filter(function(Mt){return Ee.indexOf(Mt)>=0});Ut.length===0&&(Ut=Ye);var Lt=Ut.reduce(function(Mt,Ct){return Mt[Ct]=pM(p,{placement:Ct,boundary:M,rootBoundary:z,padding:K})[d1(Ct)],Mt},{});return Object.keys(Lt).sort(function(Mt,Ct){return Lt[Mt]-Lt[Ct]})}function wte(p){if(d1(p)===lK)return[];var g=E6(p);return[wX(p),g,wX(g)]}function Cte(p){var g=p.state,w=p.options,E=p.name;if(!g.modifiersData[E]._skip){for(var M=w.mainAxis,z=M===void 0?!0:M,K=w.altAxis,Z=K===void 0?!0:K,ie=w.fallbackPlacements,Ee=w.padding,de=w.boundary,Ye=w.rootBoundary,Ut=w.altBoundary,Lt=w.flipVariations,Mt=Lt===void 0?!0:Lt,Ct=w.allowedAutoPlacements,Xe=g.options.placement,dn=d1(Xe),Nt=dn===Xe,ce=ie||(Nt||!Mt?[E6(Xe)]:wte(Xe)),Ke=[Xe].concat(ce).reduce(function(to,os){return to.concat(d1(os)===lK?yte(g,{placement:os,boundary:de,rootBoundary:Ye,padding:Ee,flipVariations:Mt,allowedAutoPlacements:Ct}):os)},[]),Kn=g.rects.reference,jt=g.rects.popper,ne=new Map,Jt=!0,Bn=Ke[0],Qt=0;Qt<Ke.length;Qt++){var Fe=Ke[Qt],ve=d1(Fe),so=bk(Fe)===hk,Me=[yf,kh].indexOf(ve)>=0,Pe=Me?"width":"height",N=pM(g,{placement:Fe,boundary:de,rootBoundary:Ye,altBoundary:Ut,padding:Ee}),an=Me?so?Ah:wf:so?kh:yf;Kn[Pe]>jt[Pe]&&(an=E6(an));var ct=E6(an),$n=[];if(z&&$n.push(N[ve]<=0),Z&&$n.push(N[an]<=0,N[ct]<=0),$n.every(function(to){return to})){Bn=Fe,Jt=!1;break}ne.set(Fe,$n)}if(Jt)for(var sn=Mt?3:1,nt=function(os){var tt=Ke.find(function(yt){var W=ne.get(yt);if(W)return W.slice(0,os).every(function(ta){return ta})});if(tt)return Bn=tt,"break"},eo=sn;eo>0;eo--){var ms=nt(eo);if(ms==="break")break}g.placement!==Bn&&(g.modifiersData[E]._skip=!0,g.placement=Bn,g.reset=!0)}}const Ste={name:"flip",enabled:!0,phase:"main",fn:Cte,requiresIfExists:["offset"],data:{_skip:!1}};function SX(p,g,w){return w===void 0&&(w={x:0,y:0}),{top:p.top-g.height-w.y,right:p.right-g.width+w.x,bottom:p.bottom-g.height+w.y,left:p.left-g.width-w.x}}function xX(p){return[yf,Ah,kh,wf].some(function(g){return p[g]>=0})}function xte(p){var g=p.state,w=p.name,E=g.rects.reference,M=g.rects.popper,z=g.modifiersData.preventOverflow,K=pM(g,{elementContext:"reference"}),Z=pM(g,{altBoundary:!0}),ie=SX(K,E),Ee=SX(Z,M,z),de=xX(ie),Ye=xX(Ee);g.modifiersData[w]={referenceClippingOffsets:ie,popperEscapeOffsets:Ee,isReferenceHidden:de,hasPopperEscaped:Ye},g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-reference-hidden":de,"data-popper-escaped":Ye})}const Ete={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:xte};function _te(p,g,w){var E=d1(p),M=[wf,yf].indexOf(E)>=0?-1:1,z=typeof w=="function"?w(Object.assign({},g,{placement:p})):w,K=z[0],Z=z[1];return K=K||0,Z=(Z||0)*M,[wf,Ah].indexOf(E)>=0?{x:Z,y:K}:{x:K,y:Z}}function Tte(p){var g=p.state,w=p.options,E=p.name,M=w.offset,z=M===void 0?[0,0]:M,K=bJ.reduce(function(de,Ye){return de[Ye]=_te(Ye,g.rects,z),de},{}),Z=K[g.placement],ie=Z.x,Ee=Z.y;g.modifiersData.popperOffsets!=null&&(g.modifiersData.popperOffsets.x+=ie,g.modifiersData.popperOffsets.y+=Ee),g.modifiersData[E]=K}const kte={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Tte};function Ate(p){var g=p.state,w=p.name;g.modifiersData[w]=EJ({reference:g.rects.reference,element:g.rects.popper,strategy:"absolute",placement:g.placement})}const Ote={name:"popperOffsets",enabled:!0,phase:"read",fn:Ate,data:{}};function Dte(p){return p==="x"?"y":"x"}function Rte(p){var g=p.state,w=p.options,E=p.name,M=w.mainAxis,z=M===void 0?!0:M,K=w.altAxis,Z=K===void 0?!1:K,ie=w.boundary,Ee=w.rootBoundary,de=w.altBoundary,Ye=w.padding,Ut=w.tether,Lt=Ut===void 0?!0:Ut,Mt=w.tetherOffset,Ct=Mt===void 0?0:Mt,Xe=pM(g,{boundary:ie,rootBoundary:Ee,padding:Ye,altBoundary:de}),dn=d1(g.placement),Nt=bk(g.placement),ce=!Nt,Ke=fK(dn),Kn=Dte(Ke),jt=g.modifiersData.popperOffsets,ne=g.rects.reference,Jt=g.rects.popper,Bn=typeof Ct=="function"?Ct(Object.assign({},g.rects,{placement:g.placement})):Ct,Qt=typeof Bn=="number"?{mainAxis:Bn,altAxis:Bn}:Object.assign({mainAxis:0,altAxis:0},Bn),Fe=g.modifiersData.offset?g.modifiersData.offset[g.placement]:null,ve={x:0,y:0};if(jt){if(z){var so,Me=Ke==="y"?yf:wf,Pe=Ke==="y"?kh:Ah,N=Ke==="y"?"height":"width",an=jt[Ke],ct=an+Xe[Me],$n=an-Xe[Pe],sn=Lt?-Jt[N]/2:0,nt=Nt===hk?ne[N]:Jt[N],eo=Nt===hk?-Jt[N]:-ne[N],ms=g.elements.arrow,to=Lt&&ms?dK(ms):{width:0,height:0},os=g.modifiersData["arrow#persistent"]?g.modifiersData["arrow#persistent"].padding:wJ(),tt=os[Me],yt=os[Pe],W=lM(0,ne[N],to[N]),ta=ce?ne[N]/2-sn-W-tt-Qt.mainAxis:nt-W-tt-Qt.mainAxis,uo=ce?-ne[N]/2+sn+W+yt+Qt.mainAxis:eo+W+yt+Qt.mainAxis,qo=g.elements.arrow&&xM(g.elements.arrow),Ho=qo?Ke==="y"?qo.clientTop||0:qo.clientLeft||0:0,Wi=(so=Fe==null?void 0:Fe[Ke])!=null?so:0,et=an+ta-Wi-Ho,Tt=an+uo-Wi,dt=lM(Lt?M6(ct,et):ct,an,Lt?PS($n,Tt):$n);jt[Ke]=dt,ve[Ke]=dt-an}if(Z){var Se,_o=Ke==="x"?yf:wf,To=Ke==="x"?kh:Ah,Zt=jt[Kn],ss=Kn==="y"?"height":"width",Mo=Zt+Xe[_o],$r=Zt-Xe[To],Po=[yf,wf].indexOf(dn)!==-1,Is=(Se=Fe==null?void 0:Fe[Kn])!=null?Se:0,Xa=Po?Mo:Zt-ne[ss]-Jt[ss]-Is+Qt.altAxis,ws=Po?Zt+ne[ss]+Jt[ss]-Is-Qt.altAxis:$r,bs=Lt&&Po?tte(Xa,Zt,ws):lM(Lt?Xa:Mo,Zt,Lt?ws:$r);jt[Kn]=bs,ve[Kn]=bs-Zt}g.modifiersData[E]=ve}}const Mte={name:"preventOverflow",enabled:!0,phase:"main",fn:Rte,requiresIfExists:["offset"]};function Nte(p){return{scrollLeft:p.scrollLeft,scrollTop:p.scrollTop}}function Pte(p){return p===hm(p)||!Th(p)?mK(p):Nte(p)}function Bte(p){var g=p.getBoundingClientRect(),w=gk(g.width)/p.offsetWidth||1,E=gk(g.height)/p.offsetHeight||1;return w!==1||E!==1}function Ite(p,g,w){w===void 0&&(w=!1);var E=Th(g),M=Th(g)&&Bte(g),z=Hy(g),K=pk(p,M,w),Z={scrollLeft:0,scrollTop:0},ie={x:0,y:0};return(E||!E&&!w)&&((f1(g)!=="body"||gK(z))&&(Z=Pte(g)),Th(g)?(ie=pk(g,!0),ie.x+=g.clientLeft,ie.y+=g.clientTop):z&&(ie.x=hK(z))),{x:K.left+Z.scrollLeft-ie.x,y:K.top+Z.scrollTop-ie.y,width:K.width,height:K.height}}function Lte(p){var g=new Map,w=new Set,E=[];p.forEach(function(z){g.set(z.name,z)});function M(z){w.add(z.name);var K=[].concat(z.requires||[],z.requiresIfExists||[]);K.forEach(function(Z){if(!w.has(Z)){var ie=g.get(Z);ie&&M(ie)}}),E.push(z)}return p.forEach(function(z){w.has(z.name)||M(z)}),E}function Fte(p){var g=Lte(p);return Kee.reduce(function(w,E){return w.concat(g.filter(function(M){return M.phase===E}))},[])}function $te(p){var g;return function(){return g||(g=new Promise(function(w){Promise.resolve().then(function(){g=void 0,w(p())})})),g}}function Hte(p){var g=p.reduce(function(w,E){var M=w[E.name];return w[E.name]=M?Object.assign({},M,E,{options:Object.assign({},M.options,E.options),data:Object.assign({},M.data,E.data)}):E,w},{});return Object.keys(g).map(function(w){return g[w]})}var EX={placement:"bottom",modifiers:[],strategy:"absolute"};function _X(){for(var p=arguments.length,g=new Array(p),w=0;w<p;w++)g[w]=arguments[w];return!g.some(function(E){return!(E&&typeof E.getBoundingClientRect=="function")})}function Vte(p){p===void 0&&(p={});var g=p,w=g.defaultModifiers,E=w===void 0?[]:w,M=g.defaultOptions,z=M===void 0?EX:M;return function(Z,ie,Ee){Ee===void 0&&(Ee=z);var de={placement:"bottom",orderedModifiers:[],options:Object.assign({},EX,z),modifiersData:{},elements:{reference:Z,popper:ie},attributes:{},styles:{}},Ye=[],Ut=!1,Lt={state:de,setOptions:function(dn){var Nt=typeof dn=="function"?dn(de.options):dn;Ct(),de.options=Object.assign({},z,de.options,Nt),de.scrollParents={reference:IS(Z)?uM(Z):Z.contextElement?uM(Z.contextElement):[],popper:uM(ie)};var ce=Fte(Hte([].concat(E,de.options.modifiers)));return de.orderedModifiers=ce.filter(function(Ke){return Ke.enabled}),Mt(),Lt.update()},forceUpdate:function(){if(!Ut){var dn=de.elements,Nt=dn.reference,ce=dn.popper;if(_X(Nt,ce)){de.rects={reference:Ite(Nt,xM(ce),de.options.strategy==="fixed"),popper:dK(ce)},de.reset=!1,de.placement=de.options.placement,de.orderedModifiers.forEach(function(Qt){return de.modifiersData[Qt.name]=Object.assign({},Qt.data)});for(var Ke=0;Ke<de.orderedModifiers.length;Ke++){if(de.reset===!0){de.reset=!1,Ke=-1;continue}var Kn=de.orderedModifiers[Ke],jt=Kn.fn,ne=Kn.options,Jt=ne===void 0?{}:ne,Bn=Kn.name;typeof jt=="function"&&(de=jt({state:de,options:Jt,name:Bn,instance:Lt})||de)}}}},update:$te(function(){return new Promise(function(Xe){Lt.forceUpdate(),Xe(de)})}),destroy:function(){Ct(),Ut=!0}};if(!_X(Z,ie))return Lt;Lt.setOptions(Ee).then(function(Xe){!Ut&&Ee.onFirstUpdate&&Ee.onFirstUpdate(Xe)});function Mt(){de.orderedModifiers.forEach(function(Xe){var dn=Xe.name,Nt=Xe.options,ce=Nt===void 0?{}:Nt,Ke=Xe.effect;if(typeof Ke=="function"){var Kn=Ke({state:de,name:dn,instance:Lt,options:ce}),jt=function(){};Ye.push(Kn||jt)}})}function Ct(){Ye.forEach(function(Xe){return Xe()}),Ye=[]}return Lt}}var zte=[dte,Ote,lte,Jee,kte,Ste,Mte,rte,Ete],pK=Vte({defaultModifiers:zte}),Py=function(){return Py=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},Py.apply(this,arguments)},p6=function(p,g,w){if(w||arguments.length===2)for(var E=0,M=g.length,z;E<M;E++)(z||!(E in g))&&(z||(z=Array.prototype.slice.call(g,0,E)),z[E]=g[E]);return p.concat(z||Array.prototype.slice.call(g))},By={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},Ute={id:null,override:!0},_J=function(){function p(g,w,E,M){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=By),M===void 0&&(M=Ute),this._instanceId=M.id?M.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=Py(Py({},By),E),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Ws.addInstance("Dropdown",this,this._instanceId,M.override)}return p.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},p.prototype.destroy=function(){var g=this,w=this._getTriggerEvents();this._options.triggerType==="click"&&w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._clickHandler)}),this._options.triggerType==="hover"&&(w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hoverShowTriggerElHandler),g._targetEl.removeEventListener(E,g._hoverShowTargetElHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hoverHideHandler),g._targetEl.removeEventListener(E,g._hoverHideHandler)})),this._popperInstance.destroy(),this._initialized=!1},p.prototype.removeInstance=function(){Ws.removeInstance("Dropdown",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._setupEventListeners=function(){var g=this,w=this._getTriggerEvents();this._clickHandler=function(){g.toggle()},this._options.triggerType==="click"&&w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._clickHandler)}),this._hoverShowTriggerElHandler=function(E){E.type==="click"?g.toggle():setTimeout(function(){g.show()},g._options.delay)},this._hoverShowTargetElHandler=function(){g.show()},this._hoverHideHandler=function(){setTimeout(function(){g._targetEl.matches(":hover")||g.hide()},g._options.delay)},this._options.triggerType==="hover"&&(w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hoverShowTriggerElHandler),g._targetEl.addEventListener(E,g._hoverShowTargetElHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hoverHideHandler),g._targetEl.addEventListener(E,g._hoverHideHandler)}))},p.prototype._createPopperInstance=function(){return pK(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},p.prototype._setupClickOutsideListener=function(){var g=this;this._clickOutsideEventListener=function(w){g._handleClickOutside(w,g._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._handleClickOutside=function(g,w){var E=g.target,M=this._options.ignoreClickOutsideClass,z=!1;if(M){var K=document.querySelectorAll(".".concat(M));K.forEach(function(Z){if(Z.contains(E)){z=!0;return}})}E!==w&&!w.contains(E)&&!this._triggerEl.contains(E)&&!z&&this.isVisible()&&this.hide()},p.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["click"],hideEvents:[]}}},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},p.prototype.isVisible=function(){return this._visible},p.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(function(g){return Py(Py({},g),{modifiers:p6(p6([],g.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},p.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(function(g){return Py(Py({},g),{modifiers:p6(p6([],g.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function bK(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(p){var g=p.getAttribute("data-dropdown-toggle"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-dropdown-placement"),M=p.getAttribute("data-dropdown-offset-skidding"),z=p.getAttribute("data-dropdown-offset-distance"),K=p.getAttribute("data-dropdown-trigger"),Z=p.getAttribute("data-dropdown-delay"),ie=p.getAttribute("data-dropdown-ignore-click-outside-class");new _J(w,p,{placement:E||By.placement,triggerType:K||By.triggerType,offsetSkidding:M?parseInt(M):By.offsetSkidding,offsetDistance:z?parseInt(z):By.offsetDistance,delay:Z?parseInt(Z):By.delay,ignoreClickOutsideClass:ie||By.ignoreClickOutsideClass})}else console.error('The dropdown element with id "'.concat(g,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=_J,window.initDropdowns=bK);var N6=function(){return N6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},N6.apply(this,arguments)},P6={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},Wte={id:null,override:!0},TJ=function(){function p(g,w,E){g===void 0&&(g=null),w===void 0&&(w=P6),E===void 0&&(E=Wte),this._eventListenerInstances=[],this._instanceId=E.id?E.id:g.id,this._targetEl=g,this._options=N6(N6({},P6),w),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),Ws.addInstance("Modal",this,this._instanceId,E.override)}return p.prototype.init=function(){var g=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map(function(w){g._targetEl.classList.add(w)}),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("Modal",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._createBackdrop=function(){var g;if(this._isHidden){var w=document.createElement("div");(g=w.classList).add.apply(g,this._options.backdropClasses.split(" ")),document.querySelector("body").append(w),this._backdropEl=w}},p.prototype._destroyBackdropEl=function(){!this._isHidden&&this._backdropEl&&(this._backdropEl.remove(),this._backdropEl=null)},p.prototype._setupModalCloseEventListeners=function(){var g=this;this._options.backdrop==="dynamic"&&(this._clickOutsideEventListener=function(w){g._handleOutsideClick(w.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(w){w.key==="Escape"&&g.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},p.prototype._removeModalCloseEventListeners=function(){this._options.backdrop==="dynamic"&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},p.prototype._handleOutsideClick=function(g){(g===this._targetEl||g===this._backdropEl&&this.isVisible())&&this.hide()},p.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"];default:return["justify-center","items-center"]}},p.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},p.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},p.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},p.prototype.isVisible=function(){return!this._isHidden},p.prototype.isHidden=function(){return this._isHidden},p.prototype.addEventListenerInstance=function(g,w,E){this._eventListenerInstances.push({element:g,type:w,handler:E})},p.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(g){g.element.removeEventListener(g.type,g.handler)}),this._eventListenerInstances=[]},p.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function vK(){document.querySelectorAll("[data-modal-target]").forEach(function(p){var g=p.getAttribute("data-modal-target"),w=document.getElementById(g);if(w){var E=w.getAttribute("data-modal-placement"),M=w.getAttribute("data-modal-backdrop");new TJ(w,{placement:E||P6.placement,backdrop:M||P6.backdrop})}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(p){var g=p.getAttribute("data-modal-toggle"),w=document.getElementById(g);if(w){var E=Ws.getInstance("Modal",g);if(E){var M=function(){E.toggle()};p.addEventListener("click",M),E.addEventListenerInstance(p,"click",M)}else console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(p){var g=p.getAttribute("data-modal-show"),w=document.getElementById(g);if(w){var E=Ws.getInstance("Modal",g);if(E){var M=function(){E.show()};p.addEventListener("click",M),E.addEventListenerInstance(p,"click",M)}else console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(p){var g=p.getAttribute("data-modal-hide"),w=document.getElementById(g);if(w){var E=Ws.getInstance("Modal",g);if(E){var M=function(){E.hide()};p.addEventListener("click",M),E.addEventListenerInstance(p,"click",M)}else console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=TJ,window.initModals=vK);var B6=function(){return B6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},B6.apply(this,arguments)},MS={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},Zte={id:null,override:!0},kJ=function(){function p(g,w,E){g===void 0&&(g=null),w===void 0&&(w=MS),E===void 0&&(E=Zte),this._eventListenerInstances=[],this._instanceId=E.id?E.id:g.id,this._targetEl=g,this._options=B6(B6({},MS),w),this._visible=!1,this._initialized=!1,this.init(),Ws.addInstance("Drawer",this,this._instanceId,E.override)}return p.prototype.init=function(){var g=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map(function(w){g._targetEl.classList.add(w)}),this._handleEscapeKey=function(w){w.key==="Escape"&&g.isVisible()&&g.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("Drawer",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.hide=function(){var g=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(w){g._targetEl.classList.remove(w)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(w){g._targetEl.classList.add(w)})):(this._getPlacementClasses(this._options.placement).active.map(function(w){g._targetEl.classList.remove(w)}),this._getPlacementClasses(this._options.placement).inactive.map(function(w){g._targetEl.classList.add(w)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},p.prototype.show=function(){var g=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(w){g._targetEl.classList.add(w)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(w){g._targetEl.classList.remove(w)})):(this._getPlacementClasses(this._options.placement).active.map(function(w){g._targetEl.classList.add(w)}),this._getPlacementClasses(this._options.placement).inactive.map(function(w){g._targetEl.classList.remove(w)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},p.prototype._createBackdrop=function(){var g,w=this;if(!this._visible){var E=document.createElement("div");E.setAttribute("drawer-backdrop",""),(g=E.classList).add.apply(g,this._options.backdropClasses.split(" ")),document.querySelector("body").append(E),E.addEventListener("click",function(){w.hide()})}},p.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]")!==null&&document.querySelector("[drawer-backdrop]").remove()},p.prototype._getPlacementClasses=function(g){switch(g){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]};default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]}}},p.prototype.isHidden=function(){return!this._visible},p.prototype.isVisible=function(){return this._visible},p.prototype.addEventListenerInstance=function(g,w,E){this._eventListenerInstances.push({element:g,type:w,handler:E})},p.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(g){g.element.removeEventListener(g.type,g.handler)}),this._eventListenerInstances=[]},p.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function yK(){document.querySelectorAll("[data-drawer-target]").forEach(function(p){var g=p.getAttribute("data-drawer-target"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-drawer-placement"),M=p.getAttribute("data-drawer-body-scrolling"),z=p.getAttribute("data-drawer-backdrop"),K=p.getAttribute("data-drawer-edge"),Z=p.getAttribute("data-drawer-edge-offset");new kJ(w,{placement:E||MS.placement,bodyScrolling:M?M==="true":MS.bodyScrolling,backdrop:z?z==="true":MS.backdrop,edge:K?K==="true":MS.edge,edgeOffset:Z||MS.edgeOffset})}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(p){var g=p.getAttribute("data-drawer-toggle"),w=document.getElementById(g);if(w){var E=Ws.getInstance("Drawer",g);if(E){var M=function(){E.toggle()};p.addEventListener("click",M),E.addEventListenerInstance(p,"click",M)}else console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(p){var g=p.getAttribute("data-drawer-dismiss")?p.getAttribute("data-drawer-dismiss"):p.getAttribute("data-drawer-hide"),w=document.getElementById(g);if(w){var E=Ws.getInstance("Drawer",g);if(E){var M=function(){E.hide()};p.addEventListener("click",M),E.addEventListenerInstance(p,"click",M)}else console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(p){var g=p.getAttribute("data-drawer-show"),w=document.getElementById(g);if(w){var E=Ws.getInstance("Drawer",g);if(E){var M=function(){E.show()};p.addEventListener("click",M),E.addEventListenerInstance(p,"click",M)}else console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=kJ,window.initDrawers=yK);var I6=function(){return I6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},I6.apply(this,arguments)},L6={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},jte={id:null,override:!0},AJ=function(){function p(g,w,E,M){g===void 0&&(g=null),w===void 0&&(w=[]),E===void 0&&(E=L6),M===void 0&&(M=jte),this._instanceId=M.id?M.id:g.id,this._tabsEl=g,this._items=w,this._activeTab=E?this.getTab(E.defaultTabId):null,this._options=I6(I6({},L6),E),this._initialized=!1,this.init(),Ws.addInstance("Tabs",this,this._instanceId,M.override)}return p.prototype.init=function(){var g=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(w){w.triggerEl.addEventListener("click",function(E){E.preventDefault(),g.show(w.id)})}))},p.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},p.prototype.removeInstance=function(){this.destroy(),Ws.removeInstance("Tabs",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getActiveTab=function(){return this._activeTab},p.prototype.setActiveTab=function(g){this._activeTab=g},p.prototype.getTab=function(g){return this._items.filter(function(w){return w.id===g})[0]},p.prototype.show=function(g,w){var E,M,z=this;w===void 0&&(w=!1);var K=this.getTab(g);K===this._activeTab&&!w||(this._items.map(function(Z){var ie,Ee;Z!==K&&((ie=Z.triggerEl.classList).remove.apply(ie,z._options.activeClasses.split(" ")),(Ee=Z.triggerEl.classList).add.apply(Ee,z._options.inactiveClasses.split(" ")),Z.targetEl.classList.add("hidden"),Z.triggerEl.setAttribute("aria-selected","false"))}),(E=K.triggerEl.classList).add.apply(E,this._options.activeClasses.split(" ")),(M=K.triggerEl.classList).remove.apply(M,this._options.inactiveClasses.split(" ")),K.triggerEl.setAttribute("aria-selected","true"),K.targetEl.classList.remove("hidden"),this.setActiveTab(K),this._options.onShow(this,K))},p.prototype.updateOnShow=function(g){this._options.onShow=g},p}();function wK(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(p){var g=[],w=p.getAttribute("data-tabs-active-classes"),E=p.getAttribute("data-tabs-inactive-classes"),M=null;p.querySelectorAll('[role="tab"]').forEach(function(z){var K=z.getAttribute("aria-selected")==="true",Z={id:z.getAttribute("data-tabs-target"),triggerEl:z,targetEl:document.querySelector(z.getAttribute("data-tabs-target"))};g.push(Z),K&&(M=Z.id)}),new AJ(p,g,{defaultTabId:M,activeClasses:w||L6.activeClasses,inactiveClasses:E||L6.inactiveClasses})})}typeof window<"u"&&(window.Tabs=AJ,window.initTabs=wK);var Iy=function(){return Iy=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},Iy.apply(this,arguments)},b6=function(p,g,w){if(w||arguments.length===2)for(var E=0,M=g.length,z;E<M;E++)(z||!(E in g))&&(z||(z=Array.prototype.slice.call(g,0,E)),z[E]=g[E]);return p.concat(z||Array.prototype.slice.call(g))},F6={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},qte={id:null,override:!0},OJ=function(){function p(g,w,E,M){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=F6),M===void 0&&(M=qte),this._instanceId=M.id?M.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=Iy(Iy({},F6),E),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Ws.addInstance("Tooltip",this,this._instanceId,M.override)}return p.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},p.prototype.destroy=function(){var g=this;if(this._initialized){var w=this._getTriggerEvents();w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},p.prototype.removeInstance=function(){Ws.removeInstance("Tooltip",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._setupEventListeners=function(){var g=this,w=this._getTriggerEvents();this._showHandler=function(){g.show()},this._hideHandler=function(){g.hide()},w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hideHandler)})},p.prototype._createPopperInstance=function(){return pK(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},p.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},p.prototype._setupKeydownListener=function(){var g=this;this._keydownEventListener=function(w){w.key==="Escape"&&g.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},p.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},p.prototype._setupClickOutsideListener=function(){var g=this;this._clickOutsideEventListener=function(w){g._handleClickOutside(w,g._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._handleClickOutside=function(g,w){var E=g.target;E!==w&&!w.contains(E)&&!this._triggerEl.contains(E)&&this.isVisible()&&this.hide()},p.prototype.isVisible=function(){return this._visible},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},p.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(g){return Iy(Iy({},g),{modifiers:b6(b6([],g.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},p.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(g){return Iy(Iy({},g),{modifiers:b6(b6([],g.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function CK(){document.querySelectorAll("[data-tooltip-target]").forEach(function(p){var g=p.getAttribute("data-tooltip-target"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-tooltip-trigger"),M=p.getAttribute("data-tooltip-placement");new OJ(w,p,{placement:M||F6.placement,triggerType:E||F6.triggerType})}else console.error('The tooltip element with id "'.concat(g,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=OJ,window.initTooltips=CK);var Ly=function(){return Ly=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},Ly.apply(this,arguments)},v6=function(p,g,w){if(w||arguments.length===2)for(var E=0,M=g.length,z;E<M;E++)(z||!(E in g))&&(z||(z=Array.prototype.slice.call(g,0,E)),z[E]=g[E]);return p.concat(z||Array.prototype.slice.call(g))},dM={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Gte={id:null,override:!0},DJ=function(){function p(g,w,E,M){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=dM),M===void 0&&(M=Gte),this._instanceId=M.id?M.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=Ly(Ly({},dM),E),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Ws.addInstance("Popover",this,M.id?M.id:this._targetEl.id,M.override)}return p.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},p.prototype.destroy=function(){var g=this;if(this._initialized){var w=this._getTriggerEvents();w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._showHandler),g._targetEl.removeEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hideHandler),g._targetEl.removeEventListener(E,g._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},p.prototype.removeInstance=function(){Ws.removeInstance("Popover",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._setupEventListeners=function(){var g=this,w=this._getTriggerEvents();this._showHandler=function(){g.show()},this._hideHandler=function(){setTimeout(function(){g._targetEl.matches(":hover")||g.hide()},100)},w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._showHandler),g._targetEl.addEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hideHandler),g._targetEl.addEventListener(E,g._hideHandler)})},p.prototype._createPopperInstance=function(){return pK(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},p.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},p.prototype._setupKeydownListener=function(){var g=this;this._keydownEventListener=function(w){w.key==="Escape"&&g.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},p.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},p.prototype._setupClickOutsideListener=function(){var g=this;this._clickOutsideEventListener=function(w){g._handleClickOutside(w,g._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._handleClickOutside=function(g,w){var E=g.target;E!==w&&!w.contains(E)&&!this._triggerEl.contains(E)&&this.isVisible()&&this.hide()},p.prototype.isVisible=function(){return this._visible},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},p.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(g){return Ly(Ly({},g),{modifiers:v6(v6([],g.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},p.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(g){return Ly(Ly({},g),{modifiers:v6(v6([],g.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function SK(){document.querySelectorAll("[data-popover-target]").forEach(function(p){var g=p.getAttribute("data-popover-target"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-popover-trigger"),M=p.getAttribute("data-popover-placement"),z=p.getAttribute("data-popover-offset");new DJ(w,p,{placement:M||dM.placement,offset:z?parseInt(z):dM.offset,triggerType:E||dM.triggerType})}else console.error('The popover element with id "'.concat(g,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=DJ,window.initPopovers=SK);var $6=function(){return $6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},$6.apply(this,arguments)},KG={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Kte={id:null,override:!0},RJ=function(){function p(g,w,E,M,z){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=null),M===void 0&&(M=KG),z===void 0&&(z=Kte),this._instanceId=z.id?z.id:E.id,this._parentEl=g,this._triggerEl=w,this._targetEl=E,this._options=$6($6({},KG),M),this._visible=!1,this._initialized=!1,this.init(),Ws.addInstance("Dial",this,this._instanceId,z.override)}return p.prototype.init=function(){var g=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var w=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){g.show()},w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._showEventHandler),g._targetEl.addEventListener(E,g._showEventHandler)}),this._hideEventHandler=function(){g._parentEl.matches(":hover")||g.hide()},w.hideEvents.forEach(function(E){g._parentEl.addEventListener(E,g._hideEventHandler)}),this._initialized=!0}},p.prototype.destroy=function(){var g=this;if(this._initialized){var w=this._getTriggerEventTypes(this._options.triggerType);w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._showEventHandler),g._targetEl.removeEventListener(E,g._showEventHandler)}),w.hideEvents.forEach(function(E){g._parentEl.removeEventListener(E,g._hideEventHandler)}),this._initialized=!1}},p.prototype.removeInstance=function(){Ws.removeInstance("Dial",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},p.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},p.prototype.toggle=function(){this._visible?this.hide():this.show()},p.prototype.isHidden=function(){return!this._visible},p.prototype.isVisible=function(){return this._visible},p.prototype._getTriggerEventTypes=function(g){switch(g){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function xK(){document.querySelectorAll("[data-dial-init]").forEach(function(p){var g=p.querySelector("[data-dial-toggle]");if(g){var w=g.getAttribute("data-dial-toggle"),E=document.getElementById(w);if(E){var M=g.getAttribute("data-dial-trigger");new RJ(p,g,E,{triggerType:M||KG.triggerType})}else console.error("Dial with id ".concat(w," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(p.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}typeof window<"u"&&(window.Dial=RJ,window.initDials=xK);var H6=function(){return H6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},H6.apply(this,arguments)},TX={minValue:null,maxValue:null,onIncrement:function(){},onDecrement:function(){}},Yte={id:null,override:!0},MJ=function(){function p(g,w,E,M,z){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=null),M===void 0&&(M=TX),z===void 0&&(z=Yte),this._instanceId=z.id?z.id:g.id,this._targetEl=g,this._incrementEl=w,this._decrementEl=E,this._options=H6(H6({},TX),M),this._initialized=!1,this.init(),Ws.addInstance("InputCounter",this,this._instanceId,z.override)}return p.prototype.init=function(){var g=this;this._targetEl&&!this._initialized&&(this._inputHandler=function(w){{var E=w.target;/^\d*$/.test(E.value)||(E.value=E.value.replace(/[^\d]/g,"")),g._options.maxValue!==null&&parseInt(E.value)>g._options.maxValue&&(E.value=g._options.maxValue.toString()),g._options.minValue!==null&&parseInt(E.value)<g._options.minValue&&(E.value=g._options.minValue.toString())}},this._incrementClickHandler=function(){g.increment()},this._decrementClickHandler=function(){g.decrement()},this._targetEl.addEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.addEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.addEventListener("click",this._decrementClickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._targetEl&&this._initialized&&(this._targetEl.removeEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.removeEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.removeEventListener("click",this._decrementClickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("InputCounter",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getCurrentValue=function(){return parseInt(this._targetEl.value)||0},p.prototype.increment=function(){this._options.maxValue!==null&&this.getCurrentValue()>=this._options.maxValue||(this._targetEl.value=(this.getCurrentValue()+1).toString(),this._options.onIncrement(this))},p.prototype.decrement=function(){this._options.minValue!==null&&this.getCurrentValue()<=this._options.minValue||(this._targetEl.value=(this.getCurrentValue()-1).toString(),this._options.onDecrement(this))},p.prototype.updateOnIncrement=function(g){this._options.onIncrement=g},p.prototype.updateOnDecrement=function(g){this._options.onDecrement=g},p}();function EK(){document.querySelectorAll("[data-input-counter]").forEach(function(p){var g=p.id,w=document.querySelector('[data-input-counter-increment="'+g+'"]'),E=document.querySelector('[data-input-counter-decrement="'+g+'"]'),M=p.getAttribute("data-input-counter-min"),z=p.getAttribute("data-input-counter-max");p?Ws.instanceExists("InputCounter",p.getAttribute("id"))||new MJ(p,w||null,E||null,{minValue:M?parseInt(M):null,maxValue:z?parseInt(z):null}):console.error('The target element with id "'.concat(g,'" does not exist. Please check the data-input-counter attribute.'))})}typeof window<"u"&&(window.InputCounter=MJ,window.initInputCounters=EK);var V6=function(){return V6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},V6.apply(this,arguments)},z6={htmlEntities:!1,contentType:"input",onCopy:function(){}},Xte={id:null,override:!0},NJ=function(){function p(g,w,E,M){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=z6),M===void 0&&(M=Xte),this._instanceId=M.id?M.id:w.id,this._triggerEl=g,this._targetEl=w,this._options=V6(V6({},z6),E),this._initialized=!1,this.init(),Ws.addInstance("CopyClipboard",this,this._instanceId,M.override)}return p.prototype.init=function(){var g=this;this._targetEl&&this._triggerEl&&!this._initialized&&(this._triggerElClickHandler=function(){g.copy()},this._triggerEl&&this._triggerEl.addEventListener("click",this._triggerElClickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._triggerEl&&this._targetEl&&this._initialized&&(this._triggerEl&&this._triggerEl.removeEventListener("click",this._triggerElClickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("CopyClipboard",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getTargetValue=function(){if(this._options.contentType==="input")return this._targetEl.value;if(this._options.contentType==="innerHTML")return this._targetEl.innerHTML;if(this._options.contentType==="textContent")return this._targetEl.textContent.replace(/\s+/g," ").trim()},p.prototype.copy=function(){var g=this.getTargetValue();this._options.htmlEntities&&(g=this.decodeHTML(g));var w=document.createElement("textarea");return w.value=g,document.body.appendChild(w),w.select(),document.execCommand("copy"),document.body.removeChild(w),this._options.onCopy(this),g},p.prototype.decodeHTML=function(g){var w=document.createElement("textarea");return w.innerHTML=g,w.textContent},p.prototype.updateOnCopyCallback=function(g){this._options.onCopy=g},p}();function _K(){document.querySelectorAll("[data-copy-to-clipboard-target]").forEach(function(p){var g=p.getAttribute("data-copy-to-clipboard-target"),w=document.getElementById(g),E=p.getAttribute("data-copy-to-clipboard-content-type"),M=p.getAttribute("data-copy-to-clipboard-html-entities");w?Ws.instanceExists("CopyClipboard",w.getAttribute("id"))||new NJ(p,w,{htmlEntities:M&&M==="true"?!0:z6.htmlEntities,contentType:E||z6.contentType}):console.error('The target element with id "'.concat(g,'" does not exist. Please check the data-copy-to-clipboard-target attribute.'))})}typeof window<"u"&&(window.CopyClipboard=NJ,window.initClipboards=_K);function YG(p,g){(g==null||g>p.length)&&(g=p.length);for(var w=0,E=Array(g);w<g;w++)E[w]=p[w];return E}function Jte(p){if(Array.isArray(p))return p}function Qte(p){if(Array.isArray(p))return YG(p)}function ene(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function TK(p,g,w){return g=$y(g),rne(p,PJ()?Reflect.construct(g,w||[],$y(p).constructor):g.apply(p,w))}function FS(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function kX(p,g){for(var w=0;w<g.length;w++){var E=g[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(p,cne(E.key),E)}}function $S(p,g,w){return g&&kX(p.prototype,g),w&&kX(p,w),Object.defineProperty(p,"prototype",{writable:!1}),p}function bM(){return bM=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(p,g,w){var E=ane(p,g);if(E){var M=Object.getOwnPropertyDescriptor(E,g);return M.get?M.get.call(arguments.length<3?p:w):M.value}},bM.apply(null,arguments)}function $y(p){return $y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},$y(p)}function kK(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),g&&XG(p,g)}function PJ(){try{var p=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PJ=function(){return!!p})()}function tne(p){if(typeof Symbol<"u"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}function nne(p,g){var w=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(w!=null){var E,M,z,K,Z=[],ie=!0,Ee=!1;try{if(z=(w=w.call(p)).next,g===0){if(Object(w)!==w)return;ie=!1}else for(;!(ie=(E=z.call(w)).done)&&(Z.push(E.value),Z.length!==g);ie=!0);}catch(de){Ee=!0,M=de}finally{try{if(!ie&&w.return!=null&&(K=w.return(),Object(K)!==K))return}finally{if(Ee)throw M}}return Z}}function one(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rne(p,g){if(g&&(typeof g=="object"||typeof g=="function"))return g;if(g!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ene(p)}function XG(p,g){return XG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,E){return w.__proto__=E,w},XG(p,g)}function mm(p,g){return Jte(p)||nne(p,g)||BJ(p,g)||one()}function ane(p,g){for(;!{}.hasOwnProperty.call(p,g)&&(p=$y(p))!==null;);return p}function EM(p){return Qte(p)||tne(p)||BJ(p)||sne()}function ine(p,g){if(typeof p!="object"||!p)return p;var w=p[Symbol.toPrimitive];if(w!==void 0){var E=w.call(p,g);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(p)}function cne(p){var g=ine(p,"string");return typeof g=="symbol"?g:g+""}function U6(p){"@babel/helpers - typeof";return U6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},U6(p)}function BJ(p,g){if(p){if(typeof p=="string")return YG(p,g);var w={}.toString.call(p).slice(8,-1);return w==="Object"&&p.constructor&&(w=p.constructor.name),w==="Map"||w==="Set"?Array.from(p):w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?YG(p,g):void 0}}function Kb(p,g){return Object.prototype.hasOwnProperty.call(p,g)}function AK(p){return p[p.length-1]}function LS(p){for(var g=arguments.length,w=new Array(g>1?g-1:0),E=1;E<g;E++)w[E-1]=arguments[E];return w.forEach(function(M){p.includes(M)||p.push(M)}),p}function MG(p,g){return p?p.split(g):[]}function OK(p,g,w){var E=g===void 0||p>=g,M=w===void 0||p<=w;return E&&M}function IJ(p,g,w){return p<g?g:p>w?w:p}function vk(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",z=Object.keys(w).reduce(function(Z,ie){var Ee=w[ie];return typeof Ee=="function"&&(Ee=Ee(E)),"".concat(Z," ").concat(ie,'="').concat(Ee,'"')},p);M+="<".concat(z,"></").concat(p,">");var K=E+1;return K<g?vk(p,g,w,K,M):M}function DK(p){return p.replace(/>\s+/g,">").replace(/\s+</,"<")}function JG(p){return new Date(p).setHours(0,0,0,0)}function HS(){return new Date().setHours(0,0,0,0)}function Fy(){switch(arguments.length){case 0:return HS();case 1:return JG(arguments.length<=0?void 0:arguments[0])}var p=new Date(0);return p.setFullYear.apply(p,arguments),p.setHours(0,0,0,0)}function dk(p,g){var w=new Date(p);return w.setDate(w.getDate()+g)}function lne(p,g){return dk(p,g*7)}function W6(p,g){var w=new Date(p),E=w.getMonth()+g,M=E%12;M<0&&(M+=12);var z=w.setMonth(E);return w.getMonth()!==M?w.setDate(0):z}function fk(p,g){var w=new Date(p),E=w.getMonth(),M=w.setFullYear(w.getFullYear()+g);return E===1&&w.getMonth()===2?w.setDate(0):M}function AX(p,g){return(p-g+7)%7}function Z6(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,E=new Date(p).getDay();return dk(p,AX(g,w)-AX(E,w))}function une(p){var g=Z6(p,4,1),w=Z6(new Date(g).setMonth(0,4),4,1);return Math.round((g-w)/6048e5)+1}function DS(p,g){var w=new Date(p).getFullYear();return Math.floor(w/g)*g}var QG=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,dne=/[\s!-/:-@[-`{-~]+/,NG={},OX={y:function(g,w){return new Date(g).setFullYear(parseInt(w,10))},m:function(g,w,E){var M=new Date(g),z=parseInt(w,10)-1;if(isNaN(z)){if(!w)return NaN;var K=w.toLowerCase(),Z=function(Ee){return Ee.toLowerCase().startsWith(K)};if(z=E.monthsShort.findIndex(Z),z<0&&(z=E.months.findIndex(Z)),z<0)return NaN}return M.setMonth(z),M.getMonth()!==LJ(z)?M.setDate(0):M.getTime()},d:function(g,w){return new Date(g).setDate(parseInt(w,10))}},fne={d:function(g){return g.getDate()},dd:function(g){return y6(g.getDate(),2)},D:function(g,w){return w.daysShort[g.getDay()]},DD:function(g,w){return w.days[g.getDay()]},m:function(g){return g.getMonth()+1},mm:function(g){return y6(g.getMonth()+1,2)},M:function(g,w){return w.monthsShort[g.getMonth()]},MM:function(g,w){return w.months[g.getMonth()]},y:function(g){return g.getFullYear()},yy:function(g){return y6(g.getFullYear(),2).slice(-2)},yyyy:function(g){return y6(g.getFullYear(),4)}};function LJ(p){return p>-1?p%12:LJ(p+12)}function y6(p,g){return p.toString().padStart(g,"0")}function FJ(p){if(typeof p!="string")throw new Error("Invalid date format.");if(p in NG)return NG[p];var g=p.split(QG),w=p.match(new RegExp(QG,"g"));if(g.length===0||!w)throw new Error("Invalid date format.");var E=w.map(function(z){return fne[z]}),M=Object.keys(OX).reduce(function(z,K){var Z=w.find(function(ie){return ie[0]!=="D"&&ie[0].toLowerCase()===K});return Z&&z.push(K),z},[]);return NG[p]={parser:function(K,Z){var ie=K.split(dne).reduce(function(Ee,de,Ye){if(de.length>0&&w[Ye]){var Ut=w[Ye][0];Ut==="M"?Ee.m=de:Ut!=="D"&&(Ee[Ut]=de)}return Ee},{});return M.reduce(function(Ee,de){var Ye=OX[de](Ee,ie[de],Z);return isNaN(Ye)?Ee:Ye},HS())},formatter:function(K,Z){var ie=E.reduce(function(Ee,de,Ye){return Ee+="".concat(g[Ye]).concat(de(K,Z))},"");return ie+=AK(g)}}}function vM(p,g,w){if(p instanceof Date||typeof p=="number"){var E=JG(p);return isNaN(E)?void 0:E}if(p){if(p==="today")return HS();if(g&&g.toValue){var M=g.toValue(p,g,w);return isNaN(M)?void 0:JG(M)}return FJ(g).parser(p,w)}}function yM(p,g,w){if(isNaN(p)||!p&&p!==0)return"";var E=typeof p=="number"?new Date(p):p;return g.toDisplay?g.toDisplay(E,g,w):FJ(g).formatter(E,w)}var j6=new WeakMap,$J=EventTarget.prototype,DX=$J.addEventListener,RX=$J.removeEventListener;function RK(p,g){var w=j6.get(p);w||(w=[],j6.set(p,w)),g.forEach(function(E){DX.call.apply(DX,EM(E)),w.push(E)})}function HJ(p){var g=j6.get(p);g&&(g.forEach(function(w){RX.call.apply(RX,EM(w))}),j6.delete(p))}if(!Event.prototype.composedPath){var mne=function p(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];w.push(g);var E;return g.parentNode?E=g.parentNode:g.host?E=g.host:g.defaultView&&(E=g.defaultView),E?p(E,w):w};Event.prototype.composedPath=function(){return mne(this.target)}}function VJ(p,g,w){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,M=p[E];return g(M)?M:M===w||!M.parentElement?void 0:VJ(p,g,w,E+1)}function zJ(p,g){var w=typeof g=="function"?g:function(E){return E.matches(g)};return VJ(p.composedPath(),w,p.currentTarget)}var iM={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},_M={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5H1m0 0 4 4M1 5l4-4"/></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},hne=document.createRange();function Yb(p){return hne.createContextualFragment(p)}function fM(p){p.style.display!=="none"&&(p.style.display&&(p.dataset.styleDisplay=p.style.display),p.style.display="none")}function mM(p){p.style.display==="none"&&(p.dataset.styleDisplay?(p.style.display=p.dataset.styleDisplay,delete p.dataset.styleDisplay):p.style.display="")}function q6(p){p.firstChild&&(p.removeChild(p.firstChild),q6(p))}function gne(p,g){q6(p),g instanceof DocumentFragment?p.appendChild(g):typeof g=="string"?p.appendChild(Yb(g)):typeof g.forEach=="function"&&g.forEach(function(w){p.appendChild(w)})}var PG=_M.language,pne=_M.format,bne=_M.weekStart;function MX(p,g){return p.length<6&&g>=0&&g<7?LS(p,g):p}function NX(p){return(p+6)%7}function PX(p,g,w,E){var M=vM(p,g,w);return M!==void 0?M:E}function BG(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,E=parseInt(p,10);return E>=0&&E<=w?E:g}function IG(p,g){var w=Object.assign({},p),E={},M=g.constructor.locales,z=g.config||{},K=z.format,Z=z.language,ie=z.locale,Ee=z.maxDate,de=z.maxView,Ye=z.minDate,Ut=z.pickLevel,Lt=z.startView,Mt=z.weekStart;if(w.language){var Ct;if(w.language!==Z&&(M[w.language]?Ct=w.language:(Ct=w.language.split("-")[0],M[Ct]===void 0&&(Ct=!1))),delete w.language,Ct){Z=E.language=Ct;var Xe=ie||M[PG];ie=Object.assign({format:pne,weekStart:bne},M[PG]),Z!==PG&&Object.assign(ie,M[Z]),E.locale=ie,K===Xe.format&&(K=E.format=ie.format),Mt===Xe.weekStart&&(Mt=E.weekStart=ie.weekStart,E.weekEnd=NX(ie.weekStart))}}if(w.format){var dn=typeof w.format.toDisplay=="function",Nt=typeof w.format.toValue=="function",ce=QG.test(w.format);(dn&&Nt||ce)&&(K=E.format=w.format),delete w.format}var Ke=Ye,Kn=Ee;if(w.minDate!==void 0&&(Ke=w.minDate===null?Fy(0,0,1):PX(w.minDate,K,ie,Ke),delete w.minDate),w.maxDate!==void 0&&(Kn=w.maxDate===null?void 0:PX(w.maxDate,K,ie,Kn),delete w.maxDate),Kn<Ke?(Ye=E.minDate=Kn,Ee=E.maxDate=Ke):(Ye!==Ke&&(Ye=E.minDate=Ke),Ee!==Kn&&(Ee=E.maxDate=Kn)),w.datesDisabled&&(E.datesDisabled=w.datesDisabled.reduce(function(Pe,N){var an=vM(N,K,ie);return an!==void 0?LS(Pe,an):Pe},[]),delete w.datesDisabled),w.defaultViewDate!==void 0){var jt=vM(w.defaultViewDate,K,ie);jt!==void 0&&(E.defaultViewDate=jt),delete w.defaultViewDate}if(w.weekStart!==void 0){var ne=Number(w.weekStart)%7;isNaN(ne)||(Mt=E.weekStart=ne,E.weekEnd=NX(ne)),delete w.weekStart}if(w.daysOfWeekDisabled&&(E.daysOfWeekDisabled=w.daysOfWeekDisabled.reduce(MX,[]),delete w.daysOfWeekDisabled),w.daysOfWeekHighlighted&&(E.daysOfWeekHighlighted=w.daysOfWeekHighlighted.reduce(MX,[]),delete w.daysOfWeekHighlighted),w.maxNumberOfDates!==void 0){var Jt=parseInt(w.maxNumberOfDates,10);Jt>=0&&(E.maxNumberOfDates=Jt,E.multidate=Jt!==1),delete w.maxNumberOfDates}w.dateDelimiter&&(E.dateDelimiter=String(w.dateDelimiter),delete w.dateDelimiter);var Bn=Ut;w.pickLevel!==void 0&&(Bn=BG(w.pickLevel,2),delete w.pickLevel),Bn!==Ut&&(Ut=E.pickLevel=Bn);var Qt=de;w.maxView!==void 0&&(Qt=BG(w.maxView,de),delete w.maxView),Qt=Ut>Qt?Ut:Qt,Qt!==de&&(de=E.maxView=Qt);var Fe=Lt;if(w.startView!==void 0&&(Fe=BG(w.startView,Fe),delete w.startView),Fe<Ut?Fe=Ut:Fe>de&&(Fe=de),Fe!==Lt&&(E.startView=Fe),w.prevArrow){var ve=Yb(w.prevArrow);ve.childNodes.length>0&&(E.prevArrow=ve.childNodes),delete w.prevArrow}if(w.nextArrow){var so=Yb(w.nextArrow);so.childNodes.length>0&&(E.nextArrow=so.childNodes),delete w.nextArrow}if(w.disableTouchKeyboard!==void 0&&(E.disableTouchKeyboard="ontouchstart"in document&&!!w.disableTouchKeyboard,delete w.disableTouchKeyboard),w.orientation){var Me=w.orientation.toLowerCase().split(/\s+/g);E.orientation={x:Me.find(function(Pe){return Pe==="left"||Pe==="right"})||"auto",y:Me.find(function(Pe){return Pe==="top"||Pe==="bottom"})||"auto"},delete w.orientation}if(w.todayBtnMode!==void 0){switch(w.todayBtnMode){case 0:case 1:E.todayBtnMode=w.todayBtnMode}delete w.todayBtnMode}return Object.keys(w).forEach(function(Pe){w[Pe]!==void 0&&Kb(_M,Pe)&&(E[Pe]=w[Pe])}),E}var vne=DK(`<div class="datepicker hidden">
  <div class="datepicker-picker inline-block rounded-lg bg-white dark:bg-gray-700 shadow-lg p-4">
    <div class="datepicker-header">
      <div class="datepicker-title bg-white dark:bg-gray-700 dark:text-white px-2 py-3 text-center font-semibold"></div>
      <div class="datepicker-controls flex justify-between mb-2">
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 prev-btn"></button>
        <button type="button" class="text-sm rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 font-semibold py-2.5 px-5 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-200 view-switch"></button>
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 next-btn"></button>
      </div>
    </div>
    <div class="datepicker-main p-1"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls flex space-x-2 rtl:space-x-reverse mt-2">
        <button type="button" class="%buttonClass% today-btn text-white bg-blue-700 !bg-primary-700 dark:bg-blue-600 dark:!bg-primary-600 hover:bg-blue-800 hover:!bg-primary-800 dark:hover:bg-blue-700 dark:hover:!bg-primary-700 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
        <button type="button" class="%buttonClass% clear-btn text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
      </div>
    </div>
  </div>
</div>`),yne=DK(`<div class="days">
  <div class="days-of-week grid grid-cols-7 mb-1">`.concat(vk("span",7,{class:"dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
  <div class="datepicker-grid w-64 grid grid-cols-7">`).concat(vk("span",42,{class:"block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"}),`</div>
</div>`)),wne=DK(`<div class="calendar-weeks">
  <div class="days-of-week flex"><span class="dow h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"></span></div>
  <div class="weeks">`.concat(vk("span",6,{class:"week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
</div>`)),MK=function(){function p(g,w){FS(this,p),Object.assign(this,w,{picker:g,element:Yb('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}return $S(p,[{key:"init",value:function(w){w.pickLevel!==void 0&&(this.isMinView=this.id===w.pickLevel),this.setOptions(w),this.updateFocus(),this.updateSelection()}},{key:"performBeforeHook",value:function(w,E,M){var z=this.beforeShow(new Date(M));switch(U6(z)){case"boolean":z={enabled:z};break;case"string":z={classes:z}}if(z){if(z.enabled===!1&&(w.classList.add("disabled"),LS(this.disabled,E)),z.classes){var K,Z=z.classes.split(/\s+/);(K=w.classList).add.apply(K,EM(Z)),Z.includes("disabled")&&LS(this.disabled,E)}z.content&&gne(w,z.content)}}}])}(),Cne=function(p){function g(w){return FS(this,g),TK(this,g,[w,{id:0,name:"days",cellClass:"day"}])}return kK(g,p),$S(g,[{key:"init",value:function(E){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(M){var z=Yb(yne).firstChild;this.dow=z.firstChild,this.grid=z.lastChild,this.element.appendChild(z)}bM($y(g.prototype),"init",this).call(this,E)}},{key:"setOptions",value:function(E){var M=this,z;if(Kb(E,"minDate")&&(this.minDate=E.minDate),Kb(E,"maxDate")&&(this.maxDate=E.maxDate),E.datesDisabled&&(this.datesDisabled=E.datesDisabled),E.daysOfWeekDisabled&&(this.daysOfWeekDisabled=E.daysOfWeekDisabled,z=!0),E.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=E.daysOfWeekHighlighted),E.todayHighlight!==void 0&&(this.todayHighlight=E.todayHighlight),E.weekStart!==void 0&&(this.weekStart=E.weekStart,this.weekEnd=E.weekEnd,z=!0),E.locale){var K=this.locale=E.locale;this.dayNames=K.daysMin,this.switchLabelFormat=K.titleFormat,z=!0}if(E.beforeShowDay!==void 0&&(this.beforeShow=typeof E.beforeShowDay=="function"?E.beforeShowDay:void 0),E.calendarWeeks!==void 0)if(E.calendarWeeks&&!this.calendarWeeks){var Z=Yb(wne).firstChild;this.calendarWeeks={element:Z,dow:Z.firstChild,weeks:Z.lastChild},this.element.insertBefore(Z,this.element.firstChild)}else this.calendarWeeks&&!E.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);E.showDaysOfWeek!==void 0&&(E.showDaysOfWeek?(mM(this.dow),this.calendarWeeks&&mM(this.calendarWeeks.dow)):(fM(this.dow),this.calendarWeeks&&fM(this.calendarWeeks.dow))),z&&Array.from(this.dow.children).forEach(function(ie,Ee){var de=(M.weekStart+Ee)%7;ie.textContent=M.dayNames[de],ie.className=M.daysOfWeekDisabled.includes(de)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}},{key:"updateFocus",value:function(){var E=new Date(this.picker.viewDate),M=E.getFullYear(),z=E.getMonth(),K=Fy(M,z,1),Z=Z6(K,this.weekStart,this.weekStart);this.first=K,this.last=Fy(M,z+1,0),this.start=Z,this.focused=this.picker.viewDate}},{key:"updateSelection",value:function(){var E=this.picker.datepicker,M=E.dates,z=E.rangepicker;this.selected=M,z&&(this.range=z.dates)}},{key:"render",value:function(){var E=this;this.today=this.todayHighlight?HS():void 0,this.disabled=EM(this.datesDisabled);var M=yM(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(M),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){var z=Z6(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach(function(K,Z){K.textContent=une(lne(z,Z))})}Array.from(this.grid.children).forEach(function(K,Z){var ie=K.classList,Ee=dk(E.start,Z),de=new Date(Ee),Ye=de.getDay();if(K.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(E.cellClass),K.dataset.date=Ee,K.textContent=de.getDate(),Ee<E.first?ie.add("prev","text-gray-500","dark:text-white"):Ee>E.last&&ie.add("next","text-gray-500","dark:text-white"),E.today===Ee&&ie.add("today","bg-gray-100","dark:bg-gray-600"),(Ee<E.minDate||Ee>E.maxDate||E.disabled.includes(Ee))&&(ie.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),ie.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer")),E.daysOfWeekDisabled.includes(Ye)&&(ie.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),ie.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer"),LS(E.disabled,Ee)),E.daysOfWeekHighlighted.includes(Ye)&&ie.add("highlighted"),E.range){var Ut=mm(E.range,2),Lt=Ut[0],Mt=Ut[1];Ee>Lt&&Ee<Mt&&(ie.add("range","bg-gray-200","dark:bg-gray-600"),ie.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),Ee===Lt&&(ie.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),ie.remove("rounded-lg","rounded-r-lg")),Ee===Mt&&(ie.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),ie.remove("rounded-lg","rounded-l-lg"))}E.selected.includes(Ee)&&(ie.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),ie.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","dark:bg-gray-600","bg-gray-100","bg-gray-200")),Ee===E.focused&&ie.add("focused"),E.beforeShow&&E.performBeforeHook(K,Ee,Ee)})}},{key:"refresh",value:function(){var E=this,M=this.range||[],z=mm(M,2),K=z[0],Z=z[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(ie){ie.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white","focused"),ie.classList.add("text-gray-900","rounded-lg","dark:text-white")}),Array.from(this.grid.children).forEach(function(ie){var Ee=Number(ie.dataset.date),de=ie.classList;de.remove("bg-gray-200","dark:bg-gray-600","rounded-l-lg","rounded-r-lg"),Ee>K&&Ee<Z&&(de.add("range","bg-gray-200","dark:bg-gray-600"),de.remove("rounded-lg")),Ee===K&&(de.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),de.remove("rounded-lg")),Ee===Z&&(de.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),de.remove("rounded-lg")),E.selected.includes(Ee)&&(de.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),de.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","bg-gray-100","bg-gray-200","dark:bg-gray-600")),Ee===E.focused&&de.add("focused")})}},{key:"refreshFocus",value:function(){var E=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(function(M){M.classList.remove("focused")}),this.grid.children[E].classList.add("focused")}}])}(MK);function BX(p,g){if(!(!p||!p[0]||!p[1])){var w=mm(p,2),E=mm(w[0],2),M=E[0],z=E[1],K=mm(w[1],2),Z=K[0],ie=K[1];if(!(M>g||Z<g))return[M===g?z:-1,Z===g?ie:12]}}var Sne=function(p){function g(w){return FS(this,g),TK(this,g,[w,{id:1,name:"months",cellClass:"month"}])}return kK(g,p),$S(g,[{key:"init",value:function(E){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;M&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(Yb(vk("span",12,{"data-month":function(K){return K}})))),bM($y(g.prototype),"init",this).call(this,E)}},{key:"setOptions",value:function(E){if(E.locale&&(this.monthNames=E.locale.monthsShort),Kb(E,"minDate"))if(E.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{var M=new Date(E.minDate);this.minYear=M.getFullYear(),this.minMonth=M.getMonth(),this.minDate=M.setDate(1)}if(Kb(E,"maxDate"))if(E.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{var z=new Date(E.maxDate);this.maxYear=z.getFullYear(),this.maxMonth=z.getMonth(),this.maxDate=Fy(this.maxYear,this.maxMonth+1,0)}E.beforeShowMonth!==void 0&&(this.beforeShow=typeof E.beforeShowMonth=="function"?E.beforeShowMonth:void 0)}},{key:"updateFocus",value:function(){var E=new Date(this.picker.viewDate);this.year=E.getFullYear(),this.focused=E.getMonth()}},{key:"updateSelection",value:function(){var E=this.picker.datepicker,M=E.dates,z=E.rangepicker;this.selected=M.reduce(function(K,Z){var ie=new Date(Z),Ee=ie.getFullYear(),de=ie.getMonth();return K[Ee]===void 0?K[Ee]=[de]:LS(K[Ee],de),K},{}),z&&z.dates&&(this.range=z.dates.map(function(K){var Z=new Date(K);return isNaN(Z)?void 0:[Z.getFullYear(),Z.getMonth()]}))}},{key:"render",value:function(){var E=this;this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);var M=this.selected[this.year]||[],z=this.year<this.minYear||this.year>this.maxYear,K=this.year===this.minYear,Z=this.year===this.maxYear,ie=BX(this.range,this.year);Array.from(this.grid.children).forEach(function(Ee,de){var Ye=Ee.classList,Ut=Fy(E.year,de,1);if(Ee.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(E.cellClass),E.isMinView&&(Ee.dataset.date=Ut),Ee.textContent=E.monthNames[de],(z||K&&de<E.minMonth||Z&&de>E.maxMonth)&&Ye.add("disabled"),ie){var Lt=mm(ie,2),Mt=Lt[0],Ct=Lt[1];de>Mt&&de<Ct&&Ye.add("range"),de===Mt&&Ye.add("range-start"),de===Ct&&Ye.add("range-end")}M.includes(de)&&(Ye.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),Ye.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),de===E.focused&&Ye.add("focused"),E.beforeShow&&E.performBeforeHook(Ee,de,Ut)})}},{key:"refresh",value:function(){var E=this,M=this.selected[this.year]||[],z=BX(this.range,this.year)||[],K=mm(z,2),Z=K[0],ie=K[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(Ee){Ee.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","dark:bg-blue-600","dark:!bg-primary-700","dark:text-white","text-white","focused"),Ee.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")}),Array.from(this.grid.children).forEach(function(Ee,de){var Ye=Ee.classList;de>Z&&de<ie&&Ye.add("range"),de===Z&&Ye.add("range-start"),de===ie&&Ye.add("range-end"),M.includes(de)&&(Ye.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),Ye.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),de===E.focused&&Ye.add("focused")})}},{key:"refreshFocus",value:function(){this.grid.querySelectorAll(".focused").forEach(function(E){E.classList.remove("focused")}),this.grid.children[this.focused].classList.add("focused")}}])}(MK);function xne(p){return EM(p).reduce(function(g,w,E){return g+=E?w:w.toUpperCase()},"")}var IX=function(p){function g(w,E){return FS(this,g),TK(this,g,[w,E])}return kK(g,p),$S(g,[{key:"init",value:function(E){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;M&&(this.navStep=this.step*10,this.beforeShowOption="beforeShow".concat(xne(this.cellClass)),this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(Yb(vk("span",12)))),bM($y(g.prototype),"init",this).call(this,E)}},{key:"setOptions",value:function(E){if(Kb(E,"minDate")&&(E.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=DS(E.minDate,this.step),this.minDate=Fy(this.minYear,0,1))),Kb(E,"maxDate")&&(E.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=DS(E.maxDate,this.step),this.maxDate=Fy(this.maxYear,11,31))),E[this.beforeShowOption]!==void 0){var M=E[this.beforeShowOption];this.beforeShow=typeof M=="function"?M:void 0}}},{key:"updateFocus",value:function(){var E=new Date(this.picker.viewDate),M=DS(E,this.navStep),z=M+9*this.step;this.first=M,this.last=z,this.start=M-this.step,this.focused=DS(E,this.step)}},{key:"updateSelection",value:function(){var E=this,M=this.picker.datepicker,z=M.dates,K=M.rangepicker;this.selected=z.reduce(function(Z,ie){return LS(Z,DS(ie,E.step))},[]),K&&K.dates&&(this.range=K.dates.map(function(Z){if(Z!==void 0)return DS(Z,E.step)}))}},{key:"render",value:function(){var E=this;this.disabled=[],this.picker.setViewSwitchLabel("".concat(this.first,"-").concat(this.last)),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach(function(M,z){var K=M.classList,Z=E.start+z*E.step,ie=Fy(Z,0,1);if(M.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(E.cellClass),E.isMinView&&(M.dataset.date=ie),M.textContent=M.dataset.year=Z,z===0?K.add("prev"):z===11&&K.add("next"),(Z<E.minYear||Z>E.maxYear)&&K.add("disabled"),E.range){var Ee=mm(E.range,2),de=Ee[0],Ye=Ee[1];Z>de&&Z<Ye&&K.add("range"),Z===de&&K.add("range-start"),Z===Ye&&K.add("range-end")}E.selected.includes(Z)&&(K.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),K.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),Z===E.focused&&K.add("focused"),E.beforeShow&&E.performBeforeHook(M,Z,ie)})}},{key:"refresh",value:function(){var E=this,M=this.range||[],z=mm(M,2),K=z[0],Z=z[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(ie){ie.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark!bg-primary-600","dark:text-white","focused")}),Array.from(this.grid.children).forEach(function(ie){var Ee=Number(ie.textContent),de=ie.classList;Ee>K&&Ee<Z&&de.add("range"),Ee===K&&de.add("range-start"),Ee===Z&&de.add("range-end"),E.selected.includes(Ee)&&(de.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),de.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),Ee===E.focused&&de.add("focused")})}},{key:"refreshFocus",value:function(){var E=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(function(M){M.classList.remove("focused")}),this.grid.children[E].classList.add("focused")}}])}(MK);function mk(p,g){var w={date:p.getDate(),viewDate:new Date(p.picker.viewDate),viewId:p.picker.currentView.id,datepicker:p};p.element.dispatchEvent(new CustomEvent(g,{detail:w}))}function G6(p,g){var w=p.config,E=w.minDate,M=w.maxDate,z=p.picker,K=z.currentView,Z=z.viewDate,ie;switch(K.id){case 0:ie=W6(Z,g);break;case 1:ie=fk(Z,g);break;default:ie=fk(Z,g*K.navStep)}ie=IJ(ie,E,M),p.picker.changeFocus(ie).render()}function UJ(p){var g=p.picker.currentView.id;g!==p.config.maxView&&p.picker.changeView(g+1).render()}function WJ(p){p.config.updateOnBlur?p.update({autohide:!0}):(p.refresh("input"),p.hide())}function LX(p,g){var w=p.picker,E=new Date(w.viewDate),M=w.currentView.id,z=M===1?W6(E,g-E.getMonth()):fk(E,g-E.getFullYear());w.changeFocus(z).changeView(M-1).render()}function Ene(p){var g=p.picker,w=HS();if(p.config.todayBtnMode===1){if(p.config.autohide){p.setDate(w);return}p.setDate(w,{render:!1}),g.update()}g.viewDate!==w&&g.changeFocus(w),g.changeView(0).render()}function _ne(p){p.setDate({clear:!0})}function Tne(p){UJ(p)}function kne(p){G6(p,-1)}function Ane(p){G6(p,1)}function One(p,g){var w=zJ(g,".datepicker-cell");if(!(!w||w.classList.contains("disabled"))){var E=p.picker.currentView,M=E.id,z=E.isMinView;z?p.setDate(Number(w.dataset.date)):M===1?LX(p,Number(w.dataset.month)):LX(p,Number(w.dataset.year))}}function Dne(p){!p.inline&&!p.config.disableTouchKeyboard&&p.inputField.focus()}function FX(p,g){if(g.title!==void 0&&(g.title?(p.controls.title.textContent=g.title,mM(p.controls.title)):(p.controls.title.textContent="",fM(p.controls.title))),g.prevArrow){var w=p.controls.prevBtn;q6(w),g.prevArrow.forEach(function(Z){w.appendChild(Z.cloneNode(!0))})}if(g.nextArrow){var E=p.controls.nextBtn;q6(E),g.nextArrow.forEach(function(Z){E.appendChild(Z.cloneNode(!0))})}if(g.locale&&(p.controls.todayBtn.textContent=g.locale.today,p.controls.clearBtn.textContent=g.locale.clear),g.todayBtn!==void 0&&(g.todayBtn?mM(p.controls.todayBtn):fM(p.controls.todayBtn)),Kb(g,"minDate")||Kb(g,"maxDate")){var M=p.datepicker.config,z=M.minDate,K=M.maxDate;p.controls.todayBtn.disabled=!OK(HS(),z,K)}g.clearBtn!==void 0&&(g.clearBtn?mM(p.controls.clearBtn):fM(p.controls.clearBtn))}function $X(p){var g=p.dates,w=p.config,E=g.length>0?AK(g):w.defaultViewDate;return IJ(E,w.minDate,w.maxDate)}function HX(p,g){var w=new Date(p.viewDate),E=new Date(g),M=p.currentView,z=M.id,K=M.year,Z=M.first,ie=M.last,Ee=E.getFullYear();switch(p.viewDate=g,Ee!==w.getFullYear()&&mk(p.datepicker,"changeYear"),E.getMonth()!==w.getMonth()&&mk(p.datepicker,"changeMonth"),z){case 0:return g<Z||g>ie;case 1:return Ee!==K;default:return Ee<Z||Ee>ie}}function LG(p){return window.getComputedStyle(p).direction}var Rne=function(){function p(g){FS(this,p),this.datepicker=g;var w=vne.replace(/%buttonClass%/g,g.config.buttonClass),E=this.element=Yb(w).firstChild,M=mm(E.firstChild.children,3),z=M[0],K=M[1],Z=M[2],ie=z.firstElementChild,Ee=mm(z.lastElementChild.children,3),de=Ee[0],Ye=Ee[1],Ut=Ee[2],Lt=mm(Z.firstChild.children,2),Mt=Lt[0],Ct=Lt[1],Xe={title:ie,prevBtn:de,viewSwitch:Ye,nextBtn:Ut,todayBtn:Mt,clearBtn:Ct};this.main=K,this.controls=Xe;var dn=g.inline?"inline":"dropdown";E.classList.add("datepicker-".concat(dn)),dn==="dropdown"&&E.classList.add("dropdown","absolute","top-0","left-0","z-50","pt-2"),FX(this,g.config),this.viewDate=$X(g),RK(g,[[E,"click",Dne.bind(null,g),{capture:!0}],[K,"click",One.bind(null,g)],[Xe.viewSwitch,"click",Tne.bind(null,g)],[Xe.prevBtn,"click",kne.bind(null,g)],[Xe.nextBtn,"click",Ane.bind(null,g)],[Xe.todayBtn,"click",Ene.bind(null,g)],[Xe.clearBtn,"click",_ne.bind(null,g)]]),this.views=[new Cne(this),new Sne(this),new IX(this,{id:2,name:"years",cellClass:"year",step:1}),new IX(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[g.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),g.config.container.appendChild(this.element)}return $S(p,[{key:"setOptions",value:function(w){FX(this,w),this.views.forEach(function(E){E.init(w,!1)}),this.currentView.render()}},{key:"detach",value:function(){this.datepicker.config.container.removeChild(this.element)}},{key:"show",value:function(){if(!this.active){this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;var w=this.datepicker;if(!w.inline){var E=LG(w.inputField);E!==LG(w.config.container)?this.element.dir=E:this.element.dir&&this.element.removeAttribute("dir"),this.place(),w.config.disableTouchKeyboard&&w.inputField.blur()}mk(w,"show")}}},{key:"hide",value:function(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,mk(this.datepicker,"hide"))}},{key:"place",value:function(){var w=this.element,E=w.classList,M=w.style,z=this.datepicker,K=z.config,Z=z.inputField,ie=K.container,Ee=this.element.getBoundingClientRect(),de=Ee.width,Ye=Ee.height,Ut=ie.getBoundingClientRect(),Lt=Ut.left,Mt=Ut.top,Ct=Ut.width,Xe=Z.getBoundingClientRect(),dn=Xe.left,Nt=Xe.top,ce=Xe.width,Ke=Xe.height,Kn=K.orientation,jt=Kn.x,ne=Kn.y,Jt,Bn,Qt;ie===document.body?(Jt=window.scrollY,Bn=dn+window.scrollX,Qt=Nt+Jt):(Jt=ie.scrollTop,Bn=dn-Lt,Qt=Nt-Mt+Jt),jt==="auto"&&(Bn<0?(jt="left",Bn=10):Bn+de>Ct?jt="right":jt=LG(Z)==="rtl"?"right":"left"),jt==="right"&&(Bn-=de-ce),ne==="auto"&&(ne=Qt-Ye<Jt?"bottom":"top"),ne==="top"?Qt-=Ye:Qt+=Ke,E.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),E.add("datepicker-orient-".concat(ne),"datepicker-orient-".concat(jt)),M.top=Qt&&"".concat(Qt,"px"),M.left=Bn&&"".concat(Bn,"px")}},{key:"setViewSwitchLabel",value:function(w){this.controls.viewSwitch.textContent=w}},{key:"setPrevBtnDisabled",value:function(w){this.controls.prevBtn.disabled=w}},{key:"setNextBtnDisabled",value:function(w){this.controls.nextBtn.disabled=w}},{key:"changeView",value:function(w){var E=this.currentView,M=this.views[w];return M.id!==E.id&&(this.currentView=M,this._renderMethod="render",mk(this.datepicker,"changeView"),this.main.replaceChild(M.element,E.element)),this}},{key:"changeFocus",value:function(w){return this._renderMethod=HX(this,w)?"render":"refreshFocus",this.views.forEach(function(E){E.updateFocus()}),this}},{key:"update",value:function(){var w=$X(this.datepicker);return this._renderMethod=HX(this,w)?"render":"refresh",this.views.forEach(function(E){E.updateFocus(),E.updateSelection()}),this}},{key:"render",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,E=w&&this._renderMethod||"render";delete this._renderMethod,this.currentView[E]()}}])}();function ZJ(p,g,w,E,M,z){if(OK(p,M,z)){if(E(p)){var K=g(p,w);return ZJ(K,g,w,E,M,z)}return p}}function w6(p,g,w,E){var M=p.picker,z=M.currentView,K=z.step||1,Z=M.viewDate,ie,Ee;switch(z.id){case 0:E?Z=dk(Z,w*7):g.ctrlKey||g.metaKey?Z=fk(Z,w):Z=dk(Z,w),ie=dk,Ee=function(Ye){return z.disabled.includes(Ye)};break;case 1:Z=W6(Z,E?w*4:w),ie=W6,Ee=function(Ye){var Ut=new Date(Ye),Lt=z.year,Mt=z.disabled;return Ut.getFullYear()===Lt&&Mt.includes(Ut.getMonth())};break;default:Z=fk(Z,w*(E?4:1)*K),ie=fk,Ee=function(Ye){return z.disabled.includes(DS(Ye,K))}}Z=ZJ(Z,ie,w<0?-K:K,Ee,z.minDate,z.maxDate),Z!==void 0&&M.changeFocus(Z).render()}function Mne(p,g){if(g.key==="Tab"){WJ(p);return}var w=p.picker,E=w.currentView,M=E.id,z=E.isMinView;if(w.active)if(p.editMode)switch(g.key){case"Escape":w.hide();break;case"Enter":p.exitEditMode({update:!0,autohide:p.config.autohide});break;default:return}else switch(g.key){case"Escape":w.hide();break;case"ArrowLeft":if(g.ctrlKey||g.metaKey)G6(p,-1);else if(g.shiftKey){p.enterEditMode();return}else w6(p,g,-1,!1);break;case"ArrowRight":if(g.ctrlKey||g.metaKey)G6(p,1);else if(g.shiftKey){p.enterEditMode();return}else w6(p,g,1,!1);break;case"ArrowUp":if(g.ctrlKey||g.metaKey)UJ(p);else if(g.shiftKey){p.enterEditMode();return}else w6(p,g,-1,!0);break;case"ArrowDown":if(g.shiftKey&&!g.ctrlKey&&!g.metaKey){p.enterEditMode();return}w6(p,g,1,!0);break;case"Enter":z?p.setDate(w.viewDate):w.changeView(M-1).render();break;case"Backspace":case"Delete":p.enterEditMode();return;default:g.key.length===1&&!g.ctrlKey&&!g.metaKey&&p.enterEditMode();return}else switch(g.key){case"ArrowDown":case"Escape":w.show();break;case"Enter":p.update();break;default:return}g.preventDefault(),g.stopPropagation()}function Nne(p){p.config.showOnFocus&&!p._showing&&p.show()}function Pne(p,g){var w=g.target;(p.picker.active||p.config.showOnClick)&&(w._active=w===document.activeElement,w._clicking=setTimeout(function(){delete w._active,delete w._clicking},2e3))}function Bne(p,g){var w=g.target;w._clicking&&(clearTimeout(w._clicking),delete w._clicking,w._active&&p.enterEditMode(),delete w._active,p.config.showOnClick&&p.show())}function Ine(p,g){g.clipboardData.types.includes("text/plain")&&p.enterEditMode()}function Lne(p,g){var w=p.element;if(w===document.activeElement){var E=p.picker.element;zJ(g,function(M){return M===w||M===E})||WJ(p)}}function jJ(p,g){return p.map(function(w){return yM(w,g.format,g.locale)}).join(g.dateDelimiter)}function qJ(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,E=p.config,M=p.dates,z=p.rangepicker;if(g.length===0)return w?[]:void 0;var K=z&&p===z.datepickers[1],Z=g.reduce(function(ie,Ee){var de=vM(Ee,E.format,E.locale);if(de===void 0)return ie;if(E.pickLevel>0){var Ye=new Date(de);E.pickLevel===1?de=K?Ye.setMonth(Ye.getMonth()+1,0):Ye.setDate(1):de=K?Ye.setFullYear(Ye.getFullYear()+1,0,0):Ye.setMonth(0,1)}return OK(de,E.minDate,E.maxDate)&&!ie.includes(de)&&!E.datesDisabled.includes(de)&&!E.daysOfWeekDisabled.includes(new Date(de).getDay())&&ie.push(de),ie},[]);if(Z.length!==0)return E.multidate&&!w&&(Z=Z.reduce(function(ie,Ee){return M.includes(Ee)||ie.push(Ee),ie},M.filter(function(ie){return!Z.includes(ie)}))),E.maxNumberOfDates&&Z.length>E.maxNumberOfDates?Z.slice(E.maxNumberOfDates*-1):Z}function K6(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,E=p.config,M=p.picker,z=p.inputField;if(g&2){var K=M.active?E.pickLevel:E.startView;M.update().changeView(K).render(w)}g&1&&z&&(z.value=jJ(p.dates,E))}function VX(p,g,w){var E=w.clear,M=w.render,z=w.autohide;M===void 0&&(M=!0),M?z===void 0&&(z=p.config.autohide):z=!1;var K=qJ(p,g,E);K&&(K.toString()!==p.dates.toString()?(p.dates=K,K6(p,M?3:1),mk(p,"changeDate")):K6(p,1),z&&p.hide())}var _6=function(){function p(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;FS(this,p),g.datepicker=this,this.element=g;var M=this.config=Object.assign({buttonClass:w.buttonClass&&String(w.buttonClass)||"button",container:document.body,defaultViewDate:HS(),maxDate:void 0,minDate:void 0},IG(_M,this));this._options=w,Object.assign(M,IG(w,this));var z=this.inline=g.tagName!=="INPUT",K,Z;if(z)M.container=g,Z=MG(g.dataset.date,M.dateDelimiter),delete g.dataset.date;else{var ie=w.container?document.querySelector(w.container):null;ie&&(M.container=ie),K=this.inputField=g,K.classList.add("datepicker-input"),Z=MG(K.value,M.dateDelimiter)}if(E){var Ee=E.inputs.indexOf(K),de=E.datepickers;if(Ee<0||Ee>1||!Array.isArray(de))throw Error("Invalid rangepicker object.");de[Ee]=this,Object.defineProperty(this,"rangepicker",{get:function(){return E}})}this.dates=[];var Ye=qJ(this,Z);Ye&&Ye.length>0&&(this.dates=Ye),K&&(K.value=jJ(this.dates,M));var Ut=this.picker=new Rne(this);if(z)this.show();else{var Lt=Lne.bind(null,this),Mt=[[K,"keydown",Mne.bind(null,this)],[K,"focus",Nne.bind(null,this)],[K,"mousedown",Pne.bind(null,this)],[K,"click",Bne.bind(null,this)],[K,"paste",Ine.bind(null,this)],[document,"mousedown",Lt],[document,"touchstart",Lt],[window,"resize",Ut.place.bind(Ut)]];RK(this,Mt)}}return $S(p,[{key:"active",get:function(){return!!(this.picker&&this.picker.active)}},{key:"pickerElement",get:function(){return this.picker?this.picker.element:void 0}},{key:"setOptions",value:function(w){var E=this.picker,M=IG(w,this);Object.assign(this._options,w),Object.assign(this.config,M),E.setOptions(M),K6(this,3)}},{key:"show",value:function(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}},{key:"hide",value:function(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}},{key:"destroy",value:function(){return this.hide(),HJ(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}},{key:"getDate",value:function(){var w=this,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,M=E?function(z){return yM(z,E,w.config.locale)}:function(z){return new Date(z)};if(this.config.multidate)return this.dates.map(M);if(this.dates.length>0)return M(this.dates[0])}},{key:"setDate",value:function(){for(var w=arguments.length,E=new Array(w),M=0;M<w;M++)E[M]=arguments[M];var z=[].concat(E),K={},Z=AK(E);U6(Z)==="object"&&!Array.isArray(Z)&&!(Z instanceof Date)&&Z&&Object.assign(K,z.pop());var ie=Array.isArray(z[0])?z[0]:z;VX(this,ie,K)}},{key:"update",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!this.inline){var E={clear:!0,autohide:!!(w&&w.autohide)},M=MG(this.inputField.value,this.config.dateDelimiter);VX(this,M,E)}}},{key:"refresh",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;w&&typeof w!="string"&&(E=w,w=void 0);var M;w==="picker"?M=2:w==="input"?M=1:M=3,K6(this,M,!E)}},{key:"enterEditMode",value:function(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700","!border-primary-700"))}},{key:"exitEditMode",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!(this.inline||!this.editMode)){var E=Object.assign({update:!1},w);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700","!border-primary-700"),E.update&&this.update(E)}}}],[{key:"formatDate",value:function(w,E,M){return yM(w,E,M&&iM[M]||iM.en)}},{key:"parseDate",value:function(w,E,M){return vM(w,E,M&&iM[M]||iM.en)}},{key:"locales",get:function(){return iM}}])}();function zX(p){var g=Object.assign({},p);return delete g.inputs,delete g.allowOneSidedRange,delete g.maxNumberOfDates,g}function UX(p,g,w,E){RK(p,[[w,"changeDate",g]]),new _6(w,E,p)}function cM(p,g){if(!p._updating){p._updating=!0;var w=g.target;if(w.datepicker!==void 0){var E=p.datepickers,M={render:!1},z=p.inputs.indexOf(w),K=z===0?1:0,Z=E[z].dates[0],ie=E[K].dates[0];Z!==void 0&&ie!==void 0?z===0&&Z>ie?(E[0].setDate(ie,M),E[1].setDate(Z,M)):z===1&&Z<ie&&(E[0].setDate(Z,M),E[1].setDate(ie,M)):p.allowOneSidedRange||(Z!==void 0||ie!==void 0)&&(M.clear=!0,E[K].setDate(E[z].dates,M)),E[0].picker.update().render(),E[1].picker.update().render(),delete p._updating}}}var FG=function(){function p(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};FS(this,p);var E=Array.isArray(w.inputs)?w.inputs:Array.from(g.querySelectorAll("input"));if(!(E.length<2)){g.rangepicker=this,this.element=g,this.inputs=E.slice(0,2),this.allowOneSidedRange=!!w.allowOneSidedRange;var M=cM.bind(null,this),z=zX(w),K=[];Object.defineProperty(this,"datepickers",{get:function(){return K}}),UX(this,M,this.inputs[0],z),UX(this,M,this.inputs[1],z),Object.freeze(K),K[0].dates.length>0?cM(this,{target:this.inputs[0]}):K[1].dates.length>0&&cM(this,{target:this.inputs[1]})}}return $S(p,[{key:"dates",get:function(){return this.datepickers.length===2?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}},{key:"setOptions",value:function(w){this.allowOneSidedRange=!!w.allowOneSidedRange;var E=zX(w);this.datepickers[0].setOptions(E),this.datepickers[1].setOptions(E)}},{key:"destroy",value:function(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),HJ(this),delete this.element.rangepicker}},{key:"getDates",value:function(){var w=this,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,M=E?function(z){return yM(z,E,w.datepickers[0].config.locale)}:function(z){return new Date(z)};return this.dates.map(function(z){return z===void 0?z:M(z)})}},{key:"setDates",value:function(w,E){var M=mm(this.datepickers,2),z=M[0],K=M[1],Z=this.dates;this._updating=!0,z.setDate(w),K.setDate(E),delete this._updating,K.dates[0]!==Z[1]?cM(this,{target:this.inputs[1]}):z.dates[0]!==Z[0]&&cM(this,{target:this.inputs[0]})}}])}(),Y6=function(){return Y6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(p[M]=g[M])}return p},Y6.apply(this,arguments)},Eh={defaultDatepickerId:null,autohide:!1,format:"mm/dd/yyyy",maxDate:null,minDate:null,orientation:"bottom",buttons:!1,autoSelectToday:0,title:null,language:"en",rangePicker:!1,onShow:function(){},onHide:function(){}},Fne={id:null,override:!0},GJ=function(){function p(g,w,E){g===void 0&&(g=null),w===void 0&&(w=Eh),E===void 0&&(E=Fne),this._instanceId=E.id?E.id:g.id,this._datepickerEl=g,this._datepickerInstance=null,this._options=Y6(Y6({},Eh),w),this._initialized=!1,this.init(),Ws.addInstance("Datepicker",this,this._instanceId,E.override)}return p.prototype.init=function(){this._datepickerEl&&!this._initialized&&(this._options.rangePicker?this._datepickerInstance=new FG(this._datepickerEl,this._getDatepickerOptions(this._options)):this._datepickerInstance=new _6(this._datepickerEl,this._getDatepickerOptions(this._options)),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this._initialized=!1,this._datepickerInstance.destroy())},p.prototype.removeInstance=function(){this.destroy(),Ws.removeInstance("Datepicker",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getDatepickerInstance=function(){return this._datepickerInstance},p.prototype.getDate=function(){if(this._options.rangePicker&&this._datepickerInstance instanceof FG)return this._datepickerInstance.getDates();if(!this._options.rangePicker&&this._datepickerInstance instanceof _6)return this._datepickerInstance.getDate()},p.prototype.setDate=function(g){if(this._options.rangePicker&&this._datepickerInstance instanceof FG)return this._datepickerInstance.setDates(g);if(!this._options.rangePicker&&this._datepickerInstance instanceof _6)return this._datepickerInstance.setDate(g)},p.prototype.show=function(){this._datepickerInstance.show(),this._options.onShow(this)},p.prototype.hide=function(){this._datepickerInstance.hide(),this._options.onHide(this)},p.prototype._getDatepickerOptions=function(g){var w={};return g.buttons&&(w.todayBtn=!0,w.clearBtn=!0,g.autoSelectToday&&(w.todayBtnMode=1)),g.autohide&&(w.autohide=!0),g.format&&(w.format=g.format),g.maxDate&&(w.maxDate=g.maxDate),g.minDate&&(w.minDate=g.minDate),g.orientation&&(w.orientation=g.orientation),g.title&&(w.title=g.title),g.language&&(w.language=g.language),w},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p}();function NK(){document.querySelectorAll("[datepicker], [inline-datepicker], [date-rangepicker]").forEach(function(p){if(p){var g=p.hasAttribute("datepicker-buttons"),w=p.hasAttribute("datepicker-autoselect-today"),E=p.hasAttribute("datepicker-autohide"),M=p.getAttribute("datepicker-format"),z=p.getAttribute("datepicker-max-date"),K=p.getAttribute("datepicker-min-date"),Z=p.getAttribute("datepicker-orientation"),ie=p.getAttribute("datepicker-title"),Ee=p.getAttribute("datepicker-language"),de=p.hasAttribute("date-rangepicker");new GJ(p,{buttons:g||Eh.buttons,autoSelectToday:w||Eh.autoSelectToday,autohide:E||Eh.autohide,format:M||Eh.format,maxDate:z||Eh.maxDate,minDate:K||Eh.minDate,orientation:Z||Eh.orientation,title:ie||Eh.title,language:Ee||Eh.language,rangePicker:de||Eh.rangePicker})}else console.error("The datepicker element does not exist. Please check the datepicker attribute.")})}typeof window<"u"&&(window.Datepicker=GJ,window.initDatepickers=NK);function $ne(){rK(),aK(),iK(),cK(),bK(),vK(),yK(),wK(),CK(),SK(),xK(),EK(),_K(),NK()}typeof window<"u"&&(window.initFlowbite=$ne);var Hne=new Mee("load",[rK,aK,iK,cK,bK,vK,yK,wK,CK,SK,xK,EK,_K,NK]);Hne.init();var Vne={exports:{}};(function(p){(function(){var g=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},w=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},E=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},M=function(e,n){return z(function(o,r){return e.eq(n(o),n(r))})},z=function(e){return{eq:e}},K=z(function(e,n){return e===n}),Z=K,ie=function(e){return z(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,i=0;i<r;i++)if(!e.eq(n[i],o[i]))return!1;return!0})},Ee=function(e,n){return M(ie(e),function(o){return E(o,n)})},de=function(e){return z(function(n,o){var r=Object.keys(n),i=Object.keys(o);if(!Ee(Z).eq(r,i))return!1;for(var u=r.length,m=0;m<u;m++){var y=r[m];if(!e.eq(n[y],o[y]))return!1}return!0})},Ye=z(function(e,n){if(e===n)return!0;var o=g(e),r=g(n);return o!==r?!1:w(o)?e===n:o==="array"?ie(Ye).eq(e,n):o==="object"?de(Ye).eq(e,n):!1});const Ut=Object.getPrototypeOf,Lt=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Mt=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Lt(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Ct=e=>n=>Mt(n)===e,Xe=e=>n=>typeof n===e,dn=e=>n=>e===n,Nt=(e,n)=>Ke(e)&&Lt(e,n,(o,r)=>Ut(o)===r),ce=Ct("string"),Ke=Ct("object"),Kn=e=>Nt(e,Object),jt=Ct("array"),ne=dn(null),Jt=Xe("boolean"),Bn=dn(void 0),Qt=e=>e==null,Fe=e=>!Qt(e),ve=Xe("function"),so=Xe("number"),Me=(e,n)=>{if(jt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Pe=()=>{},N=(e,n)=>(...o)=>e(n.apply(null,o)),an=(e,n)=>o=>e(n(o)),ct=e=>()=>e,$n=e=>e,sn=(e,n)=>e===n;function nt(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const eo=e=>n=>!e(n),ms=e=>()=>{throw new Error(e)},to=e=>e(),os=e=>{e()},tt=ct(!1),yt=ct(!0);class W{constructor(n,o){this.tag=n,this.value=o}static some(n){return new W(!0,n)}static none(){return W.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?W.some(n(this.value)):W.none()}bind(n){return this.tag?n(this.value):W.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:W.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Fe(n)?W.some(n):W.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}W.singletonNone=new W(!1);const ta=Array.prototype.slice,uo=Array.prototype.indexOf,qo=Array.prototype.push,Ho=(e,n)=>uo.call(e,n),Wi=(e,n)=>{const o=Ho(e,n);return o===-1?W.none():W.some(o)},et=(e,n)=>Ho(e,n)>-1,Tt=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return!0}return!1},dt=(e,n)=>{const o=e.length,r=new Array(o);for(let i=0;i<o;i++){const u=e[i];r[i]=n(u,i)}return r},Se=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];n(i,o)}},_o=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},To=(e,n)=>{const o=[],r=[];for(let i=0,u=e.length;i<u;i++){const m=e[i];(n(m,i)?o:r).push(m)}return{pass:o,fail:r}},Zt=(e,n)=>{const o=[];for(let r=0,i=e.length;r<i;r++){const u=e[r];n(u,r)&&o.push(u)}return o},ss=(e,n,o)=>(_o(e,(r,i)=>{o=n(o,r,i)}),o),Mo=(e,n,o)=>(Se(e,(r,i)=>{o=n(o,r,i)}),o),$r=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++){const u=e[r];if(n(u,r))return W.some(u);if(o(u,r))break}return W.none()},Po=(e,n)=>$r(e,n,tt),Is=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return W.some(o)}return W.none()},Xa=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!jt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);qo.apply(n,e[o])}return n},ws=(e,n)=>Xa(dt(e,n)),bs=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const i=e[o];if(n(i,o)!==!0)return!1}return!0},vs=e=>{const n=ta.call(e,0);return n.reverse(),n},qr=(e,n)=>Zt(e,o=>!et(n,o)),Cs=(e,n)=>{const o={};for(let r=0,i=e.length;r<i;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Vo=(e,n)=>{const o=ta.call(e,0);return o.sort(n),o},vc=(e,n)=>n>=0&&n<e.length?W.some(e[n]):W.none(),fo=e=>vc(e,0),cs=e=>vc(e,e.length-1),_r=ve(Array.from)?Array.from:e=>ta.call(e),Oi=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return W.none()},Zi=(e,n)=>{const o=[],r=ve(n)?i=>Tt(o,u=>n(u,i)):i=>et(o,i);for(let i=0,u=e.length;i<u;i++){const m=e[i];r(m)||o.push(m)}return o},Go=Object.keys,Vc=Object.hasOwnProperty,kt=(e,n)=>{const o=Go(e);for(let r=0,i=o.length;r<i;r++){const u=o[r],m=e[u];n(m,u)}},po=(e,n)=>Hr(e,(o,r)=>({k:r,v:n(o,r)})),Hr=(e,n)=>{const o={};return kt(e,(r,i)=>{const u=n(r,i);o[u.k]=u.v}),o},Vr=e=>(n,o)=>{e[o]=n},Ba=(e,n,o,r)=>{kt(e,(i,u)=>{(n(i,u)?o:r)(i,u)})},Ja=(e,n)=>{const o={},r={};return Ba(e,n,Vr(o),Vr(r)),{t:o,f:r}},Wo=(e,n)=>{const o={};return Ba(e,n,Vr(o),Pe),o},hi=(e,n)=>{const o=[];return kt(e,(r,i)=>{o.push(n(r,i))}),o},Di=e=>hi(e,$n),zo=(e,n)=>Sn(e,n)?W.from(e[n]):W.none(),Sn=(e,n)=>Vc.call(e,n),Ys=(e,n)=>Sn(e,n)&&e[n]!==void 0&&e[n]!==null,Qa=(e,n,o=Ye)=>de(o).eq(e,n),ul=e=>{const n={};return Se(e,o=>{n[o]={}}),Go(n)},dl=e=>e.length!==void 0,hs=Array.isArray,pr=e=>{if(hs(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Zs=(e,n,o)=>{if(!e)return!1;if(o=o||e,dl(e)){for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Sn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Ta=(e,n)=>{const o=[];return Zs(e,(r,i)=>{o.push(n(r,i,e))}),o},yc=(e,n)=>{const o=[];return Zs(e,(r,i)=>{(!n||n(r,i,e))&&o.push(r)}),o},Tr=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},pe=(e,n,o,r)=>{let i=Bn(o)?e[0]:o;for(let u=0;u<e.length;u++)i=n.call(r,i,e[u],u);return i},fe=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e))return r;return-1},He=e=>e[e.length-1],qe=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},gn=(e,n,o,r)=>{const i=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!i,m=e.isiOS()||e.isAndroid(),y=m||r("(pointer:coarse)"),S=i||!u&&m&&r("(min-device-width:768px)"),O=u||m&&!S,L=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,F=!O&&!S&&!L;return{isiPad:ct(i),isiPhone:ct(u),isTablet:ct(S),isPhone:ct(O),isTouch:ct(y),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ct(L),isDesktop:ct(F)}},Nn=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Un=(e,n)=>{const o=Nn(e,n);if(!o)return{major:0,minor:0};const r=i=>Number(n.replace(o,"$"+i));return Wn(r(1),r(2))},or=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?_e():Un(e,o)},_e=()=>Wn(0,0),Wn=(e,n)=>({major:e,minor:n}),Xs={nu:Wn,detect:or,unknown:_e},ur=(e,n)=>Oi(n.brands,o=>{const r=o.brand.toLowerCase();return Po(e,i=>{var u;return r===((u=i.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(i=>({current:i.name,version:Xs.nu(parseInt(o.version,10),0)}))}),ka=(e,n)=>{const o=String(n).toLowerCase();return Po(e,r=>r.search(o))},Zo=(e,n)=>ka(e,n).map(o=>{const r=Xs.detect(o.versionRegexes,n);return{current:o.name,version:r}}),zc=(e,n)=>ka(e,n).map(o=>{const r=Xs.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Gr=(e,n)=>e.substring(n),Aa=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Ps=(e,n)=>es(e,n)?Gr(e,n.length):e,Ko=(e,n,o=0,r)=>{const i=e.indexOf(n,o);return i!==-1?Bn(r)?!0:i+n.length<=r:!1},es=(e,n)=>Aa(e,n,0),na=(e,n)=>Aa(e,n,e.length-n.length),oa=e=>n=>n.replace(e,""),kr=oa(/^\s+|\s+$/g),Ji=oa(/^\s+/g),Ri=oa(/\s+$/g),xo=e=>e.length>0,sa=e=>!xo(e),zr=(e,n)=>n<=0?"":new Array(n+1).join(e),Qi=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?W.none():W.some(o)},ei=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ar=e=>n=>Ko(n,e),Ls=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ko(e,"edge/")&&Ko(e,"chrome")&&Ko(e,"safari")&&Ko(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ei],search:e=>Ko(e,"chrome")&&!Ko(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ko(e,"msie")||Ko(e,"trident")},{name:"Opera",versionRegexes:[ei,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ar("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ar("firefox")},{name:"Safari",versionRegexes:[ei,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ko(e,"safari")||Ko(e,"mobile/"))&&Ko(e,"applewebkit")}],Cf=[{name:"Windows",search:Ar("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ko(e,"iphone")||Ko(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ar("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ar("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ar("linux"),versionRegexes:[]},{name:"Solaris",search:Ar("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ar("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ar("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ji={browsers:ct(Ls),oses:ct(Cf)},Uo="Edge",Oa="Chromium",ma="IE",br="Opera",$l="Firefox",Da="Safari",Ia=()=>ec({current:void 0,version:Xs.unknown()}),ec=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isEdge:r(Uo),isChromium:r(Oa),isIE:r(ma),isOpera:r(br),isFirefox:r($l),isSafari:r(Da)}},Mi={unknown:Ia,nu:ec,edge:ct(Uo),chromium:ct(Oa),ie:ct(ma),opera:ct(br),firefox:ct($l),safari:ct(Da)},uu="Windows",fl="iOS",Uc="Android",ti="Linux",Or="macOS",du="Solaris",fu="FreeBSD",mu="ChromeOS",hu=()=>vr({current:void 0,version:Xs.unknown()}),vr=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isWindows:r(uu),isiOS:r(fl),isAndroid:r(Uc),isMacOS:r(Or),isLinux:r(ti),isSolaris:r(du),isFreeBSD:r(fu),isChromeOS:r(mu)}},gi={unknown:hu,nu:vr,windows:ct(uu),ios:ct(fl),android:ct(Uc),linux:ct(ti),macos:ct(Or),solaris:ct(du),freebsd:ct(fu),chromeos:ct(mu)},he={detect:(e,n,o)=>{const r=ji.browsers(),i=ji.oses(),u=n.bind(S=>ur(r,S)).orThunk(()=>Zo(r,e)).fold(Mi.unknown,Mi.nu),m=zc(i,e).fold(gi.unknown,gi.nu),y=gn(m,u,e,o);return{browser:u,os:m,deviceType:y}}},Re=e=>window.matchMedia(e).matches;let at=qe(()=>he.detect(window.navigator.userAgent,W.from(window.navigator.userAgentData),Re));const St=()=>at(),en=window.navigator.userAgent,io=St(),ls=io.browser,vo=io.os,qt=io.deviceType,sr=en.indexOf("Windows Phone")!==-1,pn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:ls.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!ls.isIE(),windowsPhone:sr,browser:{current:ls.current,version:ls.version,isChromium:ls.isChromium,isEdge:ls.isEdge,isFirefox:ls.isFirefox,isIE:ls.isIE,isOpera:ls.isOpera,isSafari:ls.isSafari},os:{current:vo.current,version:vo.version,isAndroid:vo.isAndroid,isChromeOS:vo.isChromeOS,isFreeBSD:vo.isFreeBSD,isiOS:vo.isiOS,isLinux:vo.isLinux,isMacOS:vo.isMacOS,isSolaris:vo.isSolaris,isWindows:vo.isWindows},deviceType:{isDesktop:qt.isDesktop,isiPad:qt.isiPad,isiPhone:qt.isiPhone,isPhone:qt.isPhone,isTablet:qt.isTablet,isTouch:qt.isTouch,isWebView:qt.isWebView}},Dr=/^\s*|\s*$/g,wc=e=>Qt(e)?"":(""+e).replace(Dr,""),H=(e,n)=>n?n==="array"&&hs(e)?!0:typeof e===n:e!==void 0,oe=(e,n,o={})=>{const r=ce(e)?e.split(n||","):e||[];let i=r.length;for(;i--;)o[r[i]]={};return o},ye=Sn,Ie=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const i in r)if(Sn(r,i)){const u=r[i];u!==void 0&&(e[i]=u)}}return e},lt=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Zs(e,(i,u)=>n.call(r,i,u,o)===!1?!1:(lt(i,n,o,r),!0)))},vt={trim:wc,isArray:hs,is:H,toArray:pr,makeMap:oe,each:Zs,map:Ta,grep:yc,inArray:Tr,hasOwn:ye,extend:Ie,walk:lt,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,i=o.length;r<i&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>jt(e)?e:e===""?[]:Ta(e.split(n||","),wc),_addCacheSuffix:e=>{const n=pn.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Os=(e,n,o=sn)=>e.exists(r=>o(r,n)),ha=(e,n,o=sn)=>Xn(e,n,o).getOr(e.isNone()&&n.isNone()),ni=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Xn=(e,n,o)=>e.isSome()&&n.isSome()?W.some(o(e.getOrDie(),n.getOrDie())):W.none(),oi=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?W.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):W.none(),lr=(e,n)=>e?W.some(n):W.none(),ed=typeof window<"u"?window:Function("return this;")(),xs=(e,n)=>{let o=n??ed;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},ml=(e,n)=>{const o=e.split(".");return xs(o,n)},gm=(e,n)=>ml(e,n),m1=(e,n)=>{const o=gm(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},Js=Object.getPrototypeOf,pm=e=>m1("HTMLElement",e),yr=e=>{const n=ml("ownerDocument.defaultView",e);return Ke(e)&&(pm(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Js(e).constructor.name))},ga=8,Wc=9,Cc=11,Ld=1,La=3,yo=e=>e.dom.nodeName.toLowerCase(),hl=e=>e.dom.nodeType,Sc=e=>n=>hl(n)===e,h1=e=>hl(e)===ga||yo(e)==="#comment",Kr=e=>Fa(e)&&yr(e.dom),Fa=Sc(Ld),Yr=Sc(La),Oh=Sc(Wc),Sf=Sc(Cc),si=e=>n=>Fa(n)&&yo(n)===e,Dh=(e,n,o)=>{if(ce(o)||Jt(o)||so(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},js=(e,n,o)=>{Dh(e.dom,n,o)},Zc=(e,n)=>{const o=e.dom;kt(n,(r,i)=>{Dh(o,i,r)})},ri=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},wr=(e,n)=>W.from(ri(e,n)),pi=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Cr=(e,n)=>{e.dom.removeAttribute(n)},Rh=e=>{const n=e.dom.attributes;return n==null||n.length===0},gu=e=>Mo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),pu=(e,n)=>{const o=ri(e,n);return o===void 0||o===""?[]:o.split(" ")},xf=(e,n,o)=>{const i=pu(e,n).concat([o]);return js(e,n,i.join(" ")),!0},bu=(e,n,o)=>{const r=Zt(pu(e,n),i=>i!==o);return r.length>0?js(e,n,r.join(" ")):Cr(e,n),!1},xc=e=>e.dom.classList!==void 0,Ef=e=>pu(e,"class"),Sr=(e,n)=>xf(e,"class",n),_f=(e,n)=>bu(e,"class",n),Mh=(e,n)=>et(Ef(e),n)?_f(e,n):Sr(e,n),gl=(e,n)=>{xc(e)?e.dom.classList.add(n):Sr(e,n)},Nh=e=>{(xc(e)?e.dom.classList:Ef(e)).length===0&&Cr(e,"class")},vu=(e,n)=>{xc(e)?e.dom.classList.remove(n):_f(e,n),Nh(e)},Ph=(e,n)=>{const o=xc(e)?e.dom.classList.toggle(n):Mh(e,n);return Nh(e),o},Hl=(e,n)=>xc(e)&&e.dom.classList.contains(n),Bh=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const i="HTML does not have a single root node";throw console.error(i,e),new Error(i)}return yu(r.childNodes[0])},Tf=(e,n)=>{const r=(n||document).createElement(e);return yu(r)},bm=(e,n)=>{const r=(n||document).createTextNode(e);return yu(r)},yu=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},be={fromHtml:Bh,fromTag:Tf,fromText:bm,fromDom:yu,fromPoint:(e,n,o)=>W.from(e.dom.elementFromPoint(n,o)).map(yu)},Vl=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let i=n(e);do i=i.bind(r);while(i.isSome());return o},pl=(e,n)=>{const o=e.dom;if(o.nodeType!==Ld)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Ih=e=>e.nodeType!==Ld&&e.nodeType!==Wc&&e.nodeType!==Cc||e.childElementCount===0,g1=(e,n)=>{const o=n===void 0?document:n.dom;return Ih(o)?[]:dt(o.querySelectorAll(e),be.fromDom)},wu=(e,n)=>{const o=n===void 0?document:n.dom;return Ih(o)?W.none():W.from(o.querySelector(e)).map(be.fromDom)},ro=(e,n)=>e.dom===n.dom,Rr=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Ec=e=>be.fromDom(e.dom.ownerDocument),Cu=e=>Oh(e)?e:Ec(e),kf=e=>be.fromDom(Cu(e).dom.documentElement),Fd=e=>be.fromDom(Cu(e).dom.defaultView),$a=e=>W.from(e.dom.parentNode).map(be.fromDom),Af=e=>W.from(e.dom.parentElement).map(be.fromDom),zl=(e,n)=>{const o=ve(n)?n:tt;let r=e.dom;const i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,m=be.fromDom(u);if(i.push(m),o(m)===!0)break;r=u}return i},Of=e=>{const n=o=>Zt(o,r=>!ro(e,r));return $a(e).map(ra).map(n).getOr([])},Ul=e=>W.from(e.dom.previousSibling).map(be.fromDom),bi=e=>W.from(e.dom.nextSibling).map(be.fromDom),Lh=e=>vs(Vl(e,Ul)),$d=e=>Vl(e,bi),ra=e=>dt(e.dom.childNodes,be.fromDom),Ni=(e,n)=>{const o=e.dom.childNodes;return W.from(o[n]).map(be.fromDom)},ai=e=>Ni(e,0),td=e=>Ni(e,e.dom.childNodes.length-1),Hd=e=>e.dom.childNodes.length,Fh=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return be.fromDom(n)},Vd=e=>Sf(e)&&Fe(e.dom.host),jc=e=>be.fromDom(e.dom.getRootNode()),Df=e=>Vd(e)?e:Fh(Cu(e)),Wg=e=>Vd(e)?e:be.fromDom(Cu(e).dom.body),$h=e=>{const n=jc(e);return Vd(n)?W.some(n):W.none()},Xb=e=>be.fromDom(e.dom.host),ym=e=>{if(Fe(e.target)){const n=be.fromDom(e.target);if(Fa(n)&&zd(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return fo(o)}}return W.from(e.target)},zd=e=>Fe(e.dom.shadowRoot),nd=e=>{const n=Yr(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return $h(be.fromDom(n)).fold(()=>o.body.contains(n),an(nd,Xb))};var Ud=(e,n,o,r,i)=>e(o,r)?W.some(o):ve(i)&&i(o)?W.none():n(o,r,i);const qs=(e,n,o)=>{let r=e.dom;const i=ve(o)?o:tt;for(;r.parentNode;){r=r.parentNode;const u=be.fromDom(r);if(n(u))return W.some(u);if(i(u))break}return W.none()},Qs=(e,n,o)=>Ud((i,u)=>u(i),qs,e,n,o),tc=(e,n)=>{const o=e.dom;return o.parentNode?od(be.fromDom(o.parentNode),r=>!ro(e,r)&&n(r)):W.none()},od=(e,n)=>{const o=i=>n(be.fromDom(i));return Po(e.dom.childNodes,o).map(be.fromDom)},Hh=(e,n)=>{const o=r=>{for(let i=0;i<r.childNodes.length;i++){const u=be.fromDom(r.childNodes[i]);if(n(u))return W.some(u);const m=o(r.childNodes[i]);if(m.isSome())return m}return W.none()};return o(e.dom)},Ur=(e,n,o)=>qs(e,r=>pl(r,n),o),mn=(e,n)=>wu(n,e),Wl=(e,n,o)=>Ud((i,u)=>pl(i,u),Ur,e,n,o),wm=e=>Wl(e,"[contenteditable]"),pa=(e,n=!1)=>nd(e)?e.dom.isContentEditable:wm(e).fold(ct(n),o=>ts(o)==="true"),ts=e=>e.dom.contentEditable,Su=e=>e.style!==void 0&&ve(e.style.getPropertyValue),Vh=(e,n,o)=>{if(!ce(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Su(e)&&e.style.setProperty(n,o)},Wd=(e,n)=>{Su(e)&&e.style.removeProperty(n)},Zg=(e,n,o)=>{const r=e.dom;Vh(r,n,o)},Yn=(e,n)=>{const o=e.dom;kt(n,(r,i)=>{Vh(o,i,r)})},Wr=(e,n)=>{const o=e.dom,i=window.getComputedStyle(o).getPropertyValue(n);return i===""&&!nd(e)?sd(o,n):i},sd=(e,n)=>Su(e)?e.style.getPropertyValue(n):"",Ra=(e,n)=>{const o=e.dom,r=sd(o,n);return W.from(r).filter(i=>i.length>0)},vi=e=>{const n={},o=e.dom;if(Su(o))for(let r=0;r<o.style.length;r++){const i=o.style.item(r);n[i]=o.style[i]}return n},nc=(e,n)=>{const o=e.dom;Wd(o,n),Os(wr(e,"style").map(kr),"")&&Cr(e,"style")},aa=e=>e.dom.offsetWidth,ii=(e,n)=>{$a(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},qi=(e,n)=>{bi(e).fold(()=>{$a(e).each(i=>{rr(i,n)})},r=>{ii(r,n)})},Cm=(e,n)=>{ai(e).fold(()=>{rr(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},rr=(e,n)=>{e.dom.appendChild(n.dom)},rd=(e,n)=>{ii(e,n),rr(n,e)},dr=(e,n)=>{Se(n,(o,r)=>{const i=r===0?e:n[r-1];qi(i,o)})},xu=(e,n)=>{Se(n,o=>{rr(e,o)})},ad=e=>{e.dom.textContent="",Se(ra(e),n=>{gs(n)})},gs=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},_c=e=>{const n=ra(e);n.length>0&&dr(e,n),gs(e)},jg=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,ra(be.fromDom(r))},Zl=e=>dt(e,be.fromDom),Ds=e=>e.dom.innerHTML,Eu=(e,n)=>{const r=Ec(e).dom,i=be.fromDom(r.createDocumentFragment()),u=jg(n,r);xu(i,u),ad(e),rr(e,i)},Pi=e=>{const n=be.fromTag("div"),o=be.fromDom(e.dom.cloneNode(!0));return rr(n,o),Ds(n)},co=(e,n,o,r,i,u,m)=>({target:e,x:n,y:o,stop:r,prevent:i,kill:u,raw:m}),id=e=>{const n=be.fromDom(ym(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),i=N(r,o);return co(n,e.clientX,e.clientY,o,r,i,e)},Rf=(e,n)=>o=>{e(o)&&n(id(o))},Sm=(e,n,o,r,i)=>{const u=Rf(o,r);return e.dom.addEventListener(n,u,i),{unbind:nt(I,e,n,u,i)}},k=(e,n,o,r)=>Sm(e,n,o,r,!1),I=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},q=(e,n)=>({left:e,top:n,translate:(r,i)=>q(e+r,n+i)}),me=q,xe=e=>{const n=e.getBoundingClientRect();return me(n.left,n.top)},mt=(e,n)=>e!==void 0?e:n!==void 0?n:0,kn=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,i=n.documentElement;if(o===e.dom)return me(o.offsetLeft,o.offsetTop);const u=mt(r==null?void 0:r.pageYOffset,i.scrollTop),m=mt(r==null?void 0:r.pageXOffset,i.scrollLeft),y=mt(i.clientTop,o.clientTop),S=mt(i.clientLeft,o.clientLeft);return Jn(e).translate(m-S,u-y)},Jn=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?me(r.offsetLeft,r.offsetTop):nd(e)?xe(n):me(0,0)},Dn=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return me(o,r)},An=(e,n,o)=>{const i=(o!==void 0?o.dom:document).defaultView;i&&i.scrollTo(e,n)},Rs=(e,n)=>{St().browser.isSafari()&&ve(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},xr=e=>{const n=e===void 0?window:e;return St().browser.isFirefox()?W.none():W.from(n.visualViewport)},oc=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),jl=e=>{const n=e===void 0?window:e,o=n.document,r=Dn(be.fromDom(o));return xr(n).fold(()=>{const i=n.document.documentElement,u=i.clientWidth,m=i.clientHeight;return oc(r.left,r.top,u,m)},i=>oc(Math.max(i.pageLeft,r.left),Math.max(i.pageTop,r.top),i.width,i.height))},Mf=(e,n)=>Zt(ra(e),n),zh=(e,n)=>{let o=[];return Se(ra(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(zh(r,n))}),o},ci=(e,n)=>g1(n,e),Uh=(e,n,o)=>qs(e,n,o).isSome(),Jb=(e,n)=>tc(e,n).isSome(),qg=(e,n)=>Hh(e,n).isSome();class Ha{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,i){if(n){if(!i&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let m=n.parentNode;m&&m!==this.rootNode;m=m.parentNode)if(u=m[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const i=n.parentNode;if(i&&i!==this.rootNode)return i}}}const Gg="\uFEFF",Xr="",Qb=e=>e===Gg,Bi=e=>e.replace(/\uFEFF/g,""),On=/^[ \t\r\n]*$/,Tc=e=>On.test(e),xm=e=>{for(const n of e)if(!Qb(n))return!1;return!0},Wh=e=>" \f	\v".indexOf(e)!==-1,Kg=e=>e===`
`||e==="\r",p1=(e,n)=>n<e.length&&n>=0?Kg(e[n]):!1,bl=(e,n=4,o=!0,r=!0)=>{const i=zr(" ",n),u=e.replace(/\t/g,i);return Mo(u,(y,S)=>Wh(S)||S===Xr?y.pcIsSpace||y.str===""&&o||y.str.length===u.length-1&&r||p1(u,y.str.length+1)?{pcIsSpace:!1,str:y.str+Xr}:{pcIsSpace:!0,str:y.str+" "}:{pcIsSpace:Kg(S),str:y.str+S},{pcIsSpace:!1,str:""}).str},_u=e=>n=>!!n&&n.nodeType===e,Zd=e=>!!e&&!Object.getPrototypeOf(e),Wt=_u(1),qc=e=>Wt(e)&&Kr(be.fromDom(e)),Yg=e=>Wt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Nf=e=>{const n=e.toLowerCase();return o=>Fe(o)&&o.nodeName.toLowerCase()===n},vl=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return et(n,r)}return!1}},Zh=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Wt(r)){const i=r.ownerDocument.defaultView;if(i)for(let u=0;u<o.length;u++){const m=i.getComputedStyle(r,null);if((m?m.getPropertyValue(e):null)===o[u])return!0}}return!1}},jd=e=>n=>Wt(n)&&n.hasAttribute(e),Pf=e=>Wt(e)&&e.hasAttribute("data-mce-bogus"),jh=e=>Wt(e)&&e.getAttribute("data-mce-bogus")==="all",ql=e=>Wt(e)&&e.tagName==="TABLE",ev=e=>n=>!!(qc(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),ar=vl(["textarea","input"]),pt=_u(3),yi=_u(4),Gl=_u(7),ba=_u(8),Em=_u(9),ia=_u(11),Lo=Nf("br"),Xg=Nf("img"),rt=ev("true"),Fo=ev("false"),qh=vl(["td","th"]),Jr=vl(["td","th","caption"]),wi=vl(["video","audio","object","embed"]),tv=Nf("li"),kc=Nf("details"),Vy=Nf("summary"),cd={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},nv=(e,n,o)=>{const r=be.fromDom(n),i=be.fromDom(e),u=o.getWhitespaceElements();return Uh(i,y=>Sn(u,yo(y)),nt(ro,r))},Ac=e=>Wt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Bo=(e,n)=>Wt(e)&&Sn(n.getNonEmptyElements(),e.nodeName),Tu=jd("data-mce-bookmark"),Bf=e=>Af(be.fromDom(e)).exists(n=>!pa(n)),ca=(e,n,o)=>Tc(e.data)&&!nv(e,n,o),Jg=(e,n,o,r)=>pt(e)&&!ca(e,n,o)&&(!r.includeZwsp||!xm(e.data)),ku=(e,n,o,r)=>ve(r.isContent)&&r.isContent(n)||Bo(n,e)||Tu(n)||Ac(n)||Jg(n,o,e,r)||Fo(n)||rt(n)&&Bf(n),Au=(e,n,o)=>{const r={...cd,...o};if(r.checkRootAsContent&&ku(e,n,n,r))return!1;let i=n.firstChild,u=0;if(!i)return!0;const m=new Ha(i,n);do{if(r.skipBogus&&Wt(i)){const y=i.getAttribute("data-mce-bogus");if(y){i=m.next(y==="all");continue}}if(ba(i)){i=m.next(!0);continue}if(Lo(i)){u++,i=m.next();continue}if(ku(e,i,n,r))return!1;i=m.next()}while(i);return u<=1},Bs=(e,n,o)=>Au(e,n.dom,{checkRootAsContent:!0,...o}),_m=(e,n,o)=>ku(e,n,n,{includeZwsp:cd.includeZwsp,...o}),Be=e=>{let n=e;return{get:()=>n,set:i=>{n=i}}},Oc=e=>{const n=Be(W.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(W.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:y=>{o(),n.set(W.some(y))}}},Tm=e=>{const n=Be(W.none()),o=()=>n.get().each(y=>clearInterval(y));return{clear:()=>{o(),n.set(W.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:y=>{o(),n.set(W.some(setInterval(y,e)))}}},Ci=()=>{const e=Oc(Pe);return{...e,on:o=>e.get().each(o)}},Dc=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},Mr=e=>Dc(e)!=="html",fr=e=>Mr(e.nodeName),zy=e=>Dc(e.nodeName),_=["svg","math"],R=()=>{const e=Ci(),n=()=>e.get().map(zy).getOr("html");return{track:i=>(fr(i)?e.set(i):e.get().exists(u=>!u.contains(i))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},j="data-mce-block",te=e=>Zt(Go(e),n=>!/[A-Z]/.test(n)),Te=e=>dt(te(e),n=>{const o=CSS.escape(n);return`${o}:`+dt(_,r=>`not(${r} ${o})`).join(":")}).join(","),ot=(e,n)=>Fe(n.querySelector(e))?(n.setAttribute(j,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(j),!1),At=(e,n)=>{const o=Te(e.getTransparentElements()),r=Te(e.getBlockElements());return Zt(n.querySelectorAll(o),i=>ot(r,i))},on=(e,n,o)=>{var r;const i=o?"lastChild":"firstChild";for(let u=n[i];u;u=u[i])if(Au(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},Zn=(e,n,o)=>{const r=document.createRange(),i=n.parentNode;if(i){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();on(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const m=r.extractContents();on(e,m,!1),Au(e,u,{checkRootAsContent:!0})||i.insertBefore(u,n),Au(e,o,{checkRootAsContent:!0})||i.insertBefore(o,n),Au(e,m,{checkRootAsContent:!0})||i.insertBefore(m,n),i.removeChild(n)}},oo=(e,n,o)=>{const r=e.getBlockElements(),i=be.fromDom(n),u=y=>yo(y)in r,m=y=>ro(y,i);Se(Zl(o),y=>{qs(y,u,m).each(S=>{const O=Mf(y,L=>u(L)&&!e.isValidChild(yo(S),yo(L)));if(O.length>0){const L=Af(S);Se(O,F=>{qs(F,u,m).each(V=>{Zn(e,V.dom,F.dom)})}),L.each(F=>At(e,F.dom))}})})},Yo=(e,n,o)=>{Se([...o,...Ou(e,n)?[n]:[]],r=>Se(ci(be.fromDom(r),r.nodeName.toLowerCase()),i=>{Gh(e,i.dom)&&_c(i)}))},Xo=(e,n)=>{const o=At(e,n);oo(e,n,o),Yo(e,n,o)},er=(e,n)=>{if(yl(e,n)){const o=Te(e.getBlockElements());ot(o,n)}},Rc=(e,n,o)=>{const r=u=>ro(u,be.fromDom(n)),i=zl(be.fromDom(o),r);vc(i,i.length-2).filter(Fa).fold(()=>Xo(e,n),u=>Xo(e,u.dom))},Va=e=>e.hasAttribute(j),Kl=(e,n)=>Sn(e.getTransparentElements(),n),yl=(e,n)=>Wt(n)&&Kl(e,n.nodeName),Ou=(e,n)=>yl(e,n)&&Va(n),Gh=(e,n)=>yl(e,n)&&!Va(n),Gc=(e,n)=>n.type===1&&Kl(e,n.name)&&ce(n.attr(j)),km=St().browser,Qg=e=>Po(e,Fa),ep=e=>km.isFirefox()&&yo(e)==="table"?Qg(ra(e)).filter(n=>yo(n)==="caption").bind(n=>Qg($d(n)).map(o=>{const r=o.dom.offsetTop,i=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=i?-u:0})).getOr(0):0,If=(e,n)=>e.children&&et(e.children,n),va=(e,n,o)=>{let r=0,i=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Wr(be.fromDom(e),"position")==="static"){const y=n.getBoundingClientRect();return r=y.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,i=y.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:i}}let m=n;for(;m&&m!==o&&m.nodeType&&!If(m,o);){const y=m;r+=y.offsetLeft||0,i+=y.offsetTop||0,m=y.offsetParent}for(m=n.parentNode;m&&m!==o&&m.nodeType&&!If(m,o);)r-=m.scrollLeft||0,i-=m.scrollTop||0,m=m.parentNode;i+=ep(be.fromDom(n))}return{x:r,y:i}},Yl=(e,n={})=>{let o=0;const r={},i=be.fromDom(e),u=Cu(i),m=we=>{n.referrerPolicy=we},y=we=>{n.contentCssCors=we},S=we=>{rr(Df(i),we)},O=we=>{const De=Df(i);mn(De,"#"+we).each(gs)},L=we=>zo(r,we).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),F=we=>new Promise((De,Oe)=>{let $e;const ft=vt._addCacheSuffix(we),Ot=L(ft);r[ft]=Ot,Ot.count++;const Kt=(rn,wn)=>{Se(rn,os),Ot.status=wn,Ot.passed=[],Ot.failed=[],$e&&($e.onload=null,$e.onerror=null,$e=null)},Je=()=>Kt(Ot.passed,2),ze=()=>Kt(Ot.failed,3);if(De&&Ot.passed.push(De),Oe&&Ot.failed.push(Oe),Ot.status===1)return;if(Ot.status===2){Je();return}if(Ot.status===3){ze();return}Ot.status=1;const ut=be.fromTag("link",u.dom);Zc(ut,{rel:"stylesheet",type:"text/css",id:Ot.id}),n.contentCssCors&&js(ut,"crossOrigin","anonymous"),n.referrerPolicy&&js(ut,"referrerpolicy",n.referrerPolicy),$e=ut.dom,$e.onload=Je,$e.onerror=ze,S(ut),js(ut,"href",ft)}),V=(we,De)=>{const Oe=L(we);r[we]=Oe,Oe.count++;const $e=be.fromTag("style",u.dom);Zc($e,{rel:"stylesheet",type:"text/css",id:Oe.id}),$e.dom.innerHTML=De,S($e)},Q=we=>Promise.allSettled(dt(we,Oe=>F(Oe).then(ct(Oe)))).then(Oe=>{const $e=To(Oe,ft=>ft.status==="fulfilled");return $e.fail.length>0?Promise.reject(dt($e.fail,ft=>ft.reason)):dt($e.pass,ft=>ft.value)}),re=we=>{const De=vt._addCacheSuffix(we);zo(r,De).each(Oe=>{--Oe.count===0&&(delete r[De],O(Oe.id))})};return{load:F,loadRawCss:V,loadAll:Q,unload:re,unloadRawCss:we=>{zo(r,we).each(De=>{--De.count===0&&(delete r[we],O(De.id))})},unloadAll:we=>{Se(we,De=>{re(De)})},_setReferrerPolicy:m,_setContentCssCors:y}},Ms=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=jc(o).dom;return W.from(e.get(u)).getOrThunk(()=>{const m=Yl(u,r);return e.set(u,m),m})}}})(),Ii=e=>e.nodeName.toLowerCase()==="span",Er=(e,n)=>Fe(e)&&(_m(n,e)||n.isInline(e.nodeName.toLowerCase())),tp=(e,n,o)=>{const r=new Ha(e,n).prev(!1),i=new Ha(e,n).next(!1),u=Bn(r)||Er(r,o),m=Bn(i)||Er(i,o);return u&&m},Lf=e=>Ii(e)&&e.getAttribute("data-mce-type")==="bookmark",Ff=(e,n,o)=>pt(e)&&e.data.length>0&&tp(e,n,o),Kc=e=>Wt(e)?e.childNodes.length>0:!1,ld=e=>ia(e)||Em(e),qd=(e,n,o,r)=>{var i;const u=r||n;if(Wt(n)&&Lf(n))return n;const m=n.childNodes;for(let y=m.length-1;y>=0;y--)qd(e,m[y],o,u);if(Wt(n)){const y=n.childNodes;y.length===1&&Lf(y[0])&&((i=n.parentNode)===null||i===void 0||i.insertBefore(y[0],n))}return!ld(n)&&!_m(o,n)&&!Kc(n)&&!Ff(n,u,o)&&e.remove(n),n},Du=vt.makeMap,b1=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gd=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,np=/[<>&\"\']/g,Kh=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,VS={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},ud={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},zS={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Uy=e=>{const n=be.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Nr=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let i=0;i<r.length;i+=2){const u=String.fromCharCode(parseInt(r[i],n));if(!ud[u]){const m="&"+r[i+1]+";";o[u]=m,o[m]=u}}return o}else return},ov=Nr("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),dd=(e,n)=>e.replace(n?b1:Gd,o=>ud[o]||o),Am=e=>(""+e).replace(np,n=>ud[n]||n),$f=(e,n)=>e.replace(n?b1:Gd,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":ud[o]||"&#"+o.charCodeAt(0)+";"),Xl=(e,n,o)=>{const r=o||ov;return e.replace(n?b1:Gd,i=>ud[i]||r[i]||i)},fd={encodeRaw:dd,encodeAllRaw:Am,encodeNumeric:$f,encodeNamed:Xl,getEncodeFunc:(e,n)=>{const o=Nr(n)||ov,r=(m,y)=>m.replace(y?b1:Gd,S=>ud[S]!==void 0?ud[S]:o[S]!==void 0?o[S]:S.length>1?"&#"+((S.charCodeAt(0)-55296)*1024+(S.charCodeAt(1)-56320)+65536)+";":"&#"+S.charCodeAt(0)+";"),i=(m,y)=>Xl(m,y,o),u=Du(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?i:Xl:u.numeric?$f:dd},decode:e=>e.replace(Kh,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):VS[o]||String.fromCharCode(o)):zS[n]||ov[n]||Uy(n))},Li=(e,n)=>(e=vt.trim(e),e?e.split(n||" "):[]),y1=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Wy=e=>Ke(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",w1=e=>{const n=o=>jt(o)?dt(o,n):Wy(o)?new RegExp(o.source,o.flags):Ke(o)?po(o,n):o;return n(e)},C1=e=>{const n=/^(~)?(.+)$/;return ws(Li(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",m=r[2];return[{cloneName:u,name:m}]}else return[]})},Zy=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),Yh=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},md=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=Yh(e),i=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:i(n),phrasingContent:i(o),flowContent:i(r)})},sc={html4:qe(()=>md("html4")),html5:qe(()=>md("html5")),"html5-strict":qe(()=>md("html5-strict"))},Ql=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:i}=sc[e]();return n==="blocks"?W.some(o):n==="phrasing"?W.some(r):n==="flow"?W.some(i):W.none()},Om=e=>{const n=Zy(e),{phrasingContent:o,flowContent:r}=Yh(e),i={},u=(S,O,L)=>{i[S]={attributes:Cs(O,ct({})),attributesOrder:O,children:Cs(L,ct({}))}},m=(S,O="",L="")=>{const F=Li(L),V=Li(S);let Q=V.length;const re=[...n,...Li(O)];for(;Q--;)u(V[Q],re.slice(),F)},y=(S,O)=>{const L=Li(S),F=Li(O);let V=L.length;for(;V--;){const Q=i[L[V]];for(let re=0,ee=F.length;re<ee;re++)Q.attributes[F[re]]={},Q.attributesOrder.push(F[re])}};return e!=="html5-strict"&&(Se(Li("acronym applet basefont big font strike tt"),L=>{m(L,"",o)}),Se(Li("center dir isindex noframes"),L=>{m(L,"",r)})),m("html","manifest","head body"),m("head","","base command link meta noscript script style title"),m("title hr noscript br"),m("base","href target"),m("link","href rel media hreflang type sizes hreflang"),m("meta","name http-equiv content charset"),m("style","media type scoped"),m("script","src async defer type charset"),m("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),m("dd div","",r),m("address dt caption","",e==="html4"?o:r),m("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),m("blockquote","cite",r),m("ol","reversed start type","li"),m("ul","","li"),m("li","value",r),m("dl","","dt dd"),m("a","href target rel media hreflang type",e==="html4"?o:r),m("q","cite",o),m("ins del","cite datetime",r),m("img","src sizes srcset alt usemap ismap width height"),m("iframe","src name width height",r),m("embed","src type width height"),m("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),m("param","name value"),m("map","name",[r,"area"].join(" ")),m("area","alt coords shape href target rel media hreflang type"),m("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),m("colgroup","span","col"),m("col","span"),m("tbody thead tfoot","","tr"),m("tr","","td th"),m("td","colspan rowspan headers",r),m("th","colspan rowspan headers scope abbr",r),m("form","accept-charset action autocomplete enctype method name novalidate target",r),m("fieldset","disabled form name",[r,"legend"].join(" ")),m("label","form for",o),m("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),m("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),m("select","disabled form multiple name required size","option optgroup"),m("optgroup","disabled label","option"),m("option","disabled label selected value"),m("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),m("menu","type label",[r,"li"].join(" ")),m("noscript","",r),e!=="html4"&&(m("wbr"),m("ruby","",[o,"rt rp"].join(" ")),m("figcaption","",r),m("mark rt rp bdi","",o),m("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),m("canvas","width height",r),m("data","value",o),m("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),m("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),m("picture","","img source"),m("source","src srcset type media sizes"),m("track","kind src srclang label default"),m("datalist","",[o,"option"].join(" ")),m("article section nav aside main header footer","",r),m("hgroup","","h1 h2 h3 h4 h5 h6"),m("figure","",[r,"figcaption"].join(" ")),m("time","datetime",o),m("dialog","open",r),m("command","type label icon disabled checked radiogroup command"),m("output","for form name",o),m("progress","value max",o),m("meter","value min max low high optimum",o),m("details","open",[r,"summary"].join(" ")),m("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(y("script","language xml:space"),y("style","xml:space"),y("object","declare classid code codebase codetype archive standby align border hspace vspace"),y("embed","align name hspace vspace"),y("param","valuetype type"),y("a","charset name rev shape coords"),y("br","clear"),y("applet","codebase archive code object alt name width height align hspace vspace"),y("img","name longdesc align border hspace vspace"),y("iframe","longdesc frameborder marginwidth marginheight scrolling align"),y("font basefont","size color face"),y("input","usemap align"),y("select"),y("textarea"),y("h1 h2 h3 h4 h5 h6 div p legend caption","align"),y("ul","type compact"),y("li","type"),y("ol dl menu dir","compact"),y("pre","width xml:space"),y("hr","align noshade size width"),y("isindex","prompt"),y("table","summary width frame rules cellspacing cellpadding align bgcolor"),y("col","width align char charoff valign"),y("colgroup","width align char charoff valign"),y("thead","align char charoff valign"),y("tr","align char charoff valign bgcolor"),y("th","axis align char charoff valign nowrap bgcolor width height"),y("form","accept"),y("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),y("tfoot","align char charoff valign"),y("tbody","align char charoff valign"),y("area","nohref"),y("body","background bgcolor text link vlink alink")),e!=="html4"&&(y("input button select textarea","autofocus"),y("input textarea","placeholder"),y("a","download"),y("link script img","crossorigin"),y("img","loading"),y("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&Se([i.video,i.audio],S=>{delete S.children.audio,delete S.children.video}),Se(Li("a form meter progress dfn"),S=>{i[S]&&delete i[S].children[S]}),delete i.caption.children.table,delete i.script,i},jy=e=>e==="-"?"remove":"add",Xh=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return W.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},qy=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ws(Li(e,","),o=>{const r=n.exec(o);if(r){const i=r[1],u=i?jy(i):"replace",m=r[2],y=ws(Li(r[3],"|"),S=>Xh(S).toArray());return[{operation:u,name:m,validChildren:y}]}else return[]})},US=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:i,attributesOrder:u}=n;return Se(Li(e,"|"),m=>{const y=o.exec(m);if(y){const S={},O=y[1],L=y[2].replace(/[\\:]:/g,":"),F=y[3],V=y[4];if(O==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(L),S.required=!0),O==="-"){delete i[L],u.splice(vt.inArray(u,L),1);return}if(F&&(F==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:L,value:V}),S.defaultValue=V):F==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:L,value:V}),S.forcedValue=V):F==="<"&&(S.validValues=vt.makeMap(V,"?"))),r.test(L)){const Q=S;n.attributePatterns=n.attributePatterns||[],Q.pattern=y1(L),n.attributePatterns.push(Q)}else i[L]||u.push(L),i[L]=S}})},WS=(e,n)=>{kt(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},ZS=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ws(Li(n,","),r=>{const i=o.exec(r);if(i){const u=i[1],m=i[2],y=i[3],S=i[4],O=i[5],L={attributes:{},attributesOrder:[]};if(e.each(F=>WS(F,L)),u==="#"?L.paddEmpty=!0:u==="-"&&(L.removeEmpty=!0),S==="!"&&(L.removeEmptyAttrs=!0),O&&US(O,L),y&&(L.outputName=m),m==="@")if(e.isNone())e=W.some(L);else return[];return[y?{name:m,element:L,aliasName:y}:{name:m,element:L}]}else return[]})},Dm={},Jh=vt.makeMap,ao=vt.each,_n=vt.extend,Rm=vt.explode,S1=(e,n={})=>{const o=Jh(e," ",Jh(e.toUpperCase()," "));return _n(o,n)},sv=e=>S1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Gy=(e,n)=>{if(e){const o={};return ce(e)&&(e={"*":e}),ao(e,(r,i)=>{o[i]=o[i.toUpperCase()]=n==="map"?Jh(r,/[, ]/):Rm(r,/[, ]/)}),o}else return},Kd=(e={})=>{var n;const o={},r={};let i=[];const u={},m={},y=(Cn,Oo,cr)=>{const Fr=e[Cn];if(Fr)return Jh(Fr,/[, ]/,Jh(Fr.toUpperCase(),/[, ]/));{let ua=Dm[Cn];return ua||(ua=S1(Oo,cr),Dm[Cn]=ua),ua}},S=(n=e.schema)!==null&&n!==void 0?n:"html5",O=Om(S);e.verify_html===!1&&(e.valid_elements="*[*]");const L=Gy(e.valid_styles),F=Gy(e.invalid_styles,"map"),V=Gy(e.valid_classes,"map"),Q=y("whitespace_elements","pre script noscript style textarea video audio iframe object code"),re=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),ee=y("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ue=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),we="td th iframe video audio object script code",De=y("non_empty_elements",we+" pre svg textarea summary",ee),Oe=y("move_caret_before_on_enter_elements",we+" table",ee),$e="h1 h2 h3 h4 h5 h6",ft=y("text_block_elements",$e+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Ot=y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",ft),Kt=y("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Je=y("transparent_elements","a ins del canvas map"),ze=y("wrap_block_elements","pre "+$e);ao("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Cn=>{m[Cn]=new RegExp("</"+Cn+"[^>]*>","gi")});const ut=Cn=>{const Oo=W.from(o["@"]),cr=/[*?+]/;Se(ZS(Oo,Cn??""),({name:Fr,element:ua,aliasName:mi})=>{if(mi&&(o[mi]=ua),cr.test(Fr)){const da=ua;da.pattern=y1(Fr),i.push(da)}else o[Fr]=ua})},rn=Cn=>{i=[],Se(Go(o),Oo=>{delete o[Oo]}),ut(Cn)},wn=(Cn,Oo)=>{var cr,Fr;delete Dm.text_block_elements,delete Dm.block_elements;const ua=Oo.extends?!Pl(Oo.extends):!1,mi=Oo.extends;if(r[Cn]=mi?r[mi]:{},u[Cn]=mi??Cn,De[Cn.toUpperCase()]={},De[Cn]={},ua||(Ot[Cn.toUpperCase()]={},Ot[Cn]={}),mi&&!o[Cn]&&o[mi]){const da=w1(o[mi]);delete da.removeEmptyAttrs,delete da.removeEmpty,o[Cn]=da}else o[Cn]={attributesOrder:[],attributes:{}};if(jt(Oo.attributes)){const da=pc=>{fa.attributesOrder.push(pc),fa.attributes[pc]={}},fa=(cr=o[Cn])!==null&&cr!==void 0?cr:{};delete fa.attributesDefault,delete fa.attributesForced,delete fa.attributePatterns,delete fa.attributesRequired,fa.attributesOrder=[],fa.attributes={},Se(Oo.attributes,pc=>{const Md=Zy(S);Xh(pc).each(({preset:Nd,name:Pd})=>{Nd?Pd==="global"&&Se(Md,da):da(Pd)})}),o[Cn]=fa}if(Jt(Oo.padEmpty)){const da=(Fr=o[Cn])!==null&&Fr!==void 0?Fr:{};da.paddEmpty=Oo.padEmpty,o[Cn]=da}if(jt(Oo.children)){const da={},fa=Md=>{da[Md]={}},pc=Md=>{Ql(S,Md).each(Nd=>{Se(Nd,fa)})};Se(Oo.children,Md=>{Xh(Md).each(({preset:Nd,name:Pd})=>{Nd?pc(Pd):fa(Pd)})}),r[Cn]=da}mi&&kt(r,(da,fa)=>{da[mi]&&(r[fa]=da=_n({},r[fa]),da[Cn]=da[mi])})},go=Cn=>{Se(C1(Cn??""),({name:Oo,cloneName:cr})=>{wn(Oo,{extends:cr})})},wo=Cn=>{Ke(Cn)?kt(Cn,(Oo,cr)=>wn(cr,Oo)):ce(Cn)&&go(Cn)},ns=Cn=>{Se(qy(Cn??""),({operation:Oo,name:cr,validChildren:Fr})=>{const ua=Oo==="replace"?{"#comment":{}}:r[cr],mi=fa=>{Oo==="remove"?delete ua[fa]:ua[fa]={}},da=fa=>{Ql(S,fa).each(pc=>{Se(pc,mi)})};Se(Fr,({preset:fa,name:pc})=>{fa?da(pc):mi(pc)}),r[cr]=ua})},ps=Cn=>{const Oo=o[Cn];if(Oo)return Oo;let cr=i.length;for(;cr--;){const Fr=i[cr];if(Fr.pattern.test(Cn))return Fr}},Lr=()=>{e.valid_elements?(rn(e.valid_elements),ao(O,(Cn,Oo)=>{r[Oo]=Cn.children})):(ao(O,(Cn,Oo)=>{o[Oo]={attributes:Cn.attributes,attributesOrder:Cn.attributesOrder},r[Oo]=Cn.children}),ao(Li("strong/b em/i"),Cn=>{const Oo=Li(Cn,"/");o[Oo[1]].outputName=Oo[0]}),ao(Kt,(Cn,Oo)=>{o[Oo]&&(e.padd_empty_block_inline_children&&(o[Oo].paddInEmptyBlock=!0),o[Oo].removeEmpty=!0)}),ao(Li("ol ul blockquote a table tbody"),Cn=>{o[Cn]&&(o[Cn].removeEmpty=!0)}),ao(Li("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Cn=>{o[Cn]&&(o[Cn].paddEmpty=!0)}),ao(Li("span"),Cn=>{o[Cn].removeEmptyAttrs=!0})),delete o.svg,wo(e.custom_elements),ns(e.valid_children),ut(e.extended_valid_elements),ns("+ol[ul|ol],+ul[ul|ol]"),ao({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Cn,Oo)=>{o[Oo]&&(o[Oo].parentsRequired=Li(Cn))}),e.invalid_elements&&ao(Rm(e.invalid_elements),Cn=>{o[Cn]&&delete o[Cn]}),ps("span")||ut("span[!data-mce-type|*]")},Ea=ct(L),Ts=ct(F),Bt=ct(V),vn=ct(ue),$o=ct(Ot),zt=ct(ft),Tn=ct(Kt),mo=ct(Object.seal(ee)),Gt=ct(re),ho=ct(De),Co=ct(Oe),Ya=ct(Q),is=ct(Je),Pa=ct(ze),Rd=ct(Object.seal(m)),dm=(Cn,Oo)=>{const cr=r[Cn.toLowerCase()];return!!(cr&&cr[Oo.toLowerCase()])},Fc=(Cn,Oo)=>{const cr=ps(Cn);if(cr)if(Oo){if(cr.attributes[Oo])return!0;const Fr=cr.attributePatterns;if(Fr){let ua=Fr.length;for(;ua--;)if(Fr[ua].pattern.test(Oo))return!0}}else return!0;return!1},Pl=Cn=>Sn($o(),Cn),Yu=Cn=>!es(Cn,"#")&&Fc(Cn)&&!Pl(Cn),Bl=Cn=>Sn(Pa(),Cn)||Yu(Cn),Xu=ct(u);return Lr(),{type:S,children:r,elements:o,getValidStyles:Ea,getValidClasses:Bt,getBlockElements:$o,getInvalidStyles:Ts,getVoidElements:mo,getTextBlockElements:zt,getTextInlineElements:Tn,getBoolAttrs:vn,getElementRule:ps,getSelfClosingElements:Gt,getNonEmptyElements:ho,getMoveCaretBeforeOnEnterElements:Co,getWhitespaceElements:Ya,getTransparentElements:is,getSpecialElements:Rd,isValidChild:dm,isValid:Fc,isBlock:Pl,isInline:Yu,isWrapper:Bl,getCustomElements:Xu,addValidElements:ut,setValidElements:rn,addCustomElements:wo,addValidChildren:ns}},Fs=e=>({value:jS(e)}),jS=e=>Ps(e,"#").toUpperCase(),Ky=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Yy=e=>{const n=Ky(e.red)+Ky(e.green)+Ky(e.blue);return Fs(n)},it=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Qh=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Ck=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Mm=(e,n,o,r)=>{const i=parseInt(e,10),u=parseInt(n,10),m=parseInt(o,10),y=parseFloat(r);return Ck(i,u,m,y)},Sk=e=>it.test(e)?"rgb":Qh.test(e)?"rgba":"other",eg=e=>{const n=it.exec(e);if(n!==null)return W.some(Mm(n[1],n[2],n[3],"1"));const o=Qh.exec(e);return o!==null?W.some(Mm(o[1],o[2],o[3],o[4])):W.none()},Xy=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,hd=e=>eg(e).map(Yy).map(n=>"#"+n.value).getOr(e),Jy=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,u={};let m,y;const S=Gg;n&&(m=n.getValidStyles(),y=n.getInvalidStyles());const O=(`\\" \\' \\; \\: ; : `+S).split(" ");for(let F=0;F<O.length;F++)u[O[F]]=S+F,u[S+F]=O[F];const L={parse:F=>{const V={};let Q=!1;const re=e.url_converter,ee=e.url_converter_scope||L,ue=(Je,ze,ut)=>{const rn=V[Je+"-top"+ze];if(!rn)return;const wn=V[Je+"-right"+ze];if(!wn)return;const go=V[Je+"-bottom"+ze];if(!go)return;const wo=V[Je+"-left"+ze];if(!wo)return;const ns=[rn,wn,go,wo];let ps=ns.length-1;for(;ps--&&ns[ps]===ns[ps+1];);ps>-1&&ut||(V[Je+ze]=ps===-1?ns[0]:ns.join(" "),delete V[Je+"-top"+ze],delete V[Je+"-right"+ze],delete V[Je+"-bottom"+ze],delete V[Je+"-left"+ze])},we=Je=>{const ze=V[Je];if(!ze)return;const ut=ze.indexOf(",")>-1?[ze]:ze.split(" ");let rn=ut.length;for(;rn--;)if(ut[rn]!==ut[0])return!1;return V[Je]=ut[0],!0},De=(Je,ze,ut,rn)=>{we(ze)&&we(ut)&&we(rn)&&(V[Je]=V[ze]+" "+V[ut]+" "+V[rn],delete V[ze],delete V[ut],delete V[rn])},Oe=Je=>(Q=!0,u[Je]),$e=(Je,ze)=>(Q&&(Je=Je.replace(/\uFEFF[0-9]/g,ut=>u[ut])),ze||(Je=Je.replace(/\\([\'\";:])/g,"$1")),Je),ft=Je=>String.fromCharCode(parseInt(Je.slice(1),16)),Ot=Je=>Je.replace(/\\[0-9a-f]+/gi,ft),Kt=(Je,ze,ut,rn,wn,go)=>{if(wn=wn||go,wn)return wn=$e(wn),"'"+wn.replace(/\'/g,"\\'")+"'";if(ze=$e(ze||ut||rn||""),!e.allow_script_urls){const wo=ze.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(wo)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(wo))return""}return re&&(ze=re.call(ee,ze,"style")),"url('"+ze.replace(/\'/g,"\\'")+"')"};if(F){F=F.replace(/[\u0000-\u001F]/g,""),F=F.replace(/\\[\"\';:\uFEFF]/g,Oe).replace(/\"[^\"]+\"|\'[^\']+\'/g,ze=>ze.replace(/[;:]/g,Oe));let Je;for(;Je=r.exec(F);){r.lastIndex=Je.index+Je[0].length;let ze=Je[1].replace(i,"").toLowerCase(),ut=Je[2].replace(i,"");if(ze&&ut){if(ze=Ot(ze),ut=Ot(ut),ze.indexOf(S)!==-1||ze.indexOf('"')!==-1||!e.allow_script_urls&&(ze==="behavior"||/expression\s*\(|\/\*|\*\//.test(ut)))continue;ze==="font-weight"&&ut==="700"?ut="bold":(ze==="color"||ze==="background-color")&&(ut=ut.toLowerCase()),Sk(ut)==="rgb"&&eg(ut).each(rn=>{ut=hd(Xy(rn)).toLowerCase()}),ut=ut.replace(o,Kt),V[ze]=Q?$e(ut,!0):ut}}ue("border","",!0),ue("border","-width"),ue("border","-color"),ue("border","-style"),ue("padding",""),ue("margin",""),De("border","border-width","border-style","border-color"),V.border==="medium none"&&delete V.border,V["border-image"]==="none"&&delete V["border-image"]}return V},serialize:(F,V)=>{let Q="";const re=(ue,we)=>{const De=we[ue];if(De)for(let Oe=0,$e=De.length;Oe<$e;Oe++){const ft=De[Oe],Ot=F[ft];Ot&&(Q+=(Q.length>0?" ":"")+ft+": "+Ot+";")}},ee=(ue,we)=>{if(!y||!we)return!0;let De=y["*"];return De&&De[ue]?!1:(De=y[we],!(De&&De[ue]))};return V&&m?(re("*",m),re(V,m)):kt(F,(ue,we)=>{ue&&ee(we,V)&&(Q+=(Q.length>0?" ":"")+we+": "+ue+";")}),Q}};return L},op={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Gs=e=>e instanceof Event||ve(e.initEvent),Yd=e=>e.isDefaultPrevented===yt||e.isDefaultPrevented===tt,Qy=e=>Qt(e.preventDefault)||Gs(e),Ru=(e,n)=>{const o=n??{};for(const r in e)Sn(op,r)||(o[r]=e[r]);return Fe(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Fe(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Fe(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},ew=(e,n,o,r)=>{var i;const u=Ru(n,r);return u.type=e,Qt(u.target)&&(u.target=(i=u.srcElement)!==null&&i!==void 0?i:o),Qy(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=yt,ve(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=yt,ve(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=yt,u.stopPropagation()},Yd(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?yt:tt,u.isPropagationStopped=u.cancelBubble===!0?yt:tt,u.isImmediatePropagationStopped=tt)),u},x1="mce-data-",sp=/^(?:mouse|contextmenu)|click/,E1=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Yc=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},qS=e=>Fe(e)&&sp.test(e.type),_1=(e,n)=>{const o=ew(e.type,e,document,n);if(qS(e)&&Bn(e.pageX)&&!Bn(e.clientX)){const r=o.target.ownerDocument||document,i=r.documentElement,u=r.body,m=o;m.pageX=e.clientX+(i&&i.scrollLeft||u&&u.scrollLeft||0)-(i&&i.clientLeft||u&&u.clientLeft||0),m.pageY=e.clientY+(i&&i.scrollTop||u&&u.scrollTop||0)-(i&&i.clientTop||u&&u.clientTop||0)}return o},tw=(e,n,o)=>{const r=e.document,i={type:"ready"};if(o.domLoaded){n(i);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,m=()=>{Yc(e,"DOMContentLoaded",m),Yc(e,"load",m),o.domLoaded||(o.domLoaded=!0,n(i)),e=null};u()?m():E1(e,"DOMContentLoaded",m),o.domLoaded||E1(e,"load",m)};class Nm{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=x1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,i){const u=this;let m;const y=window,S=V=>{u.executeHandlers(_1(V||y.event),O)};if(!n||pt(n)||ba(n))return r;let O;n[u.expando]?O=n[u.expando]:(O=u.count++,n[u.expando]=O,u.events[O]={}),i=i||n;const L=o.split(" ");let F=L.length;for(;F--;){let V=L[F],Q=S,re=!1,ee=!1;if(V==="DOMContentLoaded"&&(V="ready"),u.domLoaded&&V==="ready"&&n.readyState==="complete"){r.call(i,_1({type:V}));continue}!u.hasFocusIn&&(V==="focusin"||V==="focusout")&&(re=!0,ee=V==="focusin"?"focus":"blur",Q=ue=>{const we=_1(ue||y.event);we.type=we.type==="focus"?"focusin":"focusout",u.executeHandlers(we,O)}),m=u.events[O][V],m?V==="ready"&&u.domLoaded?r(_1({type:V})):m.push({func:r,scope:i}):(u.events[O][V]=m=[{func:r,scope:i}],m.fakeName=ee,m.capture=re,m.nativeHandler=Q,V==="ready"?tw(n,Q,u):E1(n,ee||V,Q,re))}return n=m=null,r}unbind(n,o,r){if(!n||pt(n)||ba(n))return this;const i=n[this.expando];if(i){let u=this.events[i];if(o){const m=o.split(" ");let y=m.length;for(;y--;){const S=m[y],O=u[S];if(O){if(r){let L=O.length;for(;L--;)if(O[L].func===r){const F=O.nativeHandler,V=O.fakeName,Q=O.capture,re=O.slice(0,L).concat(O.slice(L+1));re.nativeHandler=F,re.fakeName=V,re.capture=Q,u[S]=re}}(!r||O.length===0)&&(delete u[S],Yc(n,O.fakeName||S,O.nativeHandler,O.capture))}}}else kt(u,(m,y)=>{Yc(n,m.fakeName||y,m.nativeHandler,m.capture)}),u={};for(const m in u)if(Sn(u,m))return this;delete this.events[i];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||pt(n)||ba(n))return this;const i=_1({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(i,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!i.isPropagationStopped());return this}clean(n){if(!n||pt(n)||ba(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],i=r&&r[n.type];if(i)for(let u=0,m=i.length;u<m;u++){const y=i[u];if(y&&y.func.call(y.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Nm.Event=new Nm;const nw=vt.each,GS=vt.grep,ow="data-mce-style",KS=vt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Gi=(e,n,o)=>{Qt(o)||o===""?Cr(e,n):js(e,n,o)},Xc=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),xt=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){const u=i.nodeType;n&&pt(i)&&(u===r||!i.data.length)||(o++,r=u)}return o},rv=(e,n)=>{const o=ri(n,"style"),r=e.serialize(e.parse(o),yo(n));Gi(n,ow,r)},li=(e,n)=>so(e)?Sn(KS,n)?e+"":e+"px":e,av=(e,n,o)=>{const r=Xc(n);Qt(o)||o===""?nc(e,r):Zg(e,r,li(o,r))},YS=(e,n,o)=>{const r=n.keep_values,i={set:(m,y,S)=>{const O=be.fromDom(m);ve(n.url_converter)&&Fe(y)&&(y=n.url_converter.call(n.url_converter_scope||o(),String(y),S,m));const L="data-mce-"+S;Gi(O,L,y),Gi(O,S,y)},get:(m,y)=>{const S=be.fromDom(m);return ri(S,"data-mce-"+y)||ri(S,y)}},u={style:{set:(m,y)=>{const S=be.fromDom(m);r&&Gi(S,ow,y),Cr(S,"style"),ce(y)&&Yn(S,e.parse(y))},get:m=>{const y=be.fromDom(m),S=ri(y,ow)||ri(y,"style");return e.serialize(e.parse(S),yo(y))}}};return r&&(u.href=u.src=i),u},Ks=(e,n={})=>{const o={},r=window,i={};let u=0;const m=!0,y=!0,S=Ms.forElement(be.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),O=[],L=n.schema?n.schema:Kd({}),F=Jy({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),V=n.ownEvents?new Nm:Nm.Event,Q=L.getBlockElements(),re=Ve=>ce(Ve)?Sn(Q,Ve):Wt(Ve)&&(Sn(Q,Ve.nodeName)||Ou(L,Ve)),ee=Ve=>Ve&&e&&ce(Ve)?e.getElementById(Ve):Ve,ue=Ve=>{const Ue=ee(Ve);return Fe(Ue)?be.fromDom(Ue):null},we=(Ve,Ue,Pt="")=>{let Et;const Pn=ue(Ve);if(Fe(Pn)&&Fa(Pn)){const Eo=kS[Ue];Eo&&Eo.get?Et=Eo.get(Pn.dom,Ue):Et=ri(Pn,Ue)}return Fe(Et)?Et:Pt},De=Ve=>{const Ue=ee(Ve);return Qt(Ue)?[]:Ue.attributes},Oe=(Ve,Ue,Pt)=>{vn(Ve,Et=>{if(Wt(Et)){const Pn=be.fromDom(Et),Eo=Pt===""?null:Pt,gr=ri(Pn,Ue),Bd=kS[Ue];Bd&&Bd.set?Bd.set(Pn.dom,Eo,Ue):Gi(Pn,Ue,Eo),gr!==Eo&&n.onSetAttrib&&n.onSetAttrib({attrElm:Pn.dom,attrName:Ue,attrValue:Eo})}})},$e=(Ve,Ue)=>Ve.cloneNode(Ue),ft=()=>n.root_element||e.body,Ot=Ve=>{const Ue=jl(Ve);return{x:Ue.x,y:Ue.y,w:Ue.width,h:Ue.height}},Kt=(Ve,Ue)=>va(e.body,ee(Ve),Ue),Je=(Ve,Ue,Pt)=>{vn(Ve,Et=>{const Pn=be.fromDom(Et);av(Pn,Ue,Pt),n.update_styles&&rv(F,Pn)})},ze=(Ve,Ue)=>{vn(Ve,Pt=>{const Et=be.fromDom(Pt);kt(Ue,(Pn,Eo)=>{av(Et,Eo,Pn)}),n.update_styles&&rv(F,Et)})},ut=(Ve,Ue,Pt)=>{const Et=ee(Ve);if(!(Qt(Et)||!qc(Et)&&!Yg(Et)))return Pt?Wr(be.fromDom(Et),Xc(Ue)):(Ue=Ue.replace(/-(\D)/g,(Pn,Eo)=>Eo.toUpperCase()),Ue==="float"&&(Ue="cssFloat"),Et.style?Et.style[Ue]:void 0)},rn=Ve=>{const Ue=ee(Ve);if(!Ue)return{w:0,h:0};let Pt=ut(Ue,"width"),Et=ut(Ue,"height");return(!Pt||Pt.indexOf("px")===-1)&&(Pt="0"),(!Et||Et.indexOf("px")===-1)&&(Et="0"),{w:parseInt(Pt,10)||Ue.offsetWidth||Ue.clientWidth,h:parseInt(Et,10)||Ue.offsetHeight||Ue.clientHeight}},wn=Ve=>{const Ue=ee(Ve),Pt=Kt(Ue),Et=rn(Ue);return{x:Pt.x,y:Pt.y,w:Et.w,h:Et.h}},go=(Ve,Ue)=>{if(!Ve)return!1;const Pt=jt(Ve)?Ve:[Ve];return Tt(Pt,Et=>pl(be.fromDom(Et),Ue))},wo=(Ve,Ue,Pt,Et)=>{const Pn=[];let Eo=ee(Ve);Et=Et===void 0;const gr=Pt||(ft().nodeName!=="BODY"?ft().parentNode:null);if(ce(Ue))if(Ue==="*")Ue=Wt;else{const Bd=Ue;Ue=Ry=>go(Ry,Bd)}for(;Eo&&!(Eo===gr||Qt(Eo.nodeType)||Em(Eo)||ia(Eo));){if(!Ue||Ue(Eo))if(Et)Pn.push(Eo);else return[Eo];Eo=Eo.parentNode}return Et?Pn:null},ns=(Ve,Ue,Pt)=>{const Et=wo(Ve,Ue,Pt,!1);return Et&&Et.length>0?Et[0]:null},ps=(Ve,Ue,Pt)=>{let Et=Ue;if(Ve){ce(Ue)&&(Et=Pn=>go(Pn,Ue));for(let Pn=Ve[Pt];Pn;Pn=Pn[Pt])if(ve(Et)&&Et(Pn))return Pn}return null},Lr=(Ve,Ue)=>ps(Ve,Ue,"nextSibling"),Ea=(Ve,Ue)=>ps(Ve,Ue,"previousSibling"),Ts=Ve=>ve(Ve.querySelectorAll),Bt=(Ve,Ue)=>{var Pt,Et;const Pn=(Et=(Pt=ee(Ue))!==null&&Pt!==void 0?Pt:n.root_element)!==null&&Et!==void 0?Et:e;return Ts(Pn)?_r(Pn.querySelectorAll(Ve)):[]},vn=function(Ve,Ue,Pt){const Et=Pt??this;if(jt(Ve)){const Pn=[];return nw(Ve,(Eo,gr)=>{const Bd=ee(Eo);Bd&&Pn.push(Ue.call(Et,Bd,gr))}),Pn}else{const Pn=ee(Ve);return Pn?Ue.call(Et,Pn):!1}},$o=(Ve,Ue)=>{vn(Ve,Pt=>{kt(Ue,(Et,Pn)=>{Oe(Pt,Pn,Et)})})},zt=(Ve,Ue)=>{vn(Ve,Pt=>{const Et=be.fromDom(Pt);Eu(Et,Ue)})},Tn=(Ve,Ue,Pt,Et,Pn)=>vn(Ve,Eo=>{const gr=ce(Ue)?e.createElement(Ue):Ue;return Fe(Pt)&&$o(gr,Pt),Et&&(!ce(Et)&&Et.nodeType?gr.appendChild(Et):ce(Et)&&zt(gr,Et)),Pn?gr:Eo.appendChild(gr)}),mo=(Ve,Ue,Pt)=>Tn(e.createElement(Ve),Ve,Ue,Pt,!0),Gt=fd.decode,ho=fd.encodeAllRaw,Co=(Ve,Ue,Pt="")=>{let Et="<"+Ve;for(const Pn in Ue)Ys(Ue,Pn)&&(Et+=" "+Pn+'="'+ho(Ue[Pn])+'"');return sa(Pt)&&Sn(L.getVoidElements(),Ve)?Et+" />":Et+">"+Pt+"</"+Ve+">"},Ya=Ve=>{const Ue=e.createElement("div"),Pt=e.createDocumentFragment();Pt.appendChild(Ue),Ve&&(Ue.innerHTML=Ve);let Et;for(;Et=Ue.firstChild;)Pt.appendChild(Et);return Pt.removeChild(Ue),Pt},is=(Ve,Ue)=>vn(Ve,Pt=>{const Et=be.fromDom(Pt);return Ue&&Se(ra(Et),Pn=>{Yr(Pn)&&Pn.dom.length===0?gs(Pn):ii(Et,Pn)}),gs(Et),Et.dom}),Pa=Ve=>vn(Ve,Ue=>{const Pt=Ue.attributes;for(let Et=Pt.length-1;Et>=0;Et--)Ue.removeAttributeNode(Pt.item(Et))}),Rd=Ve=>F.parse(Ve),dm=(Ve,Ue)=>F.serialize(Ve,Ue),Fc=Ve=>{if(yh!==Ks.DOM&&e===document){if(o[Ve])return;o[Ve]=!0}let Ue=e.getElementById("mceDefaultStyles");if(!Ue){Ue=e.createElement("style"),Ue.id="mceDefaultStyles",Ue.type="text/css";const Pt=e.head;Pt.firstChild?Pt.insertBefore(Ue,Pt.firstChild):Pt.appendChild(Ue)}Ue.styleSheet?Ue.styleSheet.cssText+=Ve:Ue.appendChild(e.createTextNode(Ve))},Pl=Ve=>{Ve||(Ve=""),Se(Ve.split(","),Ue=>{i[Ue]=!0,S.load(Ue).catch(Pe)})},Yu=(Ve,Ue,Pt)=>{vn(Ve,Et=>{if(Wt(Et)){const Pn=be.fromDom(Et),Eo=Ue.split(" ");Se(Eo,gr=>{Fe(Pt)?(Pt?gl:vu)(Pn,gr):Ph(Pn,gr)})}})},Bl=(Ve,Ue)=>{Yu(Ve,Ue,!0)},Xu=(Ve,Ue)=>{Yu(Ve,Ue,!1)},Cn=(Ve,Ue)=>{const Pt=ue(Ve),Et=Ue.split(" ");return Fe(Pt)&&bs(Et,Pn=>Hl(Pt,Pn))},Oo=Ve=>{vn(Ve,Ue=>nc(be.fromDom(Ue),"display"))},cr=Ve=>{vn(Ve,Ue=>Zg(be.fromDom(Ue),"display","none"))},Fr=Ve=>{const Ue=ue(Ve);return Fe(Ue)&&Os(Ra(Ue,"display"),"none")},ua=Ve=>(Ve||"mce_")+u++,mi=Ve=>{const Ue=ue(Ve);return Fe(Ue)?Wt(Ue.dom)?Ue.dom.outerHTML:Pi(Ue):""},da=(Ve,Ue)=>{vn(Ve,Pt=>{Wt(Pt)&&(Pt.outerHTML=Ue)})},fa=(Ve,Ue)=>{const Pt=ee(Ue);return vn(Ve,Et=>{const Pn=Pt==null?void 0:Pt.parentNode,Eo=Pt==null?void 0:Pt.nextSibling;return Pn&&(Eo?Pn.insertBefore(Et,Eo):Pn.appendChild(Et)),Et})},pc=(Ve,Ue,Pt)=>vn(Ue,Et=>{var Pn;const Eo=jt(Ue)?Ve.cloneNode(!0):Ve;return Pt&&nw(GS(Et.childNodes),gr=>{Eo.appendChild(gr)}),(Pn=Et.parentNode)===null||Pn===void 0||Pn.replaceChild(Eo,Et),Et}),Md=(Ve,Ue)=>{if(Ve.nodeName!==Ue.toUpperCase()){const Pt=mo(Ue);return nw(De(Ve),Et=>{Oe(Pt,Et.nodeName,we(Ve,Et.nodeName))}),pc(Pt,Ve,!0),Pt}else return Ve},Nd=(Ve,Ue)=>{let Pt=Ve;for(;Pt;){let Et=Ue;for(;Et&&Pt!==Et;)Et=Et.parentNode;if(Pt===Et)break;Pt=Pt.parentNode}return!Pt&&Ve.ownerDocument?Ve.ownerDocument.documentElement:Pt},Pd=(Ve,Ue,Pt)=>Kn(Ue)?Au(L,Ve,{...Pt,isContent:Pn=>{const Eo=Pn.nodeName.toLowerCase();return!!Ue[Eo]}}):Au(L,Ve,Pt),lu=()=>e.createRange(),bh=(Ve,Ue,Pt)=>{let Et=lu(),Pn,Eo;if(Ve&&Ue&&Ve.parentNode&&Ue.parentNode){const gr=Ve.parentNode;return Et.setStart(gr,xt(Ve)),Et.setEnd(Ue.parentNode,xt(Ue)),Pn=Et.extractContents(),Et=lu(),Et.setStart(Ue.parentNode,xt(Ue)+1),Et.setEnd(gr,xt(Ve)+1),Eo=Et.extractContents(),gr.insertBefore(qd(yh,Pn,L),Ve),Pt?gr.insertBefore(Pt,Ve):gr.insertBefore(Ue,Ve),gr.insertBefore(qd(yh,Eo,L),Ve),is(Ve),Pt||Ue}else return},Vg=(Ve,Ue,Pt,Et)=>{if(jt(Ve)){let Pn=Ve.length;const Eo=[];for(;Pn--;)Eo[Pn]=Vg(Ve[Pn],Ue,Pt,Et);return Eo}else return n.collect&&(Ve===e||Ve===r)&&O.push([Ve,Ue,Pt,Et]),V.bind(Ve,Ue,Pt,Et||yh)},Ub=(Ve,Ue,Pt)=>{if(jt(Ve)){let Et=Ve.length;const Pn=[];for(;Et--;)Pn[Et]=Ub(Ve[Et],Ue,Pt);return Pn}else{if(O.length>0&&(Ve===e||Ve===r)){let Et=O.length;for(;Et--;){const[Pn,Eo,gr]=O[Et];Ve===Pn&&(!Ue||Ue===Eo)&&(!Pt||Pt===gr)&&V.unbind(Pn,Eo,gr)}}return V.unbind(Ve,Ue,Pt)}},sk=(Ve,Ue,Pt)=>V.dispatch(Ve,Ue,Pt),vh=(Ve,Ue,Pt)=>V.dispatch(Ve,Ue,Pt),Dy=Ve=>{if(Ve&&qc(Ve)){const Ue=Ve.getAttribute("data-mce-contenteditable");return Ue&&Ue!=="inherit"?Ue:Ve.contentEditable!=="inherit"?Ve.contentEditable:null}else return null},yh={doc:e,settings:n,win:r,files:i,stdMode:m,boxModel:y,styleSheetLoader:S,boundEvents:O,styles:F,schema:L,events:V,isBlock:re,root:null,clone:$e,getRoot:ft,getViewPort:Ot,getRect:wn,getSize:rn,getParent:ns,getParents:wo,get:ee,getNext:Lr,getPrev:Ea,select:Bt,is:go,add:Tn,create:mo,createHTML:Co,createFragment:Ya,remove:is,setStyle:Je,getStyle:ut,setStyles:ze,removeAllAttribs:Pa,setAttrib:Oe,setAttribs:$o,getAttrib:we,getPos:Kt,parseStyle:Rd,serializeStyle:dm,addStyle:Fc,loadCSS:Pl,addClass:Bl,removeClass:Xu,hasClass:Cn,toggleClass:Yu,show:Oo,hide:cr,isHidden:Fr,uniqueId:ua,setHTML:zt,getOuterHTML:mi,setOuterHTML:da,decode:Gt,encode:ho,insertAfter:fa,replace:pc,rename:Md,findCommonAncestor:Nd,run:vn,getAttribs:De,isEmpty:Pd,createRng:lu,nodeIndex:xt,split:bh,bind:Vg,unbind:Ub,fire:vh,dispatch:sk,getContentEditable:Dy,getContentEditableParent:Ve=>{const Ue=ft();let Pt=null;for(let Et=Ve;Et&&Et!==Ue&&(Pt=Dy(Et),Pt===null);Et=Et.parentNode);return Pt},isEditable:Ve=>{if(Fe(Ve)){const Ue=Wt(Ve)?Ve:Ve.parentElement;return Fe(Ue)&&qc(Ue)&&pa(be.fromDom(Ue))}else return!1},destroy:()=>{if(O.length>0){let Ve=O.length;for(;Ve--;){const[Ue,Pt,Et]=O[Ve];V.unbind(Ue,Pt,Et)}}kt(i,(Ve,Ue)=>{S.unload(Ue),delete i[Ue]})},isChildOf:(Ve,Ue)=>Ve===Ue||Ue.contains(Ve),dumpRng:Ve=>"startContainer: "+Ve.startContainer.nodeName+", startOffset: "+Ve.startOffset+", endContainer: "+Ve.endContainer.nodeName+", endOffset: "+Ve.endOffset},kS=YS(F,n,ct(yh));return yh};Ks.DOM=Ks(document),Ks.nodeIndex=xt;const Hf=Ks.DOM,iv=0,xk=1,Vf=2,cv=3;class gd{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const i=Hf;let u;const m=()=>{i.remove(O),u&&(u.onerror=u.onload=u=null)},y=()=>{m(),o()},S=()=>{m(),r("Failed to load script: "+n)},O=i.uniqueId();u=document.createElement("script"),u.id=O,u.type="text/javascript",u.src=vt._addCacheSuffix(n),this.settings.referrerPolicy&&i.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=y,u.onerror=S,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Vf}markDone(n){this.states[n]=Vf}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=iv),new Promise((i,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:i,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(S,O)=>{zo(o.scriptLoadedCallbacks,O).each(L=>{Se(L,F=>F[S](O))}),delete o.scriptLoadedCallbacks[O]},i=S=>{const O=Zt(S,L=>L.status==="rejected");return O.length>0?Promise.reject(ws(O,({reason:L})=>jt(L)?L:[L])):Promise.resolve()},u=S=>Promise.allSettled(dt(S,O=>o.states[O]===Vf?(r("resolve",O),Promise.resolve()):o.states[O]===cv?(r("reject",O),Promise.reject(O)):(o.states[O]=xk,o.loadScript(O).then(()=>{o.states[O]=Vf,r("resolve",O);const L=o.queue;return L.length>0?(o.queue=[],u(L).then(i)):Promise.resolve()},()=>(o.states[O]=cv,r("reject",O),Promise.reject(O)))))),m=S=>(o.loading=!0,u(S).then(O=>{o.loading=!1;const L=o.queueLoadedCallbacks.shift();return W.from(L).each(os),i(O)})),y=ul(n);return o.loading?new Promise((S,O)=>{o.queueLoadedCallbacks.push(()=>{m(y).then(S,O)})}):m(y)}}gd.ScriptLoader=new gd;const XS=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},sw=e=>Ke(e)&&Sn(e,"raw"),$s=e=>jt(e)&&e.length>1,rp={},mr=Be("en"),JS=()=>zo(rp,mr.get()),za={getData:()=>po(rp,e=>({...e})),setCode:e=>{e&&mr.set(e)},getCode:()=>mr.get(),add:(e,n)=>{let o=rp[e];o||(rp[e]=o={});const r=dt(Go(n),i=>i.toLowerCase());kt(n,(i,u)=>{const m=u.toLowerCase();m!==u&&XS(r,m)?(Sn(n,m)||(o[m]=i),o[u]=i):o[m]=i})},translate:e=>{const n=JS().getOr({}),o=m=>ve(m)?Object.prototype.toString.call(m):r(m)?"":""+m,r=m=>m===""||m===null||m===void 0,i=m=>{const y=o(m);return Sn(n,y)?o(n[y]):zo(n,y.toLowerCase()).map(o).getOr(y)},u=m=>m.replace(/{context:\w+}$/,"");if(r(e))return"";if(sw(e))return o(e.raw);if($s(e)){const m=e.slice(1),y=i(e[0]).replace(/\{([0-9]+)\}/g,(S,O)=>Sn(m,O)?o(m[O]):S);return u(y)}return u(i(e))},isRtl:()=>JS().bind(e=>zo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Sn(rp,e)},rc=()=>{const e=[],n={},o={},r=[],i=(ee,ue)=>{const we=Zt(r,De=>De.name===ee&&De.state===ue);Se(we,De=>De.resolve())},u=ee=>Sn(n,ee),m=ee=>Sn(o,ee),y=ee=>{if(o[ee])return o[ee].instance},S=(ee,ue)=>{const we=za.getCode(),De=","+(ue||"")+",";!we||ue&&De.indexOf(","+we+",")===-1||gd.ScriptLoader.add(n[ee]+"/langs/"+we+".js")},O=(ee,ue)=>{rc.languageLoad!==!1&&(u(ee)?S(ee,ue):re(ee,"loaded").then(()=>S(ee,ue)))},L=(ee,ue)=>(e.push(ue),o[ee]={instance:ue},i(ee,"added"),ue),F=ee=>{delete n[ee],delete o[ee]},V=(ee,ue)=>ce(ue)?ce(ee)?{prefix:"",resource:ue,suffix:""}:{prefix:ee.prefix,resource:ue,suffix:ee.suffix}:ue,Q=(ee,ue)=>{if(n[ee])return Promise.resolve();let we=ce(ue)?ue:ue.prefix+ue.resource+ue.suffix;we.indexOf("/")!==0&&we.indexOf("://")===-1&&(we=rc.baseURL+"/"+we),n[ee]=we.substring(0,we.lastIndexOf("/"));const De=()=>(i(ee,"loaded"),Promise.resolve());return o[ee]?De():gd.ScriptLoader.add(we).then(De)},re=(ee,ue="added")=>ue==="added"&&m(ee)||ue==="loaded"&&u(ee)?Promise.resolve():new Promise(we=>{r.push({name:ee,state:ue,resolve:we})});return{items:e,urls:n,lookup:o,get:y,requireLangPack:O,add:L,remove:F,createUrl:V,load:Q,waitFor:re}};rc.languageLoad=!0,rc.baseURL="",rc.PluginManager=rc(),rc.ThemeManager=rc(),rc.ModelManager=rc();const T1=(e,n)=>{let o=null;return{cancel:()=>{ne(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{ne(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Pm=(e,n)=>{let o=null;const r=()=>{ne(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},rw=(e,n,o)=>Ur(e,n,o).isSome(),ip=ct("mce-annotation"),Xd=ct("data-mce-annotation"),cp=ct("data-mce-annotation-uid"),tg=ct("data-mce-annotation-active"),Bm=ct("data-mce-annotation-classes"),Jd=ct("data-mce-annotation-attrs"),ng=e=>n=>ro(n,e),og=(e,n)=>{const o=e.selection.getRng(),r=be.fromDom(o.startContainer),i=be.fromDom(e.getBody()),u=n.fold(()=>"."+ip(),S=>`[${Xd()}="${S}"]`),m=Ni(r,o.startOffset).getOr(r);return Wl(m,u,ng(i)).bind(S=>wr(S,`${cp()}`).bind(O=>wr(S,`${Xd()}`).map(L=>{const F=lv(e,O);return{uid:O,name:L,elements:F}})))},Ak=e=>Fa(e)&&Hl(e,ip()),aw=(e,n)=>pi(e,"data-mce-bogus")||rw(e,'[data-mce-bogus="all"]',ng(n)),lv=(e,n)=>{const o=be.fromDom(e.getBody()),r=ci(o,`[${cp()}="${n}"]`);return Zt(r,i=>!aw(i,o))},QS=(e,n)=>{const o=be.fromDom(e.getBody()),r=ci(o,`[${Xd()}="${n}"]`),i={};return Se(r,u=>{if(!aw(u,o)){const m=ri(u,cp()),y=zo(i,m).getOr([]);i[m]=y.concat([u])}}),i},iw=(e,n)=>{const o=Be({}),r=()=>({listeners:[],previous:Ci()}),i=(F,V)=>{u(F,Q=>(V(Q),Q))},u=(F,V)=>{const Q=o.get(),re=zo(Q,F).getOrThunk(r),ee=V(re);Q[F]=ee,o.set(Q)},m=(F,V,Q)=>{i(F,re=>{Se(re.listeners,ee=>ee(!0,F,{uid:V,nodes:dt(Q,ue=>ue.dom)}))})},y=F=>{i(F,V=>{Se(V.listeners,Q=>Q(!1,F))})},S=(F,V)=>{Se(lv(e,F),Q=>{V?js(Q,tg(),"true"):Cr(Q,tg())})},O=Pm(()=>{const F=Vo(n.getNames());Se(F,V=>{u(V,Q=>{const re=Q.previous.get();return og(e,W.some(V)).fold(()=>{re.each(ee=>{y(V),Q.previous.clear(),S(ee,!1)})},({uid:ee,name:ue,elements:we})=>{Os(re,ee)||(re.each(De=>S(De,!1)),m(ue,ee,we),Q.previous.set(ee),S(ee,!0))}),{previous:Q.previous,listeners:Q.listeners}})})},30);return e.on("remove",()=>{O.cancel()}),e.on("NodeChange",()=>{O.throttle()}),{addListener:(F,V)=>{u(F,Q=>({previous:Q.previous,listeners:Q.listeners.concat([V])}))}}},uv=(e,n)=>{const o=Xd(),r=u=>W.from(u.attr(o)).bind(n.lookup),i=u=>{var m,y;u.attr(cp(),null),u.attr(Xd(),null),u.attr(tg(),null);const S=W.from(u.attr(Jd())).map(V=>V.split(",")).getOr([]),O=W.from(u.attr(Bm())).map(V=>V.split(",")).getOr([]);Se(S,V=>u.attr(V,null));const L=(y=(m=u.attr("class"))===null||m===void 0?void 0:m.split(" "))!==null&&y!==void 0?y:[],F=qr(L,[ip()].concat(O));u.attr("class",F.length>0?F.join(" "):null),u.attr(Bm(),null),u.attr(Jd(),null)};e.serializer.addTempAttr(tg()),e.serializer.addAttributeFilter(o,u=>{for(const m of u)r(m).each(y=>{y.persistent===!1&&(m.name==="span"?m.unwrap():i(m))})})},cw=()=>{const e={};return{register:(i,u)=>{e[i]={name:i,settings:u}},lookup:i=>zo(e,i).map(u=>u.settings),getNames:()=>Go(e)}},lw=(e,n,o)=>Math.min(Math.max(e,n),o),uw=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let k1=0;const dv=e=>{const o=new Date().getTime(),r=Math.floor(uw()*1e9);return k1++,e+"_"+r+k1+String(o)},TM=(e,n)=>{Se(n,o=>{gl(e,o)})},A1=(e,n)=>{Se(n,o=>{vu(e,o)})},lp=(e,n)=>be.fromDom(e.dom.cloneNode(n)),Im=e=>lp(e,!1),dw=e=>lp(e,!0),fw=(e,n)=>{const o=be.fromTag(n),r=gu(e);return Zc(o,r),o},ex=(e,n)=>{const o=fw(e,n);qi(e,o);const r=ra(e);return xu(o,r),gs(e),o},mw=(e,n,o=tt)=>{const r=new Ha(e,n),i=u=>{let m;do m=r[u]();while(m&&!pt(m)&&!o(m));return W.from(m).filter(pt)};return{current:()=>W.from(r.current()).filter(pt),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},sg=(e,n)=>{const o=n||(m=>e.isBlock(m)||Lo(m)||Fo(m)),r=(m,y,S,O)=>{if(pt(m)){const L=O(m,y,m.data);if(L!==-1)return W.some({container:m,offset:L})}return S().bind(L=>r(L.container,L.offset,S,O))};return{backwards:(m,y,S,O)=>{const L=mw(m,O??e.getRoot(),o);return r(m,y,()=>L.prev().map(F=>({container:F,offset:F.length})),S).getOrNull()},forwards:(m,y,S,O)=>{const L=mw(m,O??e.getRoot(),o);return r(m,y,()=>L.next().map(F=>({container:F,offset:0})),S).getOrNull()}}},hw=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?W.from(u.dom.nodeValue):W.none();return{get:o,getOption:r,set:(u,m)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=m}}})(Yr,"text"),Lm=e=>hw.get(e),up=e=>hw.getOption(e),gw=(e,n)=>hw.set(e,n),fv=["td","th"],pw=["thead","tbody","tfoot"],tx=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Fi=["li","dd","dt"],kM=["ul","ol","dl"],bw=["pre","script","textarea","style"],O1=e=>{let n;return o=>(n=n||Cs(e,yt),Sn(n,yo(o)))},Dk=e=>yo(e)==="table",el=e=>Fa(e)&&yo(e)==="br",Mu=O1(tx),Fm=O1(kM),rg=O1(Fi),nx=O1(pw),D1=O1(fv),mv=O1(bw),ox=e=>{const n=[];let o=e.dom;for(;o;)n.push(be.fromDom(o)),o=o.lastChild;return n},$m=e=>{const n=ci(e,"br"),o=Zt(ox(e).slice(-1),el);n.length===o.length&&Se(o,gs)},ag=()=>{const e=be.fromTag("br");return js(e,"data-mce-bogus","1"),e},eu=e=>{ad(e),rr(e,ag())},hv=(e,n)=>{td(e).each(o=>{Ul(o).each(r=>{n.isBlock(yo(e))&&el(o)&&n.isBlock(yo(r))&&gs(o)})})},Ma=Gg,vw=Qb,ac=Bi,Rk=e=>e.insertContent(Ma,{preserve_zwsp:!0}),sx=Wt,zf=pt,Hm=e=>(zf(e)&&(e=e.parentNode),sx(e)&&e.hasAttribute("data-mce-caret")),Uf=e=>zf(e)&&vw(e.data),tl=e=>Hm(e)||Uf(e),rx=e=>e.firstChild!==e.lastChild||!Lo(e.firstChild),R1=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Ma),u=e.parentNode;if(n){const m=e.previousSibling;if(zf(m)){if(tl(m))return m;if(ko(m))return m.splitText(m.data.length-1)}u==null||u.insertBefore(i,e)}else{const m=e.nextSibling;if(zf(m)){if(tl(m))return m;if(Vm(m))return m.splitText(1),m}e.nextSibling?u==null||u.insertBefore(i,e.nextSibling):u==null||u.appendChild(i)}return i},yw=e=>{const n=e.container();return pt(n)?n.data.charAt(e.offset())===Ma||e.isAtStart()&&Uf(n.previousSibling):!1},dp=e=>{const n=e.container();return pt(n)?n.data.charAt(e.offset()-1)===Ma||e.isAtEnd()&&Uf(n.nextSibling):!1},ig=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(ag().dom);const m=n.parentNode;return o?m==null||m.insertBefore(u,n):n.nextSibling?m==null||m.insertBefore(u,n.nextSibling):m==null||m.appendChild(u),u},Vm=e=>zf(e)&&e.data[0]===Ma,ko=e=>zf(e)&&e.data[e.data.length-1]===Ma,Mc=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Pf(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Qd=e=>e&&e.hasAttribute("data-mce-caret")?(Mc(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,gv=e=>Hm(e.startContainer),ys=Math.round,zm=e=>e?{left:ys(e.left),top:ys(e.top),bottom:ys(e.bottom),right:ys(e.right),width:ys(e.width),height:ys(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},pv=(e,n)=>(e=zm(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Mk=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Nk=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,M1=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Nk(n.top-e.bottom,e,n)},Hs=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Nk(n.bottom-e.top,e,n),ax=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,Pk=e=>Mo(e,(n,o)=>n.fold(()=>W.some(o),r=>{const i=Math.min(o.left,r.left),u=Math.min(o.top,r.top),m=Math.max(o.right,r.right),y=Math.max(o.bottom,r.bottom);return W.some({top:u,right:m,bottom:y,left:i,width:m-i,height:y-u})}),W.none()),ix=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),i=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-i)*(o-i))},cg=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),nl=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Um=(e,n)=>{if(Wt(e)&&e.hasChildNodes()){const o=e.childNodes,r=lw(n,0,o.length-1);return o[r]}else return e},ww=(e,n)=>{if(!(n<0&&Wt(e)&&e.hasChildNodes()))return Um(e,n)},tn=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),Cw=e=>ce(e)&&e.charCodeAt(0)>=768&&tn.test(e),Bk=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},cx=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},Sw=rt,lx=Fo,ux=Lo,pd=pt,N1=vl(["script","style","textarea"]),lg=vl(["img","input","textarea","hr","iframe","video","audio","object","embed"]),bv=vl(["table"]),Ik=tl,wl=e=>Ik(e)?!1:pd(e)?!N1(e.parentNode):lg(e)||ux(e)||bv(e)||xw(e),dx=e=>Wt(e)&&e.getAttribute("unselectable")==="true",xw=e=>!dx(e)&&lx(e),fx=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(xw(o))return!1;if(Sw(o))return!0}return!0},vv=e=>xw(e)?!Mo(_r(e.getElementsByTagName("*")),(n,o)=>n||Sw(o),!1):!1,Lk=e=>lg(e)||vv(e),yv=(e,n)=>wl(e)&&fx(e,n),Ew=Wt,_w=wl,mx=Zh("display","block table"),Fk=Zh("float","left right"),ef=cx(Ew,_w,eo(Fk)),hx=eo(Zh("white-space","pre pre-line pre-wrap")),fp=pt,mp=Lo,gx=Ks.nodeIndex,wv=ww,Tw=e=>e?e.createRange():Ks.DOM.createRng(),Cv=e=>ce(e)&&/[\r\n\t ]/.test(e),$k=e=>!!e.setStart&&!!e.setEnd,ic=e=>{const n=e.startContainer,o=e.startOffset;if(Cv(e.toString())&&hx(n.parentNode)&&pt(n)){const r=n.data;if(Cv(r[o-1])||Cv(r[o+1]))return!0}return!1},Hk=e=>{const n=e.ownerDocument,o=Tw(n),r=n.createTextNode(Xr),i=e.parentNode;i.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=zm(o.getBoundingClientRect());return i.removeChild(r),u},Vk=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,i=e.endOffset;if(n===o&&pt(o)&&r===0&&i===1){const u=e.cloneRange();return u.setEndAfter(o),Zm(u)}else return null},Wm=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Zm=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=zm(r[0]):o=zm(e.getBoundingClientRect()),!$k(e)&&mp(e)&&Wm(o)?Hk(e):Wm(o)&&$k(e)&&(n=Vk(e))!==null&&n!==void 0?n:o},Wf=(e,n)=>{const o=pv(e,n);return o.width=1,o.right=o.left+1,o},kw=e=>{const n=[],o=m=>{m.height!==0&&(n.length>0&&Mk(m,n[n.length-1])||n.push(m))},r=(m,y)=>{const S=Tw(m.ownerDocument);if(y<m.data.length){if(Cw(m.data[y]))return;if(Cw(m.data[y-1])&&(S.setStart(m,y),S.setEnd(m,y+1),!ic(S))){o(Wf(Zm(S),!1));return}}y>0&&(S.setStart(m,y-1),S.setEnd(m,y),ic(S)||o(Wf(Zm(S),!1))),y<m.data.length&&(S.setStart(m,y),S.setEnd(m,y+1),ic(S)||o(Wf(Zm(S),!0)))},i=e.container(),u=e.offset();if(fp(i))return r(i,u),n;if(Ew(i))if(e.isAtEnd()){const m=wv(i,u);fp(m)&&r(m,m.data.length),ef(m)&&!mp(m)&&o(Wf(Zm(m),!1))}else{const m=wv(i,u);if(fp(m)&&r(m,0),ef(m)&&e.isAtEnd())return o(Wf(Zm(m),!1)),n;const y=wv(e.container(),e.offset()-1);ef(y)&&!mp(y)&&(mx(y)||mx(m)||!ef(m))&&o(Wf(Zm(y),!1)),ef(m)&&o(Wf(Zm(m),!0))}return n},Ge=(e,n,o)=>{const r=()=>(fp(e),n===0),i=()=>fp(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const L=Tw(e.ownerDocument);return L.setStart(e,n),L.setEnd(e,n),L},m=()=>(o||(o=kw(Ge(e,n))),o),y=()=>m().length>0,S=L=>L&&e===L.container()&&n===L.offset(),O=L=>wv(e,L?n-1:n);return{container:ct(e),offset:ct(n),toRange:u,getClientRects:m,isVisible:y,isAtStart:r,isAtEnd:i,isEqual:S,getNode:O}};Ge.fromRangeStart=e=>Ge(e.startContainer,e.startOffset),Ge.fromRangeEnd=e=>Ge(e.endContainer,e.endOffset),Ge.after=e=>Ge(e.parentNode,gx(e)+1),Ge.before=e=>Ge(e.parentNode,gx(e)),Ge.isAbove=(e,n)=>Xn(fo(n.getClientRects()),cs(e.getClientRects()),M1).getOr(!1),Ge.isBelow=(e,n)=>Xn(cs(n.getClientRects()),fo(e.getClientRects()),Hs).getOr(!1),Ge.isAtStart=e=>e?e.isAtStart():!1,Ge.isAtEnd=e=>e?e.isAtEnd():!1,Ge.isTextPosition=e=>e?pt(e.container()):!1,Ge.isElementPosition=e=>!Ge.isTextPosition(e);const Sv=(e,n)=>{pt(n)&&n.data.length===0&&e.remove(n)},Zf=(e,n,o)=>{n.insertNode(o),Sv(e,o.previousSibling),Sv(e,o.nextSibling)},jm=(e,n,o)=>{const r=W.from(o.firstChild),i=W.from(o.lastChild);n.insertNode(o),r.each(u=>Sv(e,u.previousSibling)),i.each(u=>Sv(e,u.nextSibling))},xv=(e,n,o)=>{ia(o)?jm(e,n,o):Zf(e,n,o)},ol=pt,Aw=Pf,Ow=Ks.nodeIndex,cc=e=>{const n=e.parentNode;return Aw(n)?cc(n):n},hp=e=>e?pe(e.childNodes,(n,o)=>(Aw(o)&&o.nodeName!=="BR"?n=n.concat(hp(o)):n.push(o),n),[]):[],px=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&ol(o);)n+=o.data.length;return n},bx=e=>n=>e===n,zk=e=>{let n,o;n=hp(cc(e)),o=fe(n,bx(e),e),n=n.slice(0,o+1);const r=pe(n,(i,u,m)=>(ol(u)&&ol(n[m-1])&&i++,i),0);return n=yc(n,vl([e.nodeName])),o=fe(n,bx(e),e),o-r},vx=e=>(ol(e)?"text()":e.nodeName.toLowerCase())+"["+zk(e)+"]",Uk=(e,n,o)=>{const r=[];for(let i=n.parentNode;i&&i!==e;i=i.parentNode)r.push(i);return r},yx=(e,n)=>{let o=[],r=n.container(),i=n.offset(),u;if(ol(r))u=px(r,i);else{const y=r.childNodes;i>=y.length?(u="after",i=y.length-1):u="before",r=y[i]}o.push(vx(r));let m=Uk(e,r);return m=yc(m,eo(Pf)),o=o.concat(Ta(m,y=>vx(y))),o.reverse().join("/")+","+u},Wk=(e,n,o)=>{let r=hp(e);return r=yc(r,(i,u)=>!ol(i)||!ol(r[u-1])),r=yc(r,vl([n])),r[o]},Zk=(e,n)=>{let o=e,r=0;for(;ol(o);){const i=o.data.length;if(n>=r&&n<=r+i){e=o,n=n-r;break}if(!ol(o.nextSibling)){e=o,n=i;break}r+=i,o=o.nextSibling}return ol(e)&&n>e.data.length&&(n=e.data.length),Ge(e,n)},Ev=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),i=o.length>1?o[1]:"before",u=pe(r,(m,y)=>{const S=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(y);return S?(S[1]==="text()"&&(S[1]="#text"),Wk(m,S[1],parseInt(S[2],10))):null},e);if(!u)return null;if(!ol(u)&&u.parentNode){let m;return i==="after"?m=Ow(u)+1:m=Ow(u),Ge(u.parentNode,m)}return Zk(u,parseInt(i,10))},_v=Fo,jk=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let i=n.previousSibling;i&&pt(i);i=i.previousSibling)r+=e(i.data).length;return r},wx=(e,n,o,r,i)=>{const u=i?r.startContainer:r.endContainer;let m=i?r.startOffset:r.endOffset;const y=[],S=e.getRoot();if(pt(u))y.push(o?jk(n,u,m):m);else{let O=0;const L=u.childNodes;m>=L.length&&L.length&&(O=1,m=Math.max(0,L.length-1)),y.push(e.nodeIndex(L[m],o)+O)}for(let O=u;O&&O!==S;O=O.parentNode)y.push(e.nodeIndex(O,o));return y},qk=(e,n,o,r)=>{const i=n.dom,u=wx(i,e,o,r,!0),m=n.isForward(),y=gv(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:m,...y};{const S=wx(i,e,o,r,!1);return{start:u,end:S,forward:m,...y}}},Dw=(e,n,o)=>{let r=0;return vt.each(e.select(n),i=>{if(i.getAttribute("data-mce-bogus")!=="all"){if(i===o)return!1;r++;return}}),r},hr=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Wt(o)&&o.nodeName==="TR"){const i=o.childNodes;o=i[Math.min(n?r:r-1,i.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},Rw=e=>(hr(e,!0),hr(e,!1),e),Cx=(e,n)=>{if(Wt(e)&&(e=Um(e,n),_v(e)))return e;if(tl(e)){pt(e)&&Hm(e)&&(e=e.parentNode);let o=e.previousSibling;if(_v(o)||(o=e.nextSibling,_v(o)))return o}},Tv=e=>Cx(e.startContainer,e.startOffset)||Cx(e.endContainer,e.endOffset),kv=(e,n,o)=>{const r=o.getNode(),i=o.getRng();if(r.nodeName==="IMG"||_v(r)){const m=r.nodeName;return{name:m,index:Dw(o.dom,m,r)}}const u=Tv(i);if(u){const m=u.tagName;return{name:m,index:Dw(o.dom,m,u)}}return qk(e,o,n,i)},$i=e=>{const n=e.getRng();return{start:yx(e.dom.getRoot(),Ge.fromRangeStart(n)),end:yx(e.dom.getRoot(),Ge.fromRangeEnd(n)),forward:e.isForward()}},Cl=e=>({rng:e.getRng(),forward:e.isForward()}),Mw=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Nw=(e,n)=>{const o=e.dom;let r=e.getRng();const i=o.uniqueId(),u=e.isCollapsed(),m=e.getNode(),y=m.nodeName,S=e.isForward();if(y==="IMG")return{name:y,index:Dw(o,y,m)};const O=Rw(r.cloneRange());if(!u){O.collapse(!1);const F=Mw(o,i+"_end",n);xv(o,O,F)}r=Rw(r),r.collapse(!0);const L=Mw(o,i+"_start",n);return xv(o,r,L),e.moveToBookmark({id:i,keep:!0,forward:S}),{id:i,forward:S}},Sx=(e,n,o=!1)=>n===2?kv(ac,o,e):n===3?$i(e):n?Cl(e):Nw(e,!1),Pw=nt(kv,$n,!0),P1=e=>{const n=u=>u(e),o=ct(e),r=()=>i,i={tag:!0,inner:e,fold:(u,m)=>m(e),isValue:yt,isError:tt,map:u=>lc.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>W.some(e)};return i},Av=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,i)=>r(e),isValue:tt,isError:yt,map:n,mapError:r=>lc.error(r(e)),bind:n,exists:tt,forall:yt,getOr:$n,or:$n,getOrThunk:to,orThunk:to,getOrDie:ms(String(e)),each:Pe,toOptional:W.none};return o},lc={value:P1,error:Av,fromOption:(e,n)=>e.fold(()=>Av(n),P1)},bd={generate:e=>{if(!jt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return Se(e,(r,i)=>{const u=Go(r);if(u.length!==1)throw new Error("one and only one name per case");const m=u[0],y=r[m];if(o[m]!==void 0)throw new Error("duplicate key detected:"+m);if(m==="cata")throw new Error("cannot have a case named cata (sorry)");if(!jt(y))throw new Error("case arguments must be an array");n.push(m),o[m]=(...S)=>{const O=S.length;if(O!==y.length)throw new Error("Wrong number of arguments to case "+m+". Expected "+y.length+" ("+y+"), got "+O);return{fold:(...F)=>{if(F.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+F.length);return F[i].apply(null,S)},match:F=>{const V=Go(F);if(n.length!==V.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+V.join(","));if(!bs(n,re=>et(V,re)))throw new Error("Not all branches were specified when using match. Specified: "+V.join(", ")+`
Required: `+n.join(", "));return F[m].apply(null,S)},log:F=>{console.log(F,{constructors:n,constructor:m,params:S})}}}}),o}};bd.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Bw=e=>{const n=[],o=[];return Se(e,r=>{r.fold(i=>{n.push(i)},i=>{o.push(i)})}),{errors:n,values:o}},tr=e=>e.type==="inline-command"||e.type==="inline-format",Nu=e=>e.type==="block-command"||e.type==="block-format",Gm=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,Gk=e=>{var n;const o=i=>lc.error({message:i,pattern:e}),r=(i,u,m)=>{if(e.format!==void 0){let y;if(jt(e.format)){if(!bs(e.format,ce))return o(i+" pattern has non-string items in the `format` array");y=e.format}else if(ce(e.format))y=[e.format];else return o(i+" pattern has non-string `format` parameter");return lc.value(u(y))}else return e.cmd!==void 0?ce(e.cmd)?lc.value(m(e.cmd,e.value)):o(i+" pattern has non-string `cmd` parameter"):o(i+" pattern is missing both `format` and `cmd` parameters")};if(!Ke(e))return o("Raw pattern is not an object");if(!ce(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ce(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let i=e.start,u=e.end;return u.length===0&&(u=i,i=""),r("Inline",m=>({type:"inline-format",start:i,end:u,format:m}),(m,y)=>({type:"inline-command",start:i,end:u,cmd:m,value:y}))}else{if(e.replacement!==void 0)return ce(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):lc.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const i=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:i}),(u,m)=>({type:"block-command",start:e.start,cmd:u,value:m,trigger:i}))}}},Iw=e=>Zt(e,Nu),Ex=e=>Zt(e,tr),ug=(e,n)=>({inlinePatterns:Ex(e),blockPatterns:Iw(e),dynamicPatternsLookup:n}),Ua=(e,n)=>({...e,blockPatterns:Zt(e.blockPatterns,o=>Gm(o,n))}),jf=e=>{const n=Bw(dt(e,Gk));return Se(n.errors,o=>console.error(o.message,o.pattern)),n.values},Kk=e=>n=>{const o=e(n);return jf(o)},Lw=St().deviceType,Yk=Lw.isTouch(),Ov=Ks.DOM,Fw=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Mo(n,(o,r)=>{const i=r.split("="),u=i[0],m=i.length>1?i[1]:u;return o[kr(u)]=kr(m),o},{})},Dv=e=>Nt(e,RegExp),nn=e=>n=>n.options.get(e),B1=e=>ce(e)||Ke(e),$w=(e,n="")=>o=>{const r=ce(o);if(r)if(o.indexOf("=")!==-1){const i=Fw(o);return{value:zo(i,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},_x=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:$w(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:$w(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ce(o)&&xo(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=et(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Jt(o)?{valid:!0,value:o}:ce(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ce(o)||Me(o,ce);return r?ce(o)?{value:dt(o.split(","),kr),valid:r}:jt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:$1(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ce(o)||Me(o,ce);return r?{value:jt(o)?o:dt(o.split(","),kr),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Jt(o)||ce(o);return r?o===!1||Lw.isiPhone()||Lw.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Yk}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||ce(o)||ve(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ce(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:B1}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:B1}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:B1}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:B1}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ce(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Me(o,Ke)||o===!1?{value:jf(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>ve(o)?{value:Kk(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Me(o,Dv)?{value:o,valid:!0}:Dv(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=et(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=et(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:za.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:Ov.getAttrib(e.getElement(),"placeholder")})})},Tx=nn("iframe_attrs"),Xk=nn("doctype"),ui=nn("document_base_url"),Jk=nn("body_id"),Km=nn("body_class"),Hw=nn("content_security_policy"),kx=nn("br_in_pre"),Si=nn("forced_root_block"),Ym=nn("forced_root_block_attrs"),qf=nn("newline_behavior"),Ax=nn("br_newline_selector"),Qk=nn("no_newline_selector"),eA=nn("keep_styles"),ya=nn("end_container_on_empty_block"),Pr=nn("automatic_uploads"),us=nn("images_reuse_filename"),xi=nn("images_replace_blob_uris"),wa=nn("icons"),Ca=nn("icons_url"),Rv=nn("images_upload_url"),Mv=nn("images_upload_base_path"),Ox=nn("images_upload_credentials"),Dx=nn("images_upload_handler"),Rx=nn("content_css_cors"),Nv=nn("referrer_policy"),Xm=nn("language"),Pv=nn("language_url"),tA=nn("indent_use_margin"),gp=nn("indentation"),nA=nn("content_css"),oA=nn("content_style"),Nc=nn("font_css"),AM=nn("directionality"),Mx=nn("inline_boundaries_selector"),Sl=nn("object_resizing"),Bv=nn("resize_img_proportional"),I1=nn("placeholder"),vd=nn("event_root"),uc=nn("service_message"),Jm=nn("theme"),Vw=nn("theme_url"),Iv=nn("model"),Nx=nn("model_url"),Gf=nn("inline_boundaries"),Px=nn("formats"),zw=nn("preview_styles"),Bx=nn("format_empty_lines"),L1=nn("format_noneditable_selector"),F1=nn("custom_ui_selector"),$1=nn("inline"),sA=nn("hidden_input"),Lv=nn("submit_patch"),rA=nn("add_form_submit_trigger"),Ix=nn("add_unload_trigger"),aA=nn("custom_undo_redo_levels"),Fv=nn("disable_nodechange"),Lx=nn("readonly"),iA=nn("editable_root"),Uw=nn("content_css_cors"),$v=nn("plugins"),cA=nn("external_plugins"),Fx=nn("block_unsupported_drop"),dc=nn("visual"),Ww=nn("visual_table_class"),Zw=nn("visual_anchor_class"),jw=nn("iframe_aria_text"),Hv=nn("setup"),lA=nn("init_instance_callback"),Vv=nn("urlconverter_callback"),$x=nn("auto_focus"),qw=nn("browser_spellcheck"),Gw=nn("protect"),Hx=nn("paste_block_drop"),pp=nn("paste_data_images"),Vx=nn("paste_preprocess"),zx=nn("paste_postprocess"),Ux=nn("newdocument_content"),uA=nn("paste_webkit_styles"),Wx=nn("paste_remove_styles_if_webkit"),Zx=nn("paste_merge_formats"),dA=nn("smart_paste"),zv=nn("paste_as_text"),jx=nn("paste_tab_spaces"),bp=nn("allow_html_data_urls"),qx=nn("text_patterns"),Kw=nn("text_patterns_lookup"),Gx=nn("noneditable_class"),fA=nn("editable_class"),Pu=nn("noneditable_regexp"),Uv=nn("preserve_cdata"),Wv=nn("highlight_on_focus"),Ei=nn("xss_sanitization"),OM=nn("init_content_sync"),xl=e=>e.options.isSet("text_patterns_lookup"),Yw=e=>vt.explode(e.options.get("font_size_style_values")),mA=e=>vt.explode(e.options.get("font_size_classes")),Qm=e=>e.options.get("encoding")==="xml",H1=e=>vt.explode(e.options.get("images_file_types")),hA=nn("table_tab_navigation"),Kx=nn("details_initial_state"),Xw=nn("details_serialized_state"),Yx=nn("sandbox_iframes"),Zv=e=>e.options.get("sandbox_iframes_exclusions"),V1=nn("convert_unsafe_embeds"),Xx=nn("license_key"),Jx=nn("api_key"),gA=Wt,jv=pt,qv=e=>{const n=e.parentNode;n&&n.removeChild(e)},pA=e=>{const n=ac(e);return{count:e.length-n.length,text:n}},vp=e=>{let n;for(;(n=e.data.lastIndexOf(Ma))!==-1;)e.deleteData(n,1)},Qx=(e,n)=>(dg(e),n),Gv=(e,n)=>{const o=pA(e.data.substr(0,n.offset())),r=pA(e.data.substr(n.offset()));return(o.text+r.text).length>0?(vp(e),Ge(e,n.offset()-o.count)):n},Jw=(e,n)=>{const o=n.container(),r=Wi(_r(o.childNodes),e).map(i=>i<n.offset()?Ge(o,n.offset()-1):n).getOr(n);return dg(e),r},Kv=(e,n)=>jv(e)&&n.container()===e?Gv(e,n):Qx(e,n),bA=(e,n)=>n.container()===e.parentNode?Jw(e,n):Qx(e,n),eE=(e,n)=>Ge.isTextPosition(n)?Kv(e,n):bA(e,n),dg=e=>{gA(e)&&tl(e)&&(rx(e)?e.removeAttribute("data-mce-caret"):qv(e)),jv(e)&&(vp(e),e.data.length===0&&qv(e))},tE=Fo,z1=wi,eh=qh,U1="*[contentEditable=false],video,audio,embed,object",nE=(e,n,o)=>{const r=pv(n.getBoundingClientRect(),o);let i,u;if(e.tagName==="BODY"){const y=e.ownerDocument.documentElement;i=e.scrollLeft||y.scrollLeft,u=e.scrollTop||y.scrollTop}else{const y=e.getBoundingClientRect();i=e.scrollLeft-y.left,u=e.scrollTop-y.top}r.left+=i,r.right+=i,r.top+=u,r.bottom+=u,r.width=1;let m=n.offsetWidth-n.clientWidth;return m>0&&(o&&(m*=-1),r.left+=m,r.right+=m),r},oE=e=>{var n,o;const r=ci(be.fromDom(e),U1);for(let i=0;i<r.length;i++){const u=r[i].dom;let m=u.previousSibling;if(ko(m)){const y=m.data;y.length===1?(n=m.parentNode)===null||n===void 0||n.removeChild(m):m.deleteData(y.length-1,1)}m=u.nextSibling,Vm(m)&&(m.data.length===1?(o=m.parentNode)===null||o===void 0||o.removeChild(m):m.deleteData(0,1))}},DM=(e,n,o,r)=>{const i=Ci();let u,m;const y=Si(e),S=e.dom,O=(ee,ue)=>{let we;if(L(),eh(ue))return null;if(o(ue)){const De=ig(y,ue,ee),Oe=nE(n,ue,ee);S.setStyle(De,"top",Oe.top),S.setStyle(De,"caret-color","transparent"),m=De;const $e=S.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});S.setStyles($e,{...Oe}),S.add(n,$e),i.set({caret:$e,element:ue,before:ee}),ee&&S.addClass($e,"mce-visual-caret-before"),F(),we=ue.ownerDocument.createRange(),we.setStart(De,0),we.setEnd(De,0)}else return m=R1(ue,ee),we=ue.ownerDocument.createRange(),yp(m.nextSibling)?(we.setStart(m,0),we.setEnd(m,0)):(we.setStart(m,1),we.setEnd(m,1)),we;return we},L=()=>{oE(n),m&&(dg(m),m=null),i.on(ee=>{S.remove(ee.caret),i.clear()}),u&&(clearInterval(u),u=void 0)},F=()=>{u=setInterval(()=>{i.on(ee=>{r()?S.toggleClass(ee.caret,"mce-visual-caret-hidden"):S.addClass(ee.caret,"mce-visual-caret-hidden")})},500)};return{show:O,hide:L,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(ee=>{const ue=nE(n,ee.element,ee.before);S.setStyles(ee.caret,{...ue})})},destroy:()=>clearInterval(u)}},vA=()=>pn.browser.isFirefox(),yp=e=>tE(e)||z1(e),tf=e=>(yp(e)||ql(e)&&vA())&&Af(be.fromDom(e)).exists(pa),yA=rt,Qw=Fo,sE=wi,rE=Zh("display","block table table-cell table-caption list-item"),aE=tl,eC=Hm,iE=Wt,th=pt,cE=wl,fg=e=>e>0,nh=e=>e<0,W1=(e,n)=>{let o;for(;o=e(n);)if(!eC(o))return o;return null},wp=(e,n,o,r,i)=>{const u=new Ha(e,r),m=Qw(e)||eC(e);let y;if(nh(n)){if(m&&(y=W1(u.prev.bind(u),!0),o(y)))return y;for(;y=W1(u.prev.bind(u),i);)if(o(y))return y}if(fg(n)){if(m&&(y=W1(u.next.bind(u),!0),o(y)))return y;for(;y=W1(u.next.bind(u),i);)if(o(y))return y}return null},Yv=(e,n)=>{const o=i=>yA(i.dom),r=i=>i.dom===n;return qs(be.fromDom(e),o,r).map(i=>i.dom).getOr(n)},oh=(e,n)=>{for(;e&&e!==n;){if(rE(e))return e;e=e.parentNode}return null},El=(e,n,o)=>oh(e.container(),o)===oh(n.container(),o),tC=(e,n)=>{if(!n)return W.none();const o=n.container(),r=n.offset();return iE(o)?W.from(o.childNodes[r+e]):W.none()},wA=(e,n)=>{var o;const i=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),i},Cp=(e,n,o)=>oh(n,e)===oh(o,e),lE=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let i=o;for(;i&&i!==n;){let u=i[r];if(u&&aE(u)&&(u=u[r]),Qw(u)||sE(u)){if(Cp(n,u,i))return u;break}if(cE(u))break;i=i.parentNode}return null},Sp=nt(wA,!0),xp=nt(wA,!1),di=(e,n,o)=>{let r;const i=nt(lE,!0,n),u=nt(lE,!1,n),m=o.startContainer,y=o.startOffset;if(Hm(m)){const S=th(m)?m.parentNode:m,O=S.getAttribute("data-mce-caret");if(O==="before"&&(r=S.nextSibling,tf(r)))return Sp(r);if(O==="after"&&(r=S.previousSibling,tf(r)))return xp(r)}if(!o.collapsed)return o;if(pt(m)){if(aE(m)){if(e===1){if(r=u(m),r)return Sp(r);if(r=i(m),r)return xp(r)}if(e===-1){if(r=i(m),r)return xp(r);if(r=u(m),r)return Sp(r)}return o}if(ko(m)&&y>=m.data.length-1)return e===1&&(r=u(m),r)?Sp(r):o;if(Vm(m)&&y<=1)return e===-1&&(r=i(m),r)?xp(r):o;if(y===m.data.length)return r=u(m),r?Sp(r):o;if(y===0)return r=i(m),r?xp(r):o}return o},Xv=(e,n)=>tC(e?0:-1,n).filter(Qw),Z1=(e,n,o)=>{const r=di(e,n,o);return e===-1?Ge.fromRangeStart(r):Ge.fromRangeEnd(r)},Jv=e=>W.from(e.getNode()).map(be.fromDom),uE=e=>W.from(e.getNode(!0)).map(be.fromDom),nC=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Qv=(e,n)=>{const o=El(e,n);return!o&&Lo(e.getNode())?!0:o};var la;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(la||(la={}));const e0=Fo,nf=pt,dE=Wt,oC=Lo,Kf=wl,j1=Lk,Ep=yv,t0=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},n0=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,sh=(e,n)=>{if(fg(e)){if(Kf(n.previousSibling)&&!nf(n.previousSibling))return Ge.before(n);if(nf(n))return Ge(n,0)}if(nh(e)){if(Kf(n.nextSibling)&&!nf(n.nextSibling))return Ge.after(n);if(nf(n))return Ge(n,n.data.length)}return nh(e)?oC(n)?Ge.before(n):Ge.after(n):Ge.before(n)},CA=(e,n)=>{const o=n.nextSibling;return o&&Kf(o)?nf(o)?Ge(o,0):Ge.before(o):sl(la.Forwards,Ge.after(n),e)},sl=(e,n,o)=>{let r,i,u,m;if(!dE(o)||!n)return null;if(n.isEqual(Ge.after(o))&&o.lastChild){if(m=Ge.after(o.lastChild),nh(e)&&Kf(o.lastChild)&&dE(o.lastChild))return oC(o.lastChild)?Ge.before(o.lastChild):m}else m=n;const y=m.container();let S=m.offset();if(nf(y)){if(nh(e)&&S>0)return Ge(y,--S);if(fg(e)&&S<y.length)return Ge(y,++S);r=y}else{if(nh(e)&&S>0&&(i=n0(y,S-1),Kf(i)))return!j1(i)&&(u=wp(i,e,Ep,i),u)?nf(u)?Ge(u,u.data.length):Ge.after(u):nf(i)?Ge(i,i.data.length):Ge.before(i);if(fg(e)&&S<y.childNodes.length&&(i=n0(y,S),Kf(i)))return oC(i)?CA(o,i):!j1(i)&&(u=wp(i,e,Ep,i),u)?nf(u)?Ge(u,0):Ge.before(u):nf(i)?Ge(i,0):Ge.after(i);r=i||m.getNode()}if(r&&(fg(e)&&m.isAtEnd()||nh(e)&&m.isAtStart())&&(r=wp(r,e,yt,o,!0),Ep(r,o)))return sh(e,r);i=r&&wp(r,e,Ep,o);const O=He(Zt(t0(y,o),e0));return O&&(!i||!O.contains(i))?(fg(e)?m=Ge.after(O):m=Ge.before(O),m):i?sh(e,i):null},yd=e=>({next:n=>sl(la.Forwards,n,e),prev:n=>sl(la.Backwards,n,e)}),sC=(e,n,o)=>{const r=e?Ge.before(o):Ge.after(o);return Pc(e,n,r)},fE=e=>Lo(e)?Ge.before(e):Ge.after(e),mE=e=>Ge.isTextPosition(e)?e.offset()===0:wl(e.getNode()),rC=e=>{if(Ge.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return wl(e.getNode(!0))},aC=(e,n)=>!Ge.isTextPosition(e)&&!Ge.isTextPosition(n)&&e.getNode()===n.getNode(!0),hE=e=>!Ge.isTextPosition(e)&&Lo(e.getNode()),gE=(e,n,o)=>e?!aC(n,o)&&!hE(n)&&rC(n)&&mE(o):!aC(o,n)&&mE(n)&&rC(o),Pc=(e,n,o)=>{const r=yd(n);return W.from(e?r.next(o):r.prev(o))},mg=(e,n,o)=>Pc(e,n,o).bind(r=>El(o,r,n)&&gE(e,o,r)?Pc(e,n,r):W.some(r)),iC=(e,n,o,r)=>mg(e,n,o).bind(i=>r(i)?iC(e,n,i,r):W.some(i)),rh=(e,n)=>{const o=e?n.firstChild:n.lastChild;return pt(o)?W.some(Ge(o,e?0:o.data.length)):o?wl(o)?W.some(e?Ge.before(o):fE(o)):sC(e,n,o):W.none()},Bc=nt(Pc,!0),rl=nt(Pc,!1),_i=nt(rh,!0),tu=nt(rh,!1),o0="_mce_caret",nu=e=>Wt(e)&&e.id===o0,hg=(e,n)=>{let o=n;for(;o&&o!==e;){if(nu(o))return o;o=o.parentNode}return null},SA=e=>ce(e.start),cC=e=>Sn(e,"rng"),xA=e=>Sn(e,"id"),EA=e=>Sn(e,"name"),pE=e=>vt.isArray(e.start),s0=e=>!EA(e)&&Jt(e.forward)?e.forward:!0,r0=(e,n)=>(Wt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Hi=(e,n)=>{const o=W.from(Ev(e.getRoot(),n.start)),r=W.from(Ev(e.getRoot(),n.end));return Xn(o,r,(i,u)=>{const m=e.createRng();return m.setStart(i.container(),i.offset()),m.setEnd(u.container(),u.offset()),{range:m,forward:s0(n)}})},_p=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Ma);e.appendChild(i),n.setStart(i,0),n.setEnd(i,0)},Tp=e=>!e.hasChildNodes(),q1=(e,n)=>tu(e).fold(tt,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),lC=(e,n,o)=>Tp(n)&&hg(e,n)?(_p(n,o),!0):!1,G1=(e,n,o,r)=>{const i=o[n?"start":"end"],u=e.getRoot();if(i){let m=u,y=i[0];for(let S=i.length-1;m&&S>=1;S--){const O=m.childNodes;if(lC(u,m,r))return!0;if(i[S]>O.length-1)return lC(u,m,r)?!0:q1(m,r);m=O[i[S]]}pt(m)&&(y=Math.min(i[0],m.data.length)),Wt(m)&&(y=Math.min(i[0],m.childNodes.length)),n?r.setStart(m,y):r.setEnd(m,y)}return!0},K1=e=>pt(e)&&e.data.length>0,gg=(e,n,o)=>{const r=e.get(o.id+"_"+n),i=r==null?void 0:r.parentNode,u=o.keep;if(r&&i){let m,y;if(n==="start"?u?r.hasChildNodes()?(m=r.firstChild,y=1):K1(r.nextSibling)?(m=r.nextSibling,y=0):K1(r.previousSibling)?(m=r.previousSibling,y=r.previousSibling.data.length):(m=i,y=e.nodeIndex(r)+1):(m=i,y=e.nodeIndex(r)):u?r.hasChildNodes()?(m=r.firstChild,y=1):K1(r.previousSibling)?(m=r.previousSibling,y=r.previousSibling.data.length):(m=i,y=e.nodeIndex(r)):(m=i,y=e.nodeIndex(r)),!u){const S=r.previousSibling,O=r.nextSibling;vt.each(vt.grep(r.childNodes),F=>{pt(F)&&(F.data=F.data.replace(/\uFEFF/g,""))});let L;for(;L=e.get(o.id+"_"+n);)e.remove(L,!0);if(pt(O)&&pt(S)&&!pn.browser.isOpera()){const F=S.data.length;S.appendData(O.data),e.remove(O),m=S,y=F}}return W.some(Ge(m,y))}else return W.none()},uC=(e,n)=>{const o=e.createRng();return G1(e,!0,n,o)&&G1(e,!1,n,o)?W.some({range:o,forward:s0(n)}):W.none()},a0=(e,n)=>{const o=gg(e,"start",n),r=gg(e,"end",n);return Xn(o,r.or(o),(i,u)=>{const m=e.createRng();return m.setStart(r0(e,i.container()),i.offset()),m.setEnd(r0(e,u.container()),u.offset()),{range:m,forward:s0(n)}})},Bu=(e,n)=>W.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),bE=(e,n)=>{const o=e.dom;if(n){if(pE(n))return uC(o,n);if(SA(n))return Hi(o,n);if(xA(n))return a0(o,n);if(EA(n))return Bu(o,n);if(cC(n))return W.some({range:n.rng,forward:s0(n)})}return W.none()},vE=(e,n,o)=>Sx(e,n,o),Yf=(e,n)=>{bE(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},_l=e=>Wt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",pg=(e=>n=>e===n)(Xr),ah=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,dC=e=>!ah(e)&&!pg(e)&&!Qb(e),i0=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},yE=e=>ws(e,n=>{const o=nl(n);return o?[be.fromDom(o)]:[]}),_A=e=>i0(e).length>1,TA=e=>Zt(yE(e),D1),bg=e=>ci(e,"td[data-mce-selected],th[data-mce-selected]"),fC=(e,n)=>{const o=bg(n);return o.length>0?o:TA(e)},kp=e=>fC(i0(e.selection.getSel()),be.fromDom(e.getBody())),X1=(e,n)=>Ur(e,"table",n),kA=e=>{const n=e.startContainer,o=e.startOffset;return pt(n)?o===0?W.some(be.fromDom(n)):W.none():W.from(n.childNodes[o]).map(be.fromDom)},c0=e=>{const n=e.endContainer,o=e.endOffset;return pt(n)?o===n.data.length?W.some(be.fromDom(n)):W.none():W.from(n.childNodes[o-1]).map(be.fromDom)},mC=e=>ai(e).fold(ct([e]),n=>[e].concat(mC(n))),hC=e=>td(e).fold(ct([e]),n=>yo(n)==="br"?Ul(n).map(o=>[e].concat(hC(o))).getOr([]):[e].concat(hC(n))),l0=(e,n)=>Xn(kA(n),c0(n),(o,r)=>{const i=Po(mC(e),nt(ro,o)),u=Po(hC(e),nt(ro,r));return i.isSome()&&u.isSome()}).getOr(!1),gC=(e,n,o,r)=>{const i=o,u=new Ha(o,i),m=Wo(e.schema.getMoveCaretBeforeOnEnterElements(),(S,O)=>!et(["td","th","table"],O.toLowerCase()));let y=o;do{if(pt(y)&&vt.trim(y.data).length!==0){r?n.setStart(y,0):n.setEnd(y,y.data.length);return}if(m[y.nodeName]){r?n.setStartBefore(y):y.nodeName==="BR"?n.setEndBefore(y):n.setEndAfter(y);return}}while(y=r?u.next():u.prev());i.nodeName==="BODY"&&(r?n.setStart(i,0):n.setEnd(i,i.childNodes.length))},Ap=e=>{const n=e.selection.getSel();return Fe(n)&&n.rangeCount>0},u0=(e,n)=>{const o=kp(e);o.length>0?Se(o,r=>{const i=r.dom,u=e.dom.createRng();u.setStartBefore(i),u.setEndAfter(i),n(u,!0)}):n(e.selection.getRng(),!1)},d0=(e,n,o)=>{const r=Nw(e,n);o(r),e.moveToBookmark(r)},f0=e=>so(e==null?void 0:e.nodeType),m0=e=>Wt(e)&&!_l(e)&&!nu(e)&&!Pf(e),Do=(e,n)=>{if(m0(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},of=(e,n,o)=>{const{selection:r,dom:i}=e,u=r.getNode(),m=Fo(u);d0(r,!0,()=>{n()}),m&&Fo(u)&&i.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&vg(i,r)},vg=(e,n)=>{var o,r;const i=n.getRng(),{startContainer:u,startOffset:m}=i,y=n.getNode();if(!Do(e,y)&&Wt(u)){const S=u.childNodes,O=e.getRoot();let L;if(m<S.length){const F=S[m];L=new Ha(F,(o=e.getParent(F,e.isBlock))!==null&&o!==void 0?o:O)}else{const F=S[S.length-1];L=new Ha(F,(r=e.getParent(F,e.isBlock))!==null&&r!==void 0?r:O),L.next(!0)}for(let F=L.current();F;F=L.next()){if(e.getContentEditable(F)==="false")return;if(pt(F)&&!p0(F)){i.setStart(F,0),n.setRng(i);return}}}},h0=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Wt(e)||!p0(e))return e}},g0=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Ou(e,n),ih=(e,n,o)=>e.schema.isValidChild(n,o),p0=(e,n=!1)=>{if(Fe(e)&&pt(e)){const o=n?e.data.replace(/ /g,""):e.data;return Tc(o)}else return!1},pC=e=>Fe(e)&&pt(e)&&e.length===0,bC=(e,n)=>{const o="[data-mce-cef-wrappable]",r=L1(e),i=sa(r)?o:`${o},${r}`;return pl(be.fromDom(n),i)},vC=(e,n)=>{const o=e.dom;return m0(n)&&o.getContentEditable(n)==="false"&&bC(e,n)&&o.select('[contenteditable="true"]',n).length===0},Xf=(e,n)=>ve(e)?e(n):(Fe(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),yg=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),wE=(e,n)=>{if(Qt(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=hd(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},J1=(e,n,o)=>{const r=e.getStyle(n,o);return wE(r,o)},yC=(e,n)=>{let o;return e.getParent(n,r=>Wt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},b0=(e,n,o)=>e.getParents(n,o,e.getRoot()),v0=(e,n,o)=>{const r=e.formatter.get(n);return Fe(r)&&Tt(r,o)},wC=(e,n)=>v0(e,n,r=>{const i=u=>ve(u)||u.length>1&&u.charAt(0)==="%";return Tt(["styles","attributes"],u=>zo(r,u).exists(m=>{const y=jt(m)?m:Di(m);return Tt(y,i)}))}),CE=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],i=u=>Wo(u,(m,y)=>Tt(r,S=>S===y));return v0(e,n,u=>{const m=i(u);return v0(e,o,y=>{const S=i(y);return Qa(m,S)})})},Jf=e=>Ys(e,"block"),y0=e=>Jf(e)&&e.wrapper===!0,SE=e=>Jf(e)&&e.wrapper!==!0,ou=e=>Ys(e,"selector"),Wa=e=>Ys(e,"inline"),Qf=e=>ou(e)&&Wa(e)&&Os(zo(e,"mixed"),!0),CC=e=>ou(e)&&e.expand!==!1&&!Wa(e),AA=e=>{const n=[];let o=e;for(;o;){if(pt(o)&&o.data!==Ma||o.childNodes.length>1)return[];Wt(o)&&n.push(o),o=o.firstChild}return n},w0=e=>AA(e).length>0,SC=e=>nu(e.dom)&&w0(e.dom),Op=_l,xE=b0,OA=p0,RM=g0,DA=e=>Lo(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,EE=(e,n)=>{let o=n;for(;o;){if(Wt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},_E=(e,n,o,r)=>{const i=n.data;if(e){for(let u=o;u>0;u--)if(r(i.charAt(u-1)))return u}else for(let u=o;u<i.length;u++)if(r(i.charAt(u)))return u;return-1},Yt=(e,n,o)=>_E(e,n,o,r=>pg(r)||ah(r)),Za=(e,n,o)=>_E(e,n,o,dC),Q1=(e,n,o,r,i,u)=>{let m;const y=e.getParent(o,e.isBlock)||n,S=(L,F,V)=>{const Q=sg(e),re=i?Q.backwards:Q.forwards;return W.from(re(L,F,(ee,ue)=>Op(ee.parentNode)?-1:(m=ee,V(i,ee,ue)),y))};return S(o,r,Yt).bind(L=>u?S(L.container,L.offset+(i?-1:0),Za):W.some(L)).orThunk(()=>m?W.some({container:m,offset:i?0:m.length}):W.none())},ja=(e,n,o,r,i)=>{const u=r[i];pt(r)&&sa(r.data)&&u&&(r=u);const m=xE(e,r);for(let y=0;y<m.length;y++)for(let S=0;S<n.length;S++){const O=n[S];if(!(Fe(O.collapsed)&&O.collapsed!==o.collapsed)&&ou(O)&&e.is(m[y],O.selector))return m[y]}return r},su=(e,n,o,r)=>{var i;let u=o;const m=e.getRoot(),y=n[0];if(Jf(y)&&(u=y.wrapper?null:e.getParent(o,y.block,m)),!u){const S=(i=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&i!==void 0?i:m;u=e.getParent(pt(o)?o.parentNode:o,O=>O!==m&&RM(e.schema,O),S)}if(u&&Jf(y)&&y.wrapper&&(u=xE(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!yg(u,"br")););return u||o},xC=(e,n,o,r)=>{const i=o.parentNode;return Fe(o[r])?!1:i===n||Qt(i)||e.isBlock(i)?!0:xC(e,n,i,r)},wg=(e,n,o,r,i)=>{let u=o;const m=i?"previousSibling":"nextSibling",y=e.getRoot();if(pt(o)&&!OA(o)&&(i?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let S=u[m];S;S=S[m]){const O=pt(S)&&!xC(e,y,S,m);if(!Op(S)&&!DA(S)&&!OA(S,O))return u}if(u===y||u.parentNode===y){o=u;break}u=u.parentNode}return o},eb=e=>Op(e.parentNode)||Op(e),Cg=(e,n,o,r=!1)=>{let{startContainer:i,startOffset:u,endContainer:m,endOffset:y}=n;const S=o[0];return Wt(i)&&i.hasChildNodes()&&(i=Um(i,u),pt(i)&&(u=0)),Wt(m)&&m.hasChildNodes()&&(m=Um(m,n.collapsed?y:y-1),pt(m)&&(y=m.data.length)),i=EE(e,i),m=EE(e,m),eb(i)&&(i=Op(i)?i:i.parentNode,n.collapsed?i=i.previousSibling||i:i=i.nextSibling||i,pt(i)&&(u=n.collapsed?i.length:0)),eb(m)&&(m=Op(m)?m:m.parentNode,n.collapsed?m=m.nextSibling||m:m=m.previousSibling||m,pt(m)&&(y=n.collapsed?0:m.length)),n.collapsed&&(Q1(e,e.getRoot(),i,u,!0,r).each(({container:F,offset:V})=>{i=F,u=V}),Q1(e,e.getRoot(),m,y,!1,r).each(({container:F,offset:V})=>{m=F,y=V})),(Wa(S)||S.block_expand)&&((!Wa(S)||!pt(i)||u===0)&&(i=wg(e,o,i,u,!0)),(!Wa(S)||!pt(m)||y===m.data.length)&&(m=wg(e,o,m,y,!1))),CC(S)&&(i=ja(e,o,n,i,"previousSibling"),m=ja(e,o,n,m,"nextSibling")),(Jf(S)||ou(S))&&(i=su(e,o,i,"previousSibling"),m=su(e,o,m,"nextSibling"),Jf(S)&&(e.isBlock(i)||(i=wg(e,o,i,u,!0),pt(i)&&(u=0)),e.isBlock(m)||(m=wg(e,o,m,y,!1),pt(m)&&(y=m.data.length)))),Wt(i)&&i.parentNode&&(u=e.nodeIndex(i),i=i.parentNode),Wt(m)&&m.parentNode&&(y=e.nodeIndex(m)+1,m=m.parentNode),{startContainer:i,startOffset:u,endContainer:m,endOffset:y}},tb=(e,n,o)=>{var r;const i=n.startOffset,u=Um(n.startContainer,i),m=n.endOffset,y=Um(n.endContainer,m-1),S=ue=>{const we=ue[0];pt(we)&&we===u&&i>=we.data.length&&ue.splice(0,1);const De=ue[ue.length-1];return m===0&&ue.length>0&&De===y&&pt(De)&&ue.splice(ue.length-1,1),ue},O=(ue,we,De)=>{const Oe=[];for(;ue&&ue!==De;ue=ue[we])Oe.push(ue);return Oe},L=(ue,we)=>e.getParent(ue,De=>De.parentNode===we,we),F=(ue,we,De)=>{const Oe=De?"nextSibling":"previousSibling";for(let $e=ue,ft=$e.parentNode;$e&&$e!==we;$e=ft){ft=$e.parentNode;const Ot=O($e===ue?$e:$e[Oe],Oe);Ot.length&&(De||Ot.reverse(),o(S(Ot)))}};if(u===y)return o(S([u]));const V=(r=e.findCommonAncestor(u,y))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,y))return F(u,V,!0);if(e.isChildOf(y,u))return F(y,V);const Q=L(u,V)||u,re=L(y,V)||y;F(u,Q,!0);const ee=O(Q===u?Q:Q.nextSibling,"nextSibling",re===y?re.nextSibling:re);ee.length&&o(S(ee)),F(y,re)},TE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],RA=e=>Yr(e)&&Lm(e)===Ma,MA=(e,n,o,r)=>$a(n).fold(()=>"skipping",i=>r==="br"||RA(n)?"valid":Ak(n)?"existing":nu(n.dom)?"caret":Tt(TE,u=>pl(n,u))?"valid-block":!ih(e,o,r)||!ih(e,yo(i),o)?"invalid-child":"valid"),Dp=(e,n)=>{const o=Cg(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},Sg=(e,n,o,r,i,u)=>{const{uid:m=n,...y}=o;gl(e,ip()),js(e,`${cp()}`,m),js(e,`${Xd()}`,r);const{attributes:S={},classes:O=[]}=i(m,y);if(Zc(e,S),TM(e,O),u){O.length>0&&js(e,`${Bm()}`,O.join(","));const L=Go(S);L.length>0&&js(e,`${Jd()}`,L.join(","))}},EC=e=>{vu(e,ip()),Cr(e,`${cp()}`),Cr(e,`${Xd()}`),Cr(e,`${tg()}`);const n=wr(e,`${Jd()}`).map(r=>r.split(",")).getOr([]),o=wr(e,`${Bm()}`).map(r=>r.split(",")).getOr([]);Se(n,r=>Cr(e,r)),A1(e,o),Cr(e,`${Bm()}`),Cr(e,`${Jd()}`)},_C=(e,n,o,r,i)=>{const u=be.fromTag("span",e);return Sg(u,n,o,r,i,!1),u},al=(e,n,o,r,i,u)=>{const m=[],y=_C(e.getDoc(),o,u,r,i),S=Ci(),O=()=>{S.clear()},L=()=>S.get().getOrThunk(()=>{const re=Im(y);return m.push(re),S.set(re),re}),F=re=>{Se(re,V)},V=re=>{switch(MA(e,re,"span",yo(re))){case"invalid-child":{O();const ue=ra(re);F(ue),O();break}case"valid-block":{O(),Sg(re,o,u,r,i,!0);break}case"valid":{const ue=L();rd(re,ue);break}}},Q=re=>{const ee=dt(re,be.fromDom);F(ee)};return tb(e.dom,n,re=>{O(),Q(re)}),m},sf=(e,n,o,r)=>{e.undoManager.transact(()=>{const i=e.selection,u=i.getRng(),m=kp(e).length>0,y=dv("mce-annotation");if(u.collapsed&&!m&&Dp(e,u),i.getRng().collapsed&&!m){const S=_C(e.getDoc(),y,r,n,o.decorate);Eu(S,Xr),i.getRng().insertNode(S.dom),i.select(S.dom)}else d0(i,!1,()=>{u0(e,S=>{al(e,S,y,n,o.decorate,r)})})})},C0=e=>{const n=cw();uv(e,n);const o=iw(e,n),r=si("span"),i=u=>{Se(u,m=>{r(m)?_c(m):EC(m)})};return{register:(u,m)=>{n.register(u,m)},annotate:(u,m)=>{n.lookup(u).each(y=>{sf(e,u,y,m)})},annotationChanged:(u,m)=>{o.addListener(u,m)},remove:u=>{og(e,W.some(u)).each(({elements:m})=>{const y=e.selection.getBookmark();i(m),e.selection.moveToBookmark(y)})},removeAll:u=>{const m=e.selection.getBookmark();kt(QS(e,u),(y,S)=>{i(y)}),e.selection.moveToBookmark(m)},getAll:u=>{const m=QS(e,u);return po(m,y=>dt(y,S=>S.dom))}}},Iu=e=>({getBookmark:nt(vE,e),moveToBookmark:nt(Yf,e)});Iu.isBookmarkNode=_l;const S0=(e,n,o)=>o.collapsed?!1:Tt(o.getClientRects(),r=>ax(r,e,n)),NA=(e,n)=>e.dispatch("PreProcess",n),x0=(e,n)=>e.dispatch("PostProcess",n),E0=e=>{e.dispatch("remove")},PA=e=>{e.dispatch("detach")},BA=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},IA=(e,n,o,r,i)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:i})},LA=(e,n,o,r,i)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:i})},_0=e=>{e.dispatch("PreInit")},kE=e=>{e.dispatch("PostRender")},FA=e=>{e.dispatch("Init")},T0=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Ti=(e,n,o)=>{e.dispatch(n,o)},ru=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},Tl=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},k0=(e,n)=>e.dispatch("BeforeSetContent",n),nb=(e,n)=>e.dispatch("SetContent",n),MM=(e,n)=>e.dispatch("BeforeGetContent",n),ob=(e,n)=>e.dispatch("GetContent",n),$A=(e,n)=>{e.dispatch("AutocompleterStart",n)},AE=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},OE=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},DE=e=>{e.dispatch("AutocompleterEnd")},HA=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),RE=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),A0=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),ME=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),bt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||bt.metaKeyPressed(e),metaKeyPressed:e=>pn.os.isMacOS()||pn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},kl="data-mce-selected",NE="table,img,figure.image,hr,video,span.mce-preview-object,details",TC=Math.abs,sb=Math.round,xg={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},kC=e=>e.type==="longpress"||e.type.indexOf("touch")===0,rb=(e,n)=>{const o=n.dom,r=n.getDoc(),i=document,u=n.getBody();let m,y,S,O,L,F,V,Q,re,ee,ue,we,De,Oe,$e,ft,Ot;const Kt=Gt=>Fe(Gt)&&(Xg(Gt)||o.is(Gt,"figure.image")),Je=Gt=>wi(Gt)||o.hasClass(Gt,"mce-preview-object"),ze=(Gt,ho)=>{if(kC(Gt)){const Co=Gt.touches[0];return Kt(Gt.target)&&!S0(Co.clientX,Co.clientY,ho)}else return Kt(Gt.target)&&!S0(Gt.clientX,Gt.clientY,ho)},ut=Gt=>{const ho=Gt.target;ze(Gt,n.selection.getRng())&&!Gt.isDefaultPrevented()&&n.selection.select(ho)},rn=Gt=>o.hasClass(Gt,"mce-preview-object")&&Fe(Gt.firstElementChild)?[Gt,Gt.firstElementChild]:o.is(Gt,"figure.image")?[Gt.querySelector("img")]:[Gt],wn=Gt=>{const ho=Sl(n);return!ho||Gt.getAttribute("data-mce-resize")==="false"||Gt===n.getBody()?!1:o.hasClass(Gt,"mce-preview-object")&&Fe(Gt.firstElementChild)?pl(be.fromDom(Gt.firstElementChild),ho):pl(be.fromDom(Gt),ho)},go=(Gt,ho)=>{if(Je(ho))return Gt.create("img",{src:pn.transparentSrc});if(ql(ho)){const Ya=es(O.name,"n")?fo:cs,is=ho.cloneNode(!0);return Ya(Gt.select("tr",is)).each(Pa=>{const Rd=Gt.select("td,th",Pa);Gt.setStyle(Pa,"height",null),Se(Rd,dm=>Gt.setStyle(dm,"height",null))}),is}else return ho.cloneNode(!0)},wo=(Gt,ho,Co)=>{if(Fe(Co)){const Ya=rn(Gt);Se(Ya,is=>{is.style[ho]||!n.schema.isValid(is.nodeName.toLowerCase(),ho)?o.setStyle(is,ho,Co):o.setAttrib(is,ho,""+Co)})}},ns=(Gt,ho,Co)=>{wo(Gt,"width",ho),wo(Gt,"height",Co)},ps=Gt=>{let ho,Co,Ya,is,Pa;ho=Gt.screenX-F,Co=Gt.screenY-V,Oe=ho*O[2]+ee,$e=Co*O[3]+ue,Oe=Oe<5?5:Oe,$e=$e<5?5:$e,(Kt(m)||Je(m))&&Bv(n)!==!1?Ya=!bt.modifierPressed(Gt):Ya=bt.modifierPressed(Gt),Ya&&(TC(ho)>TC(Co)?($e=sb(Oe*we),Oe=sb($e/we)):(Oe=sb($e/we),$e=sb(Oe*we))),ns(y,Oe,$e),is=O.startPos.x+ho,Pa=O.startPos.y+Co,is=is>0?is:0,Pa=Pa>0?Pa:0,o.setStyles(S,{left:is,top:Pa,display:"block"}),S.innerHTML=Oe+" &times; "+$e,O[2]<0&&y.clientWidth<=Oe&&o.setStyle(y,"left",Q+(ee-Oe)),O[3]<0&&y.clientHeight<=$e&&o.setStyle(y,"top",re+(ue-$e)),ho=u.scrollWidth-ft,Co=u.scrollHeight-Ot,ho+Co!==0&&o.setStyles(S,{left:is-ho,top:Pa-Co}),De||(IA(n,m,ee,ue,"corner-"+O.name),De=!0)},Lr=()=>{const Gt=De;De=!1,Gt&&(wo(m,"width",Oe),wo(m,"height",$e)),o.unbind(r,"mousemove",ps),o.unbind(r,"mouseup",Lr),i!==r&&(o.unbind(i,"mousemove",ps),o.unbind(i,"mouseup",Lr)),o.remove(y),o.remove(S),o.remove(L),Ea(m),Gt&&(LA(n,m,Oe,$e,"corner-"+O.name),o.setAttrib(m,"style",o.getAttrib(m,"style"))),n.nodeChanged()},Ea=Gt=>{zt();const ho=o.getPos(Gt,u),Co=ho.x,Ya=ho.y,is=Gt.getBoundingClientRect(),Pa=is.width||is.right-is.left,Rd=is.height||is.bottom-is.top;m!==Gt&&(Bt(),m=Gt,Oe=$e=0);const dm=n.dispatch("ObjectSelected",{target:Gt});wn(Gt)&&!dm.isDefaultPrevented()?kt(xg,(Fc,Pl)=>{const Yu=Xu=>{const Cn=rn(m)[0];F=Xu.screenX,V=Xu.screenY,ee=Cn.clientWidth,ue=Cn.clientHeight,we=ue/ee,O=Fc,O.name=Pl,O.startPos={x:Pa*Fc[0]+Co,y:Rd*Fc[1]+Ya},ft=u.scrollWidth,Ot=u.scrollHeight,L=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(L,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),y=go(o,m),o.addClass(y,"mce-clonedresizable"),o.setAttrib(y,"data-mce-bogus","all"),y.contentEditable="false",o.setStyles(y,{left:Co,top:Ya,margin:0}),ns(y,Pa,Rd),y.removeAttribute(kl),u.appendChild(y),o.bind(r,"mousemove",ps),o.bind(r,"mouseup",Lr),i!==r&&(o.bind(i,"mousemove",ps),o.bind(i,"mouseup",Lr)),S=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},ee+" &times; "+ue)};let Bl=o.get("mceResizeHandle"+Pl);Bl&&o.remove(Bl),Bl=o.add(u,"div",{id:"mceResizeHandle"+Pl,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Pl+"-resize; margin:0; padding:0"}),o.bind(Bl,"mousedown",Xu=>{Xu.stopImmediatePropagation(),Xu.preventDefault(),Yu(Xu)}),Fc.elm=Bl,o.setStyles(Bl,{left:Pa*Fc[0]+Co-Bl.offsetWidth/2,top:Rd*Fc[1]+Ya-Bl.offsetHeight/2})}):Bt(!1)},Ts=T1(Ea,0),Bt=(Gt=!0)=>{Ts.cancel(),zt(),m&&Gt&&m.removeAttribute(kl),kt(xg,(ho,Co)=>{const Ya=o.get("mceResizeHandle"+Co);Ya&&(o.unbind(Ya),o.remove(Ya))})},vn=(Gt,ho)=>o.isChildOf(Gt,ho),$o=Gt=>{if(De||n.removed||n.composing)return;const ho=Gt.type==="mousedown"?Gt.target:e.getNode(),Co=Wl(be.fromDom(ho),NE).map(is=>is.dom).filter(is=>o.isEditable(is.parentElement)||is.nodeName==="IMG"&&o.isEditable(is)).getOrUndefined(),Ya=Fe(Co)?o.getAttrib(Co,kl,"1"):"1";if(Se(o.select(`img[${kl}],hr[${kl}]`),is=>{is.removeAttribute(kl)}),Fe(Co)&&vn(Co,u)&&n.hasFocus()){Tn();const is=e.getStart(!0);if(vn(is,Co)&&vn(e.getEnd(!0),Co)){o.setAttrib(Co,kl,Ya),Ts.throttle(Co);return}}Bt()},zt=()=>{kt(xg,Gt=>{Gt.elm&&(o.unbind(Gt.elm),delete Gt.elm)})},Tn=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Tn(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",$o),n.on("keyup compositionend",Gt=>{m&&m.nodeName==="TABLE"&&$o(Gt)}),n.on("hide blur",Bt),n.on("contextmenu longpress",ut,!0)}),n.on("remove",zt),{isResizable:wn,showResizeRect:Ea,hideResizeRect:Bt,updateResizeRect:$o,destroy:()=>{Ts.cancel(),m=y=L=null}}},PE=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},VA=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},AC=(e,n,o)=>{const r=e.document.createRange();return PE(r,n),VA(r,o),r},ab=(e,n,o,r,i)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,i),u},ch=bd.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),BE=(e,n,o)=>n(be.fromDom(o.startContainer),o.startOffset,be.fromDom(o.endContainer),o.endOffset),IE=(e,n)=>n.match({domRange:o=>({ltr:ct(o),rtl:W.none}),relative:(o,r)=>({ltr:qe(()=>AC(e,o,r)),rtl:qe(()=>W.some(AC(e,r,o)))}),exact:(o,r,i,u)=>({ltr:qe(()=>ab(e,o,r,i,u)),rtl:qe(()=>W.some(ab(e,i,u,o,r)))})}),zA=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(i=>i.collapsed===!1).map(i=>ch.rtl(be.fromDom(i.endContainer),i.endOffset,be.fromDom(i.startContainer),i.startOffset)).getOrThunk(()=>BE(e,ch.ltr,o)):BE(e,ch.ltr,o)},OC=(e,n)=>{const o=IE(e,n);return zA(e,o)};ch.ltr,ch.rtl;const il={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Ki=(e,n,o)=>{var r;return W.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(i=>{if(i.offsetNode===null)return W.none();const u=e.createRange();return u.setStart(i.offsetNode,i.offset),u.collapse(),W.some(u)})},Rp=(e,n,o)=>{var r;return W.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},NM=(e,n,o)=>e.caretPositionFromPoint?Ki(e,n,o):e.caretRangeFromPoint?Rp(e,n,o):W.none(),WA=(e,n,o)=>{const r=e.document;return NM(r,n,o).map(i=>il.create(be.fromDom(i.startContainer),i.startOffset,be.fromDom(i.endContainer),i.endOffset))},DC=bd.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ro=(e,n,o,r)=>e.fold(n,o,r),ZA=e=>e.fold($n,$n,$n),jA=DC.before,LE=DC.on,PM=DC.after,rf={before:jA,on:LE,after:PM,cata:Ro,getStart:ZA},O0=bd.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),qA=e=>O0.exact(e.start,e.soffset,e.finish,e.foffset),GA=e=>e.match({domRange:n=>be.fromDom(n.startContainer),relative:(n,o)=>rf.getStart(n),exact:(n,o,r,i)=>n}),FE=O0.domRange,ib=O0.relative,RC=O0.exact,$E=e=>{const n=GA(e);return Fd(n)},BM=il.create,Mp={domRange:FE,relative:ib,exact:RC,exactFromRange:qA,getWin:$E,range:BM},MC=(e,n)=>{const o=yo(e);return o==="input"?rf.after(e):et(["br","img"],o)?n===0?rf.before(e):rf.after(e):rf.on(e,n)},IM=(e,n)=>{const o=e.fold(rf.before,MC,rf.after),r=n.fold(rf.before,MC,rf.after);return Mp.relative(o,r)},HE=(e,n,o,r)=>{const i=MC(e,n),u=MC(o,r);return Mp.relative(i,u)},KA=e=>e.match({domRange:n=>{const o=be.fromDom(n.startContainer),r=be.fromDom(n.endContainer);return HE(o,n.startOffset,r,n.endOffset)},relative:IM,exact:HE}),l=(e,n)=>{const r=document.createDocumentFragment();return Se(e,i=>{r.appendChild(i.dom)}),be.fromDom(r)},f=e=>{const n=Mp.getWin(e).dom,o=(i,u,m,y)=>ab(n,i,u,m,y),r=KA(e);return OC(n,r).match({ltr:o,rtl:o})},v=(e,n,o)=>WA(e,n,o),C=(e,n,o)=>{const r=Fd(be.fromDom(o));return v(r.dom,e,n).map(i=>{const u=o.createRange();return u.setStart(i.start.dom,i.soffset),u.setEnd(i.finish.dom,i.foffset),u}).getOrUndefined()},A=(e,n)=>Fe(e)&&Fe(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,B=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},U=(e,n,o)=>B(e,n,o)!==null,J=(e,n,o)=>U(e,n,r=>r.nodeName===o),ae=(e,n)=>tl(e)&&!U(e,n,nu),Ce=(e,n,o)=>{const r=n.parentNode;if(r){const i=new Ha(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=i[o?"prev":"next"]();)if(Lo(u))return!0}return!1},Le=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},wt=(e,n)=>{let o=n;for(;o&&o!==e;){if(Fo(o))return!0;o=o.parentNode}return!1},Vt=(e,n,o,r,i)=>{const u=e.getRoot(),m=e.schema.getNonEmptyElements(),y=i.parentNode;let S,O;if(!y)return W.none();const L=e.getParent(y,e.isBlock)||u;if(r&&Lo(i)&&n&&e.isEmpty(L))return W.some(Ge(y,e.nodeIndex(i)));const F=new Ha(i,L);for(;O=F[r?"prev":"next"]();){if(e.getContentEditableParent(O)==="false"||ae(O,u))return W.none();if(pt(O)&&O.data.length>0)return J(O,u,"A")?W.none():W.some(Ge(O,r?O.data.length:0));if(e.isBlock(O)||m[O.nodeName.toLowerCase()])return W.none();S=O}return ba(S)?W.none():o&&S?W.some(Ge(S,0)):W.none()},Ft=(e,n,o,r)=>{const i=e.getRoot();let u,m=!1,y=o?r.startContainer:r.endContainer,S=o?r.startOffset:r.endOffset;const O=Wt(y)&&S===y.childNodes.length,L=e.schema.getNonEmptyElements();let F=o;if(tl(y))return W.none();if(Wt(y)&&S>y.childNodes.length-1&&(F=!1),Em(y)&&(y=i,S=0),y===i){if(F&&(u=y.childNodes[S>0?S-1:0],u&&(tl(u)||L[u.nodeName]||ql(u))))return W.none();if(y.hasChildNodes()){if(S=Math.min(!F&&S>0?S-1:S,y.childNodes.length-1),y=y.childNodes[S],S=pt(y)&&O?y.data.length:0,!n&&y===i.lastChild&&ql(y)||wt(i,y)||tl(y)||kc(y))return W.none();if(y.hasChildNodes()&&!ql(y)){u=y;const V=new Ha(y,i);do{if(Fo(u)||tl(u)){m=!1;break}if(pt(u)&&u.data.length>0){S=F?0:u.data.length,y=u,m=!0;break}if(L[u.nodeName.toLowerCase()]&&!Jr(u)){S=e.nodeIndex(u),y=u.parentNode,F||S++,m=!0;break}}while(u=F?V.next():V.prev())}}}return n&&(pt(y)&&S===0&&Vt(e,O,n,!0,y).each(V=>{y=V.container(),S=V.offset(),m=!0}),Wt(y)&&(u=y.childNodes[S],u||(u=y.childNodes[S-1]),u&&Lo(u)&&!Le(u,"A")&&!Ce(e,u,!1)&&!Ce(e,u,!0)&&Vt(e,O,n,!0,u).each(V=>{y=V.container(),S=V.offset(),m=!0}))),F&&!n&&pt(y)&&S===y.data.length&&Vt(e,O,n,!1,y).each(V=>{y=V.container(),S=V.offset(),m=!0}),m&&y?W.some(Ge(y,S)):W.none()},Dt=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),i=Ge.fromRangeStart(n);return Ft(e,o,!0,r).each(u=>{(!o||!Ge.isAbove(i,u))&&r.setStart(u.container(),u.offset())}),o||Ft(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),A(n,r)?W.none():W.some(r)},ln=(e,n)=>e.splitText(n),ht=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;if(n===r&&pt(n)){if(o>0&&o<n.data.length)if(r=ln(n,o),n=r.previousSibling,i>o){i=i-o;const u=ln(r,i).previousSibling;n=r=u,i=u.data.length,o=0}else i=0}else if(pt(n)&&o>0&&o<n.data.length&&(n=ln(n,o),o=0),pt(r)&&i>0&&i<r.data.length){const u=ln(r,i).previousSibling;r=u,i=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:i}},_t=e=>({walk:(u,m)=>tb(e,u,m),split:ht,expand:(u,m={type:"word"})=>{if(m.type==="word"){const y=Cg(e,u,[{inline:"span"}]),S=e.createRng();return S.setStart(y.startContainer,y.startOffset),S.setEnd(y.endContainer,y.endOffset),S}return u},normalize:u=>Dt(e,u).fold(tt,m=>(u.setStart(m.startContainer,m.startOffset),u.setEnd(m.endContainer,m.endOffset),!0))});_t.compareRanges=A,_t.getCaretRangeFromPoint=C,_t.getSelectedNode=nl,_t.getNode=Um;const In=((e,n)=>{const o=(y,S)=>{if(!so(S)&&!S.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+S);const O=y.dom;Su(O)&&(O.style[e]=S+"px")},r=y=>{const S=n(y);if(S<=0||S===null){const O=Wr(y,e);return parseFloat(O)||0}return S},i=r,u=(y,S)=>Mo(S,(O,L)=>{const F=Wr(y,L),V=F===void 0?0:parseInt(F,10);return isNaN(V)?O:O+V},0);return{set:o,get:r,getOuter:i,aggregate:u,max:(y,S,O)=>{const L=u(y,O);return S>L?S-L:0}}})("height",e=>{const n=e.dom;return nd(e)?n.getBoundingClientRect().height:n.offsetHeight}),bn=e=>In.get(e),ir=()=>be.fromDom(document),ds=(e,n)=>e.view(n).fold(ct([]),r=>{const i=e.owner(r),u=ds(e,i);return[r].concat(u)}),Br=(e,n)=>{const o=n.owner(e);return ds(n,o)};var Eg=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?W.none():W.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(be.fromDom)},owner:e=>Cu(e)});const _g=e=>{const n=ir(),o=Dn(n),r=Br(e,Eg),i=Jn(e),u=ss(r,(m,y)=>{const S=Jn(y);return{left:m.left+S.left,top:m.top+S.top}},{left:0,top:0});return me(u.left+i.left+o.left,u.top+i.top+o.top)},as=e=>yo(e)==="textarea",qa=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),fc=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Lu=(e,n)=>{const o=ra(e);if(o.length===0||as(e))return{element:e,offset:n};if(n<o.length&&!as(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return as(r)?{element:e,offset:n}:yo(r)==="img"?{element:r,offset:1}:Yr(r)?{element:r,offset:Lm(r).length}:{element:r,offset:ra(r).length}}},Ol=(e,n)=>{const o=kn(e),r=bn(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},Np=(e,n)=>{const o=Lu(e,n),r=be.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Ma+"</span>");return ii(o.element,r),Ol(r,()=>gs(r))},Qn=e=>Ol(be.fromDom(e),Pe),Dl=(e,n,o,r)=>{Io(e,(i,u)=>af(e,n,o,r),o)},Fu=(e,n,o,r,i)=>{const u={elm:r.element.dom,alignToTop:i};if(qa(e,u))return;const m=Dn(n).top;o(e,n,m,r,i),fc(e,u)},af=(e,n,o,r)=>{const i=be.fromDom(e.getBody()),u=be.fromDom(e.getDoc());aa(i);const m=Np(be.fromDom(o.startContainer),o.startOffset);Fu(e,u,n,m,r),m.cleanup()},Sa=(e,n,o,r)=>{const i=be.fromDom(e.getDoc());Fu(e,i,o,Qn(n),r)},Io=(e,n,o)=>{const r=o.startContainer,i=o.startOffset,u=o.endContainer,m=o.endOffset;n(be.fromDom(r),be.fromDom(u));const y=e.dom.createRng();y.setStart(r,i),y.setEnd(u,m),e.selection.setRng(o)},NC=(e,n,o,r,i)=>{const u=n.pos;if(r)An(u.left,u.top,i);else{const m=u.top-o+n.height;An(-e.getBody().getBoundingClientRect().left,m,i)}},PC=(e,n,o,r,i,u)=>{const m=r+o,y=i.pos.top,S=i.bottom,O=S-y>=r;y<o?NC(e,i,r,u!==!1,n):y>m?NC(e,i,r,O?u!==!1:u===!0,n):S>m&&!O&&NC(e,i,r,u===!0,n)},D0=(e,n,o,r,i)=>{const u=Fd(n).dom.innerHeight;PC(e,n,o,u,r,i)},VE=(e,n,o,r,i)=>{const u=Fd(n).dom.innerHeight;PC(e,n,o,u,r,i);const m=_g(r.element),y=jl(window);m.top<y.y?Rs(r.element,i!==!1):m.top>y.bottom&&Rs(r.element,i===!0)},em=(e,n,o)=>Dl(e,D0,n,o),Tg=(e,n,o)=>Sa(e,n,D0,o),Pp=(e,n,o)=>Dl(e,VE,n,o),o7=(e,n,o)=>Sa(e,n,VE,o),s7=(e,n,o)=>{(e.inline?Tg:o7)(e,n,o)},BC=(e,n,o)=>{(e.inline?em:Pp)(e,n,o)},R0=(e,n=!1)=>e.dom.focus({preventScroll:n}),cb=e=>{const n=jc(e).dom;return e.dom===n.activeElement},YA=(e=ir())=>W.from(e.dom.activeElement).map(be.fromDom),LM=e=>YA(jc(e)).filter(n=>e.dom.contains(n.dom)),FM=(e,n)=>{const o=Yr(n)?Lm(n).length:ra(n).length+1;return e>o?o:e<0?0:e},r7=e=>Mp.range(e.start,FM(e.soffset,e.start),e.finish,FM(e.foffset,e.finish)),$M=(e,n)=>!Zd(n.dom)&&(Rr(e,n)||ro(e,n)),XA=e=>n=>$M(e,n.start)&&$M(e,n.finish),PK=e=>e.inline||pn.browser.isFirefox(),a7=e=>Mp.range(be.fromDom(e.startContainer),e.startOffset,be.fromDom(e.endContainer),e.endOffset),HM=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?W.none():W.from(n.getRangeAt(0))).map(a7)},JA=e=>{const n=Fd(e);return HM(n.dom).filter(XA(e))},QA=(e,n)=>W.from(n).filter(XA(e)).map(r7),eO=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),W.some(n)}catch{return W.none()}},IC=e=>{const n=PK(e)?JA(be.fromDom(e.getBody())):W.none();e.bookmark=n.isSome()?n:e.bookmark},zE=e=>(e.bookmark?e.bookmark:W.none()).bind(o=>QA(be.fromDom(e.getBody()),o)).bind(eO),VM=e=>{zE(e).each(n=>e.selection.setRng(n))},zM={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},UM=(e,n)=>(so(n)||(n=0),setTimeout(e,n)),i7=(e,n)=>(so(n)||(n=0),setInterval(e,n)),$u={setEditorTimeout:(e,n,o)=>UM(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=i7(()=>{e.removed?clearInterval(r):n()},o);return r}},WM=e=>e.type==="nodechange"&&e.selectionChange,ZM=(e,n)=>{const o=()=>{n.throttle()};Ks.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Ks.DOM.unbind(document,"mouseup",o)})},jM=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},qM=(e,n)=>{jM(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{WM(o)||IC(e)})},c7=e=>{const n=T1(()=>{IC(e)},0);e.on("init",()=>{e.inline&&ZM(e,n),qM(e,n)}),e.on("remove",()=>{n.cancel()})};let M0;const nO=Ks.DOM,l7=e=>Wt(e)&&zM.isEditorUIElement(e),oO=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},UE=(e,n)=>{const o=F1(e);return nO.getParent(n,i=>l7(i)||(o?e.dom.is(i,o):!1))!==null},sO=e=>{try{const n=jc(be.fromDom(e.getElement()));return YA(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},u7=(e,n)=>{const o=n.editor;c7(o);const r=(i,u)=>{if(Wv(i)&&i.inline!==!0){const m=be.fromDom(i.getContainer());u(m,"tox-edit-focus")}};o.on("focusin",()=>{const i=e.focusedEditor;oO(sO(o))&&r(o,gl),i!==o&&(i&&i.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:i}),o.focus(!0))}),o.on("focusout",()=>{$u.setEditorTimeout(o,()=>{const i=e.focusedEditor;(!oO(sO(o))||i!==o)&&r(o,vu),!UE(o,sO(o))&&i===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),M0||(M0=i=>{const u=e.activeEditor;u&&ym(i).each(m=>{const y=m;y.ownerDocument===document&&y!==document.body&&!UE(u,y)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},nO.bind(document,"focusin",M0))},WE=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&M0&&(nO.unbind(document,"focusin",M0),M0=null)},GM=e=>{e.on("AddEditor",nt(u7,e)),e.on("RemoveEditor",nt(WE,e))},d7=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),KM=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,YM=e=>e.collapsed?W.from(Um(e.startContainer,e.startOffset)).map(be.fromDom):W.none(),f7=(e,n)=>YM(n).bind(o=>nx(o)?W.some(o):Rr(e,o)?W.none():W.some(e)),XM=(e,n)=>{f7(be.fromDom(e.getBody()),n).bind(o=>_i(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},ZE=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},m7=e=>cb(e)||LM(e).isSome(),h7=e=>Fe(e.iframeElement)&&cb(be.fromDom(e.iframeElement)),JM=e=>{const n=e.getBody();return n&&m7(be.fromDom(n))},QM=e=>{const n=jc(be.fromDom(e.getElement()));return YA(n).filter(o=>!oO(o.dom)&&UE(e,o.dom)).isSome()},kg=e=>e.inline?JM(e):h7(e),eN=e=>kg(e)||QM(e),g7=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const i=m=>{zE(m).each(y=>{m.selection.setRng(y),r=y})};!kg(e)&&e.hasEditableRoot()&&i(e);const u=d7(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){KM(e,u)||ZE(o),ZE(u),e.hasEditableRoot()||i(e),XM(e,r),LC(e);return}e.inline||(pn.browser.isOpera()||ZE(o),e.getWin().focus()),(pn.browser.isFirefox()||e.inline)&&(ZE(o),XM(e,r)),LC(e)},LC=e=>e.editorManager.setActive(e),p7=(e,n)=>{e.removed||(n?LC(e):g7(e))},rO=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),aO=(e,n,o,r,i)=>{const u=o?n.startContainer:n.endContainer,m=o?n.startOffset:n.endOffset;return W.from(u).map(be.fromDom).map(y=>!r||!n.collapsed?Ni(y,i(y,m)).getOr(y):y).bind(y=>Fa(y)?W.some(y):$a(y).filter(Fa)).map(y=>y.dom).getOr(e)},iO=(e,n,o=!1)=>aO(e,n,!0,o,(r,i)=>Math.min(Hd(r),i)),tN=(e,n,o=!1)=>aO(e,n,!1,o,(r,i)=>i>0?i-1:i),nN=(e,n)=>{const o=e;for(;e&&pt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},b7=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const i=n.startOffset,u=n.endOffset;let m=n.commonAncestorContainer;n.collapsed||(o===r&&u-i<2&&o.hasChildNodes()&&(m=o.childNodes[i]),pt(o)&&pt(r)&&(o.length===i?o=nN(o.nextSibling,!0):o=o.parentNode,u===0?r=nN(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(m=o)));const y=pt(m)?m.parentNode:m;return qc(y)?y:e},v7=(e,n,o,r)=>{const i=[],u=e.getRoot(),m=e.getParent(o||iO(u,n,n.collapsed),e.isBlock),y=e.getParent(r||tN(u,n,n.collapsed),e.isBlock);if(m&&m!==u&&i.push(m),m&&y&&m!==y){let S;const O=new Ha(m,u);for(;(S=O.next())&&S!==y;)e.isBlock(S)&&i.push(S)}return y&&m!==y&&y!==u&&i.push(y),i},jE=(e,n,o)=>W.from(n).bind(r=>W.from(r.parentNode).map(i=>{const u=e.nodeIndex(r),m=e.createRng();return m.setStart(i,u),m.setEnd(i,u+1),o&&(gC(e,m,r,!0),gC(e,m,r,!1)),m})),qE=(e,n)=>dt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),oN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},FC=(e,n,o)=>{const r=o?"lastChild":"firstChild",i=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[i];if(u)return u;for(let m=e.parent;m&&m!==n;m=m.parent)if(u=m[i],u)return u}},sN=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Tc(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},rN=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class cl{static create(n,o){const r=new cl(n,oN[n]||1);return o&&kt(o,(i,u)=>{r.attr(u,i)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ce(n))return Fe(n)&&kt(n,(u,m)=>{r.attr(m,u)}),r;const i=r.attributes;if(i){if(o!==void 0){if(o===null){if(n in i.map){delete i.map[n];let u=i.length;for(;u--;)if(i[u].name===n)return i.splice(u,1),r}return r}if(n in i.map){let u=i.length;for(;u--;)if(i[u].name===n){i[u].value=o;break}}else i.push({name:n,value:o});return i.map[n]=o,r}return i.map[n]}}clone(){const n=this,o=new cl(n.name,n.type),r=n.attributes;if(r){const i=[];i.map={};for(let u=0,m=r.length;u<m;u++){const y=r[u];y.name!=="id"&&(i[i.length]={name:y.name,value:y.value},i.map[y.name]=y.value)}o.attributes=i}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,i=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):i&&(i.next=r),o.lastChild===n?(o.lastChild=i,i&&(i.next=null)):r&&(r.prev=i),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const i=o.parent||this;return r?(o===i.firstChild?i.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===i.lastChild?i.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=i,n}getAll(n){const o=this,r=[];for(let i=o.firstChild;i;i=FC(i,o))i.name===n&&r.push(i);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let i=n.firstChild;i;i=FC(i,n))o.push(i);let r=o.length;for(;r--;){const i=o[r];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var i;const u=this;let m=u.firstChild;if(rN(u))return!1;if(m)do{if(m.type===1){if(m.attr("data-mce-bogus"))continue;if(n[m.name]||rN(m))return!1}if(m.type===8||m.type===3&&!sN(m)||m.type===3&&m.parent&&o[m.parent.name]&&Tc((i=m.value)!==null&&i!==void 0?i:"")||r&&r(m))return!1}while(m=FC(m,u));return!0}walk(n){return FC(this,null,n)}}const y7=vt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),aN=e=>ce(e.nodeValue)&&e.nodeValue.includes(Ma),iN=e=>`${e.length===0?"":`${dt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,w7=(e,n)=>n.querySelectorAll(iN(e)),cN=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>aN(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),lN=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(aN(n)){const o=n.parentNode;return o&&Sn(y7,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),C7=e=>cN(e).nextNode()!==null,S7=e=>lN(e).nextNode()!==null,x7=(e,n)=>n.querySelector(iN(e))!==null,E7=(e,n)=>{Se(w7(e,n),o=>{const r=be.fromDom(o);ri(r,"data-mce-bogus")==="all"?gs(r):Se(e,i=>{pi(r,i)&&Cr(r,i)})})},$C=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},uN=N($C,cN),dN=N($C,lN),fN=(e,n)=>{const o=[{condition:nt(x7,n),action:nt(E7,n)},{condition:C7,action:uN},{condition:S7,action:dN}];let r=e,i=!1;return Se(o,({condition:u,action:m})=>{u(r)&&(i||(r=e.cloneNode(!0),i=!0),m(r))}),r},mN=e=>{const n=ci(e,"[data-mce-bogus]");Se(n,o=>{ri(o,"data-mce-bogus")==="all"?gs(o):el(o)?(ii(o,be.fromText(Gg)),gs(o)):_c(o)})},hN=e=>{const n=ci(e,"input");Se(n,o=>{Cr(o,"name")})},_7=(e,n)=>{const o=Si(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},T7=(e,n)=>{const o=e.getDoc(),r=jc(be.fromDom(e.getBody())),i=be.fromTag("div",o);js(i,"data-mce-bogus","all"),Yn(i,{position:"fixed",left:"-9999999px",top:"0"}),Eu(i,n.innerHTML),mN(i),hN(i);const u=Wg(r);rr(u,i);const m=ac(i.dom.innerText);return gs(i),m},k7=(e,n,o)=>{let r;return n.format==="raw"?r=vt.trim(ac(fN(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=T7(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=_7(e,e.serializer.serialize(o,n)),n.format!=="text"&&!mv(be.fromDom(o))&&ce(r)?vt.trim(r):r},gN=(e,n)=>W.from(e.getBody()).fold(ct(n.format==="tree"?new cl("body",11):""),o=>k7(e,n,o)),pN=vt.makeMap,cO=e=>{const n=[];e=e||{};const o=e.indent,r=pN(e.indent_before||""),i=pN(e.indent_after||""),u=fd.getEncodeFunc(e.entity_encoding||"raw",e.entities),m=e.element_format!=="xhtml";return{start:(y,S,O)=>{if(o&&r[y]&&n.length>0){const L=n[n.length-1];L.length>0&&L!==`
`&&n.push(`
`)}if(n.push("<",y),S)for(let L=0,F=S.length;L<F;L++){const V=S[L];n.push(" ",V.name,'="',u(V.value,!0),'"')}if(!O||m?n[n.length]=">":n[n.length]=" />",O&&o&&i[y]&&n.length>0){const L=n[n.length-1];L.length>0&&L!==`
`&&n.push(`
`)}},end:y=>{let S;n.push("</",y,">"),o&&i[y]&&n.length>0&&(S=n[n.length-1],S.length>0&&S!==`
`&&n.push(`
`))},text:(y,S)=>{y.length>0&&(n[n.length]=S?y:u(y))},cdata:y=>{n.push("<![CDATA[",y,"]]>")},comment:y=>{n.push("<!--",y,"-->")},pi:(y,S)=>{S?n.push("<?",y," ",u(S),"?>"):n.push("<?",y,"?>"),o&&n.push(`
`)},doctype:y=>{n.push("<!DOCTYPE",y,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Ag=(e={},n=Kd())=>{const o=cO(e);return e.validate="validate"in e?e.validate:!0,{serialize:i=>{const u=e.validate,m={3:S=>{var O;o.text((O=S.value)!==null&&O!==void 0?O:"",S.raw)},8:S=>{var O;o.comment((O=S.value)!==null&&O!==void 0?O:"")},7:S=>{o.pi(S.name,S.value)},10:S=>{var O;o.doctype((O=S.value)!==null&&O!==void 0?O:"")},4:S=>{var O;o.cdata((O=S.value)!==null&&O!==void 0?O:"")},11:S=>{let O=S;if(O=O.firstChild)do y(O);while(O=O.next)}};o.reset();const y=S=>{var O;const L=m[S.type];if(L)L(S);else{const F=S.name,V=F in n.getVoidElements();let Q=S.attributes;if(u&&Q&&Q.length>1){const re=[];re.map={};const ee=n.getElementRule(S.name);if(ee){for(let ue=0,we=ee.attributesOrder.length;ue<we;ue++){const De=ee.attributesOrder[ue];if(De in Q.map){const Oe=Q.map[De];re.map[De]=Oe,re.push({name:De,value:Oe})}}for(let ue=0,we=Q.length;ue<we;ue++){const De=Q[ue].name;if(!(De in re.map)){const Oe=Q.map[De];re.map[De]=Oe,re.push({name:De,value:Oe})}}Q=re}}if(o.start(F,Q,V),Mr(F))ce(S.value)&&o.text(S.value,!0),o.end(F);else if(!V){let re=S.firstChild;if(re){(F==="pre"||F==="textarea")&&re.type===3&&((O=re.value)===null||O===void 0?void 0:O[0])===`
`&&o.text(`
`,!0);do y(re);while(re=re.next)}o.end(F)}}};return i.type===1&&!e.inner?y(i):i.type===3?m[3](i):m[11](i),o.getContent()}}},bN=new Set;Se(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{bN.add(n)});const vN=new Set;Se(["background-color"],n=>{vN.add(n)});const yN=["font","text-decoration","text-emphasis"],A7=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),N0=(e,n)=>Go(A7(e,n)),O7=e=>bN.has(e),D7=e=>vN.has(e),wN=(e,n)=>Tt(N0(e,n),o=>O7(o)),R7=(e,n)=>wN(e,n)&&Tt(N0(e,n),o=>D7(o)),M7=e=>Zt(e,n=>Tt(yN,o=>es(n,o))),N7=(e,n,o)=>{const r=N0(e,n),i=N0(e,o),u=m=>{var y,S;const O=(y=e.getStyle(n,m))!==null&&y!==void 0?y:"",L=(S=e.getStyle(o,m))!==null&&S!==void 0?S:"";return xo(O)&&xo(L)&&O!==L};return Tt(r,m=>{const y=S=>Tt(S,O=>O===m);if(!y(i)&&y(yN)){const S=M7(i);return Tt(S,u)}else return u(m)})},CN=(e,n,o)=>W.from(o.container()).filter(pt).exists(r=>{const i=e?0:-1;return n(r.data.charAt(o.offset()+i))}),lO=nt(CN,!0,ah),uO=nt(CN,!1,ah),P7=e=>{const n=e.container();return pt(n)&&(n.data.length===0||vw(n.data)&&Iu.isBookmarkNode(n.parentNode))},Bp=(e,n)=>o=>tC(e?0:-1,o).filter(n).isSome(),SN=e=>Xg(e)&&Wr(be.fromDom(e),"display")==="block",xN=e=>Fo(e)&&!jh(e),B7=Bp(!0,SN),En=Bp(!1,SN),P0=Bp(!0,wi),B0=Bp(!1,wi),EN=Bp(!0,ql),HC=Bp(!1,ql),Ip=Bp(!0,xN),Lp=Bp(!1,xN),I7=e=>e.slice(0,-1),L7=(e,n,o)=>Rr(n,e)?I7(zl(e,r=>o(r)||ro(r,n))):[],_N=(e,n)=>L7(e,n,tt),cf=(e,n)=>[e].concat(_N(e,n)),GE=(e,n,o)=>iC(e,n,o,P7),BK=e=>n=>e.isBlock(yo(n)),TN=(e,n,o)=>Po(cf(be.fromDom(n.container()),e),BK(o)),Vn=(e,n,o,r)=>GE(e,n.dom,o).forall(i=>TN(n,o,r).fold(()=>!El(i,o,n.dom),u=>!El(i,o,n.dom)&&Rr(u,be.fromDom(i.container())))),kN=(e,n,o,r)=>TN(n,o,r).fold(()=>GE(e,n.dom,o).forall(i=>!El(i,o,n.dom)),i=>GE(e,i.dom,o).isNone()),no=nt(kN,!1),dO=nt(kN,!0),IK=nt(Vn,!1),LK=nt(Vn,!0),F7=e=>Jv(e).exists(el),fO=(e,n,o,r)=>{const i=Zt(cf(be.fromDom(o.container()),n),m=>r.isBlock(yo(m))),u=fo(i).getOr(n);return Pc(e,u.dom,o).filter(F7)},AN=(e,n,o)=>Jv(n).exists(el)||fO(!0,e,n,o).isSome(),KE=(e,n,o)=>uE(n).exists(el)||fO(!1,e,n,o).isSome(),ON=nt(fO,!1),Ln=nt(fO,!0),DN=e=>Ge.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),RN=(e,n,o)=>{const r=Zt(cf(be.fromDom(n.container()),e),i=>o.isBlock(yo(i)));return fo(r).getOr(e)},MN=(e,n,o)=>DN(n)?uO(n):uO(n)||rl(RN(e,n,o).dom,n).exists(uO),I0=(e,n,o)=>DN(n)?lO(n):lO(n)||Bc(RN(e,n,o).dom,n).exists(lO),NN=e=>et(["pre","pre-wrap"],e),mO=e=>Jv(e).bind(n=>Qs(n,Fa)).exists(n=>NN(Wr(n,"white-space"))),$7=(e,n)=>rl(e.dom,n).isNone(),H7=(e,n)=>Bc(e.dom,n).isNone(),PN=(e,n,o)=>$7(e,n)||H7(e,n)||no(e,n,o)||dO(e,n,o)||KE(e,n,o)||AN(e,n,o),V7=e=>Fe(e)&&Fo(e)&&rE(e),z7=(e,n)=>o=>V7(new Ha(o,e)[n]()),FK=(e,n)=>{const o=Bc(e.dom,n).getOr(n),r=z7(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},U7=(e,n)=>{const o=rl(e.dom,n).getOr(n),r=z7(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},BN=(e,n,o)=>mO(n)?!1:PN(e,n,o)||MN(e,n,o)||I0(e,n,o),VC=(e,n,o)=>mO(n)?!1:no(e,n,o)||IK(e,n,o)||KE(e,n,o)||MN(e,n,o)||U7(e,n),W7=e=>{const n=e.container(),o=e.offset();return pt(n)&&o<n.data.length?Ge(n,o+1):e},L0=(e,n,o)=>mO(n)?!1:dO(e,n,o)||LK(e,n,o)||AN(e,n,o)||I0(e,n,o)||FK(e,n),hO=(e,n,o)=>VC(e,n,o)||L0(e,W7(n),o),lo=(e,n)=>pg(e.charAt(n)),gO=(e,n)=>ah(e.charAt(n)),YE=e=>{const n=e.container();return pt(n)&&Ko(n.data,Xr)},IN=e=>{const n=e.split("");return dt(n,(o,r)=>pg(o)&&r>0&&r<n.length-1&&dC(n[r-1])&&dC(n[r+1])?" ":o).join("")},pO=(e,n,o,r)=>{const i=n.data,u=Ge(n,0);return!o&&lo(i,0)&&!hO(e,u,r)?(n.data=" "+i.slice(1),!0):o&&gO(i,0)&&VC(e,u,r)?(n.data=Xr+i.slice(1),!0):!1},LN=e=>{const n=e.data,o=IN(n);return o!==n?(e.data=o,!0):!1},bO=(e,n,o,r)=>{const i=n.data,u=Ge(n,i.length-1);return!o&&lo(i,i.length-1)&&!hO(e,u,r)?(n.data=i.slice(0,-1)+" ",!0):o&&gO(i,i.length-1)&&L0(e,u,r)?(n.data=i.slice(0,-1)+Xr,!0):!1},FN=(e,n,o)=>{const r=n.container();if(!pt(r))return W.none();if(YE(n)){const i=pO(e,r,!1,o)||LN(r)||bO(e,r,!1,o);return lr(i,n)}else if(hO(e,n,o)){const i=pO(e,r,!0,o)||bO(e,r,!0,o);return lr(i,n)}else return W.none()},Z7=e=>{const n=be.fromDom(e.getBody());e.selection.isCollapsed()&&FN(n,Ge.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},vO=(e,n,o,r)=>{if(o===0)return;const i=be.fromDom(e),u=qs(i,O=>r.isBlock(yo(O))).getOr(i),m=e.data.slice(n,n+o),y=n+o>=e.data.length&&L0(u,Ge(e,e.data.length),r),S=n===0&&VC(u,Ge(e,0),r);e.replaceData(n,o,bl(m,4,S,y))},XE=(e,n,o)=>{const r=e.data.slice(n),i=r.length-Ji(r).length;vO(e,n,i,o)},yO=(e,n,o)=>{const r=e.data.slice(0,n),i=r.length-Ri(r).length;vO(e,n-i,i,o)},wO=(e,n,o,r,i=!0)=>{const u=Ri(e.data).length,m=i?e:n,y=i?n:e;return i?m.appendData(y.data):m.insertData(0,y.data),gs(be.fromDom(y)),r&&XE(m,u,o),m},j7=(e,n)=>{const o=e.container(),r=e.offset();return!Ge.isTextPosition(e)&&o===n.parentNode&&r>Ge.before(n).offset()},q7=(e,n)=>j7(n,e)?Ge(n.container(),n.offset()-1):n,G7=e=>pt(e)?Ge(e,0):Ge.before(e),K7=e=>pt(e)?Ge(e,e.data.length):Ge.after(e),$N=e=>wl(e.previousSibling)?W.some(K7(e.previousSibling)):e.previousSibling?tu(e.previousSibling):W.none(),JE=e=>wl(e.nextSibling)?W.some(G7(e.nextSibling)):e.nextSibling?_i(e.nextSibling):W.none(),CO=(e,n)=>W.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>rl(e,Ge.before(o))).orThunk(()=>Bc(e,Ge.after(n))),Y7=(e,n)=>Bc(e,Ge.after(n)).orThunk(()=>rl(e,Ge.before(n))),X7=(e,n)=>$N(n).orThunk(()=>JE(n)).orThunk(()=>CO(e,n)),J7=(e,n)=>JE(n).orThunk(()=>$N(n)).orThunk(()=>Y7(e,n)),Q7=(e,n,o)=>e?J7(n,o):X7(n,o),e8=(e,n,o)=>Q7(e,n,o).map(nt(q7,o)),HN=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},t8=e=>n=>n.dom===e,n8=(e,n)=>n&&Sn(e.schema.getBlockElements(),yo(n)),VN=(e,n,o)=>{if(Bs(e,n)){const r=be.fromHtml('<br data-mce-bogus="1">');return o?Se(ra(n),i=>{SC(i)||gs(i)}):ad(n),rr(n,r),W.some(Ge.before(r.dom))}else return W.none()},o8=(e,n,o,r)=>{const i=Ul(e).filter(Yr),u=bi(e).filter(Yr);return gs(e),oi(i,u,n,(m,y,S)=>{const O=m.dom,L=y.dom,F=O.data.length;return wO(O,L,o,r),S.container()===L?Ge(O,F):S}).orThunk(()=>(r&&(i.each(m=>yO(m.dom,m.dom.length,o)),u.each(m=>XE(m.dom,0,o))),n))},s8=(e,n)=>Sn(e.schema.getTextInlineElements(),yo(n)),wd=(e,n,o,r=!0,i=!1)=>{const u=e8(n,e.getBody(),o.dom),m=qs(o,nt(n8,e),t8(e.getBody())),y=o8(o,u,e.schema,s8(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):m.bind(S=>VN(e.schema,S,i)).fold(()=>{r&&HN(e,n,y)},S=>{r&&HN(e,n,W.some(S))})},r8=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,zN=e=>r8.test(e),lb=(e,n)=>pl(be.fromDom(n),Mx(e))&&!Ou(e.schema,n)&&e.dom.isEditable(n),UN=e=>{var n;return Ks.DOM.getStyle(e,"direction",!0)==="rtl"||zN((n=e.textContent)!==null&&n!==void 0?n:"")},WN=(e,n,o)=>Zt(Ks.DOM.getParents(o.container(),"*",n),e),Og=(e,n,o)=>{const r=WN(e,n,o);return W.from(r[r.length-1])},ZN=(e,n,o)=>{const r=oh(n,e),i=oh(o,e);return Fe(r)&&r===i},jN=e=>yw(e)||dp(e),Zr=(e,n)=>{const o=n.container(),r=n.offset();return e?Uf(o)?pt(o.nextSibling)?Ge(o.nextSibling,0):Ge.after(o):yw(n)?Ge(o,r+1):n:Uf(o)?pt(o.previousSibling)?Ge(o.previousSibling,o.previousSibling.data.length):Ge.before(o):dp(n)?Ge(o,r-1):n},qN=nt(Zr,!0),GN=nt(Zr,!1),KN=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},a8=e=>{e.execCommand("delete")},QE=e=>KN(e,"Delete"),Fp=e=>KN(e,"ForwardDelete"),i8=e=>n=>Os($a(n),e,ro),c8=e=>Mu(e)||rg(e),nr=(e,n)=>Rr(e,n)?Qs(n,c8,i8(e)):W.none(),F0=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},ub=(e,n,o)=>Xn(_i(o),tu(o),(r,i)=>{const u=Zr(!0,r),m=Zr(!1,i),y=Zr(!1,n);return e?Bc(o,y).exists(S=>S.isEqual(m)&&n.isEqual(u)):rl(o,y).exists(S=>S.isEqual(u)&&n.isEqual(m))}).getOr(!0),YN=e=>(h1(e)?Ul(e):td(e)).bind(YN).orThunk(()=>W.some(e)),db=(e,n,o,r=!0)=>{var i;n.deleteContents();const u=YN(o).getOr(o),m=be.fromDom((i=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&i!==void 0?i:o.dom);if(m.dom===e.getBody()?F0(e,r):Bs(e.schema,m,{checkRootAsContent:!1})&&(eu(m),r&&e.selection.setCursorLocation(m.dom,0)),!ro(o,m)){const y=Os($a(m),o)?[]:Of(m);Se(y.concat(ra(o)),S=>{!ro(S,m)&&!Rr(S,m)&&Bs(e.schema,S)&&gs(S)})}},Cd=e=>n=>ro(e,n),fb=e=>ci(e,"td,th"),Ns=(e,n)=>X1(be.fromDom(e),n),zC=e=>Xn(e.startTable,e.endTable,(n,o)=>{const r=qg(n,u=>ro(u,o)),i=qg(o,u=>ro(u,n));return!r&&!i?e:{...e,startTable:r?W.none():e.startTable,endTable:i?W.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),XN=e=>zC(e),JN=(e,n)=>{const o=Ns(e.startContainer,n),r=Ns(e.endContainer,n),i=o.isSome(),u=r.isSome(),m=Xn(o,r,ro).getOr(!1);return XN({startTable:o,endTable:r,isStartInTable:i,isEndInTable:u,isSameTable:m,isMultiTable:!m&&i&&u})},UC=(e,n)=>({start:e,end:n}),SO=(e,n,o)=>({rng:e,table:n,cells:o}),mb=bd.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),$0=(e,n)=>Wl(be.fromDom(e),"td,th",n),WC=e=>!ro(e.start,e.end),e_=(e,n)=>X1(e.start,n).bind(o=>X1(e.end,n).bind(r=>lr(ro(o,r),o))),QN=(e,n)=>!WC(e)&&e_(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),eP=(e,n)=>{const o=$0(e.startContainer,n),r=$0(e.endContainer,n);return Xn(o,r,UC)},tP=e=>n=>X1(n,e).bind(o=>cs(fb(o)).map(r=>UC(n,r))),nP=e=>n=>X1(n,e).bind(o=>fo(fb(o)).map(r=>UC(r,n))),t_=e=>n=>e_(n,e).map(o=>SO(n,o,fb(o))),hb=(e,n,o,r)=>{if(o.collapsed||!e.forall(WC))return W.none();if(n.isSameTable){const i=e.bind(t_(r));return W.some({start:i,end:i})}else{const i=$0(o.startContainer,r),u=$0(o.endContainer,r),m=i.bind(tP(r)).bind(t_(r)),y=u.bind(nP(r)).bind(t_(r));return W.some({start:m,end:y})}},xO=(e,n)=>Is(e,o=>ro(o,n)),ZC=e=>Xn(xO(e.cells,e.rng.start),xO(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),l8=(e,n,o)=>e.exists(r=>QN(r,o)&&l0(r.start,n)),oP=(e,n)=>{const{startTable:o,endTable:r}=n,i=e.cloneRange();return o.each(u=>i.setStartAfter(u.dom)),r.each(u=>i.setEndBefore(u.dom)),i},sP=(e,n,o,r)=>hb(e,n,o,r).bind(({start:i,end:u})=>i.or(u)).bind(i=>{const{isSameTable:u}=n,m=ZC(i).getOr([]);if(u&&i.cells.length===m.length)return W.some(mb.fullTable(i.table));if(m.length>0){if(u)return W.some(mb.partialTable(m,W.none()));{const y=oP(o,n);return W.some(mb.partialTable(m,W.some({...n,rng:y})))}}else return W.none()}),rP=(e,n,o,r)=>hb(e,n,o,r).bind(({start:i,end:u})=>{const m=i.bind(ZC).getOr([]),y=u.bind(ZC).getOr([]);if(m.length>0&&y.length>0){const S=oP(o,n);return W.some(mb.multiTable(m,y,S))}else return W.none()}),aP=(e,n)=>{const o=Cd(e),r=eP(n,o),i=JN(n,o);return l8(r,n,o)?r.map(u=>mb.singleCellTable(n,u.start)):i.isMultiTable?rP(r,i,n,o):sP(r,i,n,o)},jC=e=>Se(e,n=>{Cr(n,"contenteditable"),eu(n)}),iP=(e,n)=>W.from(e.dom.getParent(n,e.dom.isBlock)).map(be.fromDom),cP=(e,n,o)=>{o.each(r=>{n?gs(r):(eu(r),e.selection.setCursorLocation(r.dom,0))})},n_=(e,n,o,r)=>{const i=o.cloneRange();r?(i.setStart(o.startContainer,o.startOffset),i.setEndAfter(n.dom.lastChild)):(i.setStartBefore(n.dom.firstChild),i.setEnd(o.endContainer,o.endOffset)),o_(e,i,n,!1).each(u=>u())},EO=e=>{const n=kp(e),o=be.fromDom(e.selection.getNode());qh(o.dom)&&Bs(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&Tt(n,r=>ro(r,o))&&js(o,"data-mce-selected","1")},_O=(e,n,o)=>W.some(()=>{const r=e.selection.getRng(),i=o.bind(({rng:u,isStartInTable:m})=>{const y=iP(e,m?u.endContainer:u.startContainer);u.deleteContents(),cP(e,m,y.filter(nt(Bs,e.schema)));const S=m?n[0]:n[n.length-1];return n_(e,S,r,m),Bs(e.schema,S)?W.none():W.some(m?n.slice(1):n.slice(0,-1))}).getOr(n);jC(i),EO(e)}),lP=(e,n,o,r)=>W.some(()=>{const i=e.selection.getRng(),u=n[0],m=o[o.length-1];n_(e,u,i,!0),n_(e,m,i,!1);const y=Bs(e.schema,u)?n:n.slice(1),S=Bs(e.schema,m)?o:o.slice(0,-1);jC(y.concat(S)),r.deleteContents(),EO(e)}),o_=(e,n,o,r=!0)=>W.some(()=>{db(e,n,o,r)}),uP=(e,n)=>W.some(()=>wd(e,!1,n)),dP=(e,n,o)=>aP(n,o).bind(r=>r.fold(nt(o_,e),nt(uP,e),nt(_O,e),nt(lP,e))),fP=(e,n)=>qC(e,n),TO=(e,n,o,r)=>s_(n,r).fold(()=>dP(e,n,o),i=>fP(e,i)),mP=(e,n,o)=>{const r=be.fromDom(e.getBody()),i=e.selection.getRng();return o.length!==0?_O(e,o,W.none()):TO(e,r,i,n)},kO=(e,n)=>Po(cf(n,e),D1),s_=(e,n)=>Po(cf(n,e),si("caption")),hP=(e,n,o,r,i)=>mg(o,e.getBody(),i).bind(u=>kO(n,be.fromDom(u.getNode())).bind(m=>ro(m,r)?W.none():W.some(Pe))),qC=(e,n)=>W.some(()=>{eu(n),e.selection.setCursorLocation(n.dom,0)}),gP=(e,n,o,r)=>_i(e.dom).bind(i=>tu(e.dom).map(u=>n?o.isEqual(i)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(i))).getOr(!0),AO=(e,n)=>qC(e,n),r_=(e,n,o)=>s_(e,be.fromDom(o.getNode())).fold(()=>W.some(Pe),r=>lr(!ro(r,n),Pe)),OO=(e,n,o,r,i)=>mg(o,e.getBody(),i).fold(()=>W.some(Pe),u=>gP(r,o,i,u)?AO(e,r):r_(n,r,u)),a_=(e,n,o,r)=>{const i=Ge.fromRangeStart(e.selection.getRng());return kO(o,r).bind(u=>Bs(e.schema,u,{checkRootAsContent:!1})?qC(e,u):hP(e,o,n,u,i))},pP=(e,n,o,r)=>{const i=Ge.fromRangeStart(e.selection.getRng());return Bs(e.schema,r)?qC(e,r):OO(e,o,n,r,i)},GC=(e,n)=>e?EN(n):HC(n),DO=(e,n)=>{const o=Ge.fromRangeStart(e.selection.getRng());return GC(n,o)||Pc(n,e.getBody(),o).exists(r=>GC(n,r))},KC=(e,n,o)=>{const r=be.fromDom(e.getBody());return s_(r,o).fold(()=>a_(e,n,r,o).orThunk(()=>lr(DO(e,n),Pe)),i=>pP(e,n,r,i))},YC=(e,n)=>{const o=be.fromDom(e.selection.getStart(!0)),r=kp(e);return e.selection.isCollapsed()&&r.length===0?KC(e,n,o):mP(e,o,r)},$p=(e,n)=>{let o=n;for(;o&&o!==e;){if(rt(o)||Fo(o))return o;o=o.parentNode}return null},H0=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],RO=vt.each,XC=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,m)=>{if(u.nodeName!==m.nodeName||u.nodeType!==m.nodeType)return!1;const y=O=>{const L={};return RO(n.getAttribs(O),F=>{const V=F.nodeName.toLowerCase();V!=="style"&&!i(V)&&(L[V]=n.getAttrib(O,V))}),L},S=(O,L)=>{for(const F in O)if(Sn(O,F)){const V=L[F];if(Bn(V)||O[F]!==V)return!1;delete L[F]}for(const F in L)if(Sn(L,F))return!1;return!0};return Wt(u)&&Wt(m)&&(!S(y(u),y(m))||!S(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(m,"style"))))?!1:!_l(u)&&!_l(m)},i=u=>Tt(H0,m=>es(u,m))||o.has(u);return{compare:r,isAttributeInternal:i}},gb=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),Hp=e=>e.name==="summary",bP=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},vP=(e,n,o,r)=>{const i=o.name;for(let u=0,m=e.length;u<m;u++){const y=e[u];if(y.name===i){const S=r.nodes[i];S?S.nodes.push(o):r.nodes[i]={filter:y,nodes:[o]}}}if(o.attributes)for(let u=0,m=n.length;u<m;u++){const y=n[u],S=y.name;if(S in o.attributes.map){const O=r.attributes[S];O?O.nodes.push(o):r.attributes[S]={filter:y,nodes:[o]}}}},u8=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&bP(o,i=>{vP(e,n,i,r)}),r},MO=(e,n)=>{const o=(r,i)=>{kt(r,u=>{const m=_r(u.nodes);Se(u.filter.callbacks,y=>{for(let S=m.length-1;S>=0;S--){const O=m[S];(!(i?O.attr(u.filter.name)!==void 0:O.name===u.filter.name)||Qt(O.parent))&&m.splice(S,1)}m.length>0&&y(m,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},NO=(e,n,o,r={})=>{const i=u8(e,n,o);MO(i,r)},PO=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new cl("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new cl("#text",3)).value=Xr},d8=e=>{var n;return Dg(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Xr},Dg=(e,n)=>{const o=e==null?void 0:e.firstChild;return Fe(o)&&o===e.lastChild&&o.name===n},pb=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},i_=(e,n,o,r)=>r.isEmpty(n,o,i=>pb(e,i)),Vi=(e,n)=>Fe(e)&&(n(e)||e.name==="br"),f8=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return W.from(n)},BO=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const i of r)o&&!n.isValidChild(o.name,i.name)&&BO(i,n,o);e.unwrap()}},tm=(e,n,o,r=Pe)=>{const i=n.getTextBlockElements(),u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),y=vt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),S=new Set,O=L=>L!==o&&!y[L.name];for(let L=0;L<e.length;L++){const F=e[L];let V,Q,re;if(!F.parent||S.has(F))continue;if(i[F.name]&&F.parent.name==="li"){let ue=F.next;for(;ue&&i[ue.name];){ue.name="li",S.add(ue),F.parent.insert(ue,F.parent);ue=ue.next}F.unwrap();continue}const ee=[F];for(V=F.parent;V&&!n.isValidChild(V.name,F.name)&&O(V);V=V.parent)ee.push(V);if(V&&ee.length>1)if(yP(n,F,V))BO(F,n);else{ee.reverse(),Q=ee[0].clone(),r(Q);let ue=Q;for(let we=0;we<ee.length-1;we++){n.isValidChild(ue.name,ee[we].name)&&we>0?(re=ee[we].clone(),r(re),ue.append(re)):re=ue;for(let De=ee[we].firstChild;De&&De!==ee[we+1];){const Oe=De.next;re.append(De),De=Oe}ue=re}i_(n,u,m,Q)?V.insert(F,ee[0],!0):(V.insert(Q,ee[0],!0),V.insert(F,Q)),V=ee[0],(i_(n,u,m,V)||Dg(V,"br"))&&V.empty().remove()}else if(F.parent){if(F.name==="li"){let ue=F.prev;if(ue&&(ue.name==="ul"||ue.name==="ol")){ue.append(F);continue}if(ue=F.next,ue&&(ue.name==="ul"||ue.name==="ol")&&ue.firstChild){ue.insert(F,ue.firstChild,!0);continue}const we=new cl("ul",1);r(we),F.wrap(we);continue}if(n.isValidChild(F.parent.name,"div")&&n.isValidChild("div",F.name)){const ue=new cl("div",1);r(ue),F.wrap(ue)}else BO(F,n)}}},Jo=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},yP=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&Jo(o,"a")?!0:Hp(o)&&gb(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,m8=(e,n,o,r)=>{const i=document.createRange();return i.setStart(e,n),i.setEnd(o,r),i},h8=e=>{const n=Ge.fromRangeStart(e),o=Ge.fromRangeEnd(e),r=e.commonAncestorContainer;return Pc(!1,r,o).map(i=>!El(n,o,r)&&El(n,i,r)?m8(n.container(),n.offset(),i.container(),i.offset()):e).getOr(e)},Vs=e=>e.collapsed?e:h8(e),wP=e=>Fe(e.firstChild)&&e.firstChild===e.lastChild,JC=e=>e.name==="br"||e.value===Xr,QC=(e,n)=>e.getBlockElements()[n.name]&&wP(n)&&JC(n.firstChild),e2=(e,n)=>{const o=e.getNonEmptyElements();return Fe(n)&&(n.isEmpty(o)||QC(e,n))},t2=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),e2(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},CP=e=>{var n,o;const r=e.firstChild,i=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),i&&i.id==="mce_marker"&&((o=i.parentNode)===null||o===void 0||o.removeChild(i)),e},$K=(e,n,o)=>{const r=n.serialize(o),i=e.createFragment(r);return CP(i)},HK=e=>{var n;return Zt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},VK=e=>e.data===Xr||Lo(e),zK=e=>Fe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&VK(e.firstChild),g8=e=>!e.firstChild||zK(e),UK=e=>e.length>0&&g8(e[e.length-1])?e.slice(0,-1):e,IO=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},p8=(e,n)=>!!IO(e,n),WK=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},b8=(e,n)=>{const o=Ge.before(e),i=yd(n).next(o);return i?i.toRange():null},Ir=(e,n)=>{const o=Ge.after(e),i=yd(n).prev(o);return i?i.toRange():null},SP=(e,n,o,r)=>{const i=WK(e,r),u=e.parentNode;return u&&(u.insertBefore(i[0],e),vt.each(n,m=>{u.insertBefore(m,e)}),u.insertBefore(i[1],e),u.removeChild(e)),Ir(n[n.length-1],o)},xP=(e,n,o)=>{const r=e.parentNode;return r&&vt.each(n,i=>{r.insertBefore(i,e)}),b8(e,o)},v8=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),Ir(n[0],o)),y8=(e,n,o,r)=>{const i=$K(n,e,r),u=IO(n,o.startContainer),m=UK(HK(i.firstChild)),y=1,S=2,O=n.getRoot(),L=F=>{const V=Ge.fromRangeStart(o),Q=yd(n.getRoot()),re=F===y?Q.prev(V):Q.next(V),ee=re==null?void 0:re.getNode();return ee?IO(n,ee)!==u:!0};return u?L(y)?xP(u,m,O):L(S)?v8(u,m,O,n):SP(u,m,O,o):null},w8=["pre"],au=(e,n,o,r)=>{var i;const u=n.firstChild,m=n.lastChild,y=m.attr("data-mce-type")==="bookmark"?m.prev:m,S=u===y,O=et(w8,u.name);if(S&&O){const L=u.attr("contenteditable")!=="false",F=((i=e.getParent(o,e.isBlock))===null||i===void 0?void 0:i.nodeName.toLowerCase())===u.name,V=W.from($p(r,o)).forall(rt);return L&&F&&V}else return!1},Sd=qh,C8=(e,n,o)=>{if(Fe(o)){const r=e.getParent(n.endContainer,Sd);return o===r&&l0(be.fromDom(o),n)}else return!1},LO=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const i=o.firstChild,u=o.lastChild;!i||i===u&&i.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},FO=(e,n,o)=>{W.from(e.getParent(n,"td,th")).map(be.fromDom).each(r=>hv(r,o))},S8=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const i=e.getBody(),u=XC(e),m="*[data-mce-fragment]",y=r.select(m);vt.each(y,S=>{const O=V=>Fe(o[V.nodeName.toLowerCase()]),L=V=>V.childNodes.length===1;if((V=>!(wN(r,V)||R7(r,V)))(S)&&O(S)&&L(S)){const V=N0(r,S),Q=(we,De)=>bs(we,Oe=>et(De,Oe)),re=we=>L(S)&&r.is(we,m)&&O(we)&&(we.nodeName===S.nodeName&&Q(V,N0(r,we))||re(we.children[0])),ee=we=>Fe(we)&&we!==i&&(u.compare(S,we)||ee(we.parentElement)),ue=we=>Fe(we)&&we!==i&&r.is(we,m)&&(N7(r,S,we)||ue(we.parentElement));(re(S.children[0])||ee(S.parentElement)&&!ue(S.parentElement))&&r.remove(S,!0)}})}},x8=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},n2=e=>{vt.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},c_=e=>!!e.getAttribute("data-mce-fragment"),$O=(e,n)=>Fe(n)&&!e.schema.getVoidElements()[n.nodeName],E8=(e,n)=>{var o,r,i;let u;const m=e.dom,y=e.selection;if(!n)return;y.scrollIntoView(n);const S=$p(e.getBody(),n);if(S&&m.getContentEditable(S)==="false"){m.remove(n),y.select(S);return}let O=m.createRng();const L=n.previousSibling;if(pt(L)){O.setStart(L,(r=(o=L.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const Q=n.nextSibling;pt(Q)&&(L.appendData(Q.data),(i=Q.parentNode)===null||i===void 0||i.removeChild(Q))}else O.setStartBefore(n),O.setEndBefore(n);const F=Q=>{let re=Ge.fromRangeStart(Q);return re=yd(e.getBody()).next(re),re==null?void 0:re.toRange()},V=m.getParent(n,m.isBlock);if(m.remove(n),V&&m.isEmpty(V)){const Q=Sd(V);ad(be.fromDom(V)),O.setStart(V,0),O.setEnd(V,0),!Q&&!c_(V)&&(u=F(O))?(O=u,m.remove(V)):m.add(V,m.create("br",Q?{}:{"data-mce-bogus":"1"}))}y.setRng(O)},nm=e=>{const n=e.dom,o=Vs(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,Sd);C8(n,o,r)?o_(e,o,be.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&pt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},_8=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return W.some(n);return W.none()},T8=(e,n,o)=>{var r;return Tt(o.children(),gb)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},xd=(e,n,o)=>{var r,i;const u=e.selection,m=e.dom,y=e.parser,S=o.merge,O=Ag({validate:!0},e.schema),L='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=ac(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,L);let F=u.getRng();const V=F.startContainer,Q=e.getBody();V===Q&&u.isCollapsed()&&m.isBlock(Q.firstChild)&&$O(e,Q.firstChild)&&m.isEmpty(Q.firstChild)&&(F=m.createRng(),F.setStart(Q.firstChild,0),F.setEnd(Q.firstChild,0),u.setRng(F)),u.isCollapsed()||nm(e);const re=u.getNode(),ee={context:re.nodeName.toLowerCase(),data:o.data,insert:!0},ue=y.parse(n,ee);if(o.paste===!0&&t2(e.schema,ue)&&p8(m,re))return F=y8(O,m,u.getRng(),ue),F&&u.setRng(F),n;o.paste===!0&&au(m,ue,re,e.getBody())&&((r=ue.firstChild)===null||r===void 0||r.unwrap()),x8(ue);let we=ue.lastChild;if(we&&we.attr("id")==="mce_marker"){const De=we;for(we=we.prev;we;we=we.walk(!0))if(we.type===3||!m.isBlock(we.name)){we.parent&&e.schema.isValidChild(we.parent.name,"span")&&we.parent.insert(De,we,we.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(re),!ee.invalid&&!T8(m,re,ue))n=O.serialize(ue),LO(e,n,re);else{e.selection.setContent(L);let De=u.getNode(),Oe;const $e=e.getBody();for(Em(De)?De=Oe=$e:Oe=De;Oe&&Oe!==$e;)De=Oe,Oe=Oe.parentNode;n=De===$e?$e.innerHTML:m.getOuterHTML(De);const ft=y.parse(n),Ot=_8(ft),Kt=Ot.bind(f8).getOr(ft);Ot.each(rn=>rn.replace(ue));const Je=ue.children(),ze=(i=ue.parent)!==null&&i!==void 0?i:ft;ue.unwrap();const ut=Zt(Je,rn=>yP(e.schema,rn,ze));tm(ut,e.schema,Kt),NO(y.getNodeFilters(),y.getAttributeFilters(),ft),n=O.serialize(ft),De===$e?m.setHTML($e,n):m.setOuterHTML(De,n)}return S8(e,S),E8(e,m.get("mce_marker")),n2(e.getBody()),FO(m,u.getStart(),e.schema),Rc(e.schema,e.getBody(),u.getStart()),n},Vp=e=>e instanceof cl,lf=e=>{kg(e)&&_i(e.getBody()).each(n=>{const o=n.getNode(),r=ql(o)?_i(o).getOr(n):n;e.selection.setRng(r.toRange())})},HO=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&lf(e)},Es=(e,n,o,r)=>{if(o=ac(o),o.length===0||/^\s+$/.test(o)){const i='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+i+"</li>");const u=Si(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=i,o=e.dom.createHTML(u,Ym(e),o)):o||(o=i),HO(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Ag({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const i=mv(be.fromDom(n))?o:vt.trim(o);return HO(e,i,r.no_selection),{content:i,html:i}}},V0=(e,n,o,r)=>{NO(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const i=Ag({validate:!1},e.schema).serialize(o),u=ac(mv(be.fromDom(n))?i:vt.trim(i));return HO(e,u,r.no_selection),{content:o,html:u}},l_=(e,n,o)=>W.from(e.getBody()).map(r=>Vp(n)?V0(e,r,n,o):Es(e,r,n,o)).getOr({content:n,html:Vp(o.content)?"":o.content}),VO=e=>ve(e)?e:tt,zO=(e,n,o)=>{let r=e.dom;const i=VO(o);for(;r.parentNode;){r=r.parentNode;const u=be.fromDom(r),m=n(u);if(m.isSome())return m;if(i(u))break}return W.none()},o2=(e,n,o)=>{const r=n(e),i=VO(o);return r.orThunk(()=>i(e)?W.none():zO(e,n,i))},UO=yg,u_=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let i=0;i<r.length;i++){const u=r[i];if(ou(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},WO=(e,n,o,r,i)=>{const u=e.dom.getRoot();if(n===u)return!1;const m=e.dom.getParent(n,y=>u_(e,y,o)?!0:y.parentNode===u||!!uf(e,y,o,r,!0));return!!uf(e,m,o,r,i)},s2=(e,n,o)=>Wa(o)&&UO(n,o.inline)||Jf(o)&&UO(n,o.block)?!0:ou(o)?Wt(n)&&e.is(n,o.selector):!1,ZO=(e,n,o,r,i,u)=>{const m=o[r],y=r==="attributes";if(ve(o.onmatch))return o.onmatch(n,o,r);if(m){if(dl(m)){for(let S=0;S<m.length;S++)if(y?e.getAttrib(n,m[S]):J1(e,n,m[S]))return!0}else for(const S in m)if(Sn(m,S)){const O=y?e.getAttrib(n,S):J1(e,n,S),L=Xf(m[S],u),F=Qt(O)||sa(O);if(F&&Qt(L))continue;if(i&&F&&!o.exact||(!i||o.exact)&&!UO(O,wE(L,S)))return!1}}return!0},uf=(e,n,o,r,i)=>{const u=e.formatter.get(o),m=e.dom;if(u&&Wt(n))for(let y=0;y<u.length;y++){const S=u[y];if(s2(e.dom,n,S)&&ZO(m,n,S,"attributes",i,r)&&ZO(m,n,S,"styles",i,r)){const O=S.classes;if(O){for(let L=0;L<O.length;L++)if(!e.dom.hasClass(n,Xf(O[L],r)))return}return S}}},d_=(e,n,o,r,i)=>{if(r)return WO(e,r,n,o,i);if(r=e.selection.getNode(),WO(e,r,n,o,i))return!0;const u=e.selection.getStart();return!!(u!==r&&WO(e,u,n,o,i))},f_=(e,n,o)=>{const r=[],i={},u=e.selection.getStart();return e.dom.getParent(u,m=>{for(let y=0;y<n.length;y++){const S=n[y];!i[S]&&uf(e,m,S,o)&&(i[S]=!0,r.push(S))}},e.dom.getRoot()),r},k8=(e,n)=>{const o=i=>ro(i,be.fromDom(e.getBody())),r=(i,u)=>uf(e,i.dom,u)?W.some(u):W.none();return W.from(e.selection.getStart(!0)).bind(i=>o2(be.fromDom(i),u=>Oi(n,m=>r(u,m)),o)).getOrNull()},A8=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const i=e.selection.getStart(),u=b0(r,i);for(let m=o.length-1;m>=0;m--){const y=o[m];if(!ou(y))return!0;for(let S=u.length-1;S>=0;S--)if(r.is(u[S],y.selector))return!0}}return!1},O8=(e,n,o)=>Mo(o,(r,i)=>{const u=wC(e,i);return e.formatter.matchNode(n,i,{},u)?r.concat([i]):r},[]),r2=Ma,D8=(e,n)=>e.importNode(n,!0),jO=e=>{if(e){const n=new Ha(e,e);for(let o=n.current();o;o=n.next())if(pt(o))return o}return null},qO=e=>{const n=be.fromTag("span");return Zc(n,{id:o0,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&rr(n,be.fromText(r2)),n},R8=e=>{const n=jO(e);return n&&n.data.charAt(0)===r2&&n.deleteData(0,1),n},m_=(e,n,o)=>{const r=e.dom,i=e.selection;if(w0(n))wd(e,!1,be.fromDom(n),o,!0);else{const u=i.getRng(),m=r.getParent(n,r.isBlock),y=u.startContainer,S=u.startOffset,O=u.endContainer,L=u.endOffset,F=R8(n);r.remove(n,!0),y===F&&S>0&&u.setStart(F,S-1),O===F&&L>0&&u.setEnd(F,L-1),m&&r.isEmpty(m)&&eu(be.fromDom(m)),i.setRng(u)}},h_=(e,n,o)=>{const r=e.dom,i=e.selection;if(n)m_(e,n,o);else if(n=hg(e.getBody(),i.getStart()),!n)for(;n=r.get(o0);)m_(e,n,o)},M8=(e,n,o)=>{var r,i;const u=e.dom,m=u.getParent(o,nt(g0,e.schema));m&&u.isEmpty(m)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):($m(be.fromDom(o)),u.isEmpty(o)?(i=o.parentNode)===null||i===void 0||i.replaceChild(n,o):u.insertAfter(n,o))},EP=(e,n)=>(e.appendChild(n),n),GO=(e,n)=>{var o;const r=ss(e,(u,m)=>EP(u,m.cloneNode(!1)),n),i=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return EP(r,i.createTextNode(r2))},N8=(e,n,o,r,i,u)=>{const m=e.formatter,y=e.dom,S=Zt(Go(m.get()),F=>F!==r&&!Ko(F,"removeformat")),O=O8(e,o,S);if(Zt(O,F=>!CE(e,F,r)).length>0){const F=o.cloneNode(!1);return y.add(n,F),m.remove(r,i,F,u),y.remove(F),W.some(F)}else return W.none()},KO=e=>gw(e,Lm(e).replace(new RegExp(`${Xr}$`)," ")),Hu=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&Ul(be.fromDom(n)).each(r=>{Yr(r)?KO(r):Hh(r,i=>Yr(i)).each(i=>{Yr(i)&&KO(i)})})};e.once("input",r=>{r.data&&!ah(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},P8=(e,n,o)=>{let r;const i=e.selection,u=e.formatter.get(n);if(!u)return;const m=i.getRng();let y=m.startOffset;const O=m.startContainer.nodeValue;r=hg(e.getBody(),i.getStart());const L=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(O&&y>0&&y<O.length&&L.test(O.charAt(y))&&L.test(O.charAt(y-1))){const F=i.getBookmark();m.collapse(!0);let V=Cg(e.dom,m,u);V=ht(V),e.formatter.apply(n,o,V),i.moveToBookmark(F)}else{let F=r?jO(r):null;(!r||(F==null?void 0:F.data)!==r2)&&(r=D8(e.getDoc(),qO(!0).dom),F=r.firstChild,m.insertNode(r),y=1,Hu(e,r)),e.formatter.apply(n,o,r),i.setCursorLocation(F,y)}},_P=(e,n,o,r)=>{const i=e.dom,u=e.selection;let m=!1;const y=e.formatter.get(n);if(!y)return;const S=u.getRng(),O=S.startContainer,L=S.startOffset;let F=O;pt(O)&&(L!==O.data.length&&(m=!0),F=F.parentNode);const V=[];let Q;for(;F;){if(uf(e,F,n,o,r)){Q=F;break}F.nextSibling&&(m=!0),V.push(F),F=F.parentNode}if(Q)if(m){const re=u.getBookmark();S.collapse(!0);let ee=Cg(i,S,y,!0);ee=ht(ee),e.formatter.remove(n,o,ee,r),u.moveToBookmark(re)}else{const re=hg(e.getBody(),Q),ee=Fe(re)?i.getParents(Q.parentNode,yt,re):[],ue=qO(!1).dom;M8(e,ue,re??Q);const we=N8(e,ue,Q,n,o,r),De=GO([...V,...we.toArray(),...ee],ue);re&&m_(e,re,Fe(re)),u.setCursorLocation(De,1),Hu(e,ue),i.isEmpty(Q)&&i.remove(Q)}},YO=(e,n,o)=>{const r=e.selection,i=e.getBody();h_(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===r2&&h_(e,hg(i,r.getStart()),!0),(n===37||n===39)&&h_(e,hg(i,r.getStart()),!0)},XO=e=>pt(e)&&na(e.data,Xr),TP=e=>{e.on("mouseup keydown",n=>{YO(e,n.keyCode,XO(e.selection.getRng().endContainer))})},JO=e=>{const n=qO(!1),o=GO(e,n.dom);return{caretContainer:n,caretPosition:Ge(o,0)}},kP=(e,n)=>{const{caretContainer:o,caretPosition:r}=JO(n);return ii(be.fromDom(e),o),gs(be.fromDom(e)),r},B8=(e,n)=>{const{caretContainer:o,caretPosition:r}=JO(n);return e.insertNode(o.dom),r},g_=(e,n)=>{if(nu(n.dom))return!1;const o=e.schema.getTextInlineElements();return Sn(o,yo(n))&&!nu(n.dom)&&!Pf(n.dom)},z0={},Vu=vl(["pre"]),I8=(e,n)=>{z0[e]||(z0[e]=[]),z0[e].push(n)},L8=(e,n)=>{Sn(z0,e)&&Se(z0[e],o=>{o(n)})};I8("pre",e=>{const n=e.selection.getRng(),o=i=>u=>{const m=u.previousSibling;return Vu(m)&&et(i,m)},r=(i,u)=>{const m=be.fromDom(u),y=Cu(m).dom;gs(m),xu(be.fromDom(i),[be.fromTag("br",y),be.fromTag("br",y),...ra(m)])};if(!n.collapsed){const i=e.selection.getSelectedBlocks(),u=Zt(Zt(i,Vu),o(i));Se(u,m=>{r(m.previousSibling,m)})}});const F8=["fontWeight","fontStyle","color","fontSize","fontFamily"],QO=e=>Ke(e.styles)&&Tt(Go(e.styles),n=>et(F8,n)),$8=e=>Po(e,n=>Wa(n)&&n.inline==="span"&&QO(n)),H8=(e,n)=>{const o=e.get(n);return jt(o)?$8(o):W.none()},AP=(e,n)=>rl(n,Ge.fromRangeStart(e)).isNone(),p_=(e,n)=>Bc(n,Ge.fromRangeEnd(e)).exists(o=>!Lo(o.getNode())||Bc(n,o).isSome())===!1,df=e=>n=>tv(n)&&e.isEditable(n),eD=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return AP(o,n[0])&&p_(o,n[0])?n:[];{const r=fo(n).filter(m=>AP(o,m)).toArray(),i=cs(n).filter(m=>p_(o,m)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(i)}},b_=e=>Zt(eD(e),df(e.dom)),v_=e=>Zt(e.getSelectedBlocks(),df(e.dom)),tD=vt.each,y_=e=>Wt(e)&&!_l(e)&&!nu(e)&&!Pf(e),OP=(e,n)=>{for(let o=e;o;o=o[n]){if(pt(o)&&xo(o.data))return e;if(Wt(o)&&!_l(o))return o}return e},nD=(e,n,o)=>{const r=XC(e),i=qc(n)&&e.dom.isEditable(n),u=qc(o)&&e.dom.isEditable(o);if(i&&u){const m=OP(n,"previousSibling"),y=OP(o,"nextSibling");if(r.compare(m,y)){for(let S=m.nextSibling;S&&S!==y;){const O=S;S=S.nextSibling,m.appendChild(O)}return e.dom.remove(y),vt.each(vt.grep(y.childNodes),S=>{m.appendChild(S)}),m}}return o},w_=(e,n,o,r)=>{var i;if(r&&n.merge_siblings!==!1){const u=(i=nD(e,h0(r),r))!==null&&i!==void 0?i:r;nD(e,u,h0(u,!0))}},V8=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";tD(e.select(r,o),i=>{y_(i)&&e.isEditable(i)&&tD(n.styles,(u,m)=>{e.setStyle(i,m,"")})})}},C_=(e,n,o)=>{tD(e.childNodes,r=>{y_(r)&&(n(r)&&o(r),r.hasChildNodes()&&C_(r,n,o))})},z8=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},zp=(e,n)=>o=>!!(o&&J1(e,o,n)),oD=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),z8(e,r)},bb=bd.generate([{keep:[]},{rename:["name"]},{removed:[]}]),DP=/^(src|href|style)$/,sD=vt.each,S_=yg,U8=e=>/^(TR|TH|TD)$/.test(e.nodeName),RP=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),MP=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],i=n[o?"startOffset":"endOffset"];if(Wt(r)){const u=r.childNodes.length-1;!o&&i&&i--,r=r.childNodes[i>u?u:i]}return pt(r)&&o&&i>=r.data.length&&(r=new Ha(r,e.getBody()).next()||r),pt(r)&&!o&&i===0&&(r=new Ha(r,e.getBody()).prev()||r),r},rD=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return U8(e)&&r?e.nodeName==="TR"&&r[o]||r:e},aD=(e,n,o,r)=>{var i;const u=e.create(o,r);return(i=n.parentNode)===null||i===void 0||i.insertBefore(u,n),u.appendChild(n),u},x_=(e,n,o,r,i)=>{const u=be.fromDom(n),m=be.fromDom(e.create(r,i)),y=o?$d(u):Lh(u);return xu(m,y),o?(ii(u,m),Cm(m,u)):(qi(u,m),rr(m,u)),m.dom},vb=(e,n)=>n.links&&e.nodeName==="A",NP=(e,n,o)=>{const r=n.parentNode;let i;const u=e.dom,m=Si(e);Jf(o)&&r===u.getRoot()&&(!o.list_block||!S_(n,o.list_block))&&Se(_r(n.childNodes),y=>{ih(e,m,y.nodeName.toLowerCase())?i?i.appendChild(y):(i=aD(u,y,m),u.setAttribs(i,Ym(e))):i=null}),!(Qf(o)&&!S_(o.inline,n))&&u.remove(n,!0)},PP=(e,n,o)=>so(e)?{name:n,value:null}:{name:e,value:Xf(n,o)},a2=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},iD=(e,n,o,r,i)=>{let u=!1;sD(o.styles,(m,y)=>{const{name:S,value:O}=PP(y,m,r),L=wE(O,S);(o.remove_similar||ne(O)||!Wt(i)||S_(J1(e,i,S),L))&&e.setStyle(n,S,""),u=!0}),u&&a2(e,n)},BP=(e,n,o)=>{n==="removeformat"?Se(v_(e.selection),r=>{Se(F8,i=>e.dom.setStyle(r,i,"")),a2(e.dom,r)}):H8(e.formatter,n).each(r=>{Se(v_(e.selection),i=>iD(e.dom,i,r,o,null))})},IP=(e,n,o,r,i)=>{const u=e.dom,m=XC(e),y=e.schema;if(Wa(n)&&Kl(y,n.inline)&&Ou(y,r)&&r.parentElement===e.getBody())return NP(e,r,n),bb.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!s2(u,r,n)&&!vb(r,n))return bb.keep();const S=r,O=n.preserve_attributes;if(Wa(n)&&n.remove==="all"&&jt(O)){const L=Zt(u.getAttribs(S),F=>et(O,F.name.toLowerCase()));if(u.removeAllAttribs(S),Se(L,F=>u.setAttrib(S,F.name,F.value)),L.length>0)return bb.rename("span")}if(n.remove!=="all"){iD(u,S,n,o,i),sD(n.attributes,(F,V)=>{const{name:Q,value:re}=PP(V,F,o);if(n.remove_similar||ne(re)||!Wt(i)||S_(u.getAttrib(i,Q),re)){if(Q==="class"){const ee=u.getAttrib(S,Q);if(ee){let ue="";if(Se(ee.split(/\s+/),we=>{/mce\-\w+/.test(we)&&(ue+=(ue?" ":"")+we)}),ue){u.setAttrib(S,Q,ue);return}}}if(DP.test(Q)&&S.removeAttribute("data-mce-"+Q),Q==="style"&&vl(["li"])(S)&&u.getStyle(S,"list-style-type")==="none"){S.removeAttribute(Q),u.setStyle(S,"list-style-type","none");return}Q==="class"&&S.removeAttribute("className"),S.removeAttribute(Q)}}),sD(n.classes,F=>{F=Xf(F,o),(!Wt(i)||u.hasClass(i,F))&&u.removeClass(S,F)});const L=u.getAttribs(S);for(let F=0;F<L.length;F++){const V=L[F].nodeName;if(!m.isAttributeInternal(V))return bb.keep()}}return n.remove!=="none"?(NP(e,S,n),bb.removed()):bb.keep()},LP=(e,n,o,r,i)=>{let u;return n.parentNode&&Se(b0(e.dom,n.parentNode).reverse(),m=>{if(!u&&Wt(m)&&m.id!=="_start"&&m.id!=="_end"){const y=uf(e,m,o,r,i);y&&y.split!==!1&&(u=m)}}),u},W8=(e,n,o,r)=>IP(e,n,o,r,r).fold(ct(r),i=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,i)),ct(null)),yb=(e,n,o,r,i,u,m,y)=>{var S,O;let L,F;const V=e.dom;if(o){const Q=o.parentNode;for(let re=r.parentNode;re&&re!==Q;re=re.parentNode){let ee=V.clone(re,!1);for(let ue=0;ue<n.length&&(ee=W8(e,n[ue],y,ee),ee!==null);ue++);ee&&(L&&ee.appendChild(L),F||(F=ee),L=ee)}(!m.mixed||!V.isBlock(o))&&(r=(S=V.split(o,r))!==null&&S!==void 0?S:r),L&&F&&((O=i.parentNode)===null||O===void 0||O.insertBefore(L,i),F.appendChild(i),Wa(m)&&w_(e,m,y,L))}return r},FP=(e,n,o,r,i)=>{const u=e.formatter.get(n),m=u[0],y=e.dom,S=e.selection,O=ee=>{const ue=LP(e,ee,n,o,i);return yb(e,u,ue,ee,ee,!0,m,o)},L=ee=>_l(ee)&&Wt(ee)&&(ee.id==="_start"||ee.id==="_end"),F=ee=>Tt(u,ue=>U0(e,ue,o,ee,ee)),V=ee=>{const ue=_r(ee.childNodes),De=F(ee)||Tt(u,ft=>s2(y,ee,ft)),Oe=ee.parentNode;if(!De&&Fe(Oe)&&CC(m)&&F(Oe),m.deep&&ue.length)for(let ft=0;ft<ue.length;ft++)V(ue[ft]);Se(["underline","line-through","overline"],ft=>{Wt(ee)&&e.dom.getStyle(ee,"text-decoration")===ft&&ee.parentNode&&yC(y,ee.parentNode)===ft&&U0(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ft}},void 0,ee)})},Q=ee=>{const ue=y.get(ee?"_start":"_end");if(ue){let we=ue[ee?"firstChild":"lastChild"];return L(we)&&(we=we[ee?"firstChild":"lastChild"]),pt(we)&&we.data.length===0&&(we=ee?ue.previousSibling||ue.nextSibling:ue.nextSibling||ue.previousSibling),y.remove(ue,!0),we}else return null},re=ee=>{let ue,we,De=Cg(y,ee,u,ee.collapsed);if(m.split){if(De=ht(De),ue=MP(e,De,!0),we=MP(e,De),ue!==we){if(ue=rD(ue,!0),we=rD(we,!1),RP(y,ue,we)){const $e=W.from(ue.firstChild).getOr(ue);O(x_(y,$e,!0,"span",{id:"_start","data-mce-type":"bookmark"})),Q(!0);return}if(RP(y,we,ue)){const $e=W.from(we.lastChild).getOr(we);O(x_(y,$e,!1,"span",{id:"_end","data-mce-type":"bookmark"})),Q(!1);return}ue=aD(y,ue,"span",{id:"_start","data-mce-type":"bookmark"}),we=aD(y,we,"span",{id:"_end","data-mce-type":"bookmark"});const Oe=y.createRng();Oe.setStartAfter(ue),Oe.setEndBefore(we),tb(y,Oe,$e=>{Se($e,ft=>{!_l(ft)&&!_l(ft.parentNode)&&O(ft)})}),O(ue),O(we),ue=Q(!0),we=Q()}else ue=we=O(ue);De.startContainer=ue.parentNode?ue.parentNode:ue,De.startOffset=y.nodeIndex(ue),De.endContainer=we.parentNode?we.parentNode:we,De.endOffset=y.nodeIndex(we)+1}tb(y,De,Oe=>{Se(Oe,V)})};if(r){if(f0(r)){const ee=y.createRng();ee.setStartBefore(r),ee.setEndAfter(r),re(ee)}else re(r);Tl(e,n,r,o);return}!S.isCollapsed()||!Wa(m)||kp(e).length?(of(e,()=>u0(e,re),ee=>Wa(m)&&d_(e,n,o,ee)),e.nodeChanged()):_P(e,n,o,i),BP(e,n,o),Tl(e,n,r,o)},cD=(e,n,o,r,i)=>{(r||e.selection.isEditable())&&FP(e,n,o,r,i)},U0=(e,n,o,r,i)=>IP(e,n,o,r,i).fold(tt,u=>(e.dom.rename(r,u),!0),yt),i2=vt.each,$P=(e,n,o,r)=>{const i=u=>{if(qc(u)&&Wt(u.parentNode)&&e.isEditable(u)){const m=yC(e,u.parentNode);e.getStyle(u,"color")&&m?e.setStyle(u,"text-decoration",m):e.getStyle(u,"text-decoration")===m&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(vt.walk(r,i,"childNodes"),i(r))},Z8=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const i=zp(e,"fontSize");C_(r,u=>i(u)&&e.isEditable(u),oD(e,"backgroundColor",Xf(n.styles.backgroundColor,o)))}},HP=(e,n,o,r)=>{if(Wa(n)&&(n.inline==="sub"||n.inline==="sup")){const i=zp(e,"fontSize");C_(r,m=>i(m)&&e.isEditable(m),oD(e,"fontSize",""));const u=Zt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},j8=(e,n,o,r)=>{i2(n,i=>{Wa(i)&&i2(e.dom.select(i.inline,r),u=>{y_(u)&&U0(e,i,o,u,i.exact?u:null)}),V8(e.dom,i,r)})},q8=(e,n,o,r,i)=>{const u=i.parentNode;uf(e,u,o,r)&&U0(e,n,r,i)||n.merge_with_parents&&u&&e.dom.getParent(u,m=>uf(e,m,o,r)?(U0(e,n,r,i),!0):!1)},wb=vt.each,VP=(e,n,o,r)=>{if(Bx(e)&&Wa(n)&&o.parentNode){const i=sv(e.schema),u=Jb(be.fromDom(o),m=>nu(m.dom));return Ys(i,r)&&Au(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},E_=(e,n,o,r)=>{if(wb(o.styles,(i,u)=>{e.setStyle(n,u,Xf(i,r))}),o.styles){const i=e.getAttrib(n,"style");i&&e.setAttrib(n,"data-mce-style",i)}},G8=(e,n,o,r)=>{const i=e.formatter.get(n),u=i[0],m=!r&&e.selection.isCollapsed(),y=e.dom,S=e.selection,O=(re,ee=u)=>{ve(ee.onformat)&&ee.onformat(re,ee,o,r),E_(y,re,ee,o),wb(ee.attributes,(ue,we)=>{y.setAttrib(re,we,Xf(ue,o))}),wb(ee.classes,ue=>{const we=Xf(ue,o);y.hasClass(re,we)||y.addClass(re,we)})},L=(re,ee)=>{let ue=!1;return wb(re,we=>ou(we)?y.getContentEditable(ee)==="false"&&!we.ceFalseOverride||Fe(we.collapsed)&&we.collapsed!==m?!0:y.is(ee,we.selector)&&!nu(ee)?(O(ee,we),ue=!0,!1):!0:!1),ue},F=re=>{if(ce(re)){const ee=y.create(re);return O(ee),ee}else return null},V=(re,ee,ue)=>{const we=[];let De=!0;const Oe=u.inline||u.block,$e=F(Oe),ft=Je=>y0(u)&&uf(e,Je,n,o),Ot=(Je,ze,ut)=>{const rn=SE(u)&&g0(e.schema,Je)&&ih(e,ze,Oe);return ut&&rn},Kt=(Je,ze,ut,rn)=>{const wn=Je.nodeName.toLowerCase(),go=ih(e,Oe,wn)&&ih(e,ze,Oe),wo=!ue&&pt(Je)&&vw(Je.data),ns=nu(Je),ps=!Wa(u)||!re.isBlock(Je);return(ut||rn)&&go&&!wo&&!ns&&ps};tb(re,ee,Je=>{let ze;const ut=rn=>{let wn=!1,go=De,wo=!1;const ns=rn.parentNode,ps=ns.nodeName.toLowerCase(),Lr=re.getContentEditable(rn);Fe(Lr)&&(go=De,De=Lr==="true",wn=!0,wo=vC(e,rn));const Ea=De&&!wn;if(Lo(rn)&&!VP(e,u,rn,ps)){ze=null,Jf(u)&&re.remove(rn);return}if(ft(rn)){ze=null;return}if(Ot(rn,ps,Ea)){const Ts=re.rename(rn,Oe);O(Ts),we.push(Ts),ze=null;return}if(ou(u)){let Ts=L(i,rn);if(!Ts&&Fe(ns)&&CC(u)&&(Ts=L(i,ns)),!Wa(u)||Ts){ze=null;return}}Fe($e)&&Kt(rn,ps,Ea,wo)?(ze||(ze=re.clone($e,!1),ns.insertBefore(ze,rn),we.push(ze)),wo&&wn&&(De=go),ze.appendChild(rn)):(ze=null,Se(_r(rn.childNodes),ut),wn&&(De=go),ze=null)};Se(Je,ut)}),u.links===!0&&Se(we,Je=>{const ze=ut=>{ut.nodeName==="A"&&O(ut,u),Se(_r(ut.childNodes),ze)};ze(Je)}),Se(we,Je=>{const ze=wn=>{let go=0;return Se(wn.childNodes,wo=>{!pC(wo)&&!_l(wo)&&go++}),go},ut=wn=>Po(wn.childNodes,m0).filter(wo=>re.getContentEditable(wo)!=="false"&&s2(re,wo,u)).map(wo=>{const ns=re.clone(wo,!1);return O(ns),re.replace(ns,wn,!0),re.remove(wo,!0),ns}).getOr(wn),rn=ze(Je);if((we.length>1||!re.isBlock(Je))&&rn===0){re.remove(Je,!0);return}(Wa(u)||Jf(u)&&u.wrapper)&&(!u.exact&&rn===1&&(Je=ut(Je)),j8(e,i,o,Je),q8(e,u,n,o,Je),Z8(re,u,o,Je),$P(re,u,o,Je),HP(re,u,o,Je),w_(e,u,o,Je))})},Q=f0(r)?r:S.getNode();if(y.getContentEditable(Q)==="false"&&!vC(e,Q)){r=Q,L(i,r),ru(e,n,r,o);return}if(u){if(r)if(f0(r)){if(!L(i,r)){const re=y.createRng();re.setStartBefore(r),re.setEndAfter(r),V(y,Cg(y,re,i),!0)}}else V(y,r,!0);else!m||!Wa(u)||kp(e).length?(S.setRng(Vs(S.getRng())),of(e,()=>{u0(e,(re,ee)=>{const ue=ee?re:Cg(y,re,i);V(y,ue,!1)})},yt),e.nodeChanged()):P8(e,n,o),H8(e.formatter,n).each(re=>{Se(b_(e.selection),ee=>E_(y,ee,re,o))});L8(n,e)}ru(e,n,r,o)},zP=(e,n,o,r)=>{(r||e.selection.isEditable())&&G8(e,n,o,r)},lD=e=>Sn(e,"vars"),uD=(e,n)=>{e.set({}),n.on("NodeChange",o=>{ZP(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=W.from(o.node).map(i=>f0(i)?i:i.startContainer).bind(i=>Wt(i)?W.some(i):W.from(i.parentElement)).getOrThunk(()=>dD(n));ZP(n,r,e.get())})},dD=e=>e.selection.getStart(),UP=(e,n,o,r,i)=>$r(n,y=>{const S=e.formatter.matchNode(y,o,i??{},r);return!Bn(S)},y=>u_(e,y,o)?!0:r?!1:Fe(e.formatter.matchNode(y,o,i,!0))),WP=(e,n)=>{const o=n??dD(e);return Zt(b0(e.dom,o),r=>Wt(r)&&!Pf(r))},ZP=(e,n,o)=>{const r=WP(e,n);kt(o,(i,u)=>{const m=y=>{const S=UP(e,r,u,y.similar,lD(y)?y.vars:void 0),O=S.isSome();if(y.state.get()!==O){y.state.set(O);const L=S.getOr(n);lD(y)?y.callback(O,{node:L,format:u,parents:r}):Se(y.callbacks,F=>F(O,{node:L,format:u,parents:r}))}};Se([i.withSimilar,i.withoutSimilar],m),Se(i.withVars,m)})},__=(e,n,o,r,i,u)=>{const m=n.get();Se(o.split(","),y=>{const S=zo(m,y).getOrThunk(()=>{const L={withSimilar:{state:Be(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Be(!1),similar:!1,callbacks:[]},withVars:[]};return m[y]=L,L}),O=()=>{const L=WP(e);return UP(e,L,y,i,u).isSome()};if(Bn(u)){const L=i?S.withSimilar:S.withoutSimilar;L.callbacks.push(r),L.callbacks.length===1&&L.state.set(O())}else S.withVars.push({state:Be(O()),similar:i,vars:u,callback:r})}),n.set(m)},Rg=(e,n,o)=>{const r=e.get();Se(n.split(","),i=>zo(r,i).each(u=>{r[i]={withSimilar:{...u.withSimilar,callbacks:Zt(u.withSimilar.callbacks,m=>m!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Zt(u.withoutSimilar.callbacks,m=>m!==o)},withVars:Zt(u.withVars,m=>m.callback!==o)}})),e.set(r)},K8=(e,n,o,r,i,u)=>(__(e,n,o,r,i,u),{unbind:()=>Rg(n,o,r)}),fD=(e,n,o,r)=>{const i=e.formatter.get(n);i&&(d_(e,n,o,r)&&(!("toggle"in i[0])||i[0].toggle)?cD(e,n,o,r):zP(e,n,o,r))},Qr=vt.explode,T_=()=>{const e={};return{addFilter:(i,u)=>{Se(Qr(i),m=>{Sn(e,m)||(e[m]={name:m,callbacks:[]}),e[m].callbacks.push(u)})},getFilters:()=>Di(e),removeFilter:(i,u)=>{Se(Qr(i),m=>{if(Sn(e,m))if(Fe(u)){const y=e[m],S=Zt(y.callbacks,O=>O!==u);S.length>0?y.callbacks=S:delete e[m]}else delete e[m]})}}},mD=(e,n)=>{Se(n,o=>{e.attr(o,null)})},Mg=(e,n,o)=>{e.addNodeFilter("font",r=>{Se(r,i=>{const u=n.parse(i.attr("style")),m=i.attr("color"),y=i.attr("face"),S=i.attr("size");m&&(u.color=m),y&&(u["font-family"]=y),S&&Qi(S).each(O=>{u["font-size"]=o[O-1]}),i.name="span",i.attr("style",n.serialize(u)),mD(i,["color","face","size"])})})},jP=(e,n,o)=>{e.addNodeFilter("strike",r=>{const i=n.type!=="html4";Se(r,u=>{if(i)u.name="s";else{const m=o.parse(u.attr("style"));m["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(m))}})})},qP=(e,n,o)=>{var r;const i=Jy();n.convert_fonts_to_spans&&Mg(e,i,vt.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),jP(e,o,i)},c2=(e,n,o)=>{n.inline_styles&&qP(e,n,o)},Y8=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),X8=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},Up=e=>{const[n,...o]=e.split(","),r=o.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(i){const u=i[2]===";base64",m=u?X8(r):decodeURIComponent(r);return W.some({type:i[1],data:m,base64Encoded:u})}else return W.none()},GP=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return W.none()}const i=new Uint8Array(r.length);for(let u=0;u<i.length;u++)i[u]=r.charCodeAt(u);return W.some(new Blob([i],{type:e}))},Cb=e=>new Promise((n,o)=>{Up(e).bind(({type:r,data:i,base64Encoded:u})=>GP(r,i,u)).fold(()=>o("Invalid data URI"),n)}),J8=e=>es(e,"blob:")?Y8(e):es(e,"data:")?Cb(e):Promise.reject("Unknown URI format"),Ng=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var i;o((i=r.error)===null||i===void 0?void 0:i.message)},r.readAsDataURL(e)});let Q8=0;const Ed=e=>"blobid"+Q8++,W0=(e,n,o)=>Up(e).bind(({data:r,type:i,base64Encoded:u})=>{if(n&&!u)return W.none();{const m=u?r:btoa(r);return o(m,i)}}),k_=(e,n,o)=>{const r=e.create(Ed(),n,o);return e.add(r),r},A_=(e,n,o=!1)=>W0(n,o,(r,i)=>W.from(e.getByData(r,i)).orThunk(()=>GP(i,r).map(u=>k_(e,u,r)))),eH=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(es(n,"blob:")){const r=e.getByUri(n);return Fe(r)?Promise.resolve(r):J8(n).then(i=>Ng(i).then(u=>W0(u,!1,m=>W.some(k_(e,i,m))).getOrThunk(o)))}else return es(n,"data:")?A_(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},O_=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,tH=e=>W.from(e.match(O_)).bind(n=>vc(n,1)).map(n=>es(n,"www.")?n.substring(4):n),_d=(e,n)=>{W.from(e.attr("src")).bind(tH).forall(o=>!et(n,o))&&e.attr("sandbox","")},Z0=(e,n)=>es(e,`${n}/`),KP=e=>Bn(e)?"iframe":Z0(e,"image")?"img":Z0(e,"video")?"video":Z0(e,"audio")?"audio":"iframe",hD=({type:e,src:n,width:o,height:r}={},i,u)=>{const m=KP(e),y=new cl(m,1);return y.attr(m==="audio"?{src:n}:{src:n,width:o,height:r}),(m==="audio"||m==="video")&&y.attr("controls",""),m==="iframe"&&i&&_d(y,u),y},gD=e=>Fe(e.attr("data-mce-bogus")),Sb=e=>e.attr("src")===pn.transparentSrc||Fe(e.attr("data-mce-placeholder")),pD=(e,n)=>{const{blob_cache:o}=n;if(o){const r=i=>{const u=i.attr("src");Sb(i)||gD(i)||Qt(u)||A_(o,u,!0).each(m=>{i.attr("src",m.blobUri())})};e.addAttributeFilter("src",i=>Se(i,r))}},nH=(e,n)=>{var o,r;const i=e.schema;e.addAttributeFilter("href",S=>{let O=S.length;const L=V=>V.split(" ").filter(re=>re.length>0).concat(["noopener"]).sort().join(" "),F=V=>{const Q=V?vt.trim(V):"";return/\b(noopener)\b/g.test(Q)?Q:L(Q)};if(!n.allow_unsafe_link_target)for(;O--;){const V=S[O];V.name==="a"&&V.attr("target")==="_blank"&&V.attr("rel",F(V.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",S=>{let O=S.length,L,F,V,Q;for(;O--;)if(Q=S[O],Q.name==="a"&&Q.firstChild&&!Q.attr("href"))for(V=Q.parent,L=Q.lastChild;L&&V;)F=L.prev,V.insert(L,Q),L=F}),n.fix_list_elements&&e.addNodeFilter("ul,ol",S=>{let O=S.length,L,F;for(;O--;)if(L=S[O],F=L.parent,F&&(F.name==="ul"||F.name==="ol"))if(L.prev&&L.prev.name==="li")L.prev.append(L);else{const V=new cl("li",1);V.attr("style","list-style-type: none"),L.wrap(V)}});const u=i.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",S=>{var O;let L=S.length;for(;L--;){const F=S[L],V=(O=F.attr("class"))!==null&&O!==void 0?O:"",Q=vt.explode(V," ");let re="";for(let ee=0;ee<Q.length;ee++){const ue=Q[ee];let we=!1,De=u["*"];De&&De[ue]&&(we=!0),De=u[F.name],!we&&De&&De[ue]&&(we=!0),we&&(re&&(re+=" "),re+=ue)}re.length||(re=null),F.attr("class",re)}}),pD(e,n);const m=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,y=Zi((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",S=>Se(S,O=>{O.replace(hD({type:O.attr("type"),src:O.name==="object"?O.attr("data"):O.attr("src"),width:O.attr("width"),height:O.attr("height")},m,y))})),m&&e.addNodeFilter("iframe",S=>Se(S,O=>_d(O,y)))},{entries:bD,setPrototypeOf:YP,isFrozen:oH,getPrototypeOf:sH,getOwnPropertyDescriptor:rH}=Object;let{freeze:mc,seal:om,create:XP}=Object,{apply:l2,construct:vD}=typeof Reflect<"u"&&Reflect;l2||(l2=function(n,o,r){return n.apply(o,r)}),mc||(mc=function(n){return n}),om||(om=function(n){return n}),vD||(vD=function(n,o){return new n(...o)});const JP=ff(Array.prototype.forEach),QP=ff(Array.prototype.pop),u2=ff(Array.prototype.push),D_=ff(String.prototype.toLowerCase),yD=ff(String.prototype.toString),aH=ff(String.prototype.match),sm=ff(String.prototype.replace),iH=ff(String.prototype.indexOf),cH=ff(String.prototype.trim),Td=ff(RegExp.prototype.test),d2=lH(TypeError);function ff(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return l2(e,n,r)}}function lH(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return vD(e,o)}}function _s(e,n,o){var r;o=(r=o)!==null&&r!==void 0?r:D_,YP&&YP(e,null);let i=n.length;for(;i--;){let u=n[i];if(typeof u=="string"){const m=o(u);m!==u&&(oH(n)||(n[i]=m),u=m)}e[u]=!0}return e}function j0(e){const n=XP(null);for(const[o,r]of bD(e))n[o]=r;return n}function f2(e,n){for(;e!==null;){const r=rH(e,n);if(r){if(r.get)return ff(r.get);if(typeof r.value=="function")return ff(r.value)}e=sH(e)}function o(r){return console.warn("fallback value for",r),null}return o}const eB=mc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Wp=mc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),wD=mc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),uH=mc(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),CD=mc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),dH=mc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),SD=mc(["#text"]),tB=mc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),xD=mc(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nB=mc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),R_=mc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fH=om(/\{\{[\w\W]*|[\w\W]*\}\}/gm),mH=om(/<%[\w\W]*|[\w\W]*%>/gm),hH=om(/\${[\w\W]*}/gm),gH=om(/^data-[\-\w.\u00B7-\uFFFF]/),pH=om(/^aria-[\-\w]+$/),oB=om(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ED=om(/^(?:\w+script|data):/i),sB=om(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),bH=om(/^html$/i);var q0=Object.freeze({__proto__:null,MUSTACHE_EXPR:fH,ERB_EXPR:mH,TMPLIT_EXPR:hH,DATA_ATTR:gH,ARIA_ATTR:pH,IS_ALLOWED_URI:oB,IS_SCRIPT_OR_DATA:ED,ATTR_WHITESPACE:sB,DOCTYPE_NAME:bH});const vH=()=>typeof window>"u"?null:window,rB=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";o&&o.hasAttribute(i)&&(r=o.getAttribute(i));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(m){return m},createScriptURL(m){return m}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function aB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vH();const n=So=>aB(So);if(n.version="3.0.5",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;const o=e.document,r=o.currentScript;let{document:i}=e;const{DocumentFragment:u,HTMLTemplateElement:m,Node:y,Element:S,NodeFilter:O,NamedNodeMap:L=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:F,DOMParser:V,trustedTypes:Q}=e,re=S.prototype,ee=f2(re,"cloneNode"),ue=f2(re,"nextSibling"),we=f2(re,"childNodes"),De=f2(re,"parentNode");if(typeof m=="function"){const So=i.createElement("template");So.content&&So.content.ownerDocument&&(i=So.content.ownerDocument)}let Oe,$e="";const{implementation:ft,createNodeIterator:Ot,createDocumentFragment:Kt,getElementsByTagName:Je}=i,{importNode:ze}=o;let ut={};n.isSupported=typeof bD=="function"&&typeof De=="function"&&ft&&ft.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:rn,ERB_EXPR:wn,TMPLIT_EXPR:go,DATA_ATTR:wo,ARIA_ATTR:ns,IS_SCRIPT_OR_DATA:ps,ATTR_WHITESPACE:Lr}=q0;let{IS_ALLOWED_URI:Ea}=q0,Ts=null;const Bt=_s({},[...eB,...Wp,...wD,...CD,...SD]);let vn=null;const $o=_s({},[...tB,...xD,...nB,...R_]);let zt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Tn=null,mo=null,Gt=!0,ho=!0,Co=!1,Ya=!0,is=!1,Pa=!1,Rd=!1,dm=!1,Fc=!1,Pl=!1,Yu=!1,Bl=!0,Xu=!1;const Cn="user-content-";let Oo=!0,cr=!1,Fr={},ua=null;const mi=_s({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let da=null;const fa=_s({},["audio","video","img","source","image","track"]);let pc=null;const Md=_s({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Nd="http://www.w3.org/1998/Math/MathML",Pd="http://www.w3.org/2000/svg",lu="http://www.w3.org/1999/xhtml";let bh=lu,Vg=!1,Ub=null;const sk=_s({},[Nd,Pd,lu],yD);let vh;const Dy=["application/xhtml+xml","text/html"],QR="text/html";let Yi,Wb=null;const eM=i.createElement("form"),tM=function(We){return We instanceof RegExp||We instanceof Function},yh=function(We){if(!(Wb&&Wb===We)){if((!We||typeof We!="object")&&(We={}),We=j0(We),vh=Dy.indexOf(We.PARSER_MEDIA_TYPE)===-1?vh=QR:vh=We.PARSER_MEDIA_TYPE,Yi=vh==="application/xhtml+xml"?yD:D_,Ts="ALLOWED_TAGS"in We?_s({},We.ALLOWED_TAGS,Yi):Bt,vn="ALLOWED_ATTR"in We?_s({},We.ALLOWED_ATTR,Yi):$o,Ub="ALLOWED_NAMESPACES"in We?_s({},We.ALLOWED_NAMESPACES,yD):sk,pc="ADD_URI_SAFE_ATTR"in We?_s(j0(Md),We.ADD_URI_SAFE_ATTR,Yi):Md,da="ADD_DATA_URI_TAGS"in We?_s(j0(fa),We.ADD_DATA_URI_TAGS,Yi):fa,ua="FORBID_CONTENTS"in We?_s({},We.FORBID_CONTENTS,Yi):mi,Tn="FORBID_TAGS"in We?_s({},We.FORBID_TAGS,Yi):{},mo="FORBID_ATTR"in We?_s({},We.FORBID_ATTR,Yi):{},Fr="USE_PROFILES"in We?We.USE_PROFILES:!1,Gt=We.ALLOW_ARIA_ATTR!==!1,ho=We.ALLOW_DATA_ATTR!==!1,Co=We.ALLOW_UNKNOWN_PROTOCOLS||!1,Ya=We.ALLOW_SELF_CLOSE_IN_ATTR!==!1,is=We.SAFE_FOR_TEMPLATES||!1,Pa=We.WHOLE_DOCUMENT||!1,Fc=We.RETURN_DOM||!1,Pl=We.RETURN_DOM_FRAGMENT||!1,Yu=We.RETURN_TRUSTED_TYPE||!1,dm=We.FORCE_BODY||!1,Bl=We.SANITIZE_DOM!==!1,Xu=We.SANITIZE_NAMED_PROPS||!1,Oo=We.KEEP_CONTENT!==!1,cr=We.IN_PLACE||!1,Ea=We.ALLOWED_URI_REGEXP||oB,bh=We.NAMESPACE||lu,zt=We.CUSTOM_ELEMENT_HANDLING||{},We.CUSTOM_ELEMENT_HANDLING&&tM(We.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(zt.tagNameCheck=We.CUSTOM_ELEMENT_HANDLING.tagNameCheck),We.CUSTOM_ELEMENT_HANDLING&&tM(We.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(zt.attributeNameCheck=We.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),We.CUSTOM_ELEMENT_HANDLING&&typeof We.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(zt.allowCustomizedBuiltInElements=We.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),is&&(ho=!1),Pl&&(Fc=!0),Fr&&(Ts=_s({},[...SD]),vn=[],Fr.html===!0&&(_s(Ts,eB),_s(vn,tB)),Fr.svg===!0&&(_s(Ts,Wp),_s(vn,xD),_s(vn,R_)),Fr.svgFilters===!0&&(_s(Ts,wD),_s(vn,xD),_s(vn,R_)),Fr.mathMl===!0&&(_s(Ts,CD),_s(vn,nB),_s(vn,R_))),We.ADD_TAGS&&(Ts===Bt&&(Ts=j0(Ts)),_s(Ts,We.ADD_TAGS,Yi)),We.ADD_ATTR&&(vn===$o&&(vn=j0(vn)),_s(vn,We.ADD_ATTR,Yi)),We.ADD_URI_SAFE_ATTR&&_s(pc,We.ADD_URI_SAFE_ATTR,Yi),We.FORBID_CONTENTS&&(ua===mi&&(ua=j0(ua)),_s(ua,We.FORBID_CONTENTS,Yi)),Oo&&(Ts["#text"]=!0),Pa&&_s(Ts,["html","head","body"]),Ts.table&&(_s(Ts,["tbody"]),delete Tn.tbody),We.TRUSTED_TYPES_POLICY){if(typeof We.TRUSTED_TYPES_POLICY.createHTML!="function")throw d2('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof We.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw d2('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Oe=We.TRUSTED_TYPES_POLICY,$e=Oe.createHTML("")}else Oe===void 0&&(Oe=rB(Q,r)),Oe!==null&&typeof $e=="string"&&($e=Oe.createHTML(""));mc&&mc(We),Wb=We}},kS=_s({},["mi","mo","mn","ms","mtext"]),Ve=_s({},["foreignobject","desc","title","annotation-xml"]),Ue=_s({},["title","style","font","a","script"]),Pt=_s({},Wp);_s(Pt,wD),_s(Pt,uH);const Et=_s({},CD);_s(Et,dH);const Pn=function(We){let hn=De(We);(!hn||!hn.tagName)&&(hn={namespaceURI:bh,tagName:"template"});const Hn=D_(We.tagName),ea=D_(hn.tagName);return Ub[We.namespaceURI]?We.namespaceURI===Pd?hn.namespaceURI===lu?Hn==="svg":hn.namespaceURI===Nd?Hn==="svg"&&(ea==="annotation-xml"||kS[ea]):!!Pt[Hn]:We.namespaceURI===Nd?hn.namespaceURI===lu?Hn==="math":hn.namespaceURI===Pd?Hn==="math"&&Ve[ea]:!!Et[Hn]:We.namespaceURI===lu?hn.namespaceURI===Pd&&!Ve[ea]||hn.namespaceURI===Nd&&!kS[ea]?!1:!Et[Hn]&&(Ue[Hn]||!Pt[Hn]):!!(vh==="application/xhtml+xml"&&Ub[We.namespaceURI]):!1},Eo=function(We){u2(n.removed,{element:We});try{We.parentNode.removeChild(We)}catch{We.remove()}},gr=function(We,hn){try{u2(n.removed,{attribute:hn.getAttributeNode(We),from:hn})}catch{u2(n.removed,{attribute:null,from:hn})}if(hn.removeAttribute(We),We==="is"&&!vn[We])if(Fc||Pl)try{Eo(hn)}catch{}else try{hn.setAttribute(We,"")}catch{}},Bd=function(We){let hn,Hn;if(dm)We="<remove></remove>"+We;else{const t=aH(We,/^[\r\n\t ]+/);Hn=t&&t[0]}vh==="application/xhtml+xml"&&bh===lu&&(We='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+We+"</body></html>");const ea=Oe?Oe.createHTML(We):We;if(bh===lu)try{hn=new V().parseFromString(ea,vh)}catch{}if(!hn||!hn.documentElement){hn=ft.createDocument(bh,"template",null);try{hn.documentElement.innerHTML=Vg?$e:ea}catch{}}const $c=hn.body||hn.documentElement;return We&&Hn&&$c.insertBefore(i.createTextNode(Hn),$c.childNodes[0]||null),bh===lu?Je.call(hn,Pa?"html":"body")[0]:Pa?hn.documentElement:$c},Ry=function(We){return Ot.call(We.ownerDocument||We,We,O.SHOW_ELEMENT|O.SHOW_COMMENT|O.SHOW_TEXT,null,!1)},yG=function(We){return We instanceof F&&(typeof We.nodeName!="string"||typeof We.textContent!="string"||typeof We.removeChild!="function"||!(We.attributes instanceof L)||typeof We.removeAttribute!="function"||typeof We.setAttribute!="function"||typeof We.namespaceURI!="string"||typeof We.insertBefore!="function"||typeof We.hasChildNodes!="function")},rk=function(We){return typeof y=="object"?We instanceof y:We&&typeof We=="object"&&typeof We.nodeType=="number"&&typeof We.nodeName=="string"},wh=function(We,hn,Hn){ut[We]&&JP(ut[We],ea=>{ea.call(n,hn,Hn,Wb)})},a6=function(We){let hn;if(wh("beforeSanitizeElements",We,null),yG(We))return Eo(We),!0;const Hn=Yi(We.nodeName);if(wh("uponSanitizeElement",We,{tagName:Hn,allowedTags:Ts}),We.hasChildNodes()&&!rk(We.firstElementChild)&&(!rk(We.content)||!rk(We.content.firstElementChild))&&Td(/<[/\w]/g,We.innerHTML)&&Td(/<[/\w]/g,We.textContent))return Eo(We),!0;if(!Ts[Hn]||Tn[Hn]){if(!Tn[Hn]&&c6(Hn)&&(zt.tagNameCheck instanceof RegExp&&Td(zt.tagNameCheck,Hn)||zt.tagNameCheck instanceof Function&&zt.tagNameCheck(Hn)))return!1;if(Oo&&!ua[Hn]){const ea=De(We)||We.parentNode,$c=we(We)||We.childNodes;if($c&&ea){const t=$c.length;for(let s=t-1;s>=0;--s)ea.insertBefore(ee($c[s],!0),ue(We))}}return Eo(We),!0}return We instanceof S&&!Pn(We)||(Hn==="noscript"||Hn==="noembed"||Hn==="noframes")&&Td(/<\/no(script|embed|frames)/i,We.innerHTML)?(Eo(We),!0):(is&&We.nodeType===3&&(hn=We.textContent,hn=sm(hn,rn," "),hn=sm(hn,wn," "),hn=sm(hn,go," "),We.textContent!==hn&&(u2(n.removed,{element:We.cloneNode()}),We.textContent=hn)),wh("afterSanitizeElements",We,null),!1)},i6=function(We,hn,Hn){if(Bl&&(hn==="id"||hn==="name")&&(Hn in i||Hn in eM))return!1;if(!(ho&&!mo[hn]&&Td(wo,hn))){if(!(Gt&&Td(ns,hn))){if(!vn[hn]||mo[hn]){if(!(c6(We)&&(zt.tagNameCheck instanceof RegExp&&Td(zt.tagNameCheck,We)||zt.tagNameCheck instanceof Function&&zt.tagNameCheck(We))&&(zt.attributeNameCheck instanceof RegExp&&Td(zt.attributeNameCheck,hn)||zt.attributeNameCheck instanceof Function&&zt.attributeNameCheck(hn))||hn==="is"&&zt.allowCustomizedBuiltInElements&&(zt.tagNameCheck instanceof RegExp&&Td(zt.tagNameCheck,Hn)||zt.tagNameCheck instanceof Function&&zt.tagNameCheck(Hn))))return!1}else if(!pc[hn]){if(!Td(Ea,sm(Hn,Lr,""))){if(!((hn==="src"||hn==="xlink:href"||hn==="href")&&We!=="script"&&iH(Hn,"data:")===0&&da[We])){if(!(Co&&!Td(ps,sm(Hn,Lr,"")))){if(Hn)return!1}}}}}}return!0},c6=function(We){return We.indexOf("-")>0},l6=function(We){let hn,Hn,ea,$c;wh("beforeSanitizeAttributes",We,null);const{attributes:t}=We;if(!t)return;const s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:vn};for($c=t.length;$c--;){hn=t[$c];const{name:a,namespaceURI:c}=hn;Hn=a==="value"?hn.value:cH(hn.value);const d=Hn;if(ea=Yi(a),s.attrName=ea,s.attrValue=Hn,s.keepAttr=!0,s.forceKeepAttr=void 0,wh("uponSanitizeAttribute",We,s),Hn=s.attrValue,s.forceKeepAttr)continue;if(!s.keepAttr){gr(a,We);continue}if(!Ya&&Td(/\/>/i,Hn)){gr(a,We);continue}is&&(Hn=sm(Hn,rn," "),Hn=sm(Hn,wn," "),Hn=sm(Hn,go," "));const h=Yi(We.nodeName);if(!i6(h,ea,Hn)){gr(a,We);continue}if(Xu&&(ea==="id"||ea==="name")&&(gr(a,We),Hn=Cn+Hn),Oe&&typeof Q=="object"&&typeof Q.getAttributeType=="function"&&!c)switch(Q.getAttributeType(h,ea)){case"TrustedHTML":{Hn=Oe.createHTML(Hn);break}case"TrustedScriptURL":{Hn=Oe.createScriptURL(Hn);break}}if(Hn!==d)try{c?We.setAttributeNS(c,a,Hn):We.setAttribute(a,Hn)}catch{gr(a,We)}}wh("afterSanitizeAttributes",We,null)},wG=function So(We){let hn;const Hn=Ry(We);for(wh("beforeSanitizeShadowDOM",We,null);hn=Hn.nextNode();)wh("uponSanitizeShadowNode",hn,null),!a6(hn)&&(hn.content instanceof u&&So(hn.content),l6(hn));wh("afterSanitizeShadowDOM",We,null)};return n.sanitize=function(So){let We=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},hn,Hn,ea,$c;if(Vg=!So,Vg&&(So="<!-->"),typeof So!="string"&&!rk(So))if(typeof So.toString=="function"){if(So=So.toString(),typeof So!="string")throw d2("dirty is not a string, aborting")}else throw d2("toString is not a function");if(!n.isSupported)return So;if(Rd||yh(We),n.removed=[],typeof So=="string"&&(cr=!1),cr){if(So.nodeName){const a=Yi(So.nodeName);if(!Ts[a]||Tn[a])throw d2("root node is forbidden and cannot be sanitized in-place")}}else if(So instanceof y)hn=Bd("<!---->"),Hn=hn.ownerDocument.importNode(So,!0),Hn.nodeType===1&&Hn.nodeName==="BODY"||Hn.nodeName==="HTML"?hn=Hn:hn.appendChild(Hn);else{if(!Fc&&!is&&!Pa&&So.indexOf("<")===-1)return Oe&&Yu?Oe.createHTML(So):So;if(hn=Bd(So),!hn)return Fc?null:Yu?$e:""}hn&&dm&&Eo(hn.firstChild);const t=Ry(cr?So:hn);for(;ea=t.nextNode();)a6(ea)||(ea.content instanceof u&&wG(ea.content),l6(ea));if(cr)return So;if(Fc){if(Pl)for($c=Kt.call(hn.ownerDocument);hn.firstChild;)$c.appendChild(hn.firstChild);else $c=hn;return(vn.shadowroot||vn.shadowrootmode)&&($c=ze.call(o,$c,!0)),$c}let s=Pa?hn.outerHTML:hn.innerHTML;return Pa&&Ts["!doctype"]&&hn.ownerDocument&&hn.ownerDocument.doctype&&hn.ownerDocument.doctype.name&&Td(bH,hn.ownerDocument.doctype.name)&&(s="<!DOCTYPE "+hn.ownerDocument.doctype.name+`>
`+s),is&&(s=sm(s,rn," "),s=sm(s,wn," "),s=sm(s,go," ")),Oe&&Yu?Oe.createHTML(s):s},n.setConfig=function(So){yh(So),Rd=!0},n.clearConfig=function(){Wb=null,Rd=!1},n.isValidAttribute=function(So,We,hn){Wb||yh({});const Hn=Yi(So),ea=Yi(We);return i6(Hn,ea,hn)},n.addHook=function(So,We){typeof We=="function"&&(ut[So]=ut[So]||[],u2(ut[So],We))},n.removeHook=function(So){if(ut[So])return QP(ut[So])},n.removeHooks=function(So){ut[So]&&(ut[So]=[])},n.removeAllHooks=function(){ut={}},n}var G0=aB();const _D=vt.each,Ga=vt.trim,ZK=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],jK={ftp:21,http:80,https:443,mailto:25},qK=["img","video"],GK=(e,n)=>Fe(e)?!e:Fe(n)?!et(qK,n):!0,mf=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},m2=(e,n,o)=>{const r=mf(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?GK(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class hc{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),i=/data:([^;]+)/.exec(r[0]);return i&&(o=i[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const i=fd.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!m2(r,i,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=Ga(n),this.settings=o;const r=o.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){i.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const y=r?r.path:new hc(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+i.toAbsPath(y,n);else{const S=/([^#?]*)([#?]?.*)/.exec(n);S&&(n=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(y,S[1])+S[2])}}n=n.replace(/@@/g,"(mce_at)");const m=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);m&&_D(ZK,(y,S)=>{let O=m[S];O&&(O=O.replace(/\(mce_at\)/g,"@@")),i[y]=O}),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),!i.port&&i.host==="mce_host"&&(i.port=r.port),(!i.host||i.host==="mce_host")&&(i.host=r.host),i.source=""),u&&(i.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new hc(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),i=o.getURI();if(r===i||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===i)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new hc(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?jK[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,i="",u,m;const y=n.substring(0,n.lastIndexOf("/")).split("/"),S=o.split("/");if(y.length>=S.length){for(u=0,m=y.length;u<m;u++)if(u>=S.length||y[u]!==S[u]){r=u+1;break}}if(y.length<S.length){for(u=0,m=S.length;u<m;u++)if(u>=y.length||y[u]!==S[u]){r=u+1;break}}if(r===1)return o;for(u=0,m=y.length-(r-1);u<m;u++)i+="../";for(u=r-1,m=S.length;u<m;u++)u!==r-1?i+="/"+S[u]:i+=S[u];return i}toAbsPath(n,o){let r=0;const i=/\/$/.test(o)?"/":"",u=n.split("/"),m=o.split("/"),y=[];_D(u,F=>{F&&y.push(F)});const S=[];for(let F=m.length-1;F>=0;F--)if(!(m[F].length===0||m[F]===".")){if(m[F]===".."){r++;continue}if(r>0){r--;continue}S.push(m[F])}const O=y.length-r;let L;return O<=0?L=vs(S).join("/"):L=y.slice(0,O).join("/")+"/"+vs(S).join("/"),L.indexOf("/")!==0&&(L="/"+L),i&&L.lastIndexOf("/")!==L.length-1&&(L+=i),L}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const Zp=vt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),TD="data-mce-type";let iB=0;const xb=(e,n,o,r,i)=>{var u,m,y,S;const O=n.validate,L=o.getSpecialElements();e.nodeType===ga&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const F=(m=i==null?void 0:i.tagName)!==null&&m!==void 0?m:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Fe(i)&&(i.allowedTags[F]=!0);return}if(e.nodeType!==Ld||F==="body")return;const V=be.fromDom(e),Q=pi(V,TD),re=ri(V,"data-mce-bogus");if(!Q&&ce(re)){re==="all"?gs(V):_c(V);return}const ee=o.getElementRule(F);if(O&&!ee){Sn(L,F)?gs(V):_c(V);return}else Fe(i)&&(i.allowedTags[F]=!0);if(O&&ee&&!Q){if(Se((y=ee.attributesForced)!==null&&y!==void 0?y:[],ue=>{js(V,ue.name,ue.value==="{$uid}"?`mce_${iB++}`:ue.value)}),Se((S=ee.attributesDefault)!==null&&S!==void 0?S:[],ue=>{pi(V,ue.name)||js(V,ue.name,ue.value==="{$uid}"?`mce_${iB++}`:ue.value)}),ee.attributesRequired&&!Tt(ee.attributesRequired,ue=>pi(V,ue))){_c(V);return}if(ee.removeEmptyAttrs&&Rh(V)){_c(V);return}ee.outputName&&ee.outputName!==F&&ex(V,ee.outputName)}},K0=(e,n,o,r,i)=>{const u=e.tagName.toLowerCase(),{attrName:m,attrValue:y}=i;i.keepAttr=Eb(n,o,r,u,m,y),i.keepAttr?(i.allowedAttributes[m]=!0,N_(m,o)&&(i.attrValue=m),n.allow_svg_data_urls&&es(y,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):M_(e,m)&&(i.forceKeepAttr=!0)},Eb=(e,n,o,r,i,u)=>o!=="html"&&!Mr(r)?!0:!(i in Zp&&m2(e,u,r))&&(!e.validate||n.isValid(r,i)||es(i,"data-")||es(i,"aria-")),M_=(e,n)=>e.hasAttribute(TD)&&(n==="id"||n==="class"||n==="style"),N_=(e,n)=>e in n.getBoolAttrs(),cB=(e,n,o,r)=>{const{attributes:i}=e;for(let u=i.length-1;u>=0;u--){const m=i[u],y=m.name,S=m.value;!Eb(n,o,r,e.tagName.toLowerCase(),y,S)&&!M_(e,y)?e.removeAttribute(y):N_(y,o)&&e.setAttribute(y,y)}},lB=(e,n,o)=>{const r=G0();return r.addHook("uponSanitizeElement",(i,u)=>{xb(i,e,n,o.track(i),u)}),r.addHook("uponSanitizeAttribute",(i,u)=>{K0(i,e,n,o.current(),u)}),r},yH=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},wH=e=>{const n=zy(e);if(n==="svg"){const o=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(i=>`xlink:${i}`),r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:o};G0().sanitize(e,r)}else if(n==="math"){const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};G0().sanitize(e,o)}else throw new Error("Not a namespace element")},uB=(e,n)=>{const o=R();if(e.sanitize){const r=lB(e,n,o);return{sanitizeHtmlElement:(u,m)=>{r.sanitize(u,yH(e,m)),r.removed=[],o.reset()},sanitizeNamespaceElement:wH}}else return{sanitizeHtmlElement:(u,m)=>{const y=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let S;for(;S=y.nextNode();){const O=o.track(S);xb(S,e,n,O),Wt(S)&&cB(S,e,n,O)}o.reset()},sanitizeNamespaceElement:Pe}},dB=vt.makeMap,fB=vt.extend,mB=(e,n,o,r)=>{const i=e.name,u=i in o&&i!=="title"&&i!=="textarea"&&i!=="noscript",m=n.childNodes;for(let y=0,S=m.length;y<S;y++){const O=m[y],L=new cl(O.nodeName.toLowerCase(),O.nodeType);if(Wt(O)){const F=O.attributes;for(let V=0,Q=F.length;V<Q;V++){const re=F[V];L.attr(re.name,re.value)}Mr(L.name)&&(r(O),L.value=O.innerHTML)}else pt(O)?(L.value=O.data,u&&(L.raw=!0)):(ba(O)||yi(O)||Gl(O))&&(L.value=O.data);Mr(L.name)||mB(L,O,o,r),e.append(L)}},CH=(e,n,o)=>{const r=[];for(let i=e,u=i;i;u=i,i=i.walk()){const m=i;Se(n,y=>y(m)),Qt(m.parent)&&m!==e?i=u:r.push(m)}for(let i=r.length-1;i>=0;i--){const u=r[i];Se(o,m=>m(u))}},SH=(e,n,o,r)=>{const i=o.validate,u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),y=fB(dB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),S=sv(n),O=/[ \t\r\n]+/g,L=/^[ \t\r\n]+/,F=/[ \t\r\n]+$/,V=De=>{let Oe=De.parent;for(;Fe(Oe);){if(Oe.name in m)return!0;Oe=Oe.parent}return!1},Q=De=>{let Oe=De;for(;Fe(Oe);){if(Oe.name in S)return i_(n,u,m,Oe);Oe=Oe.parent}return!1},re=De=>De.name in y||Gc(n,De)||Mr(De.name)&&De.parent===e,ee=(De,Oe)=>{const $e=Oe?De.prev:De.next;return Fe($e)||Qt(De.parent)?!1:re(De.parent)&&(De.parent!==e||r.isRootContent===!0)};return[De=>{var Oe;if(De.type===3&&!V(De)){let $e=(Oe=De.value)!==null&&Oe!==void 0?Oe:"";$e=$e.replace(O," "),(Vi(De.prev,re)||ee(De,!0))&&($e=$e.replace(L,"")),$e.length===0||$e===" "&&De.prev&&De.prev.type===ga&&De.next&&De.next.type===ga?De.remove():De.value=$e}},De=>{var Oe;if(De.type===1){const $e=n.getElementRule(De.name);if(i&&$e){const ft=i_(n,u,m,De);$e.paddInEmptyBlock&&ft&&Q(De)?PO(o,r,re,De):$e.removeEmpty&&ft?re(De)?De.remove():De.unwrap():$e.paddEmpty&&(ft||d8(De))&&PO(o,r,re,De)}}else if(De.type===3&&!V(De)){let $e=(Oe=De.value)!==null&&Oe!==void 0?Oe:"";(De.next&&re(De.next)||ee(De,!1))&&($e=$e.replace(F,"")),$e.length===0?De.remove():De.value=$e}}]},hB=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Y0=(e={},n=Kd())=>{const o=T_(),r=T_(),i={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,m=uB(i,n),y=(Oe,$e,ft="html")=>{const Ot=ft==="xhtml"?"application/xhtml+xml":"text/html",Kt=Sn(n.getSpecialElements(),$e.toLowerCase()),Je=Kt?`<${$e}>${Oe}</${$e}>`:Oe,ze=()=>ft==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Je}</body></html>`:/^[\s]*<head/i.test(Oe)||/^[\s]*<html/i.test(Oe)||/^[\s]*<!DOCTYPE/i.test(Oe)?`<html>${Je}</html>`:`<body>${Je}</body>`,ut=u.parseFromString(ze(),Ot).body;return m.sanitizeHtmlElement(ut,Ot),Kt?ut.firstChild:ut},S=o.addFilter,O=o.getFilters,L=o.removeFilter,F=r.addFilter,V=r.getFilters,Q=r.removeFilter,re=(Oe,$e)=>{yP(n,Oe)&&$e.push(Oe)},ee=(Oe,$e)=>{const ft=ce($e.attr(TD)),Ot=$e.type===1&&!Sn(Oe,$e.name)&&!Gc(n,$e)&&!Mr($e.name);return $e.type===3||Ot&&!ft},ue=(Oe,$e)=>{const ft=fB(dB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Ot=/^[ \t\r\n]+/,Kt=/[ \t\r\n]+$/;let Je=Oe.firstChild,ze=null;const ut=rn=>{var wn,go;rn&&(Je=rn.firstChild,Je&&Je.type===3&&(Je.value=(wn=Je.value)===null||wn===void 0?void 0:wn.replace(Ot,"")),Je=rn.lastChild,Je&&Je.type===3&&(Je.value=(go=Je.value)===null||go===void 0?void 0:go.replace(Kt,"")))};if(n.isValidChild(Oe.name,$e.toLowerCase())){for(;Je;){const rn=Je.next;ee(ft,Je)?(ze||(ze=new cl($e,1),ze.attr(i.forced_root_block_attrs),Oe.insert(ze,Je)),ze.append(Je)):(ut(ze),ze=null),Je=rn}ut(ze)}},De={schema:n,addAttributeFilter:F,getAttributeFilters:V,removeAttributeFilter:Q,addNodeFilter:S,getNodeFilters:O,removeNodeFilter:L,parse:(Oe,$e={})=>{var ft;const Ot=i.validate,Kt=(ft=$e.context)!==null&&ft!==void 0?ft:i.root_name,Je=y(Oe,Kt,$e.format);Xo(n,Je);const ze=new cl(Kt,11);mB(ze,Je,n.getSpecialElements(),m.sanitizeNamespaceElement),Je.innerHTML="";const[ut,rn]=SH(ze,n,i,$e),wn=[],go=Ot?Lr=>re(Lr,wn):Pe,wo={nodes:{},attributes:{}},ns=Lr=>vP(O(),V(),Lr,wo);if(CH(ze,[ut,ns],[rn,go]),wn.reverse(),Ot&&wn.length>0)if($e.context){const{pass:Lr,fail:Ea}=To(wn,Ts=>Ts.parent===ze);tm(Ea,n,ze,ns),$e.invalid=Lr.length>0}else tm(wn,n,ze,ns);const ps=hB(i,$e);return ps&&(ze.name==="body"||$e.isRootContent)&&ue(ze,ps),$e.invalid||MO(wo,$e),ze}};return nH(De,i),c2(De,i,n),De},h2=e=>Vp(e)?Ag({validate:!1}).serialize(e):e,kD=(e,n,o)=>{const r=h2(e),i=n(r);if(i.isDefaultPrevented())return i;if(Vp(e))if(i.content!==r){const u=Y0({validate:!1,forced_root_block:!1,...o}).parse(i.content,{context:e.name});return{...i,content:u}}else return{...i,content:e};else return i},gB=e=>({sanitize:Ei(e),sandbox_iframes:Yx(e),sandbox_iframes_exclusions:Zv(e)}),AD=(e,n)=>{if(n.no_events)return lc.value(n);{const o=MM(e,n);return o.isDefaultPrevented()?lc.error(ob(e,{content:"",...o}).content):lc.value(o)}},pB=(e,n,o)=>o.no_events?n:kD(n,i=>ob(e,{...o,content:i}),gB(e)).content,P_=(e,n)=>{if(n.no_events)return lc.value(n);{const o=kD(n.content,r=>k0(e,{...n,content:r}),gB(e));return o.isDefaultPrevented()?(nb(e,o),lc.error(void 0)):lc.value(o)}},OD=(e,n,o)=>{o.no_events||nb(e,{...o,content:n})},DD=(e,n,o)=>({element:e,width:n,rows:o}),RD=(e,n)=>({element:e,cells:n}),bB=(e,n)=>({x:e,y:n}),MD=(e,n)=>wr(e,n).bind(Qi).getOr(1),vB=(e,n,o,r,i)=>{const u=MD(i,"rowspan"),m=MD(i,"colspan"),y=e.rows;for(let S=o;S<o+u;S++){y[S]||(y[S]=RD(dw(r),[]));for(let O=n;O<n+m;O++){const L=y[S].cells;L[O]=S===o&&O===n?i:Im(i)}}},yB=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},wB=(e,n,o)=>{for(;yB(e,n,o);)n++;return n},CB=e=>Mo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),SB=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const i=o[r].cells;for(let u=0;u<i.length;u++)if(ro(i[u],n))return W.some(bB(u,r))}return W.none()},xB=(e,n,o,r,i)=>{const u=[],m=e.rows;for(let y=o;y<=i;y++){const S=m[y].cells,O=n<r?S.slice(n,r+1):S.slice(r,n+1);u.push(RD(m[y].element,O))}return u},ND=(e,n,o)=>{const r=n.x,i=n.y,u=o.x,m=o.y,y=i<m?xB(e,r,i,u,m):xB(e,r,m,u,i);return DD(e.element,CB(y),y)},g2=(e,n)=>{const o=Im(e.element),r=be.fromTag("tbody");return xu(r,n),rr(o,r),o},EB=e=>dt(e.rows,n=>{const o=dt(n.cells,i=>{const u=dw(i);return Cr(u,"colspan"),Cr(u,"rowspan"),u}),r=Im(n.element);return xu(r,o),r}),_B=e=>{const n=DD(Im(e),0,[]);return Se(ci(e,"tr"),(o,r)=>{Se(ci(o,"td,th"),(i,u)=>{vB(n,wB(n,u,r),r,o,i)})}),DD(n.element,CB(n.rows),n.rows)},B_=e=>g2(e,EB(e)),xH=(e,n,o)=>SB(e,n).bind(r=>SB(e,o).map(i=>ND(e,r,i))),EH=e=>Po(e,n=>yo(n)==="ul"||yo(n)==="ol"),_b=(e,n)=>Po(e,o=>yo(o)==="li"&&l0(o,n)).fold(ct([]),o=>EH(e).map(r=>{const i=be.fromTag(yo(r)),u=Wo(vi(r),(m,y)=>es(y,"list-style"));return Yn(i,u),[be.fromTag("li"),i]}).getOr([])),PD=(e,n)=>{const o=Mo(n,(r,i)=>(rr(i,r),i),e);return n.length>0?l([o]):o},TB=e=>rg(e)?$a(e).filter(Fm).fold(ct([]),n=>[e,n]):Fm(e)?[e]:[],p2=(e,n,o)=>{const r=be.fromDom(n.commonAncestorContainer),i=cf(r,e),u=Zt(i,S=>o.isWrapper(yo(S))),m=_b(i,n),y=u.concat(m.length?m:TB(r));return dt(y,Im)},BD=()=>l([]),ID=(e,n,o)=>PD(be.fromDom(n.cloneContents()),p2(e,n,o)),kB=(e,n)=>Ur(n,"table",nt(ro,e)),AB=(e,n)=>kB(e,n[0]).bind(o=>{const r=n[0],i=n[n.length-1],u=_B(o);return xH(u,r,i).map(m=>l([B_(m)]))}).getOrThunk(BD),_H=(e,n,o)=>n.length>0&&n[0].collapsed?BD():ID(e,n[0],o),TH=(e,n,o)=>{const r=fC(n,e);return r.length>0?AB(e,r):_H(e,n,o)},I_=(e,n)=>n>=0&&n<e.length&&ah(e.charAt(n)),L_=e=>ac(e.innerText),kH=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),OB=e=>W.from(e.selection.getRng()).map(n=>{var o;const r=W.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),u=kH(r),m=be.fromDom(n.cloneContents());mN(m),hN(m);const y=e.dom.add(i,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},m.dom),S=L_(y),O=ac((o=y.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(y),I_(O,0)||I_(O,O.length-1)){const L=r.getOr(i),F=L_(L),V=F.indexOf(S);if(V===-1)return S;{const Q=I_(F,V-1),re=I_(F,V+S.length);return(Q?" ":"")+S+(re?" ":"")}}else return S}).getOr(""),AH=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),i=e.selection.getSel(),u=qE(e,i0(i)),m=n.contextual?TH(be.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return m&&r.appendChild(m),e.selection.serializer.serialize(r,n)},OH=(e,n)=>{if(n.format==="text")return OB(e);{const o=AH(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},DH=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),RH=(e,n,o={})=>{const r=DH(o,n);return AD(e,r).fold($n,i=>{const u=OH(e,i);return pB(e,u,i)})},LD=0,DB=1,RB=2,MH=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),i=new Array(o),u=(L,F,V)=>({start:L,end:F,diag:V}),m=(L,F,V,Q,re)=>{const ee=S(L,F,V,Q);if(ee===null||ee.start===F&&ee.diag===F-Q||ee.end===L&&ee.diag===L-V){let ue=L,we=V;for(;ue<F||we<Q;)ue<F&&we<Q&&e[ue]===n[we]?(re.push([LD,e[ue]]),++ue,++we):F-L>Q-V?(re.push([RB,e[ue]]),++ue):(re.push([DB,n[we]]),++we)}else{m(L,ee.start,V,ee.start-ee.diag,re);for(let ue=ee.start;ue<ee.end;++ue)re.push([LD,e[ue]]);m(ee.end,F,ee.end-ee.diag,Q,re)}},y=(L,F,V,Q)=>{let re=L;for(;re-F<Q&&re<V&&e[re]===n[re-F];)++re;return u(L,re,F)},S=(L,F,V,Q)=>{const re=F-L,ee=Q-V;if(re===0||ee===0)return null;const ue=re-ee,we=ee+re,De=(we%2===0?we:we+1)/2;r[1+De]=L,i[1+De]=F+1;let Oe,$e,ft,Ot,Kt;for(Oe=0;Oe<=De;++Oe){for($e=-Oe;$e<=Oe;$e+=2){for(ft=$e+De,$e===-Oe||$e!==Oe&&r[ft-1]<r[ft+1]?r[ft]=r[ft+1]:r[ft]=r[ft-1]+1,Ot=r[ft],Kt=Ot-L+V-$e;Ot<F&&Kt<Q&&e[Ot]===n[Kt];)r[ft]=++Ot,++Kt;if(ue%2!==0&&ue-Oe<=$e&&$e<=ue+Oe&&i[ft-ue]<=r[ft])return y(i[ft-ue],$e+L-V,F,Q)}for($e=ue-Oe;$e<=ue+Oe;$e+=2){for(ft=$e+De-ue,$e===ue-Oe||$e!==ue+Oe&&i[ft+1]<=i[ft-1]?i[ft]=i[ft+1]-1:i[ft]=i[ft-1],Ot=i[ft]-1,Kt=Ot-L+V-$e;Ot>=L&&Kt>=V&&e[Ot]===n[Kt];)i[ft]=Ot--,Kt--;if(ue%2===0&&-Oe<=$e&&$e<=Oe&&i[ft]<=r[ft+ue])return y(i[ft],$e+L-V,F,Q)}}return null},O=[];return m(0,e.length,0,n.length,O),O},MB=e=>Wt(e)?e.outerHTML:pt(e)?fd.encodeRaw(e.data,!1):ba(e)?"<!--"+e.data+"-->":"",NH=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},PH=(e,n,o)=>{const r=NH(n);if(e.hasChildNodes()&&o<e.childNodes.length){const i=e.childNodes[o];e.insertBefore(r,i)}else e.appendChild(r)},F_=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},Ic=(e,n)=>{let o=0;Se(e,r=>{r[0]===LD?o++:r[0]===DB?(PH(n,r[1],o),o++):r[0]===RB&&F_(n,o)})},BH=(e,n)=>Zt(dt(_r(e.childNodes),N(ac,MB)),o=>o.length>0),$_=(e,n)=>{const o=dt(_r(n.childNodes),MB);return Ic(MH(o,e),n),n},Tb=qe(()=>document.implementation.createHTMLDocument("undo")),NB=e=>e.querySelector("iframe")!==null,iu=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),kb=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),b2=e=>{const n=e.serializer.getTempAttrs(),o=fN(e.getBody(),n);return NB(o)?iu(BH(o)):kb(ac(o.innerHTML))},FD=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?$_(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Fe(r)&&pE(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},H_=e=>e.type==="fragmented"?e.fragments.join(""):e.content,PB=e=>{const n=be.fromTag("body",Tb());return Eu(n,H_(e)),Se(ci(n,"*[data-mce-bogus]"),_c),Ds(n)},BB=(e,n)=>H_(e)===H_(n),v2=(e,n)=>PB(e)===PB(n),y2=(e,n)=>!e||!n?!1:BB(e,n)?!0:v2(e,n),$D=e=>e.get()===0,w2=(e,n,o)=>{$D(o)&&(e.typing=n)},IB=(e,n)=>{e.typing&&(w2(e,!1,n),e.add())},HD=e=>{e.typing&&(e.typing=!1,e.add())},VD=(e,n,o)=>{$D(n)&&o.set(Pw(e.selection))},IH=(e,n,o,r,i,u,m)=>{const y=b2(e),S=vt.extend(u||{},y);if(!$D(r)||e.removed)return null;const O=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:S,lastLevel:O,originalEvent:m}).isDefaultPrevented()||O&&y2(O,S))return null;n.data[o.get()]&&i.get().each(V=>{n.data[o.get()].beforeBookmark=V});const L=aA(e);if(L&&n.data.length>L){for(let V=0;V<n.data.length-1;V++)n.data[V]=n.data[V+1];n.data.length--,o.set(n.data.length)}S.bookmark=Pw(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(S),o.set(n.data.length-1);const F={level:S,lastLevel:O,originalEvent:m};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",F),e.dispatch("change",F)):e.dispatch("AddUndo",F),S},LH=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},lh=(e,n,o,r,i)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,m=n.data[o.get()-1];FD(e,m,!0),n.transact(i)&&(n.data[o.get()-1].beforeBookmark=u)}},zD=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],FD(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},FH=(e,n,o,r)=>{let i;return n.typing&&(n.add(),n.typing=!1,w2(n,!1,o)),r.get()>0&&(r.set(r.get()-1),i=n.data[r.get()],FD(e,i,!0),e.setDirty(!0),e.dispatch("Undo",{level:i})),i},V_=e=>{e.clear(),e.add()},UD=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!y2(b2(e),n.data[0]),LB=(e,n)=>n.get()<e.data.length-1&&!e.typing,FB=(e,n,o)=>(IB(e,n),e.beforeChange(),e.ignore(o),e.add()),$B=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},$H=(e,n)=>{const o=e.dom,r=Fe(n)?n:e.getBody();Se(o.select("table,a",r),i=>{switch(i.nodeName){case"TABLE":const u=Ww(e),m=o.getAttrib(i,"border");(!m||m==="0")&&e.hasVisual?o.addClass(i,u):o.removeClass(i,u);break;case"A":if(!o.getAttrib(i,"href")){const y=o.getAttrib(i,"name")||i.id,S=Zw(e);y&&e.hasVisual?o.addClass(i,S):o.removeClass(i,S)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},HB=e=>({init:{bindEvents:Pe},undoManager:{beforeChange:(n,o)=>VD(e,n,o),add:(n,o,r,i,u,m)=>IH(e,n,o,r,i,u,m),undo:(n,o,r)=>FH(e,n,o,r),redo:(n,o)=>zD(e,n,o),clear:(n,o)=>LH(e,n,o),reset:n=>V_(n),hasUndo:(n,o)=>UD(e,n,o),hasRedo:(n,o)=>LB(n,o),transact:(n,o,r)=>FB(n,o,r),ignore:(n,o)=>$B(n,o),extra:(n,o,r,i)=>lh(e,n,o,r,i)},formatter:{match:(n,o,r,i)=>d_(e,n,o,r,i),matchAll:(n,o)=>f_(e,n,o),matchNode:(n,o,r,i)=>uf(e,n,o,r,i),canApply:n=>A8(e,n),closest:n=>k8(e,n),apply:(n,o,r)=>zP(e,n,o,r),remove:(n,o,r,i)=>cD(e,n,o,r,i),toggle:(n,o,r)=>fD(e,n,o,r),formatChanged:(n,o,r,i,u)=>K8(e,n,o,r,i,u)},editor:{getContent:n=>gN(e,n),setContent:(n,o)=>l_(e,n,o),insertContent:(n,o)=>xd(e,n,o),addVisual:n=>$H(e,n)},selection:{getContent:(n,o)=>RH(e,n,o)},autocompleter:{addDecoration:Pe,removeDecoration:Pe},raw:{getModel:()=>W.none()}}),HH=e=>{const n=O=>Ke(O)?O:{},{init:o,undoManager:r,formatter:i,editor:u,selection:m,autocompleter:y,raw:S}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(O,L,F)=>r.transact(F),ignore:(O,L)=>r.ignore(L),extra:(O,L,F,V)=>r.extra(F,V)},formatter:{match:(O,L,F,V)=>i.match(O,n(L),V),matchAll:i.matchAll,matchNode:i.matchNode,canApply:O=>i.canApply(O),closest:O=>i.closest(O),apply:(O,L,F)=>i.apply(O,n(L)),remove:(O,L,F,V)=>i.remove(O,n(L)),toggle:(O,L,F)=>i.toggle(O,n(L)),formatChanged:(O,L,F,V,Q)=>i.formatChanged(L,F,V,Q)},editor:{getContent:O=>u.getContent(O),setContent:(O,L)=>({content:u.setContent(O,L),html:""}),insertContent:(O,L)=>(u.insertContent(O),""),addVisual:u.addVisual},selection:{getContent:(O,L)=>m.getContent(L)},autocompleter:{addDecoration:y.addDecoration,removeDecoration:y.removeDecoration},raw:{getModel:()=>W.some(S.getRawModel())}}},VH=()=>{const e=ct(null),n=ct("");return{init:{bindEvents:Pe},undoManager:{beforeChange:Pe,add:e,undo:e,redo:e,clear:Pe,reset:Pe,hasUndo:tt,hasRedo:tt,transact:e,ignore:Pe,extra:Pe},formatter:{match:tt,matchAll:ct([]),matchNode:ct(void 0),canApply:tt,closest:n,apply:Pe,remove:Pe,toggle:Pe,formatChanged:ct({unbind:Pe})},editor:{getContent:n,setContent:ct({content:"",html:""}),insertContent:ct(""),addVisual:Pe},selection:{getContent:n},autocompleter:{addDecoration:Pe,removeDecoration:Pe},raw:{getModel:ct(W.none())}}},uh=e=>Sn(e.plugins,"rtc"),VB=e=>zo(e.plugins,"rtc").bind(n=>W.from(n.setup)),zH=e=>{const n=e;return VB(e).fold(()=>(n.rtcInstance=HB(e),W.none()),o=>(n.rtcInstance=VH(),W.some(()=>o().then(r=>(n.rtcInstance=HH(r),r.rtc.isRemote)))))},WD=e=>e.rtcInstance?e.rtcInstance:HB(e),fi=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},zB=(e,n,o)=>{fi(e).undoManager.beforeChange(n,o)},ZD=(e,n,o,r,i,u,m)=>fi(e).undoManager.add(n,o,r,i,u,m),jD=(e,n,o,r)=>fi(e).undoManager.undo(n,o,r),UB=(e,n,o)=>fi(e).undoManager.redo(n,o),qD=(e,n,o)=>{fi(e).undoManager.clear(n,o)},WB=(e,n)=>{fi(e).undoManager.reset(n)},ZB=(e,n,o)=>fi(e).undoManager.hasUndo(n,o),GD=(e,n,o)=>fi(e).undoManager.hasRedo(n,o),jB=(e,n,o,r)=>fi(e).undoManager.transact(n,o,r),qB=(e,n,o)=>{fi(e).undoManager.ignore(n,o)},GB=(e,n,o,r,i)=>{fi(e).undoManager.extra(n,o,r,i)},UH=(e,n,o,r,i)=>fi(e).formatter.match(n,o,r,i),KD=(e,n,o)=>fi(e).formatter.matchAll(n,o),WH=(e,n,o,r,i)=>fi(e).formatter.matchNode(n,o,r,i),z_=(e,n)=>fi(e).formatter.canApply(n),ZH=(e,n)=>fi(e).formatter.closest(n),jH=(e,n,o,r)=>{fi(e).formatter.apply(n,o,r)},qH=(e,n,o,r,i)=>{fi(e).formatter.remove(n,o,r,i)},KB=(e,n,o,r)=>{fi(e).formatter.toggle(n,o,r)},YB=(e,n,o,r,i,u)=>fi(e).formatter.formatChanged(n,o,r,i,u),GH=(e,n)=>WD(e).editor.getContent(n),KH=(e,n,o)=>WD(e).editor.setContent(n,o),YH=(e,n,o)=>WD(e).editor.insertContent(n,o),XH=(e,n,o)=>fi(e).selection.getContent(n,o),JH=(e,n)=>fi(e).editor.addVisual(n),YD=e=>fi(e).init.bindEvents(),KK=(e,n={})=>{const o=n.format?n.format:"html";return XH(e,o,n)},XB=e=>e.dom.length===0?(gs(e),W.none()):W.some(e),QH=(e,n)=>e.filter(o=>Iu.isBookmarkNode(o.dom)).bind(n?bi:Ul),e9=(e,n,o,r,i)=>{const u=e.dom,m=n.dom,y=r?u.length:m.length;r?(wO(u,m,i,!1,!r),o.setStart(m,y)):(wO(m,u,i,!1,!r),o.setEnd(m,y))},t9=(e,n,o)=>{$a(e).each(r=>{const i=e.dom;n&&VC(r,Ge(i,0),o)?XE(i,0,o):!n&&L0(r,Ge(i,i.length),o)&&yO(i,i.length,o)})},JB=(e,n,o,r,i)=>{e.bind(u=>((r?yO:XE)(u.dom,r?u.dom.length:0,i),n.filter(Yr).map(y=>e9(u,y,o,r,i)))).orThunk(()=>QH(n,r).or(n).filter(Yr).map(m=>t9(m,r,i)))},n9=(e,n,o)=>{const r=W.from(n.firstChild).map(be.fromDom),i=W.from(n.lastChild).map(be.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(Ul).filter(Yr).bind(XB),m=i.bind(bi).filter(Yr).bind(XB);JB(u,r,e,!0,o),JB(m,i,e,!1,o),e.collapse(!1)},o9=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),QB=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),i=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...i,...n});return Ag({validate:!1},e.schema).serialize(u)}else return n.content},s9=(e,n,o={})=>{const r=o9(o,n);P_(e,r).each(i=>{const u=QB(e,i),m=e.selection.getRng();n9(m,m.createContextualFragment(u),e.schema),e.selection.setRng(m),BC(e,m),OD(e,u,i)})},eI=(e,n,o)=>{if(Sn(e,n)){const r=Zt(e[n],i=>i!==o);r.length===0?delete e[n]:e[n]=r}};var r9=(e,n)=>{let o,r;const i=(y,S)=>Po(S,O=>e.is(O,y)),u=y=>e.getParents(y,void 0,e.getRoot()),m=()=>{o={},r={},n.on("NodeChange",y=>{const S=y.element,O=u(S),L={};kt(o,(F,V)=>{i(V,O).each(Q=>{r[V]||(Se(F,re=>{re(!0,{node:Q,selector:V,parents:O})}),r[V]=F),L[V]=F})}),kt(r,(F,V)=>{L[V]||(delete r[V],Se(F,Q=>{Q(!1,{node:S,selector:V,parents:O})}))})})};return{selectorChangedWithUnbind:(y,S)=>(o||m(),o[y]||(o[y]=[]),o[y].push(S),i(y,u(n.selection.getStart())).each(()=>{r[y]=o[y]}),{unbind:()=>{eI(o,y,S),eI(r,y,S)}})}};const tI=e=>!!(e&&e.ownerDocument)&&Rr(be.fromDom(e.ownerDocument),be.fromDom(e)),a9=e=>e?tI(e.startContainer)&&tI(e.endContainer):!1,i9=(e,n,o,r)=>{let i,u;const{selectorChangedWithUnbind:m}=r9(e,r),y=(Bt,vn)=>{const $o=e.createRng();Fe(Bt)&&Fe(vn)?($o.setStart(Bt,vn),$o.setEnd(Bt,vn),$e($o),we(!1)):(gC(e,$o,r.getBody(),!0),$e($o))},S=Bt=>KK(r,Bt),O=(Bt,vn)=>s9(r,Bt,vn),L=Bt=>iO(r.getBody(),Oe(),Bt),F=Bt=>tN(r.getBody(),Oe(),Bt),V=(Bt,vn)=>Ea.getBookmark(Bt,vn),Q=Bt=>Ea.moveToBookmark(Bt),re=(Bt,vn)=>(jE(e,Bt,vn).each($e),Bt),ee=()=>{const Bt=Oe(),vn=De();return!Bt||Bt.item?!1:Bt.compareEndPoints?Bt.compareEndPoints("StartToEnd",Bt)===0:!vn||Bt.collapsed},ue=()=>{const Bt=Oe(),vn=r.getBody().querySelectorAll('[data-mce-selected="1"]');return vn.length>0?bs(vn,$o=>e.isEditable($o.parentElement)):rO(e,Bt)},we=Bt=>{const vn=Oe();vn.collapse(!!Bt),$e(vn)},De=()=>n.getSelection?n.getSelection():n.document.selection,Oe=()=>{let Bt;const vn=(zt,Tn,mo)=>{try{return Tn.compareBoundaryPoints(zt,mo)}catch{return-1}},$o=n.document;if(Fe(r.bookmark)&&!kg(r)){const zt=zE(r);if(zt.isSome())return zt.map(Tn=>qE(r,[Tn])[0]).getOr($o.createRange())}try{const zt=De();zt&&!Zd(zt.anchorNode)&&(zt.rangeCount>0?Bt=zt.getRangeAt(0):Bt=$o.createRange(),Bt=qE(r,[Bt])[0])}catch{}if(Bt||(Bt=$o.createRange()),Em(Bt.startContainer)&&Bt.collapsed){const zt=e.getRoot();Bt.setStart(zt,0),Bt.setEnd(zt,0)}return i&&u&&(vn(Bt.START_TO_START,Bt,i)===0&&vn(Bt.END_TO_END,Bt,i)===0?Bt=u:(i=null,u=null)),Bt},$e=(Bt,vn)=>{if(!a9(Bt))return;const $o=De();if(Bt=r.dispatch("SetSelectionRange",{range:Bt,forward:vn}).range,$o){u=Bt;try{$o.removeAllRanges(),$o.addRange(Bt)}catch{}vn===!1&&$o.extend&&($o.collapse(Bt.endContainer,Bt.endOffset),$o.extend(Bt.startContainer,Bt.startOffset)),i=$o.rangeCount>0?$o.getRangeAt(0):null}if(!Bt.collapsed&&Bt.startContainer===Bt.endContainer&&($o!=null&&$o.setBaseAndExtent)&&Bt.endOffset-Bt.startOffset<2&&Bt.startContainer.hasChildNodes()){const Tn=Bt.startContainer.childNodes[Bt.startOffset];Tn&&Tn.nodeName==="IMG"&&($o.setBaseAndExtent(Bt.startContainer,Bt.startOffset,Bt.endContainer,Bt.endOffset),($o.anchorNode!==Bt.startContainer||$o.focusNode!==Bt.endContainer)&&$o.setBaseAndExtent(Tn,0,Tn,1))}r.dispatch("AfterSetSelectionRange",{range:Bt,forward:vn})},ft=Bt=>(O(e.getOuterHTML(Bt)),Bt),Ot=()=>b7(r.getBody(),Oe()),Kt=(Bt,vn)=>v7(e,Oe(),Bt,vn),Je=()=>{const Bt=De(),vn=Bt==null?void 0:Bt.anchorNode,$o=Bt==null?void 0:Bt.focusNode;if(!Bt||!vn||!$o||Zd(vn)||Zd($o))return!0;const zt=e.createRng(),Tn=e.createRng();try{zt.setStart(vn,Bt.anchorOffset),zt.collapse(!0),Tn.setStart($o,Bt.focusOffset),Tn.collapse(!0)}catch{return!0}return zt.compareBoundaryPoints(zt.START_TO_START,Tn)<=0},Lr={dom:e,win:n,serializer:o,editor:r,expand:(Bt={type:"word"})=>$e(_t(e).expand(Oe(),Bt)),collapse:we,setCursorLocation:y,getContent:S,setContent:O,getBookmark:V,moveToBookmark:Q,select:re,isCollapsed:ee,isEditable:ue,isForward:Je,setNode:ft,getNode:Ot,getSel:De,setRng:$e,getRng:Oe,getStart:L,getEnd:F,getSelectedBlocks:Kt,normalize:()=>{const Bt=Oe(),vn=De();if(!_A(vn)&&Ap(r)){const $o=Dt(e,Bt);return $o.each(zt=>{$e(zt,Je())}),$o.getOr(Bt)}return Bt},selectorChanged:(Bt,vn)=>(m(Bt,vn),Lr),selectorChangedWithUnbind:m,getScrollContainer:()=>{let Bt,vn=e.getRoot();for(;vn&&vn.nodeName!=="BODY";){if(vn.scrollHeight>vn.clientHeight){Bt=vn;break}vn=vn.parentNode}return Bt},scrollIntoView:(Bt,vn)=>{Fe(Bt)?s7(r,Bt,vn):BC(r,Oe(),vn)},placeCaretAt:(Bt,vn)=>$e(C(Bt,vn,r.getDoc())),getBoundingClientRect:()=>{const Bt=Oe();return Bt.collapsed?Ge.fromRangeStart(Bt).getClientRects()[0]:Bt.getBoundingClientRect()},destroy:()=>{n=i=u=null,Ts.destroy()}},Ea=Iu(Lr),Ts=rb(Lr,r);return Lr.bookmarkManager=Ea,Lr.controlSelection=Ts,Lr},YK=(e,n,o)=>{n.addNodeFilter("br",(r,i,u)=>{const m=vt.extend({},o.getBlockElements()),y=o.getNonEmptyElements(),S=o.getWhitespaceElements();m.body=1;const O=L=>L.name in m||Gc(o,L);for(let L=0,F=r.length;L<F;L++){let V=r[L],Q=V.parent;if(Q&&O(Q)&&V===Q.lastChild){let re=V.prev;for(;re;){const ee=re.name;if(ee!=="span"||re.attr("data-mce-type")!=="bookmark"){ee==="br"&&(V=null);break}re=re.prev}if(V&&(V.remove(),i_(o,y,S,Q))){const ee=o.getElementRule(Q.name);ee&&(ee.removeEmpty?Q.remove():ee.paddEmpty&&PO(e,u,O,Q))}}else{let re=V;for(;Q&&Q.firstChild===re&&Q.lastChild===re&&(re=Q,!m[Q.name]);)Q=Q.parent;if(re===Q){const ee=new cl("#text",3);ee.value=Xr,V.replace(ee)}}}})},c9=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,i)=>{let u=r.length;for(;u--;){const m=r[u];m.attr("tabindex",m.attr("data-mce-tabindex")),m.attr(i,null)}}),e.addAttributeFilter("src,href,style",(r,i)=>{const u="data-mce-"+i,m=n.url_converter,y=n.url_converter_scope;let S=r.length;for(;S--;){const O=r[S];let L=O.attr(u);L!==void 0?(O.attr(i,L.length>0?L:null),O.attr(u,null)):(L=O.attr(i),i==="style"?L=o.serializeStyle(o.parseStyle(L),O.name):m&&(L=m.call(y,L,i,O.name)),O.attr(i,L.length>0?L:null))}}),e.addAttributeFilter("class",r=>{let i=r.length;for(;i--;){const u=r[i];let m=u.attr("class");m&&(m=m.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",m.length>0?m:null))}}),e.addAttributeFilter("data-mce-type",(r,i,u)=>{let m=r.length;for(;m--;){const y=r[m];y.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(W.from(y.firstChild).exists(O=>{var L;return!vw((L=O.value)!==null&&L!==void 0?L:"")})?y.unwrap():y.remove())}}),e.addNodeFilter("script,style",(r,i)=>{var u;const m=S=>S.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let y=r.length;for(;y--;){const S=r[y],O=S.firstChild,L=(u=O==null?void 0:O.value)!==null&&u!==void 0?u:"";if(i==="script"){const F=S.attr("type");F&&S.attr("type",F==="mce-no/type"?null:F.replace(/^mce\-/,"")),n.element_format==="xhtml"&&O&&L.length>0&&(O.value=`// <![CDATA[
`+m(L)+`
// ]]>`)}else n.element_format==="xhtml"&&O&&L.length>0&&(O.value=`<!--
`+m(L)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let i=r.length;for(;i--;){const u=r[i],m=u.value;n.preserve_cdata&&(m==null?void 0:m.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(m.replace(/^\[CDATA\[|\]\]$/g,""))):(m==null?void 0:m.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(m).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,i)=>{let u=r.length;for(;u--;){const m=r[u];m.type===7?m.remove():m.type===1&&i==="input"&&!m.attr("type")&&m.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{Se(r,i=>{i.attr("data-mce-type")==="format-caret"&&(i.isEmpty(e.schema.getNonEmptyElements())?i.remove():i.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.remove_trailing_brs&&YK(n,e,e.schema)},l9=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},XK=(e,n,o)=>{let r;const i=e.dom;let u=n.cloneNode(!0);const m=document.implementation;if(m.createHTMLDocument){const y=m.createHTMLDocument("");vt.each(u.nodeName==="BODY"?u.childNodes:[u],S=>{y.body.appendChild(y.importNode(S,!0))}),u.nodeName!=="BODY"?u=y.body.firstChild:u=y.body,r=i.doc,i.doc=y}return NA(e,{...o,node:u}),r&&(i.doc=r),u},u9=(e,n)=>Fe(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,jr=(e,n,o)=>u9(e,o)?XK(e,n,o):n,XD=(e,n,o)=>{vt.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.push(o))},JK=(e,n,o)=>!n.no_events&&e?x0(e,{...n,content:o}).content:o,d9=(e,n,o)=>{const r=ac(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||mv(be.fromDom(n))?r:vt.trim(r)},f9=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,i=e.parse(n,r);return l9(i),i},X0=(e,n,o)=>Ag(e,n).serialize(o),QK=(e,n,o,r,i)=>{const u=X0(n,o,r);return JK(e,i,u)},eY=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=n&&n.dom?n.dom:Ks.DOM,u=n&&n.schema?n.schema:Kd(r),m=Y0(r,u);c9(m,r,i);const y=(S,O={})=>{const L={format:"html",...O},F=jr(n,S,L),V=d9(i,F,L),Q=f9(m,V,L);return L.format==="tree"?Q:QK(n,r,u,Q,L)};return{schema:u,addNodeFilter:m.addNodeFilter,addAttributeFilter:m.addAttributeFilter,serialize:y,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:nt(XD,m,o),getTempAttrs:ct(o),getNodeFilters:m.getNodeFilters,getAttributeFilters:m.getAttributeFilters,removeNodeFilter:m.removeNodeFilter,removeAttributeFilter:m.removeAttributeFilter}},zi=(e,n)=>{const o=eY(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},nI="html",oI=(e,n)=>({...e,format:n,get:!0,getInner:!0}),sI=(e,n={})=>{const o=n.format?n.format:nI,r=oI(n,o);return AD(e,r).fold($n,i=>{const u=GH(e,i);return pB(e,u,i)})},m9="html",h9=(e,n)=>({format:m9,...e,set:!0,content:n}),J0=(e,n,o={})=>{const r=h9(o,n);return P_(e,r).map(i=>{const u=KH(e,i.content,i);return OD(e,u.html,i),u.content}).getOr(n)},g9="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),JD=[],p9="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),QD=[],e4=(e,n)=>{const o=Zt(n,r=>Sn(e,r));return Vo(o)},t4=e=>{const n=e4(e,g9),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Vo(n)},rI=e=>e4(e,JD),U_=(e,n)=>{const o=vt.makeMap(e.plugins," "),i=Zt(n,u=>Sn(o,u));return Vo(i)},b9=e=>U_(e,p9),v9=e=>U_(e,QD.map(n=>n.name)),y9=(e,n)=>{const o=t4(e),r=b9(n),i=r.length>0,u=o.length>0,m=n.theme==="mobile";if(i||u||m){const y=`
- `,S=m?`

Themes:${y}mobile`:"",O=i?`

Plugins:${y}${r.join(y)}`:"",L=u?`

Options:${y}${o.join(y)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+S+O+L)}},kd=e=>Po(QD,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),w9=(e,n)=>{const o=rI(e),r=v9(n),i=r.length>0,u=o.length>0;if(i||u){const m=`
- `,y=i?`

Plugins:${m}${r.map(kd).join(m)}`:"",S=u?`

Options:${m}${o.join(m)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+y+S)}},C9=(e,n)=>{y9(e,n),w9(e,n)},W_=Ks.DOM,S9=e=>{W_.setStyle(e.id,"display",e.orgDisplay)},Z_=e=>W.from(e).each(n=>n.destroy()),aI=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},x9=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),W_.unbind(n,"submit reset",e.formEventDelegate))},E9=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Fe(i==null?void 0:i.nextSibling)&&W_.remove(i.nextSibling),E0(e),e.editorManager.remove(e),!e.inline&&r&&S9(e),PA(e),W_.remove(e.getContainer()),Z_(n),Z_(o),e.destroy()}},_9=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Z_(o),Z_(r)),x9(e),aI(e),e.destroyed=!0}},j_=(()=>{const e={};return{add:(i,u)=>{e[i]=u},get:i=>e[i]?e[i]:{icons:{}},has:i=>Sn(e,i)}})(),Q0=rc.ModelManager,o4=(e,n)=>n.dom[e],q_=(e,n)=>parseInt(Wr(n,e),10),T9=nt(o4,"clientWidth"),k9=nt(o4,"clientHeight"),tY=nt(q_,"margin-top"),A9=nt(q_,"margin-left"),C2=e=>e.dom.getBoundingClientRect(),iI=(e,n,o)=>{const r=T9(e),i=k9(e);return n>=0&&o>=0&&n<=r&&o<=i},cI=(e,n,o,r)=>{const i=C2(n),u=e?i.left+n.dom.clientLeft+A9(n):0,m=e?i.top+n.dom.clientTop+tY(n):0,y=o-u,S=r-m;return{x:y,y:S}},O9=(e,n,o)=>{const r=be.fromDom(e.getBody()),i=e.inline?r:kf(r),u=cI(e.inline,i,n,o);return iI(i,u.x,u.y)},lI=e=>W.from(e).map(be.fromDom),D9=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return lI(n).map(nd).getOr(!1)};var R9=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const uI=e=>{const n=[],o=()=>{const V=e.theme;return V&&V.getNotificationManagerImpl?V.getNotificationManagerImpl():R9()},r=()=>W.from(n[0]),i=(V,Q)=>V.type===Q.type&&V.text===Q.text&&!V.progressBar&&!V.timeout&&!Q.progressBar&&!Q.timeout,u=()=>{r().each(V=>{V.reposition()})},m=V=>{n.push(V)},y=V=>{Is(n,Q=>Q===V).each(Q=>{n.splice(Q,1)})},S=(V,Q=!0)=>e.removed||!D9(e)?{}:(Q&&e.dispatch("BeforeOpenNotification",{notification:V}),Po(n,re=>i(o().getArgs(re),V)).getOrThunk(()=>{e.editorManager.setActive(e);const re=o().open(V,()=>{y(re)},()=>eN(e));return m(re),u(),e.dispatch("OpenNotification",{notification:{...re}}),re})),O=()=>{r().each(V=>{o().close(V),y(V),u()})},L=ct(n);return(V=>{V.on("SkinLoaded",()=>{const Q=uc(V);Q&&S({text:Q,type:"warning",timeout:0},!1),u()}),V.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),V.on("remove",()=>{Se(n.slice(),Q=>{o().close(Q)})}),V.addShortcut("alt+F12","Focus to notification",()=>r().map(Q=>be.fromDom(Q.getEl())).each(Q=>R0(Q)))})(e),{open:S,close:O,getNotifications:L}},ey=rc.PluginManager,jp=rc.ThemeManager;var M9=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const dI=e=>{let n=[];const o=()=>{const ee=e.theme;return ee&&ee.getWindowManagerImpl?ee.getWindowManagerImpl():M9()},r=(ee,ue)=>(...we)=>ue?ue.apply(ee,we):void 0,i=ee=>{e.dispatch("OpenWindow",{dialog:ee})},u=ee=>{e.dispatch("CloseWindow",{dialog:ee})},m=ee=>{n.push(ee),i(ee)},y=ee=>{u(ee),n=Zt(n,ue=>ue!==ee),n.length===0&&e.focus()},S=()=>W.from(n[n.length-1]),O=ee=>{e.editorManager.setActive(e),IC(e),e.ui.show();const ue=ee();return m(ue),ue},L=(ee,ue)=>O(()=>o().open(ee,ue,y)),F=ee=>O(()=>o().openUrl(ee,y)),V=(ee,ue,we)=>{const De=o();De.alert(ee,r(we||De,ue))},Q=(ee,ue,we)=>{const De=o();De.confirm(ee,r(we||De,ue))},re=()=>{S().each(ee=>{o().close(ee),y(ee)})};return e.on("remove",()=>{Se(n,ee=>{o().close(ee)})}),{open:L,openUrl:F,alert:V,confirm:Q,close:re}},ty=(e,n)=>{e.notificationManager.open({type:"error",text:n})},S2=(e,n)=>{e._skinLoaded?ty(e,n):e.on("SkinLoaded",()=>{ty(e,n)})},fI=(e,n)=>{S2(e,za.translate(["Failed to upload image: {0}",n]))},x2=(e,n,o)=>{Ti(e,n,{message:o}),console.error(o)},E2=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,N9=(e,n,o)=>{x2(e,"PluginLoadError",E2("plugin",n,o))},mI=(e,n,o)=>{x2(e,"IconsLoadError",E2("icons",n,o))},P9=(e,n,o)=>{x2(e,"LanguageLoadError",E2("language",n,o))},B9=(e,n,o)=>{x2(e,"ThemeLoadError",E2("theme",n,o))},I9=(e,n,o)=>{x2(e,"ModelLoadError",E2("model",n,o))},L9=(e,n,o)=>{const r=za.translate(["Failed to initialize plugin: {0}",n]);Ti(e,"PluginLoadError",{message:r}),s4(r,o),S2(e,r)},s4=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},rm=e=>/^[a-z0-9\-]+$/i.test(e),_2=e=>"content/"+e+"/content.css",F9=e=>tinymce.Resource.has(_2(e)),$9=e=>hI(e,nA(e)),H9=e=>hI(e,Nc(e)),hI=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",i=`content${e.editorManager.suffix}.css`;return dt(n,u=>F9(u)?u:rm(u)&&!e.inline?`${o}/${u}/${i}`:e.documentBaseURI.toAbsolute(u))},fs=e=>{e.contentCSS=e.contentCSS.concat($9(e),H9(e))},V9=e=>e?_r(e.getElementsByTagName("img")):[],T2=(e,n)=>{const o={};return{findAll:(i,u=yt)=>{const m=Zt(V9(i),S=>{const O=S.src;return S.hasAttribute("data-mce-bogus")||S.hasAttribute("data-mce-placeholder")||!O||O===pn.transparentSrc?!1:es(O,"blob:")?!e.isUploaded(O)&&u(S):es(O,"data:")?u(S):!1}),y=dt(m,S=>{const O=S.src;if(Sn(o,O))return o[O].then(L=>ce(L)?L:{image:S,blobInfo:L.blobInfo});{const L=eH(n,O).then(F=>(delete o[O],{image:S,blobInfo:F})).catch(F=>(delete o[O],F));return o[O]=L,L}});return Promise.all(y)}}},gI=()=>{let o={};const r=(V,Q)=>({status:V,resultUri:Q}),i=V=>V in o;return{hasBlobUri:i,getResultUri:V=>{const Q=o[V];return Q?Q.resultUri:null},isPending:V=>i(V)?o[V].status===1:!1,isUploaded:V=>i(V)?o[V].status===2:!1,markPending:V=>{o[V]=r(1,null)},markUploaded:(V,Q)=>{o[V]=r(2,Q)},removeFailed:V=>{delete o[V]},destroy:()=>{o={}}}};let z9=0;const U9=()=>{const e=()=>Math.round(uw()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},pI=e=>e+z9+++U9(),qp=()=>{let e=[];const n=F=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[F.toLowerCase()]||"dat",o=(F,V,Q,re,ee)=>{if(ce(F))return r({id:F,name:re,filename:ee,blob:V,base64:Q});if(Ke(F))return r(F);throw new Error("Unknown input type")},r=F=>{if(!F.blob||!F.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const V=F.id||pI("blobid"),Q=F.name||V,re=F.blob;return{id:ct(V),name:ct(Q),filename:ct(F.filename||Q+"."+n(re.type)),blob:ct(re),base64:ct(F.base64),blobUri:ct(F.blobUri||URL.createObjectURL(re)),uri:ct(F.uri)}},i=F=>{m(F.id())||e.push(F)},u=F=>Po(e,F).getOrUndefined(),m=F=>u(V=>V.id()===F);return{create:o,add:i,get:m,getByUri:F=>u(V=>V.blobUri()===F),getByData:(F,V)=>u(Q=>Q.base64()===F&&Q.blob().type===V),findFirst:u,removeByUri:F=>{e=Zt(e,V=>V.blobUri()===F?(URL.revokeObjectURL(V.blobUri()),!1):!0)},destroy:()=>{Se(e,F=>{URL.revokeObjectURL(F.blobUri())}),e=[]}}},Rl=(e,n)=>{const o={},r=(ee,ue)=>ee?ee.replace(/\/$/,"")+"/"+ue.replace(/^\//,""):ue,i=(ee,ue)=>new Promise((we,De)=>{const Oe=new XMLHttpRequest;Oe.open("POST",n.url),Oe.withCredentials=n.credentials,Oe.upload.onprogress=ft=>{ue(ft.loaded/ft.total*100)},Oe.onerror=()=>{De("Image upload failed due to a XHR Transport error. Code: "+Oe.status)},Oe.onload=()=>{if(Oe.status<200||Oe.status>=300){De("HTTP Error: "+Oe.status);return}const ft=JSON.parse(Oe.responseText);if(!ft||!ce(ft.location)){De("Invalid JSON: "+Oe.responseText);return}we(r(n.basePath,ft.location))};const $e=new FormData;$e.append("file",ee.blob(),ee.filename()),Oe.send($e)}),u=ve(n.handler)?n.handler:i,m=()=>new Promise(ee=>{ee([])}),y=(ee,ue)=>({url:ue,blobInfo:ee,status:!0}),S=(ee,ue)=>({url:"",blobInfo:ee,status:!1,error:ue}),O=(ee,ue)=>{vt.each(o[ee],we=>{we(ue)}),delete o[ee]},L=(ee,ue,we)=>(e.markPending(ee.blobUri()),new Promise(De=>{let Oe,$e;try{const ft=()=>{Oe&&(Oe.close(),$e=Pe)},Ot=Je=>{ft(),e.markUploaded(ee.blobUri(),Je),O(ee.blobUri(),y(ee,Je)),De(y(ee,Je))},Kt=Je=>{ft(),e.removeFailed(ee.blobUri()),O(ee.blobUri(),S(ee,Je)),De(S(ee,Je))};$e=Je=>{Je<0||Je>100||W.from(Oe).orThunk(()=>W.from(we).map(to)).each(ze=>{Oe=ze,ze.progressBar.value(Je)})},ue(ee,$e).then(Ot,Je=>{Kt(ce(Je)?{message:Je}:Je)})}catch(ft){De(S(ee,ft))}})),F=ee=>ee===i,V=ee=>{const ue=ee.blobUri();return new Promise(we=>{o[ue]=o[ue]||[],o[ue].push(we)})},Q=(ee,ue)=>(ee=vt.grep(ee,we=>!e.isUploaded(we.blobUri())),Promise.all(vt.map(ee,we=>e.isPending(we.blobUri())?V(we):L(we,u,ue))));return{upload:(ee,ue)=>!n.url&&F(u)?m():Q(ee,ue)}},ny=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Pg=(e,n)=>Rl(n,{url:Rv(e),basePath:Mv(e),credentials:Ox(e),handler:Dx(e)}),dh=e=>{const n=gI(),o=Pg(e,n);return{upload:(r,i=!0)=>o.upload(r,i?ny(e):void 0)}},k2=(e,n)=>e.dom.isEmpty(n.dom)&&Fe(e.schema.getTextBlockElements()[yo(n)]),r4=e=>n=>{k2(e,n)&&rr(n,be.fromHtml('<br data-mce-bogus="1" />'))},a4=e=>{const n=qp();let o,r;const i=gI(),u=[],m=Oe=>$e=>e.selection?Oe($e):[],y=Oe=>Oe+(Oe.indexOf("?")===-1?"?":"&")+new Date().getTime(),S=(Oe,$e,ft)=>{let Ot=0;do Ot=Oe.indexOf($e,Ot),Ot!==-1&&(Oe=Oe.substring(0,Ot)+ft+Oe.substr(Ot+$e.length),Ot+=ft.length-$e.length+1);while(Ot!==-1);return Oe},O=(Oe,$e,ft)=>{const Ot=`src="${ft}"${ft===pn.transparentSrc?' data-mce-placeholder="1"':""}`;return Oe=S(Oe,`src="${$e}"`,Ot),Oe=S(Oe,'data-mce-src="'+$e+'"','data-mce-src="'+ft+'"'),Oe},L=(Oe,$e)=>{Se(e.undoManager.data,ft=>{ft.type==="fragmented"?ft.fragments=dt(ft.fragments,Ot=>O(Ot,Oe,$e)):ft.content=O(ft.content,Oe,$e)})},F=(Oe,$e)=>{const ft=e.convertURL($e,"src");L(Oe.src,$e),Zc(be.fromDom(Oe),{src:us(e)?y($e):$e,"data-mce-src":ft})},V=()=>(o||(o=Pg(e,i)),ue().then(m(Oe=>{const $e=dt(Oe,ft=>ft.blobInfo);return o.upload($e,ny(e)).then(m(ft=>{const Ot=[];let Kt=!1;const Je=dt(ft,(ze,ut)=>{const{blobInfo:rn,image:wn}=Oe[ut];let go=!1;return ze.status&&xi(e)?(ze.url&&!Ko(wn.src,ze.url)&&(Kt=!0),n.removeByUri(wn.src),uh(e)||F(wn,ze.url)):ze.error&&(ze.error.remove&&(L(wn.src,pn.transparentSrc),Ot.push(wn),go=!0),fI(e,ze.error.message)),{element:wn,status:ze.status,uploadUri:ze.url,blobInfo:rn,removed:go}});return Ot.length>0&&!uh(e)?e.undoManager.transact(()=>{Se(Zl(Ot),ze=>{const ut=$a(ze);gs(ze),ut.each(r4(e)),n.removeByUri(ze.dom.src)})}):Kt&&e.undoManager.dispatchChange(),Je}))}))),Q=()=>Pr(e)?V():Promise.resolve([]),re=Oe=>bs(u,$e=>$e(Oe)),ee=Oe=>{u.push(Oe)},ue=()=>(r||(r=T2(i,n)),r.findAll(e.getBody(),re).then(m(Oe=>{const $e=Zt(Oe,ft=>ce(ft)?(S2(e,ft),!1):ft.uriType!=="blob");return uh(e)||Se($e,ft=>{L(ft.image.src,ft.blobInfo.blobUri()),ft.image.src=ft.blobInfo.blobUri(),ft.image.removeAttribute("data-mce-src")}),$e}))),we=()=>{n.destroy(),i.destroy(),r=o=null},De=Oe=>Oe.replace(/src="(blob:[^"]+)"/g,($e,ft)=>{const Ot=i.getResultUri(ft);if(Ot)return'src="'+Ot+'"';let Kt=n.getByUri(ft);return Kt||(Kt=Mo(e.editorManager.get(),(Je,ze)=>Je||ze.editorUpload&&ze.editorUpload.blobCache.getByUri(ft),void 0)),Kt?'src="data:'+Kt.blob().type+";base64,"+Kt.base64()+'"':$e});return e.on("SetContent",()=>{Pr(e)?Q():ue()}),e.on("RawSaveContent",Oe=>{Oe.content=De(Oe.content)}),e.on("GetContent",Oe=>{Oe.source_view||Oe.format==="raw"||Oe.format==="tree"||(Oe.content=De(Oe.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Oe=>{Se(Oe,$e=>{const ft=$e.attr("src");if(!ft||n.getByUri(ft))return;const Ot=i.getResultUri(ft);Ot&&$e.attr("src",Ot)})})}),{blobCache:n,addFilter:ee,uploadImages:V,uploadImagesAuto:Q,scanForImages:ue,destroy:we}},bI=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const i={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[m,i,u]:[i,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(i,u,m)=>Wt(i)&&i.hasAttribute("href"),onformat:(i,u,m)=>{vt.each(m,(y,S)=>{n.setAttrib(i,S,y)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":i=>{var u;return(u=i==null?void 0:i.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return vt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),i=>{r[i]={block:i,remove:"all"}}),r},i4={remove_similar:!0,inherit:!1},oy={selector:"td,th",...i4},W9={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...oy},tablecellverticalalign:{styles:{"vertical-align":"%value"},...oy},tablecellbordercolor:{styles:{borderColor:"%value"},...oy},tablecellclass:{classes:["%value"],...oy},tableclass:{selector:"table",classes:["%value"],...i4},tablecellborderstyle:{styles:{borderStyle:"%value"},...oy},tablecellborderwidth:{styles:{borderWidth:"%value"},...oy}},vI=ct(W9),yI=e=>{const n={},o=m=>Fe(m)?n[m]:n,r=m=>Sn(n,m),i=(m,y)=>{m&&(ce(m)?(jt(y)||(y=[y]),Se(y,S=>{Bn(S.deep)&&(S.deep=!ou(S)),Bn(S.split)&&(S.split=!ou(S)||Wa(S)),Bn(S.remove)&&ou(S)&&!Wa(S)&&(S.remove="none"),ou(S)&&Wa(S)&&(S.mixed=!0,S.block_expand=!0),ce(S.classes)&&(S.classes=S.classes.split(/\s+/))}),n[m]=y):kt(m,(S,O)=>{i(O,S)}))},u=m=>(m&&n[m]&&delete n[m],n);return i(bI(e)),i(vI()),i(Px(e)),{get:o,has:r,register:i,unregister:u}},A2=vt.each,zu=Ks.DOM,O2=e=>Fe(e)&&Ke(e),Z9=(e,n)=>{const o=n&&n.schema||Kd({}),r=(S,O)=>{O.classes.length>0&&zu.addClass(S,O.classes.join(" ")),zu.setAttribs(S,O.attrs)},i=S=>{const O=ce(S)?{name:S,classes:[],attrs:{}}:S,L=zu.create(O.name);return r(L,O),L},u=(S,O)=>{const L=o.getElementRule(S.nodeName.toLowerCase()),F=L==null?void 0:L.parentsRequired;return F&&F.length?O&&et(F,O)?O:F[0]:!1},m=(S,O,L)=>{let F;const V=O[0],Q=O2(V)?V.name:void 0,re=u(S,Q);if(re)Q===re?(F=V,O=O.slice(1)):F=re;else if(V)F=V,O=O.slice(1);else if(!L)return S;const ee=F?i(F):zu.create("div");ee.appendChild(S),L&&vt.each(L,we=>{const De=i(we);ee.insertBefore(De,S)});const ue=O2(F)?F.siblings:void 0;return m(ee,O,ue)},y=zu.create("div");if(e.length>0){const S=e[0],O=i(S),L=O2(S)?S.siblings:void 0;y.appendChild(m(O,e.slice(1),L))}return y},j9=e=>{e=vt.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,i,u,m,y)=>{switch(i){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":vt.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(m==="["){const S=y.match(/([\w\-]+)(?:\=\"([^\"]+))?/);S&&(o.attrs[S[1]]=S[2])}return""})),o.name=n||"div",o},nY=e=>ce(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),vt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=vt.map(n.split(/(?:~\+|~|\+)/),j9),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],q9=(e,n)=>{let o="",r=zw(e);if(r==="")return"";const i=V=>ce(V)?V.replace(/%(\w+)/g,""):"",u=(V,Q)=>zu.getStyle(Q??e.getBody(),V,!0);if(ce(n)){const V=e.formatter.get(n);if(!V)return"";n=V[0]}if("preview"in n){const V=n.preview;if(V===!1)return"";r=V||r}let m=n.block||n.inline||"span",y;const S=nY(n.selector);S.length>0?(S[0].name||(S[0].name=m),m=n.selector,y=Z9(S,e)):y=Z9([m],e);const O=zu.select(m,y)[0]||y.firstChild;A2(n.styles,(V,Q)=>{const re=i(V);re&&zu.setStyle(O,Q,re)}),A2(n.attributes,(V,Q)=>{const re=i(V);re&&zu.setAttrib(O,Q,re)}),A2(n.classes,V=>{const Q=i(V);zu.hasClass(O,Q)||zu.addClass(O,Q)}),e.dispatch("PreviewFormats"),zu.setStyles(y,{position:"absolute",left:-65535}),e.getBody().appendChild(y);const L=u("fontSize"),F=/px$/.test(L)?parseInt(L,10):0;return A2(r.split(" "),V=>{let Q=u(V,O);if(!(V==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(Q)&&(Q=u(V),hd(Q).toLowerCase()==="#ffffff"))&&!(V==="color"&&hd(Q).toLowerCase()==="#000000")){if(V==="font-size"&&/em|%$/.test(Q)){if(F===0)return;Q=parseFloat(Q)/(/%$/.test(Q)?100:1)*F+"px"}V==="border"&&Q&&(o+="padding:0 2px;"),o+=V+":"+Q+";"}}),e.dispatch("AfterPreviewFormats"),zu.remove(y),o},G9=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},am=e=>{const n=yI(e),o=Be({});return G9(e),TP(e),uh(e)||uD(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,i,u)=>{jH(e,r,i,u)},remove:(r,i,u,m)=>{qH(e,r,i,u,m)},toggle:(r,i,u)=>{KB(e,r,i,u)},match:(r,i,u,m)=>UH(e,r,i,u,m),closest:r=>ZH(e,r),matchAll:(r,i)=>KD(e,r,i),matchNode:(r,i,u,m)=>WH(e,r,i,u,m),canApply:r=>z_(e,r),formatChanged:(r,i,u,m)=>YB(e,o,r,i,u,m),getCssText:nt(q9,e)}},K9=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},oY=(e,n,o)=>{const r=Be(!1),i=S=>{w2(n,!1,o),n.add({},S)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",S=>{const O=S.command;K9(O)||(IB(n,o),n.beforeChange())}),e.on("ExecCommand",S=>{const O=S.command;K9(O)||i(S)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",i),e.on("dragend",i),e.on("keyup",S=>{const O=S.keyCode;if(S.isDefaultPrevented())return;const L=pn.os.isMacOS()&&S.key==="Meta";(O>=33&&O<=36||O>=37&&O<=40||O===45||S.ctrlKey||L)&&(i(),e.nodeChanged()),(O===46||O===8)&&e.nodeChanged(),r.get()&&n.typing&&!y2(b2(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",S=>{const O=S.keyCode;if(S.isDefaultPrevented())return;if(O>=33&&O<=36||O>=37&&O<=40||O===45){n.typing&&i(S);return}const L=S.ctrlKey&&!S.altKey||S.metaKey;if((O<16||O>20)&&O!==224&&O!==91&&!n.typing&&!L){n.beforeChange(),w2(n,!0,o),n.add({},S),r.set(!0);return}(pn.os.isMacOS()?S.metaKey:S.ctrlKey&&!S.altKey)&&n.beforeChange()}),e.on("mousedown",S=>{n.typing&&i(S)});const u=S=>S.inputType==="insertReplacementText",m=S=>S.inputType==="insertText"&&S.data===null,y=S=>S.inputType==="insertFromPaste"||S.inputType==="insertFromDrop";e.on("input",S=>{S.inputType&&(u(S)||m(S)||y(S))&&i(S)}),e.on("AddUndo Undo Redo ClearUndos",S=>{S.isDefaultPrevented()||e.nodeChanged()})},Y9=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},sy=e=>{const n=Ci(),o=Be(0),r=Be(0),i={data:[],typing:!1,beforeChange:()=>{zB(e,o,n)},add:(u,m)=>ZD(e,i,r,o,n,u,m),dispatchChange:()=>{e.setDirty(!0);const u=b2(e);u.bookmark=Pw(e.selection),e.dispatch("change",{level:u,lastLevel:vc(i.data,r.get()).getOrUndefined()})},undo:()=>jD(e,i,o,r),redo:()=>UB(e,r,i.data),clear:()=>{qD(e,i,r)},reset:()=>{WB(e,i)},hasUndo:()=>ZB(e,i,r),hasRedo:()=>GD(e,i,r),transact:u=>jB(e,i,o,u),ignore:u=>{qB(e,o,u)},extra:(u,m)=>{GB(e,i,r,u,m)}};return uh(e)||oY(e,i,o),Y9(e),i},X9=[9,27,bt.HOME,bt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,bt.DOWN,bt.UP,bt.LEFT,bt.RIGHT].concat(pn.browser.isFirefox()?[224]:[]),c4="data-mce-placeholder",l4=e=>e.type==="keydown"||e.type==="keyup",u4=e=>{const n=e.keyCode;return n===bt.BACKSPACE||n===bt.DELETE},J9=e=>{if(l4(e)){const n=e.keyCode;return!u4(e)&&(bt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||et(X9,n))}else return!1},Q9=e=>l4(e)&&!(u4(e)||e.type==="keyup"&&e.keyCode===229),Gp=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},eV=e=>{var n;const o=e.dom,r=Si(e),i=(n=I1(e))!==null&&n!==void 0?n:"",u=(m,y)=>{if(J9(m))return;const S=e.getBody(),O=Q9(m)?!1:Gp(o,S,r);(o.getAttrib(S,c4)!==""!==O||y)&&(o.setAttrib(S,c4,O?i:null),T0(e,O),e.on(O?"keydown":"keyup",u),e.off(O?"keyup":"keydown",u))};xo(i)&&e.on("init",m=>{u(m,!0),e.on("change SetContent ExecCommand",u),e.on("paste",y=>$u.setEditorTimeout(e,()=>u(y)))})},tV=(e,n)=>({block:e,position:n}),nV=(e,n)=>({from:e,to:n}),d4=(e,n)=>{const o=be.fromDom(e),r=be.fromDom(n.container());return nr(o,r).map(i=>tV(i,n))},oV=e=>!(Rr(e.to.block,e.from.block)||Rr(e.from.block,e.to.block)),sV=e=>!ro(e.from.block,e.to.block),wI=(e,n)=>Qs(n,i=>D1(i)||rt(i.dom),i=>ro(i,e)).filter(Fa).getOr(e),rV=(e,n)=>{const o=be.fromDom(e);return ro(wI(o,n.from.block),wI(o,n.to.block))},aV=e=>Fo(e.from.block.dom)===!1&&Fo(e.to.block.dom)===!1,G_=e=>{const n=o=>Mu(o)||Va(o.dom)||rg(o);return n(e.from.block)&&n(e.to.block)},iV=(e,n,o,r)=>Lo(r.position.getNode())&&!Bs(e,r.block)?rh(!1,r.block.dom).bind(i=>i.isEqual(r.position)?Pc(o,n,i).bind(u=>d4(n,u)):W.some(r)).getOr(r):r,cV=(e,n,o,r)=>{const i=d4(n,Ge.fromRangeStart(r)),u=i.bind(m=>Pc(o,n,m.position).bind(y=>d4(n,y).map(S=>iV(e,n,o,S))));return Xn(i,u,nV).filter(m=>sV(m)&&rV(n,m)&&aV(m)&&G_(m)&&oV(m))},sY=(e,n,o,r)=>r.collapsed?cV(e,n,o,r):W.none(),D2=(e,n)=>{const o=ra(e);return Is(o,r=>n.isBlock(yo(r))).fold(ct(o),r=>o.slice(0,r))},CI=(e,n)=>{const o=D2(e,n);return Se(o,gs),o},K_=(e,n,o)=>{const r=cf(o,n);return Po(r.reverse(),i=>Bs(e,i)).each(gs)},lV=(e,n)=>Zt(Lh(n),o=>!Bs(e,o)).length===0,uV=(e,n,o,r,i)=>{if(Bs(r,o))return eu(o),_i(o.dom);lV(r,i)&&Bs(r,n)&&ii(i,be.fromTag("br"));const u=rl(o.dom,Ge.before(i.dom));return Se(CI(n,r),m=>{ii(i,m)}),K_(r,e,n),u},dV=(e,n)=>e.isInline(yo(n)),fV=(e,n,o,r)=>{if(Bs(r,o)){if(Bs(r,n)){const m=ss((y=>{const S=(O,L)=>ai(O).fold(()=>L,F=>dV(r,F)?S(F,L.concat(Im(F))):L);return S(y,[])})(o),(y,S)=>(rd(y,S),S),ag());ad(n),rr(n,m)}return gs(o),_i(n.dom)}const i=tu(o.dom);return Se(CI(n,r),u=>{rr(o,u)}),K_(r,e,n),i},Ab=(e,n)=>{const o=cf(n,e);return W.from(o[o.length-1])},Ob=(e,n)=>Rr(n,e)?Ab(n,e):W.none(),R2=(e,n)=>{rh(e,n.dom).bind(o=>W.from(o.getNode())).map(be.fromDom).filter(el).each(gs)},M2=(e,n,o,r)=>(R2(!0,n),R2(!1,o),Ob(n,o).fold(nt(fV,e,n,o,r),nt(uV,e,n,o,r))),Kp=(e,n,o,r,i)=>n?M2(e,r,o,i):M2(e,o,r,i),Bg=(e,n)=>{const o=be.fromDom(e.getBody());return sY(e.schema,o.dom,n,e.selection.getRng()).map(i=>()=>{Kp(o,n,i.from.block,i.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},Y_=(e,n,o)=>{const r=n.getRng();return Xn(nr(e,be.fromDom(r.startContainer)),nr(e,be.fromDom(r.endContainer)),(i,u)=>ro(i,u)?W.none():W.some(()=>{r.deleteContents(),Kp(e,!0,i,u,o).each(m=>{n.setRng(m.toRange())})})).getOr(W.none())},N2=(e,n)=>{const o=be.fromDom(n),r=nt(ro,e);return qs(o,D1,r).isSome()},SI=(e,n)=>N2(e,n.startContainer)||N2(e,n.endContainer),f4=(e,n)=>{const o=rl(e.dom,Ge.fromRangeStart(n)).isNone(),r=Bc(e.dom,Ge.fromRangeEnd(n)).isNone();return!SI(e,n)&&o&&r},m4=e=>W.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),xI=e=>{const n=be.fromDom(e.getBody()),o=e.selection.getRng();return f4(n,o)?m4(e):Y_(n,e.selection,e.schema)},X_=(e,n)=>e.selection.isCollapsed()?W.none():xI(e),Uu=(e,n,o,r,i)=>W.from(n._selectionOverrides.showCaret(e,o,r,i)),EI=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},ry=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?W.none():W.some(EI(n)),_I=(e,n,o)=>{const r=di(1,e.getBody(),n),i=Ge.fromRangeStart(r),u=i.getNode();if(yp(u))return Uu(1,e,u,!i.isAtEnd(),!1);const m=i.getNode(!0);if(yp(m))return Uu(1,e,m,!1,!1);const y=$p(e.dom.getRoot(),i.getNode());return yp(y)?Uu(1,e,y,!1,o):W.none()},ay=(e,n,o)=>n.collapsed?_I(e,n,o).getOr(n):n,TI=e=>Ip(e)||P0(e),kI=e=>Lp(e)||B0(e),AI=(e,n)=>{pt(n)&&n.data.length===0&&e.remove(n)},h4=(e,n,o,r,i,u)=>{Uu(r,e,u.getNode(!i),i,!0).each(m=>{if(n.collapsed){const y=n.cloneRange();i?y.setEnd(m.startContainer,m.startOffset):y.setStart(m.endContainer,m.endOffset),y.deleteContents()}else n.deleteContents();e.selection.setRng(m)}),AI(e.dom,o)},Ig=(e,n)=>{const o=e.selection.getRng();if(!pt(o.commonAncestorContainer))return W.none();const r=n?la.Forwards:la.Backwards,i=yd(e.getBody()),u=nt(nC,n?i.next:i.prev),m=n?TI:kI,y=Z1(r,e.getBody(),o),S=u(y),O=S&&Zr(n,S);if(!O||!Qv(y,O))return W.none();if(m(O))return W.some(()=>h4(e,o,y.getNode(),r,n,O));const L=u(O);return L&&m(L)&&Qv(O,L)?W.some(()=>h4(e,o,y.getNode(),r,n,L)):W.none()},fh=(e,n)=>Ig(e,n),Wu=(e,n)=>{const o=e.getBody();return n?_i(o).filter(Ip):tu(o).filter(Lp)},g4=e=>{const n=e.selection.getRng();return!n.collapsed&&(Wu(e,!0).exists(o=>o.isEqual(Ge.fromRangeStart(n)))||Wu(e,!1).exists(o=>o.isEqual(Ge.fromRangeEnd(n))))},mV=e=>Fe(e)&&(D1(be.fromDom(e))||rg(be.fromDom(e))),Zu=bd.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),hV=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Wt(o)&&o.getAttribute("data-mce-caret")===r},gV=(e,n,o,r,i)=>{const u=m=>i.isInline(m.nodeName.toLowerCase())&&!El(o,r,e);return Xv(!n,o).fold(()=>Xv(n,r).fold(tt,u),u)},OI=(e,n,o,r,i)=>{const u=i.getNode(!o);return nr(be.fromDom(n),be.fromDom(r.getNode())).map(m=>Bs(e,m)?Zu.remove(m.dom):Zu.moveToElement(u)).orThunk(()=>W.some(Zu.moveToElement(u)))},DI=(e,n,o,r)=>Pc(n,e,o).bind(i=>mV(i.getNode())||gV(e,n,o,i,r)?W.none():n&&Fo(i.getNode())||!n&&Fo(i.getNode(!0))?OI(r,e,n,o,i):n&&Lp(o)||!n&&Ip(o)?W.some(Zu.moveToPosition(i)):W.none()),pV=(e,n)=>Qt(n)?W.none():e&&Fo(n.nextSibling)?W.some(Zu.moveToElement(n.nextSibling)):!e&&Fo(n.previousSibling)?W.some(Zu.moveToElement(n.previousSibling)):W.none(),bV=(e,n,o)=>o.fold(r=>W.some(Zu.remove(r)),r=>W.some(Zu.moveToElement(r)),r=>El(n,r,e)?W.none():W.some(Zu.moveToPosition(r))),vV=(e,n,o,r)=>hV(n,o)?pV(n,o.getNode(!n)).orThunk(()=>DI(e,n,o,r)):DI(e,n,o,r).bind(i=>bV(e,o,i)),yV=(e,n,o,r)=>{const i=di(n?1:-1,e,o),u=Ge.fromRangeStart(i),m=be.fromDom(e);return!n&&Lp(u)?W.some(Zu.remove(u.getNode(!0))):n&&Ip(u)?W.some(Zu.remove(u.getNode())):!n&&Ip(u)&&KE(m,u,r)?ON(m,u,r).map(y=>Zu.remove(y.getNode())):n&&Lp(u)&&AN(m,u,r)?Ln(m,u,r).map(y=>Zu.remove(y.getNode())):vV(e,n,u,r)},wV=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),wd(e,n,be.fromDom(o)),!0),p4=(e,n)=>o=>{const r=n?Ge.before(o):Ge.after(o);return e.selection.setRng(r.toRange()),!0},b4=e=>n=>(e.selection.setRng(n.toRange()),!0),v4=(e,n)=>W.from($p(e.getBody(),n)),CV=(e,n)=>{const o=e.selection.getNode();return v4(e,o).filter(Fo).fold(()=>yV(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(wV(e,n),p4(e,n),b4(e))),()=>W.some(Pe))},SV=e=>{Se(ci(e,".mce-offscreen-selection"),gs)},RI=(e,n)=>{const o=e.selection.getNode();return Fo(o)&&!qh(o)?v4(e,o.parentNode).filter(Fo).fold(()=>W.some(()=>{SV(be.fromDom(e.getBody())),wd(e,n,be.fromDom(e.selection.getNode())),F0(e)}),()=>W.some(Pe)):g4(e)?W.some(()=>{db(e,e.selection.getRng(),be.fromDom(e.getBody()))}):W.none()},y4=e=>{const n=e.dom,o=e.selection,r=$p(e.getBody(),o.getNode());if(rt(r)&&n.isBlock(r)&&n.isEmpty(r)){const i=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(i),o.setRng(Ge.before(i).toRange())}return!0},P2=(e,n)=>e.selection.isCollapsed()?CV(e,n):RI(e,n),w4=e=>e.hasOwnProperty("text"),C4=e=>e.hasOwnProperty("marker"),J_=(e,n)=>{const o=(u,m)=>{if(pt(u))return{text:u,offset:m};{const y=n(),S=u.childNodes;return m<S.length?(u.insertBefore(y,S[m]),{marker:y,before:!0}):(u.appendChild(y),{marker:y,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},MI=e=>{var n,o;const{start:r,end:i}=e,u=new window.Range;return w4(r)?u.setStart(r.text,r.offset):C4(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),w4(i)?u.setEnd(i.text,i.offset):C4(i)&&(i.before?u.setEndBefore(i.marker):u.setEndAfter(i.marker),(o=i.marker.parentNode)===null||o===void 0||o.removeChild(i.marker)),u},S4=(e,n)=>{var o;const r=e.dom,i=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),m=e.getBody();if(((o=i==null?void 0:i.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&i&&u&&i===m.firstChild&&u===m.lastChild&&!r.isEmpty(m)){const S=i.cloneNode(!1),O=()=>{if(n?Fp(e):QE(e),m.firstChild!==i){const L=J_(e.selection.getRng(),()=>document.createElement("span"));Array.from(m.childNodes).forEach(F=>S.appendChild(F)),m.appendChild(S),e.selection.setRng(MI(L))}};return W.some(O)}return W.none()},mh=(e,n)=>{const o=Ge.fromRangeStart(e.selection.getRng());return Pc(n,e.getBody(),o).filter(r=>n?B7(r):En(r)).bind(r=>tC(n?0:-1,r)).map(r=>()=>e.selection.select(r))},ju=(e,n)=>e.selection.isCollapsed()?mh(e,n):W.none(),Lg=pt,x4=e=>Lg(e)&&e.data[0]===Ma,B2=e=>Lg(e)&&e.data[e.data.length-1]===Ma,E4=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Ma)},NI=e=>{var n;if(Lg(e.previousSibling))return B2(e.previousSibling)||e.previousSibling.appendData(Ma),e.previousSibling;if(Lg(e))return x4(e)||e.insertData(0,Ma),e;{const o=E4(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},PI=e=>{var n,o;if(Lg(e.nextSibling))return x4(e.nextSibling)||e.nextSibling.insertData(0,Ma),e.nextSibling;if(Lg(e))return B2(e)||e.appendData(Ma),e;{const r=E4(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},I2=(e,n)=>e?NI(n):PI(n),BI=nt(I2,!0),II=nt(I2,!1),L2=(e,n)=>pt(e.container())?I2(n,e.container()):I2(n,e.getNode()),Q_=(e,n)=>{const o=n.get();return o&&e.container()===o&&Uf(o)},_4=(e,n)=>n.fold(o=>{dg(e.get());const r=BI(o);return e.set(r),W.some(Ge(r,r.length-1))},o=>_i(o).map(r=>{if(Q_(r,e)){const i=e.get();return Ge(i,1)}else{dg(e.get());const i=L2(r,!0);return e.set(i),Ge(i,1)}}),o=>tu(o).map(r=>{if(Q_(r,e)){const i=e.get();return Ge(i,i.length-1)}else{dg(e.get());const i=L2(r,!1);return e.set(i),Ge(i,i.length-1)}}),o=>{dg(e.get());const r=II(o);return e.set(r),W.some(Ge(r,1))}),LI=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return W.none()},ll=bd.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),FI=(e,n)=>{const o=oh(n,e);return o||e},$I=(e,n,o)=>{const r=qN(o),i=FI(n,r.container());return Og(e,i,r).fold(()=>Bc(i,r).bind(nt(Og,e,i)).map(u=>ll.before(u)),W.none)},xV=(e,n)=>hg(e,n)===null,HI=(e,n,o)=>Og(e,n,o).filter(nt(xV,n)),T4=(e,n,o)=>{const r=GN(o);return HI(e,n,r).bind(i=>rl(i,r).isNone()?W.some(ll.start(i)):W.none())},EV=(e,n,o)=>{const r=qN(o);return HI(e,n,r).bind(i=>Bc(i,r).isNone()?W.some(ll.end(i)):W.none())},_V=(e,n,o)=>{const r=GN(o),i=FI(n,r.container());return Og(e,i,r).fold(()=>rl(i,r).bind(nt(Og,e,i)).map(u=>ll.after(u)),W.none)},VI=e=>!UN(k4(e)),hh=(e,n,o)=>LI([$I,T4,EV,_V],[e,n,o]).filter(VI),k4=e=>e.fold($n,$n,$n,$n),zI=e=>e.fold(ct("before"),ct("start"),ct("end"),ct("after")),eT=e=>e.fold(ll.before,ll.before,ll.after,ll.after),iy=e=>e.fold(ll.start,ll.start,ll.end,ll.end),A4=(e,n)=>zI(e)===zI(n)&&k4(e)===k4(n),TV=(e,n,o,r,i,u)=>Xn(Og(n,o,r),Og(n,o,i),(m,y)=>m!==y&&ZN(o,m,y)?ll.after(e?m:y):u).getOr(u),kV=(e,n)=>e.fold(yt,o=>!A4(o,n)),AV=(e,n,o,r,i)=>{const u=Zr(e,i);return Pc(e,o,u).map(nt(Zr,e)).fold(()=>r.map(eT),S=>hh(n,o,S).map(nt(TV,e,n,o,u,S)).filter(nt(kV,r))).filter(VI)},OV=(e,n)=>e?n.fold(N(W.some,ll.start),W.none,N(W.some,ll.after),W.none):n.fold(W.none,N(W.some,ll.before),W.none,N(W.some,ll.end)),UI=(e,n,o,r)=>{const i=Zr(e,r),u=hh(n,o,i);return hh(n,o,i).bind(nt(OV,e)).orThunk(()=>AV(e,n,o,u,r))},DV=e=>ve(e.selection.getSel().modify),WI=(e,n,o)=>{const r=e?1:-1;return n.setRng(Ge(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},O4=(e,n)=>{const o=n.selection.getRng(),r=e?Ge.fromRangeEnd(o):Ge.fromRangeStart(o);return DV(n)?e&&yw(r)?WI(!0,n.selection,r):!e&&dp(r)?WI(!1,n.selection,r):!1:!1};var gh;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(gh||(gh={}));const tT=(e,n)=>e===la.Backwards?vs(n):n,RV=(e,n,o)=>e===la.Forwards?n.next(o):n.prev(o),MV=(e,n,o,r)=>Lo(r.getNode(n===la.Forwards))?gh.Br:El(o,r)===!1?gh.Block:gh.Wrap,ZI=(e,n,o,r)=>{const i=yd(o);let u=r;const m=[];for(;u;){const y=RV(n,i,u);if(!y)break;if(Lo(y.getNode(!1)))return n===la.Forwards?{positions:tT(n,m).concat([y]),breakType:gh.Br,breakAt:W.some(y)}:{positions:tT(n,m),breakType:gh.Br,breakAt:W.some(y)};if(!y.isVisible()){u=y;continue}if(e(u,y)){const S=MV(o,n,u,y);return{positions:tT(n,m),breakType:S,breakAt:W.some(y)}}m.push(y),u=y}return{positions:tT(n,m),breakType:gh.Eol,breakAt:W.none()}},jI=(e,n,o,r)=>n(o,r).breakAt.map(i=>{const u=n(o,i).positions;return e===la.Backwards?u.concat(i):[i].concat(u)}).getOr([]),D4=(e,n)=>Mo(e,(o,r)=>o.fold(()=>W.some(r),i=>Xn(fo(i.getClientRects()),fo(r.getClientRects()),(u,m)=>{const y=Math.abs(n-u.left);return Math.abs(n-m.left)<=y?r:i}).or(o)),W.none()),Db=(e,n)=>fo(n.getClientRects()).bind(o=>D4(e,o.left)),Yp=nt(ZI,Ge.isAbove,-1),F2=nt(ZI,Ge.isBelow,1),qI=nt(jI,-1,Yp),$2=nt(jI,1,F2),GI=(e,n)=>Yp(e,n).breakAt.isNone(),KI=(e,n)=>F2(e,n).breakAt.isNone(),NV=e=>_i(e).map(n=>[n].concat(F2(e,n).positions)).getOr([]),PV=e=>tu(e).map(n=>Yp(e,n).positions.concat(n)).getOr([]),BV=(e,n)=>Db(qI(e,n),n),IV=(e,n)=>Db($2(e,n),n),LV=Fo,YI=(e,n)=>Math.abs(e.left-n),XI=(e,n)=>Math.abs(e.right-n),FV=e=>Ys(e,"node"),JI=(e,n)=>pe(e,(o,r)=>{const i=Math.min(YI(o,n),XI(o,n)),u=Math.min(YI(r,n),XI(r,n));return u===i&&FV(r)&&LV(r.node)||u<i?r:o}),rY=e=>{const n=o=>dt(o,r=>{const i=zm(r);return i.node=e,i});if(Wt(e))return n(e.getClientRects());if(pt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Ad=e=>ws(e,rY);var Rb;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Rb||(Rb={}));const QI=(e,n,o,r)=>{let i=r;for(;i=wp(i,e,yv,n);)if(o(i))return},R4=(e,n,o,r,i,u)=>{let m=0;const y=[],S=F=>{let V=Ad([F]);e===-1&&(V=V.reverse());for(let Q=0;Q<V.length;Q++){const re=V[Q];if(!o(re,O)){if(y.length>0&&n(re,He(y))&&m++,re.line=m,i(re))return!0;y.push(re)}}return!1},O=He(u.getClientRects());if(!O)return y;const L=u.getNode();return L&&(S(L),QI(e,r,S,L)),y},$V=(e,n)=>n.line>e,eL=(e,n)=>n.line===e,HV=nt(R4,Rb.Up,M1,Hs),tL=nt(R4,Rb.Down,Hs,M1),nL=e=>He(e.getClientRects()),VV=(e,n,o,r)=>{const i=yd(n);let u,m,y,S;const O=[];let L=0;e===1?(u=i.next,m=Hs,y=M1,S=Ge.after(r)):(u=i.prev,m=M1,y=Hs,S=Ge.before(r));const F=nL(S);do{if(!S.isVisible())continue;const V=nL(S);if(y(V,F))continue;O.length>0&&m(V,He(O))&&L++;const Q=zm(V);if(Q.position=S,Q.line=L,o(Q))return O;O.push(Q)}while(S=u(S));return O},oL=e=>n=>$V(e,n),Xp=e=>n=>eL(e,n),ph=(e,n)=>{e.selection.setRng(n),BC(e,e.selection.getRng())},nT=(e,n,o)=>W.some(ay(e,n,o)),M4=(e,n,o,r,i,u)=>{const m=n===la.Forwards,y=yd(e.getBody()),S=nt(nC,m?y.next:y.prev),O=m?r:i;if(!o.collapsed){const re=nl(o);if(u(re))return Uu(n,e,re,n===la.Backwards,!1);if(g4(e)){const ee=o.cloneRange();return ee.collapse(n===la.Backwards),W.from(ee)}}const L=Z1(n,e.getBody(),o);if(O(L))return ry(e,L.getNode(!m));let F=S(L);const V=gv(o);if(F)F=Zr(m,F);else return V?W.some(o):W.none();if(O(F))return Uu(n,e,F.getNode(!m),m,!1);const Q=S(F);return Q&&O(Q)&&Qv(F,Q)?Uu(n,e,Q.getNode(!m),m,!1):V?nT(e,F.toRange(),!1):W.none()},oT=(e,n,o,r,i,u)=>{const m=Z1(n,e.getBody(),o),y=He(m.getClientRects()),S=n===Rb.Down,O=e.getBody();if(!y)return W.none();if(g4(e)){const ue=S?Ge.fromRangeEnd(o):Ge.fromRangeStart(o);return(S?IV:BV)(O,ue).orThunk(()=>W.from(ue)).map(De=>De.toRange())}const F=(S?tL:HV)(O,oL(1),m),V=Zt(F,Xp(1)),Q=y.left,re=JI(V,Q);if(re&&u(re.node)){const ue=Math.abs(Q-re.left),we=Math.abs(Q-re.right);return Uu(n,e,re.node,ue<we,!1)}let ee;if(r(m)?ee=m.getNode():i(m)?ee=m.getNode(!0):ee=nl(o),ee){const ue=VV(n,O,oL(1),ee);let we=JI(Zt(ue,Xp(1)),Q);if(we||(we=He(Zt(ue,Xp(0))),we))return nT(e,we.position.toRange(),!1)}return V.length===0?N4(e,S).filter(S?i:r).map(ue=>ay(e,ue.toRange(),!1)):W.none()},N4=(e,n)=>{const o=e.selection.getRng(),r=n?Ge.fromRangeEnd(o):Ge.fromRangeStart(o),i=Yv(r.container(),e.getBody());if(n){const u=F2(i,r);return cs(u.positions)}else{const u=Yp(i,r);return fo(u.positions)}},sL=(e,n,o)=>N4(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),sT=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},rL=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},zV=(e,n,o)=>_4(n,o).map(r=>(sT(e,r),o)),aY=(e,n,o)=>{const r=Ge.fromRangeStart(e);if(e.collapsed)return r;{const i=Ge.fromRangeEnd(e);return o?rl(n,i).getOr(i):Bc(n,r).getOr(r)}},iY=(e,n,o)=>{const r=e.getBody(),i=aY(e.selection.getRng(),r,o),u=nt(lb,e);return UI(o,u,r,i).bind(y=>zV(e,n,y))},hf=(e,n,o)=>{const r=dt(ci(be.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),m=>m.dom),i=Zt(r,e),u=Zt(o,e);Se(qr(i,u),nt(rL,!1)),Se(qr(u,i),nt(rL,!0))},UV=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Ge.fromRangeStart(e.selection.getRng());Ge.isTextPosition(r)&&!jN(r)&&(sT(e,eE(o,r)),n.set(null))}},WV=(e,n,o,r)=>{if(n.selection.isCollapsed()){const i=Zt(r,e);Se(i,u=>{const m=Ge.fromRangeStart(n.selection.getRng());hh(e,n.getBody(),m).bind(y=>zV(n,o,y))})}},Jp=(e,n,o)=>Gf(e)?iY(e,n,o).isSome():!1,P4=(e,n,o)=>Gf(n)?O4(e,n):!1,ZV=e=>{const n=Be(null),o=nt(lb,e);return e.on("NodeChange",r=>{Gf(e)&&(hf(o,e.dom,r.parents),UV(e,n),WV(o,e,n,r.parents))}),n},rT=nt(P4,!0),jV=nt(P4,!1),aT=(e,n,o)=>{if(Gf(e)){const r=N4(e,n).getOrThunk(()=>{const i=e.selection.getRng();return n?Ge.fromRangeEnd(i):Ge.fromRangeStart(i)});return hh(nt(lb,e),e.getBody(),r).exists(i=>{const u=eT(i);return _4(o,u).exists(m=>(sT(e,m),!0))})}else return!1},qV=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},GV=e=>Xn(_i(e),tu(e),(n,o)=>{const r=Zr(!0,n),i=Zr(!1,o);return Bc(e,r).forall(u=>u.isEqual(i))}).getOr(!0),B4=(e,n)=>o=>_4(n,o).map(r=>()=>sT(e,r)),aL=(e,n,o,r)=>{const i=e.getBody(),u=nt(lb,e);e.undoManager.ignore(()=>{e.selection.setRng(qV(o,r)),QE(e),hh(u,i,Ge.fromRangeStart(e.selection.getRng())).map(iy).bind(B4(e,n)).each(os)}),e.nodeChanged()},Fg=(e,n)=>{const o=oh(n,e);return o||e},KV=(e,n,o,r)=>{const i=Fg(e.getBody(),r.container()),u=nt(lb,e),m=hh(u,i,r);return m.bind(S=>o?S.fold(ct(W.some(iy(S))),W.none,ct(W.some(eT(S))),W.none):S.fold(W.none,ct(W.some(eT(S))),W.none,ct(W.some(iy(S))))).map(B4(e,n)).getOrThunk(()=>{const S=mg(o,i,r),O=S.bind(L=>hh(u,i,L));return Xn(m,O,()=>Og(u,i,r).bind(L=>GV(L)?W.some(()=>{wd(e,o,be.fromDom(L))}):W.none())).getOrThunk(()=>O.bind(()=>S.map(L=>()=>{o?aL(e,n,r,L):aL(e,n,L,r)})))})},I4=(e,n,o)=>{if(e.selection.isCollapsed()&&Gf(e)){const r=Ge.fromRangeStart(e.selection.getRng());return KV(e,n,o,r)}return W.none()},YV=e=>Hd(e)>1,iL=(e,n)=>{const o=be.fromDom(e.getBody()),r=be.fromDom(e.selection.getStart()),i=cf(r,o);return Is(i,n).fold(ct(i),u=>i.slice(0,u))},XV=e=>Hd(e)===1,L4=e=>iL(e,n=>e.schema.isBlock(yo(n))||YV(n)),F4=e=>iL(e,n=>e.schema.isBlock(yo(n))),iT=(e,n)=>{const o=nt(g_,e);return ws(n,r=>o(r)?[r.dom]:[])},$4=e=>{const n=F4(e);return iT(e,n)},cL=(e,n,o,r)=>{const i=iT(n,r);if(i.length===0)wd(n,e,o);else{const u=kP(o.dom,i);n.selection.setRng(u.toRange())}},lL=(e,n)=>{const o=Zt(L4(e),XV);return cs(o).bind(r=>{const i=Ge.fromRangeStart(e.selection.getRng());return ub(n,i,r.dom)&&!SC(r)?W.some(()=>cL(n,e,r,o)):W.none()})},JV=(e,n)=>{const o=n.parentElement;return Lo(n)&&!ne(o)&&e.dom.isEmpty(o)},H2=e=>SC(be.fromDom(e)),V2=(e,n)=>{const o=e.selection.getStart(),r=JV(e,o)||H2(o)?kP(o,n):B8(e.selection.getRng(),n);e.selection.setRng(r.toRange())},uL=(e,n)=>{const o=qr(n,$4(e));o.length>0&&V2(e,o)},H4=e=>pt(e.startContainer),dL=e=>e.startOffset===0&&H4(e),fL=(e,n)=>{const o=n.startContainer.parentElement;return!ne(o)&&g_(e,be.fromDom(o))},cT=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!ne(n)&&!ne(o)&&n.isEqualNode(o)},V4=e=>{const n=e.endContainer;return e.endOffset===(pt(n)?n.length:n.childNodes.length)},z2=e=>cT(e)&&V4(e),QV=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),mL=e=>z2(e)||QV(e),ez=e=>{const n=e.selection.getRng();return dL(n)&&fL(e,n)&&mL(n)},tz=e=>{if(ez(e)){const n=$4(e);return W.some(()=>{QE(e),uL(e,n)})}else return W.none()},lT=(e,n)=>e.selection.isCollapsed()?lL(e,n):tz(e),nz=(e,n)=>Uh(e,o=>nu(o.dom),o=>n.isBlock(yo(o))),hL=e=>nz(be.fromDom(e.selection.getStart()),e.schema),cY=e=>{const n=e.selection.getRng();return n.collapsed&&(H4(n)||e.dom.isEmpty(n.startContainer))&&!hL(e)},U2=e=>(cY(e)&&V2(e,[]),!0),z4=(e,n,o)=>Fe(o)?W.some(()=>{e._selectionOverrides.hideFakeCaret(),wd(e,n,be.fromDom(o))}):W.none(),oz=(e,n)=>{const o=n?P0:B0,r=n?la.Forwards:la.Backwards,i=Z1(r,e.getBody(),e.selection.getRng());return o(i)?z4(e,n,i.getNode(!n)):W.from(Zr(n,i)).filter(u=>o(u)&&Qv(i,u)).bind(u=>z4(e,n,u.getNode(!n)))},sz=(e,n)=>{const o=e.selection.getNode();return wi(o)?z4(e,n,o):W.none()},U4=(e,n)=>e.selection.isCollapsed()?oz(e,n):sz(e,n),rz=e=>Qs(e,n=>rt(n.dom)||Fo(n.dom)).exists(n=>rt(n.dom)),W4=e=>Qi(e??"").getOr(0),gL=(e,n)=>{const o=e||Dk(n)?"margin":"padding",r=Wr(n,"direction")==="rtl"?"-right":"-left";return o+r},pL=(e,n,o,r,i,u)=>{const m=gL(o,be.fromDom(u)),y=W4(e.getStyle(u,m));if(n==="outdent"){const S=Math.max(0,y-r);e.setStyle(u,m,S?S+i:"")}else{const S=y+r+i;e.setStyle(u,m,S)}},az=(e,n)=>bs(n,o=>{const r=gL(tA(e),o),i=Ra(o,r).map(W4).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&i>0}),Qp=e=>{const n=q4(e);return!e.mode.isReadOnly()&&(n.length>1||az(e,n))},Z4=e=>Fm(e)||rg(e),j4=e=>$a(e).exists(Z4),q4=e=>Zt(Zl(e.selection.getSelectedBlocks()),n=>!Z4(n)&&!j4(n)&&rz(n)),uT=(e,n)=>{var o,r;const{dom:i}=e,u=gp(e),m=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",y=W4(u),S=tA(e);Se(q4(e),O=>{pL(i,n,S,y,m,O.dom)})},e1=e=>uT(e,"indent"),G4=e=>uT(e,"outdent"),qu=e=>{if(e.selection.isCollapsed()&&Qp(e)){const n=e.dom,o=e.selection.getRng(),r=Ge.fromRangeStart(o),i=n.getParent(o.startContainer,n.isBlock);if(i!==null&&no(be.fromDom(i),r,e.schema))return W.some(()=>G4(e))}return W.none()},t1=(e,n,o)=>Oi([qu,P2,fh,(r,i)=>I4(r,n,i),Bg,YC,ju,U4,X_,lT,S4],r=>r(e,o)).filter(r=>e.selection.isEditable()),K4=(e,n)=>{t1(e,n,!1).fold(()=>{e.selection.isEditable()&&(QE(e),F0(e))},os)},iz=(e,n)=>{t1(e,n,!0).fold(()=>{e.selection.isEditable()&&Fp(e)},os)},bL=(e,n)=>{e.addCommand("delete",()=>{K4(e,n)}),e.addCommand("forwardDelete",()=>{iz(e,n)})},vL=5,cz=400,yL=e=>e.touches===void 0||e.touches.length!==1?W.none():W.some(e.touches[0]),lz=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>vL||r>vL},uz=e=>{const n=Ci(),o=Be(!1),r=Pm(i=>{e.dispatch("longpress",{...i,type:"longpress"}),o.set(!0)},cz);e.on("touchstart",i=>{yL(i).each(u=>{r.cancel();const m={x:u.clientX,y:u.clientY,target:i.target};r.throttle(i),o.set(!1),n.set(m)})},!0),e.on("touchmove",i=>{r.cancel(),yL(i).each(u=>{n.on(m=>{lz(u,m)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",i=>{r.cancel(),i.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(i.target)).each(()=>{o.get()?i.preventDefault():e.dispatch("tap",{...i,type:"tap"})})},!0)},dT=(e,n)=>Sn(e,n.nodeName),dz=(e,n)=>pt(n)?!0:Wt(n)?!dT(e.getBlockElements(),n)&&!_l(n)&&!Ou(e,n)&&!fr(n):!1,fz=(e,n,o)=>Tt(_N(be.fromDom(o),be.fromDom(n)),r=>dT(e,r.dom)),cy=(e,n)=>{if(pt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||dT(e,n.nextSibling)||fr(n.nextSibling)}return!1},ly=e=>e.dom.create(Si(e),Ym(e)),wL=e=>{const n=e.dom,o=e.selection,r=e.schema,i=r.getBlockElements(),u=o.getStart(),m=e.getBody();let y,S,O=null;const L=Si(e);if(!u||!Wt(u))return;const F=m.nodeName.toLowerCase();if(!r.isValidChild(F,L.toLowerCase())||fz(i,m,u))return;if(m.firstChild===m.lastChild&&Lo(m.firstChild)){y=ly(e),y.appendChild(ag().dom),m.replaceChild(y,m.firstChild),e.selection.setCursorLocation(y,0),e.nodeChanged();return}let V=m.firstChild;for(;V;)if(Wt(V)&&er(r,V),dz(r,V)){if(cy(i,V)){S=V,V=V.nextSibling,n.remove(S);continue}if(!y){if(!O&&e.hasFocus()&&(O=J_(e.selection.getRng(),()=>document.createElement("span"))),!V.parentNode){V=null;break}y=ly(e),m.insertBefore(y,V)}S=V,V=V.nextSibling,y.appendChild(S)}else y=null,V=V.nextSibling;O&&(e.selection.setRng(MI(O)),e.nodeChanged())},Y4=(e,n,o)=>{const r=be.fromDom(ly(e)),i=ag();rr(r,i),o(n,r);const u=document.createRange();return u.setStartBefore(i.dom),u.setEndBefore(i.dom),u},X4=e=>{e.on("NodeChange",()=>wL(e))},CL=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,mz=(e,n,o)=>function(r){const i=arguments,u=i[i.length-2],m=u>0?n.charAt(u-1):"";if(m==='"')return r;if(m===">"){const y=n.lastIndexOf("<",u);if(y!==-1&&n.substring(y,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"</span>"},hz=(e,n,o)=>{let r=n.length,i=o.content;if(o.format!=="raw"){for(;r--;)i=i.replace(n[r],mz(e,i,Gx(e)));o.content=i}},gz=(e,n)=>bs(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),pz=e=>{const n="contenteditable",o=" "+vt.trim(fA(e))+" ",r=" "+vt.trim(Gx(e))+" ",i=CL(o),u=CL(r),m=Pu(e);m.length>0&&e.on("BeforeSetContent",y=>{hz(e,m,y)}),e.parser.addAttributeFilter("class",y=>{let S=y.length;for(;S--;){const O=y[S];i(O)?O.attr(n,"true"):u(O)&&O.attr(n,"false")}}),e.serializer.addAttributeFilter(n,y=>{let S=y.length;for(;S--;){const O=y[S];if(!i(O)&&!u(O))continue;const L=O.attr("data-mce-content");m.length>0&&L?gz(m,L)?(O.name="#text",O.type=3,O.raw=!0,O.value=L):O.remove():O.attr(n,null)}})},bz=e=>mn(be.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),SL=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Qd(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},xL=(e,n)=>{const o=bz(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),SL(e,o);return}rx(o)&&(SL(e,o),e.undoManager.add())}},vz=e=>{e.on("keyup compositionstart",nt(xL,e))},EL=Fo,Gu=(e,n,o)=>M4(n,e,o,Ip,Lp,EL),yz=(e,n,o)=>oT(n,e,o,u=>Ip(u)||EN(u),u=>Lp(u)||HC(u),EL),J4=e=>{const n=e.dom.create(Si(e));return n.innerHTML='<br data-mce-bogus="1">',n},Q4=(e,n,o)=>{const r=yd(e.getBody()),i=nt(nC,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!i(Ge.fromRangeStart(o))){const y=be.fromDom(J4(e));n===1?qi(be.fromDom(u),y):ii(be.fromDom(u),y),e.selection.select(y.dom,!0),e.selection.collapse()}}},e3=(e,n)=>{const o=n?la.Forwards:la.Backwards,r=e.selection.getRng();return Gu(o,e,r).orThunk(()=>(Q4(e,o,r),W.none()))},wz=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return yz(o,e,r).orThunk(()=>(Q4(e,o,r),W.none()))},Cz=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return UN(o)?!n:n},_L=(e,n)=>e3(e,Cz(e.selection,n)).exists(o=>(ph(e,o),!0)),TL=(e,n)=>wz(e,n).exists(o=>(ph(e,o),!0)),kL=(e,n)=>sL(e,n,n?Lp:Ip),W2=(e,n)=>Wu(e,!n).map(o=>{const r=o.toRange(),i=e.selection.getRng();return n?r.setStart(i.startContainer,i.startOffset):r.setEnd(i.endContainer,i.endOffset),r}).exists(o=>(ph(e,o),!0)),Sz=e=>et(["figcaption"],yo(e)),xz=(e,n,o)=>{const r=nt(ro,n);return Qs(be.fromDom(e.container()),i=>o.isBlock(yo(i)),r).filter(Sz)},Z2=(e,n,o)=>n?KI(e.dom,o):GI(e.dom,o),$g=(e,n)=>{const o=be.fromDom(e.getBody()),r=Ge.fromRangeStart(e.selection.getRng());return xz(r,o,e.schema).exists(()=>{if(Z2(o,n,r)){const u=Y4(e,o,n?rr:Cm);return e.selection.setRng(u),!0}else return!1})},n1=(e,n)=>e.selection.isCollapsed()?$g(e,n):!1,fT=(e,n,o)=>{const r=e.selection.getRng(),i=Ge.fromRangeStart(r);return e.getBody().firstChild===n&&GI(o,i)?(e.execCommand("InsertNewBlockBefore"),!0):!1},t3=(e,n)=>{const o=e.selection.getRng(),r=Ge.fromRangeStart(o);return e.getBody().lastChild===n&&KI(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},n3=(e,n)=>n?W.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>t3(e,o)).getOr(!1):W.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>W.from(e.dom.getParent(o,"details")).map(r=>fT(e,r,o))).getOr(!1),o3=(e,n)=>n3(e,n),AL={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},OL=e=>dt(e,n=>({...AL,...n})),DL=e=>dt(e,n=>({...AL,...n})),RL=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,Ez=(e,n)=>ws(OL(e),o=>RL(o,n)?[o]:[]),_z=(e,n)=>ws(DL(e),o=>RL(o,n)?[o]:[]),zn=(e,...n)=>()=>e.apply(null,n),j2=(e,n)=>Po(Ez(e,n),o=>o.action()),ML=(e,n)=>Oi(_z(e,n),o=>o.action()),s3=(e,n)=>{const o=n?la.Forwards:la.Backwards,r=e.selection.getRng();return M4(e,o,r,P0,B0,wi).exists(i=>(ph(e,i),!0))},r3=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return oT(e,o,r,P0,B0,wi).exists(i=>(ph(e,i),!0))},Tz=(e,n)=>sL(e,n,n?B0:P0),kz=bd.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),q2={...kz,none:e=>kz.none(e)},lY=(e,n)=>Az(e,n,yt),Az=(e,n,o)=>ws(ra(e),r=>pl(r,n)?o(r)?[r]:[]:Az(r,n,o)),Oz=(e,n,o=tt)=>{if(o(n))return W.none();if(et(e,yo(n)))return W.some(n);const r=i=>pl(i,"table")||o(i);return Ur(n,e.join(","),r)},Dz=(e,n)=>Oz(["td","th"],e,n),uY=e=>lY(e,"th,td"),NL=(e,n)=>Wl(e,"table",n),Lc=(e,n,o,r,i=yt)=>{const u=r===1;if(!u&&o<=0)return q2.first(e[0]);if(u&&o>=e.length-1)return q2.last(e[e.length-1]);{const m=o+r,y=e[m];return i(y)?q2.middle(n,y):Lc(e,n,m,r,i)}},a3=(e,n)=>NL(e,n).bind(o=>{const r=uY(o);return Is(r,u=>ro(e,u)).map(u=>({index:u,all:r}))}),G2=(e,n,o)=>a3(e,o).fold(()=>q2.none(e),i=>Lc(i.all,e,i.index,1,n)),Rz=(e,n,o)=>a3(e,o).fold(()=>q2.none(),i=>Lc(i.all,e,i.index,-1,n)),PL=e=>up(e).filter(n=>n.trim().length!==0||n.indexOf(Xr)>-1).isSome(),BL=e=>Kr(e)&&ri(e,"contenteditable")==="false",i3=["img","br"],Mz=e=>PL(e)||et(i3,yo(e))||BL(e),Nz=e=>Hh(e,Mz),IL=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),Pz=(e,n)=>ws(n,o=>{const r=IL(zm(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),Bz=(e,n,o)=>Mo(e,(r,i)=>r.fold(()=>W.some(i),u=>{const m=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),y=Math.sqrt(Math.abs(i.x-n)+Math.abs(i.y-o));return W.some(y<m?i:u)}),W.none()),LL=(e,n,o,r,i)=>{const u=ci(be.fromDom(o),"td,th,caption").map(y=>y.dom),m=Zt(Pz(e,u),y=>n(y,i));return Bz(m,r,i).map(y=>y.cell)},c3=e=>e.bottom,Iz=e=>e.top,Lz=(e,n)=>e.y<n,dY=(e,n)=>e.y>n,Fz=nt(LL,c3,Lz),FL=nt(LL,Iz,dY),fY=(e,n)=>fo(n.getClientRects()).bind(o=>Fz(e,o.left,o.top)).bind(o=>Db(PV(o),n)),$z=(e,n)=>cs(n.getClientRects()).bind(o=>FL(e,o.left,o.top)).bind(o=>Db(NV(o),n)),Hz=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),Vz=e=>e.breakType===gh.Wrap&&e.positions.length===0,l3=e=>e.breakType===gh.Br&&e.positions.length===1,K2=(e,n,o)=>{const r=e(n,o);return Vz(r)||!Lo(o.getNode())&&l3(r)?!Hz(e,n,r):r.breakAt.isNone()},$L=nt(K2,Yp),HL=nt(K2,F2),zz=(e,n,o)=>{const r=Ge.fromRangeStart(n);return rh(!e,o).exists(i=>i.isEqual(r))},Uz=(e,n,o,r)=>{const i=e.selection.getRng(),u=n?1:-1;return vA()&&zz(n,i,o)?(Uu(u,e,o,!n,!1).each(m=>{ph(e,m)}),!0):!1},u3=(e,n,o)=>fY(n,o).orThunk(()=>fo(o.getClientRects()).bind(r=>D4(qI(e,Ge.before(n)),r.left))).getOr(Ge.before(n)),Wz=(e,n,o)=>$z(n,o).orThunk(()=>fo(o.getClientRects()).bind(r=>D4($2(e,Ge.after(n)),r.left))).getOr(Ge.after(n)),VL=(e,n)=>{const o=n.getNode(e);return ql(o)?W.some(o):W.none()},Zz=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?qi:ii,i=Y4(n,be.fromDom(o),r);ph(n,i)})},zL=(e,n,o)=>{const r=VL(!!n,o),i=n===!1;r.fold(()=>ph(e,o.toRange()),u=>rh(i,e.getBody()).filter(m=>m.isEqual(o)).fold(()=>ph(e,o.toRange()),m=>Zz(n,e,u)))},gf=(e,n,o,r)=>{const i=e.selection.getRng(),u=Ge.fromRangeStart(i),m=e.getBody();if(!n&&$L(r,u)){const y=u3(m,o,u);return zL(e,n,y),!0}else if(n&&HL(r,u)){const y=Wz(m,o,u);return zL(e,n,y),!0}else return!1},d3=(e,n,o)=>W.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>W.from(e.dom.getParent(r,"table")).map(i=>o(e,n,i,r))).getOr(!1),f3=(e,n)=>d3(e,n,Uz),UL=(e,n)=>d3(e,n,gf),mY=e=>{const n=Mp.exact(e,0,e,0);return f(n)},jz=(e,n,o)=>o.fold(W.none,W.none,(r,i)=>Nz(i).map(u=>mY(u)),r=>(e.execCommand("mceTableInsertRowAfter"),qz(e,n,r))),qz=(e,n,o)=>jz(e,n,G2(o,pa)),Gz=(e,n,o)=>jz(e,n,Rz(o,pa)),Y2=(e,n)=>{const o=["table","li","dl"],r=be.fromDom(e.getBody()),i=y=>{const S=yo(y);return ro(y,r)||et(o,S)},u=e.selection.getRng(),m=be.fromDom(n?u.endContainer:u.startContainer);return Dz(m,i).map(y=>(NL(y,i).each(L=>{e.model.table.clearSelectedCells(L.dom)}),e.selection.collapse(!n),(n?qz:Gz)(e,i,y).each(L=>{e.selection.setRng(L)}),!0)).getOr(!1)},Kz=(e,n,o)=>{const r=pn.os.isMacOS()||pn.os.isiOS();j2([{keyCode:bt.RIGHT,action:zn(_L,e,!0)},{keyCode:bt.LEFT,action:zn(_L,e,!1)},{keyCode:bt.UP,action:zn(TL,e,!1)},{keyCode:bt.DOWN,action:zn(TL,e,!0)},...r?[{keyCode:bt.UP,action:zn(W2,e,!1),metaKey:!0,shiftKey:!0},{keyCode:bt.DOWN,action:zn(W2,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:bt.RIGHT,action:zn(f3,e,!0)},{keyCode:bt.LEFT,action:zn(f3,e,!1)},{keyCode:bt.UP,action:zn(UL,e,!1)},{keyCode:bt.DOWN,action:zn(UL,e,!0)},{keyCode:bt.UP,action:zn(UL,e,!1)},{keyCode:bt.UP,action:zn(o3,e,!1)},{keyCode:bt.DOWN,action:zn(o3,e,!0)},{keyCode:bt.RIGHT,action:zn(s3,e,!0)},{keyCode:bt.LEFT,action:zn(s3,e,!1)},{keyCode:bt.UP,action:zn(r3,e,!1)},{keyCode:bt.DOWN,action:zn(r3,e,!0)},{keyCode:bt.RIGHT,action:zn(Jp,e,n,!0)},{keyCode:bt.LEFT,action:zn(Jp,e,n,!1)},{keyCode:bt.RIGHT,ctrlKey:!r,altKey:r,action:zn(rT,e,n)},{keyCode:bt.LEFT,ctrlKey:!r,altKey:r,action:zn(jV,e,n)},{keyCode:bt.UP,action:zn(n1,e,!1)},{keyCode:bt.DOWN,action:zn(n1,e,!0)}],o).each(i=>{o.preventDefault()})},m3=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Kz(e,n,o)})},pf=(e,n)=>({container:e,offset:n}),X2=Ks.DOM,J2=e=>n=>e===n?-1:0,Yz=e=>n=>e.isBlock(n)||et(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",h3=(e,n,o)=>{if(pt(e)&&n>=0)return W.some(pf(e,n));{const r=sg(X2);return W.from(r.backwards(e,n,J2(e),o)).map(i=>pf(i.container,i.container.data.length))}},Xz=(e,n,o)=>{if(pt(e)&&n>=e.length)return W.some(pf(e,n));{const r=sg(X2);return W.from(r.forwards(e,n,J2(e),o)).map(i=>pf(i.container,0))}},g3=(e,n,o)=>{if(!pt(e))return W.none();const r=e.data;if(n>=0&&n<=r.length)return W.some(pf(e,n));{const i=sg(X2);return W.from(i.backwards(e,n,J2(e),o)).bind(u=>{const m=u.container.data;return g3(u.container,n+m.length,o)})}},Q2=(e,n,o)=>{if(!pt(e))return W.none();const r=e.data;if(n<=r.length)return W.some(pf(e,n));{const i=sg(X2);return W.from(i.forwards(e,n,J2(e),o)).bind(u=>Q2(u.container,n-r.length,o))}},p3=(e,n,o,r,i)=>{const u=sg(e,Yz(e));return W.from(u.backwards(n,o,r,i))},Jz=e=>e.collapsed&&pt(e.startContainer),Qz=e=>ac(e.toString().replace(/\u00A0/g," ")),mT=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,eU=(e,n)=>e.substring(n.length),tU=(e,n,o,r=!1)=>{let i;const u=o.charAt(0);for(i=n-1;i>=0;i--){const m=e.charAt(i);if(!r&&mT(m))return W.none();if(u===m&&Ko(e,o,i,n))break}return W.some(i)},hT=(e,n,o,r=!1)=>{if(!Jz(n))return W.none();const i={text:"",offset:0},u=(y,S,O)=>(i.text=O+i.text,i.offset+=S,tU(i.text,i.offset,o,r).getOr(S)),m=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return p3(e,n.startContainer,n.startOffset,u,m).bind(y=>{const S=n.cloneRange();if(S.setStart(y.container,y.offset),S.setEnd(n.endContainer,n.endOffset),S.collapsed)return W.none();const O=Qz(S);return O.lastIndexOf(o)!==0?W.none():W.some({text:eU(O,o),range:S,trigger:o})})},nU=e=>e.nodeType===La,oU=e=>e.nodeType===Ld,WL=e=>{if(nU(e))return pf(e,e.data.length);{const n=e.childNodes;return n.length>0?WL(n[n.length-1]):pf(e,n.length)}},ZL=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?ZL(o[n],0):o.length>0&&oU(e)&&o.length===n?WL(o[o.length-1]):pf(e,n)},sU=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return p3(e,n.container,n.offset,(i,u)=>u===0?-1:u,r).filter(i=>{const u=i.container.data.charAt(i.offset-1);return!mT(u)}).isSome()},rU=e=>n=>{const o=ZL(n.startContainer,n.startOffset);return!sU(e,o)},b3=(e,n,o)=>Oi(o.triggers,r=>hT(e,n,r)),aU=(e,n)=>{const o=n(),r=e.selection.getRng();return b3(e.dom,r,o).bind(i=>v3(e,n,i))},v3=(e,n,o,r={})=>{var i;const u=n(),y=(i=e.selection.getRng().startContainer.nodeValue)!==null&&i!==void 0?i:"",S=Zt(u.lookupByTrigger(o.trigger),L=>o.text.length>=L.minChars&&L.matches.getOrThunk(()=>rU(e.dom))(o.range,y,o.text));if(S.length===0)return W.none();const O=Promise.all(dt(S,L=>L.fetch(o.text,L.maxResults,r).then(V=>({matchText:o.text,items:V,columns:L.columns,onAction:L.onAction,highlightOn:L.highlightOn}))));return W.some({lookupData:O,context:o})};var im;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(im||(im={}));const y3=(e,n,o)=>e.stype===im.Error?n(e.serror):o(e.svalue),iU=e=>{const n=[],o=[];return Se(e,r=>{y3(r,i=>o.push(i),i=>n.push(i))}),{values:n,errors:o}},cU=(e,n)=>e.stype===im.Error?{stype:im.Error,serror:n(e.serror)}:e,lU=(e,n)=>e.stype===im.Value?{stype:im.Value,svalue:n(e.svalue)}:e,uU=(e,n)=>e.stype===im.Value?n(e.svalue):e,Ka=(e,n)=>e.stype===im.Error?n(e.serror):e,jL=e=>({stype:im.Value,svalue:e}),qL=e=>({stype:im.Error,serror:e}),Ai={fromResult:e=>e.fold(qL,jL),toResult:e=>y3(e,lc.error,lc.value),svalue:jL,partition:iU,serror:qL,bind:uU,bindError:Ka,map:lU,mapError:cU,fold:y3},gT=e=>Ke(e)&&Go(e).length>100?" removed due to size":JSON.stringify(e,null,2),o1=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:ct("... (only showing first ten failures)")}]):e;return dt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},uy=(e,n)=>Ai.serror([{path:e,getErrorInfo:n}]),GL=(e,n,o)=>uy(e,()=>'Could not find valid *required* value for "'+n+'" in '+gT(o)),w3=(e,n)=>uy(e,()=>'Choice schema did not contain choice key: "'+n+'"'),C3=(e,n,o)=>uy(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+gT(n)),S3=(e,n)=>uy(e,ct(n)),KL=(e,n,o,r)=>zo(o,r).fold(()=>C3(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),pT=(e,n)=>({extract:(i,u)=>zo(u,e).fold(()=>w3(i,e),y=>KL(i,u,n,y)),toString:()=>"chooseOn("+e+"). Possible values: "+Go(n)}),bT=(e,n)=>n,eS=(e,n)=>Kn(e)&&Kn(n)?cu(e,n):n,dy=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const i=n[r];for(const u in i)Sn(i,u)&&(o[u]=e(o[u],i[u]))}return o},cu=dy(eS),fy=dy(bT),x3=()=>({tag:"required",process:{}}),YL=e=>({tag:"defaultedThunk",process:e}),XL=e=>YL(ct(e)),JL=()=>({tag:"option",process:{}}),fU=(e,n)=>e.length>0?Ai.svalue(cu(n,fy.apply(void 0,e))):Ai.svalue(n),QL=e=>N(Ai.serror,Xa)(e),mU={consolidateObj:(e,n)=>{const o=Ai.partition(e);return o.errors.length>0?QL(o.errors):fU(o.values,n)},consolidateArr:e=>{const n=Ai.partition(e);return n.errors.length>0?QL(n.errors):Ai.svalue(n.values)}},hU=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),gU=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),e5=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},E3=e=>{const n=(r,i)=>Ai.bindError(e(i),u=>S3(r,u)),o=ct("val");return{extract:n,toString:o}},pU=E3(Ai.svalue),bU=(e,n,o,r)=>zo(n,o).fold(()=>GL(e,o,n),r),t5=(e,n,o,r)=>{const i=zo(e,n).getOrThunk(()=>o(e));return r(i)},vU=(e,n,o)=>o(zo(e,n)),yU=(e,n,o,r)=>{const i=zo(e,n).map(u=>u===!0?o(e):u);return r(i)},wU=(e,n,o,r,i)=>{const u=y=>i.extract(n.concat([r]),y),m=y=>y.fold(()=>Ai.svalue(W.none()),S=>{const O=i.extract(n.concat([r]),S);return Ai.map(O,W.some)});switch(e.tag){case"required":return bU(n,o,r,u);case"defaultedThunk":return t5(o,r,e.process,u);case"option":return vU(o,r,m);case"defaultedOptionThunk":return yU(o,r,e.process,m);case"mergeWithThunk":return t5(o,r,ct({}),y=>{const S=cu(e.process(o),y);return u(S)})}},CU=(e,n,o)=>{const r={},i=[];for(const u of o)e5(u,(m,y,S,O)=>{const L=wU(S,e,n,m,O);Ai.fold(L,F=>{i.push(...F)},F=>{r[y]=F})},(m,y)=>{r[m]=y(n)});return i.length>0?Ai.serror(i):Ai.svalue(r)},_3=e=>({extract:(r,i)=>CU(r,i,e),toString:()=>`obj{
`+dt(e,i=>e5(i,(u,m,y,S)=>u+" -> "+S.toString(),(u,m)=>"state("+u+")")).join(`
`)+"}"}),T3=e=>({extract:(r,i)=>{const u=dt(i,(m,y)=>e.extract(r.concat(["["+y+"]"]),m));return mU.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),n5=e=>E3(n=>e(n).fold(Ai.serror,Ai.svalue)),o5=(e,n,o)=>{const r=n.extract([e],o);return Ai.mapError(r,i=>({input:o,errors:i}))},SU=(e,n,o)=>Ai.toResult(o5(e,n,o)),xU=e=>`Errors: 
`+o1(e.errors).join(`
`)+`

Input object: `+gT(e.input),s5=(e,n)=>pT(e,po(n,_3)),EU=ct(pU),tS=(e,n)=>E3(o=>{const r=typeof o;return e(o)?Ai.svalue(o):Ai.serror(`Expected type: ${n} but got: ${r}`)}),_U=tS(so,"number"),nS=tS(ce,"string"),TU=tS(Jt,"boolean"),yT=tS(ve,"function"),my=hU,r5=gU,kU=e=>n5(n=>et(e,n)?lc.value(n):lc.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),a5=(e,n)=>my(e,e,x3(),n),i5=e=>a5(e,nS),k3=e=>a5(e,yT),AU=(e,n)=>my(e,e,x3(),T3(n)),A3=(e,n)=>my(e,e,JL(),n),oS=e=>A3(e,nS),OU=e=>A3(e,yT),DU=(e,n)=>my(e,e,XL(n),EU()),Mb=(e,n,o)=>my(e,e,XL(n),o),c5=(e,n)=>Mb(e,n,_U),RU=(e,n)=>Mb(e,n,nS),l5=(e,n,o)=>Mb(e,n,kU(o)),wT=(e,n)=>Mb(e,n,TU),CT=(e,n)=>Mb(e,n,yT),MU=(e,n,o)=>Mb(e,n,T3(o)),NU=i5("type"),PU=k3("fetch"),O3=k3("onAction"),BU=CT("onSetup",()=>Pe),IU=oS("text"),LU=oS("icon"),FU=oS("tooltip"),pY=oS("label"),$U=wT("active",!1),ST=wT("enabled",!0),D3=wT("primary",!1),u5=e=>DU("columns",e),sS=e=>RU("type",e),d5=_3([NU,i5("trigger"),c5("minChars",1),u5(1),c5("maxResults",10),OU("matches"),PU,O3,MU("highlightOn",[],nS)]),f5=e=>SU("Autocompleter",d5,e),R3=[ST,FU,LU,IU,BU],m5=[$U].concat(R3),HU=[CT("predicate",tt),l5("scope","node",["node","editor"]),l5("position","selection",["node","selection","line"])],h5=R3.concat([sS("contextformbutton"),D3,O3,r5("original",$n)]),VU=m5.concat([sS("contextformbutton"),D3,O3,r5("original",$n)]),M3=R3.concat([sS("contextformbutton")]),zU=m5.concat([sS("contextformtogglebutton")]),UU=s5("type",{contextformbutton:h5,contextformtogglebutton:VU});_3([sS("contextform"),CT("initValue",ct("")),pY,AU("commands",UU),A3("launch",s5("type",{contextformbutton:M3,contextformtogglebutton:zU}))].concat(HU));const WU=e=>{const n=e.ui.registry.getAll().popups,o=po(n,m=>f5(m).fold(y=>{throw new Error(xU(y))},$n)),r=ul(hi(o,m=>m.trigger)),i=Di(o);return{dataset:o,triggers:r,lookupByTrigger:m=>Zt(i,y=>y.trigger===m)}},g5=(e,n)=>{const o=Pm(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const i=r.which;i===8?o.throttle():i===27?(o.cancel(),n.cancelIfNecessary()):(i===38||i===40)&&o.cancel()},!0),e.on("remove",o.cancel)},ZU=e=>{const n=Ci(),o=Be(!1),r=n.isSet,i=()=>{r()&&(DE(e),o.set(!1),n.clear())},u=F=>{r()||n.set({trigger:F.trigger,matchLength:F.text.length})},m=qe(()=>WU(e)),y=F=>n.get().map(V=>hT(e.dom,e.selection.getRng(),V.trigger,!0).bind(Q=>v3(e,m,Q,F))).getOrThunk(()=>aU(e,m)),S=F=>{y(F).fold(i,V=>{u(V.context),V.lookupData.then(Q=>{n.get().map(re=>{const ee=V.context;re.trigger===ee.trigger&&(n.set({...re,matchLength:ee.text.length}),o.get()?(OE(e,{range:ee.range}),AE(e,{lookupData:Q})):(o.set(!0),OE(e,{range:ee.range}),$A(e,{lookupData:Q})))})})})},O=(F,V)=>{const Q=F.compareBoundaryPoints(window.Range.START_TO_START,V),re=F.compareBoundaryPoints(window.Range.END_TO_END,V);return Q>=0&&re<=0},L=()=>n.get().bind(({trigger:F})=>{const V=e.selection.getRng();return hT(e.dom,V,F,o.get()).filter(({range:Q})=>O(V,Q)).map(({range:Q})=>Q)});e.addCommand("mceAutocompleterReload",(F,V)=>{const Q=Ke(V)?V.fetchOptions:{};S(Q)}),e.addCommand("mceAutocompleterClose",i),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{L().each(F=>{OE(e,{range:F})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>L().isSome()),g5(e,{cancelIfNecessary:i,load:S})},jU=St().browser.isSafari(),p5=e=>eu(be.fromDom(e)),b5=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},xa=(e,n)=>W.from(e.getParent(n.container(),"details")),cm=(e,n)=>xa(e,n).isSome(),qU=(e,n)=>{const o=W.from(e.getParent(n.startContainer,"details")),r=W.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const i=o.bind(u=>W.from(e.select("summary",u)[0]));return W.some({startSummary:i,startDetails:o,endDetails:r})}else return W.none()},vY=(e,n)=>_i(n).exists(o=>o.isEqual(e)),GU=(e,n)=>tu(n).exists(o=>Lo(o.getNode())&&rl(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),KU=(e,n)=>n.startSummary.exists(o=>vY(e,o)),YU=(e,n)=>n.startSummary.exists(o=>GU(e,o)),XU=(e,n)=>n.startDetails.exists(o=>rl(o,e).forall(r=>n.startSummary.exists(i=>!i.contains(e.container())&&i.contains(r.container())))),v5=(e,n,o)=>o.startDetails.exists(r=>Bc(e,n).forall(i=>!r.contains(i.container()))),Nb=(e,n)=>{const o=n.getNode();Bn(o)||e.selection.setCursorLocation(o,n.offset())},JU=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const i=e.dom.select("summary",r)[0];i&&(o?_i(i):tu(i)).each(m=>Nb(e,m))}else Nb(e,n)},QU=(e,n)=>{const o=S=>S.contains(e.startContainer),r=S=>S.contains(e.endContainer),i=n.startSummary.exists(o),u=n.startSummary.exists(r),m=n.startDetails.forall(S=>n.endDetails.forall(O=>S!==O));return(i||u)&&!(i&&u)||m},y5=(e,n,o)=>{const{dom:r,selection:i}=e,u=e.getBody();if(o==="character"){const m=Ge.fromRangeStart(i.getRng()),y=r.getParent(m.container(),r.isBlock),S=xa(r,m),O=y&&r.isEmpty(y),L=ne(y==null?void 0:y.previousSibling),F=ne(y==null?void 0:y.nextSibling);return O&&(n?F:L)&&mg(!n,u,m).exists(re=>cm(r,re)&&!ha(S,xa(r,re)))?!0:mg(n,u,m).fold(tt,V=>{const Q=xa(r,V);if(cm(r,V)&&!ha(S,Q)){if(n||JU(e,V,!1),y&&O){if(n&&L)return!0;if(!n&&F)return!0;JU(e,V,n),e.dom.remove(y)}return!0}else return!1})}else return!1},lm=(e,n,o,r)=>{const u=e.selection.getRng(),m=Ge.fromRangeStart(u),y=e.getBody();return r==="selection"?QU(u,n):o?YU(m,n)||v5(y,m,n):KU(m,n)||XU(m,n)},eW=(e,n,o)=>qU(e.dom,e.selection.getRng()).fold(()=>y5(e,n,o),r=>lm(e,r,n,o)||y5(e,n,o)),tW=(e,n,o)=>{const r=e.selection,i=r.getNode(),u=r.getRng(),m=Ge.fromRangeStart(u);return Vy(i)?(o==="selection"&&b5(u,i)||ub(n,m,i)?p5(i):e.undoManager.transact(()=>{const y=r.getSel();let{anchorNode:S,anchorOffset:O,focusNode:L,focusOffset:F}=y??{};const V=()=>{Fe(S)&&Fe(O)&&Fe(L)&&Fe(F)&&(y==null||y.setBaseAndExtent(S,O,L,F))},Q=()=>{S=y==null?void 0:y.anchorNode,O=y==null?void 0:y.anchorOffset,L=y==null?void 0:y.focusNode,F=y==null?void 0:y.focusOffset},re=(ue,we)=>{Se(ue.childNodes,De=>{f0(De)&&we.appendChild(De)})},ee=e.dom.create("span",{"data-mce-bogus":"1"});re(i,ee),i.appendChild(ee),V(),(o==="word"||o==="line")&&(y==null||y.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&b5(r.getRng(),ee)?p5(i):(e.execCommand(n?"ForwardDelete":"Delete"),Q(),re(ee,i),V()),e.dom.remove(ee)}),!0):!1},s1=(e,n,o)=>eW(e,n,o)||jU&&tW(e,n,o)?W.some(Pe):W.none(),w5=e=>(n,o,r={})=>{const i=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:Pe,inputType:o},m=Ru(new InputEvent(e));return n.dispatch(e,{...m,...u,...r})},Pb=w5("input"),Od=w5("beforeinput"),N3=St(),P3=N3.os,C5=P3.isMacOS()||P3.isiOS(),I3=N3.browser.isFirefox(),S5=(e,n,o)=>{const r=o.keyCode===bt.BACKSPACE?"deleteContentBackward":"deleteContentForward",i=e.selection.isCollapsed(),u=i?"character":"selection",m=y=>i?y?"word":"line":"selection";ML([{keyCode:bt.BACKSPACE,action:zn(qu,e)},{keyCode:bt.BACKSPACE,action:zn(P2,e,!1)},{keyCode:bt.DELETE,action:zn(P2,e,!0)},{keyCode:bt.BACKSPACE,action:zn(fh,e,!1)},{keyCode:bt.DELETE,action:zn(fh,e,!0)},{keyCode:bt.BACKSPACE,action:zn(I4,e,n,!1)},{keyCode:bt.DELETE,action:zn(I4,e,n,!0)},{keyCode:bt.BACKSPACE,action:zn(YC,e,!1)},{keyCode:bt.DELETE,action:zn(YC,e,!0)},{keyCode:bt.BACKSPACE,action:zn(s1,e,!1,u)},{keyCode:bt.DELETE,action:zn(s1,e,!0,u)},...C5?[{keyCode:bt.BACKSPACE,altKey:!0,action:zn(s1,e,!1,m(!0))},{keyCode:bt.DELETE,altKey:!0,action:zn(s1,e,!0,m(!0))},{keyCode:bt.BACKSPACE,metaKey:!0,action:zn(s1,e,!1,m(!1))}]:[{keyCode:bt.BACKSPACE,ctrlKey:!0,action:zn(s1,e,!1,m(!0))},{keyCode:bt.DELETE,ctrlKey:!0,action:zn(s1,e,!0,m(!0))}],{keyCode:bt.BACKSPACE,action:zn(ju,e,!1)},{keyCode:bt.DELETE,action:zn(ju,e,!0)},{keyCode:bt.BACKSPACE,action:zn(U4,e,!1)},{keyCode:bt.DELETE,action:zn(U4,e,!0)},{keyCode:bt.BACKSPACE,action:zn(X_,e,!1)},{keyCode:bt.DELETE,action:zn(X_,e,!0)},{keyCode:bt.BACKSPACE,action:zn(Bg,e,!1)},{keyCode:bt.DELETE,action:zn(Bg,e,!0)},{keyCode:bt.BACKSPACE,action:zn(lT,e,!1)},{keyCode:bt.DELETE,action:zn(lT,e,!0)},{keyCode:bt.BACKSPACE,action:zn(S4,e,!1)},{keyCode:bt.DELETE,action:zn(S4,e,!0)}],o).filter(y=>e.selection.isEditable()).each(y=>{o.preventDefault(),Od(e,r).isDefaultPrevented()||(y(),Pb(e,r))})},x5=(e,n,o)=>j2([{keyCode:bt.BACKSPACE,action:zn(y4,e)},{keyCode:bt.DELETE,action:zn(y4,e)},...C5?[{keyCode:bt.BACKSPACE,altKey:!0,action:zn(U2,e)},{keyCode:bt.DELETE,altKey:!0,action:zn(U2,e)},...o?[{keyCode:I3?224:91,action:zn(U2,e)}]:[]]:[{keyCode:bt.BACKSPACE,ctrlKey:!0,action:zn(U2,e)},{keyCode:bt.DELETE,ctrlKey:!0,action:zn(U2,e)}]],n),nW=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===bt.BACKSPACE,r.isDefaultPrevented()||S5(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||x5(e,r,o),o=!1})},oW=e=>{for(;e;){if(Wt(e)||pt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},hy=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=oW(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Xr),n.firstChild)}const i=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Ha(n,n);let m=n,y;for(;y=u.current();){if(pt(y)){i.setStart(y,0),i.setEnd(y,0);break}if(r[y.nodeName.toLowerCase()]){i.setStartBefore(y),i.setEndBefore(y);break}m=y,y=u.next()}y||(i.setStart(m,0),i.setEnd(m,0))}else Lo(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)):(i.setStart(n,0),i.setEnd(n,0));e.selection.setRng(i),BC(e,i)},rS=(e,n)=>{const o=e.getRoot();let r,i=n;for(;i!==o&&i&&e.getContentEditable(i)!=="false";){if(e.getContentEditable(i)==="true"){r=i;break}i=i.parentNode}return i!==o?r:o},L3=e=>W.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),E5=e=>L3(e).fold(ct(""),n=>n.nodeName.toUpperCase()),sW=e=>L3(e).filter(n=>rg(be.fromDom(n))).isSome(),F3=e=>{e.innerHTML='<br data-mce-bogus="1">'},rW=(e,n,o)=>{const r=e.dom;W.from(o.style).map(r.parseStyle).each(S=>{const L={...vi(be.fromDom(n)),...S};r.setStyles(n,L)});const i=W.from(o.class).map(S=>S.split(/\s+/)),u=W.from(n.className).map(S=>Zt(S.split(/\s+/),O=>O!==""));Xn(i,u,(S,O)=>{const L=Zt(O,V=>!et(S,V)),F=[...S,...L];r.setAttrib(n,"class",F.join(" "))});const m=["style","class"],y=Wo(o,(S,O)=>!et(m,O));r.setAttribs(n,y)},aS=(e,n)=>{if(Si(e).toLowerCase()===n.tagName.toLowerCase()){const r=Ym(e);rW(e,n,r)}},_5=(e,n,o,r,i=!0,u,m)=>{const y=e.dom,S=e.schema,O=Si(e),L=o?o.nodeName.toUpperCase():"";let F=n;const V=S.getTextInlineElements();let Q;u||L==="TABLE"||L==="HR"?Q=y.create(u||O,m||{}):Q=o.cloneNode(!1);let re=Q;if(!i)y.setAttrib(Q,"style",null),y.setAttrib(Q,"class",null);else do if(V[F.nodeName]){if(nu(F)||_l(F))continue;const ee=F.cloneNode(!1);y.setAttrib(ee,"id",""),Q.hasChildNodes()?(ee.appendChild(Q.firstChild),Q.appendChild(ee)):(re=ee,Q.appendChild(ee))}while((F=F.parentNode)&&F!==r);return aS(e,Q),F3(re),Q},T5=(e,n)=>e.dom.getParent(n,kc),k5=(e,n,o)=>{let r=n;for(;r&&r!==e&&ne(r.nextSibling);){const i=r.parentElement;if(!i||!o(i))return kc(i);r=i}return!1},aW=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Si(e)&&e.dom.isEmpty(o)&&k5(e.getBody(),o,r=>Sn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),iW=(e,n,o)=>{var r,i,u;const m=n(Si(e)),y=T5(e,o);y&&(e.dom.insertAfter(m,y),hy(e,m),((u=(i=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||i===void 0?void 0:i.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},yY=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,$3=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},A5=(e,n)=>{const o=e==null?void 0:e.parentNode;return Fe(o)&&o.nodeName===n},O5=e=>Fe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),H3=e=>Fe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),D5=e=>O5(e)&&O5(e.parentNode),xT=e=>{const n=e.parentNode;return H3(n)?n:e},iS=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Wt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},R5=e=>Mo(hi(vi(be.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),cW=(e,n,o,r,i)=>{const u=e.dom,m=e.selection.getRng(),y=o.parentNode;if(o===e.getBody()||!y)return;D5(o)&&(i="LI");const S=H3(r)?R5(r):void 0;let O=H3(r)&&S?n(i,{style:R5(r)}):n(i);if(iS(o,r,!0)&&iS(o,r,!1))if(A5(o,"LI")){const L=xT(o);u.insertAfter(O,L),$3(o)?u.remove(L):u.remove(o)}else u.replace(O,o);else if(iS(o,r,!0))A5(o,"LI")?(u.insertAfter(O,xT(o)),O.appendChild(u.doc.createTextNode(" ")),O.appendChild(o)):y.insertBefore(O,o),u.remove(r);else if(iS(o,r,!1))u.insertAfter(O,xT(o)),u.remove(r);else{o=xT(o);const L=m.cloneRange();L.setStartAfter(r),L.setEndAfter(o);const F=L.extractContents();if(i==="LI"&&yY(F,"LI")){const V=Zt(dt(O.children,be.fromDom),eo(si("br")));O=F.firstChild,u.insertAfter(F,o),Se(V,Q=>Cm(be.fromDom(O),Q)),S&&O.setAttribute("style",S)}else u.insertAfter(F,o),u.insertAfter(O,o);u.remove(r)}hy(e,O)},wY=e=>{Se(zh(be.fromDom(e),Yr),n=>{const o=n.dom;o.nodeValue=ac(o.data)})},gc=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},lW=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),V3=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,z3=(e,n)=>Fe(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",uW=(e,n,o)=>{var r;const i=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Wt(u)&&!n[u.nodeName.toLowerCase()]&&i.push(u)}let m=i.length;for(;m--;)u=i[m],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||lW(e,u))&&e.remove(u)},U3=(e,n,o)=>pt(n)?e?o===1&&n.data.charAt(o-1)===Ma?0:o:o===n.data.length-1&&n.data.charAt(o)===Ma?n.data.length:o:o,dW=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,U3(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,U3(!1,e.endContainer,e.endOffset)),n},fW=e=>{let n=e;do pt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},ET=(e,n,o,r,i)=>{var u,m;const y=e.dom,S=(u=rS(y,r))!==null&&u!==void 0?u:y.getRoot();let O=y.getParent(r,y.isBlock);if(!O||!z3(y,O)){if(O=O||S,!O.hasChildNodes()){const Q=y.create(n);return aS(e,Q),O.appendChild(Q),o.setStart(Q,0),o.setEnd(Q,0),Q}let L=r;for(;L&&L.parentNode!==O;)L=L.parentNode;let F;for(;L&&!y.isBlock(L);)F=L,L=L.previousSibling;const V=(m=F==null?void 0:F.parentElement)===null||m===void 0?void 0:m.nodeName;if(F&&V&&e.schema.isValidChild(V,n.toLowerCase())){const Q=F.parentNode,re=y.create(n);for(aS(e,re),Q.insertBefore(re,F),L=F;L&&!y.isBlock(L);){const ee=L.nextSibling;re.appendChild(L),L=ee}o.setStart(r,i),o.setEnd(r,i)}}return r},mW=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Wt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},hW=(e,n)=>{const o=ya(e);return Qt(n)?!1:ce(o)?et(vt.explode(o),n.nodeName.toLowerCase()):o},P5={insert:(e,n)=>{let o,r,i,u,m=!1;const y=e.dom,S=e.schema,O=S.getNonEmptyElements(),L=e.selection.getRng(),F=Si(e),V=be.fromDom(L.startContainer),Q=Ni(V,L.startOffset),re=Q.exists(ut=>Kr(ut)&&!pa(ut)),ee=L.collapsed&&re,ue=(ut,rn)=>_5(e,o,Ot,ft,eA(e),ut,rn),we=ut=>{const rn=U3(ut,o,r);if(pt(o)&&(ut?rn>0:rn<o.data.length))return!1;if((o.parentNode===Ot||o===Ot)&&m&&!ut||ut&&Wt(o)&&o===Ot.firstChild)return!0;if(V3(o,"TABLE")||V3(o,"HR"))return m&&!ut||!m&&ut;const wn=new Ha(o,Ot);pt(o)&&(ut&&rn===0?wn.prev():!ut&&rn===o.data.length&&wn.next());let go;for(;go=wn.current();){if(Wt(go)){if(!go.getAttribute("data-mce-bogus")){const wo=go.nodeName.toLowerCase();if(O[wo]&&wo!=="br")return!1}}else if(pt(go)&&!Tc(go.data))return!1;ut?wn.prev():wn.next()}return!0},De=()=>{let ut;return/^(H[1-6]|PRE|FIGURE)$/.test(i)&&Kt!=="HGROUP"?ut=ue(F):ut=ue(),hW(e,u)&&z3(y,u)&&y.isEmpty(Ot,void 0,{includeZwsp:!0})?ut=y.split(u,Ot):y.insertAfter(ut,Ot),hy(e,ut),ut};Dt(y,L).each(ut=>{L.setStart(ut.startContainer,ut.startOffset),L.setEnd(ut.endContainer,ut.endOffset)}),o=L.startContainer,r=L.startOffset;const Oe=!!(n&&n.shiftKey),$e=!!(n&&n.ctrlKey);Wt(o)&&o.hasChildNodes()&&!ee&&(m=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,m&&pt(o)?r=o.data.length:r=0);const ft=rS(y,o);if(!ft||gc(e,o))return;Oe||(o=ET(e,F,L,o,r));let Ot=y.getParent(o,y.isBlock)||y.getRoot();u=Fe(Ot==null?void 0:Ot.parentNode)?y.getParent(Ot.parentNode,y.isBlock):null,i=Ot?Ot.nodeName.toUpperCase():"";const Kt=u?u.nodeName.toUpperCase():"";if(Kt==="LI"&&!$e){const ut=u;Ot=ut,u=ut.parentNode,i=Kt}if(Wt(u)&&aW(e,Oe,Ot))return iW(e,ue,Ot);if(/^(LI|DT|DD)$/.test(i)&&Wt(u)&&y.isEmpty(Ot)){cW(e,ue,u,Ot,F);return}if(!ee&&(Ot===e.getBody()||!z3(y,Ot)))return;const Je=Ot.parentNode;let ze;if(ee)ze=ue(F),Q.fold(()=>{rr(V,be.fromDom(ze))},ut=>{ii(ut,be.fromDom(ze))}),e.selection.setCursorLocation(ze,0);else if(Hm(Ot))ze=Qd(Ot),y.isEmpty(Ot)&&F3(Ot),aS(e,ze),hy(e,ze);else if(we(!1))ze=De();else if(we(!0)&&Je){const ut=Ge.fromRangeStart(L),rn=HC(ut),wn=be.fromDom(Ot),wo=KE(wn,ut,e.schema)?ON(wn,ut,e.schema).bind(ps=>W.from(ps.getNode())):W.none();ze=Je.insertBefore(ue(),Ot);const ns=V3(Ot,"HR")||rn?ze:wo.getOr(Ot);hy(e,ns)}else{const ut=dW(L).cloneRange();ut.setEndAfter(Ot);const rn=ut.extractContents();wY(rn),fW(rn),ze=rn.firstChild,y.insertAfter(rn,Ot),uW(y,O,ze),mW(y,Ot),y.isEmpty(Ot)&&F3(Ot),ze.normalize(),y.isEmpty(ze)?(y.remove(ze),De()):(aS(e,ze),hy(e,ze))}y.setAttrib(ze,"id",""),e.dispatch("NewBlock",{newBlock:ze})},fakeEventName:"insertParagraph"},CY=(e,n,o)=>{const r=new Ha(n,o);let i;const u=e.getNonEmptyElements();for(;i=r.next();)if(u[i.nodeName.toLowerCase()]||pt(i)&&i.length>0)return!0;return!1},gW=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),BC(e,r)},SY=(e,n)=>{const o=e.selection,r=e.dom,i=o.getRng();let u,m=!1;Dt(r,i).each(Q=>{i.setStart(Q.startContainer,Q.startOffset),i.setEnd(Q.endContainer,Q.endOffset)});let y=i.startOffset,S=i.startContainer;if(Wt(S)&&S.hasChildNodes()){const Q=y>S.childNodes.length-1;S=S.childNodes[Math.min(y,S.childNodes.length-1)]||S,Q&&pt(S)?y=S.data.length:y=0}let O=r.getParent(S,r.isBlock);const L=O&&O.parentNode?r.getParent(O.parentNode,r.isBlock):null,F=L?L.nodeName.toUpperCase():"",V=!!(n&&n.ctrlKey);F==="LI"&&!V&&(O=L),pt(S)&&y>=S.data.length&&(CY(e.schema,S,O||r.getRoot())||(u=r.create("br"),i.insertNode(u),i.setStartAfter(u),i.setEndAfter(u),m=!0)),u=r.create("br"),xv(r,i,u),gW(e,u,m),e.undoManager.add()},pW=(e,n)=>{const o=be.fromTag("br");ii(be.fromDom(n),o),e.undoManager.add()},bW=(e,n)=>{vW(e.getBody(),n)||qi(be.fromDom(n),be.fromTag("br"));const o=be.fromTag("br");qi(be.fromDom(n),o),gW(e,o.dom,!1),e.undoManager.add()},xY=e=>Lo(e.getNode()),vW=(e,n)=>xY(Ge.after(n))?!0:Bc(e,Ge.after(n)).map(o=>Lo(o.getNode())).getOr(!1),bf=e=>e&&e.nodeName==="A"&&"href"in e,yW=e=>e.fold(tt,bf,bf,tt),B5=e=>{const n=nt(lb,e),o=Ge.fromRangeStart(e.selection.getRng());return hh(n,e.getBody(),o).filter(yW)},wW=(e,n)=>{n.fold(Pe,nt(pW,e),nt(bW,e),Pe)},I5={insert:(e,n)=>{const o=B5(e);o.isSome()?o.each(nt(wW,e)):SY(e,n)},fakeEventName:"insertLineBreak"},L5=(e,n)=>L3(e).filter(o=>n.length>0&&pl(be.fromDom(o),n)).isSome(),CW=e=>L5(e,Ax(e)),SW=e=>L5(e,Qk(e)),Ml=bd.generate([{br:[]},{block:[]},{none:[]}]),F5=(e,n)=>SW(e),cS=e=>(n,o)=>sW(n)===e,$5=(e,n)=>(o,r)=>E5(o)===e.toUpperCase()===n,xW=e=>{const n=rS(e.dom,e.selection.getStart());return Qt(n)},lS=e=>$5("pre",e),EW=()=>$5("summary",!0),_T=e=>(n,o)=>kx(n)===e,H5=(e,n)=>CW(e),TT=(e,n)=>n,V5=e=>{const n=Si(e),o=rS(e.dom,e.selection.getStart());return Fe(o)&&e.schema.isValidChild(o.nodeName,n)},z5=e=>{const n=e.selection.getRng(),o=be.fromDom(n.startContainer),i=Ni(o,n.startOffset).map(u=>Kr(u)&&!pa(u));return n.collapsed&&i.getOr(!0)},Dd=(e,n)=>(o,r)=>Mo(e,(u,m)=>u&&m(o,r),!0)?W.some(n):W.none(),_W=(e,n)=>LI([Dd([F5],Ml.none()),Dd([lS(!0),xW],Ml.none()),Dd([EW()],Ml.br()),Dd([lS(!0),_T(!1),TT],Ml.br()),Dd([lS(!0),_T(!1)],Ml.block()),Dd([lS(!0),_T(!0),TT],Ml.block()),Dd([lS(!0),_T(!0)],Ml.br()),Dd([cS(!0),TT],Ml.br()),Dd([cS(!0)],Ml.block()),Dd([H5],Ml.br()),Dd([TT],Ml.br()),Dd([V5],Ml.block()),Dd([z5],Ml.block())],[e,!!(n&&n.shiftKey)]).getOr(Ml.none()),gy=(e,n,o)=>{n.selection.isCollapsed()||a8(n),!(Fe(o)&&Od(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Fe(o)&&Pb(n,e.fakeEventName))},U5=(e,n)=>{const o=()=>gy(I5,e,n),r=()=>gy(P5,e,n),i=_W(e,n);switch(qf(e)){case"linebreak":i.fold(o,o,Pe);break;case"block":i.fold(r,r,Pe);break;case"invert":i.fold(r,o,Pe);break;default:i.fold(o,r,Pe);break}},W5=St(),kT=W5.os.isiOS()&&W5.browser.isSafari(),Z5=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),HD(e.undoManager),e.undoManager.transact(()=>{U5(e,n)}))},W3=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(pt(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},Z3=e=>{let n=W.none();const o=i=>{n=W.some(i.selection.getBookmark()),i.undoManager.add()},r=(i,u)=>{i.undoManager.undo(),n.fold(Pe,m=>i.selection.moveToBookmark(m)),Z5(i,u),n=W.none()};e.on("keydown",i=>{i.keyCode===bt.ENTER&&(kT&&W3(e.selection.getRng())?o(e):Z5(e,i))}),e.on("keyup",i=>{i.keyCode===bt.ENTER&&n.each(()=>r(e,i))})},j5=(e,n,o)=>{const r=pn.os.isMacOS()||pn.os.isiOS();j2([{keyCode:bt.END,action:zn(kL,e,!0)},{keyCode:bt.HOME,action:zn(kL,e,!1)},...r?[]:[{keyCode:bt.HOME,action:zn(W2,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:bt.END,action:zn(W2,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:bt.END,action:zn(Tz,e,!0)},{keyCode:bt.HOME,action:zn(Tz,e,!1)},{keyCode:bt.END,action:zn(aT,e,!0,n)},{keyCode:bt.HOME,action:zn(aT,e,!1,n)}],o).each(i=>{o.preventDefault()})},TW=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||j5(e,n,o)})},TY=e=>{e.on("input",n=>{n.isComposing||Z7(e)})},r1=St(),kW=(e,n,o)=>{j2([{keyCode:bt.PAGE_UP,action:zn(aT,e,!1,n)},{keyCode:bt.PAGE_DOWN,action:zn(aT,e,!0,n)}],o)},q5=e=>e.stopImmediatePropagation(),G5=e=>e.keyCode===bt.PAGE_UP||e.keyCode===bt.PAGE_DOWN,uS=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",q5,!0):!o&&e.get()&&n.off("NodeChange",q5),e.set(o)},K5=(e,n)=>{if(r1.os.isMacOS())return;const o=Be(!1);e.on("keydown",r=>{G5(r)&&uS(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||kW(e,n,r),G5(r)&&o.get()&&(uS(o,e,!1),e.nodeChanged())})},Y5=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||Tt(n.getTargetRanges(),o=>!rO(e.dom,o)))&&n.preventDefault()})},X5=(e,n)=>{const o=n.container(),r=n.offset();return pt(o)?(o.insertData(r,e),W.some(Ge(o,r+e.length))):Jv(n).map(i=>{const u=be.fromText(e);return n.isAtEnd()?qi(i,u):ii(i,u),Ge(u.dom,e.length)})},j3=nt(X5,Xr),J5=nt(X5," "),AW=(e,n,o)=>BN(e,n,o)?j3(n):J5(n),OW=e=>n=>n.fold(o=>rl(e.dom,Ge.before(o)),o=>_i(o),o=>tu(o),o=>Bc(e.dom,Ge.after(o))),q3=(e,n,o)=>r=>BN(e,r,o)?j3(n):J5(n),AT=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},DW=(e,n)=>e.isEditable(e.getParent(n,"summary")),G3=e=>{const n=Ge.fromRangeStart(e.selection.getRng()),o=be.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=nt(lb,e),i=Ge.fromRangeStart(e.selection.getRng());return hh(r,e.getBody(),i).bind(OW(o)).map(u=>()=>q3(o,n,e.schema)(u).each(AT(e)))}else return W.none()},Q5=e=>{const n=()=>{const o=be.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Ge.fromRangeStart(e.selection.getRng());AW(o,r,e.schema).each(AT(e))};return lr(pn.browser.isFirefox()&&e.selection.isEditable()&&DW(e.dom,e.selection.getRng().startContainer),n)},OT=(e,n)=>{ML([{keyCode:bt.SPACEBAR,action:zn(G3,e)},{keyCode:bt.SPACEBAR,action:zn(Q5,e)}],n).each(o=>{n.preventDefault(),Od(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Pb(e,"insertText",{data:" "}))})},eF=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||OT(e,n)})},tF=e=>hA(e)?[{keyCode:bt.TAB,action:zn(Y2,e,!0)},{keyCode:bt.TAB,shiftKey:!0,action:zn(Y2,e,!1)}]:[],RW=(e,n)=>{j2([...tF(e)],n).each(o=>{n.preventDefault()})},MW=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||RW(e,n)})},DT=e=>{if(e.addShortcut("Meta+P","","mcePrint"),ZU(e),uh(e))return Be(null);{const n=ZV(e);return Y5(e),vz(e),m3(e,n),nW(e,n),Z3(e),eF(e),TY(e),MW(e),TW(e,n),K5(e,n),n}};class nF{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",i=>{const u=n.selection.getRng(),m={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(i.type==="nodechange"||!A(m,o))&&n.dispatch("SelectionChange"),o=m}),n.on("contextmenu",()=>{IC(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const i=n.selection.getStart(!0);i&&Ap(n)&&!r.isSameElementPath(i)&&n.dom.isChildOf(i,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",i=>{!i.isDefaultPrevented()&&Ap(n)&&(n.selection.getNode().nodeName==="IMG"?$u.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!Fv(this.editor)&&!this.editor.mode.isReadOnly()){const i=this.editor.getBody();r=o.getStart(!0)||i,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,i))&&(r=i);const u=[];this.editor.dom.getParent(r,m=>m===i?!0:(u.push(m),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,i=vs(r.dom.getParents(n,yt,r.getBody()));if(i.length===this.lastPath.length){for(o=i.length;o>=0&&i[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=i,!0}return this.lastPath=i,!1}}const oF=dv("image"),NW=e=>{const n=e;return W.from(n[oF])},sF=(e,n)=>{const o=e;o[oF]=n},K3=dv("event"),PW=e=>{const n=e;return W.from(n[K3])},RT=e=>n=>{const o=n;o[K3]=e},BW=(e,n)=>RT(n)(e),rF=RT(0),aF=RT(2),IW=RT(1),FW=(e=>n=>{const o=n;return W.from(o[K3]).exists(r=>r===e)})(0),$W=()=>Object.freeze({length:0,item:e=>null}),Y3=dv("mode"),HW=e=>{const n=e;return W.from(n[Y3])},MT=e=>n=>{const o=n;o[Y3]=e},Bb=(e,n)=>MT(n)(e),iF=MT(0),X3=MT(2),cF=MT(1),lF=e=>n=>{const o=n;return W.from(o[Y3]).exists(r=>r===e)},py=lF(0),uF=lF(1),dF=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(py(e))if(ce(o)){if(!Bn(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{py(e)&&n.remove(o)},clear:()=>{py(e)&&n.clear()}}),VW=["none","copy","link","move"],zW=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],fF=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(i){et(VW,i)&&(n=i)},get effectAllowed(){return o},set effectAllowed(i){FW(r)&&et(zW,i)&&(o=i)},get items(){return dF(r,e.items)},get files(){return uF(r)?$W():e.files},get types(){return e.types},setDragImage:(i,u,m)=>{py(r)&&(sF(r,{image:i,x:u,y:m}),e.setDragImage(i,u,m))},getData:i=>uF(r)?"":e.getData(i),setData:(i,u)=>{py(r)&&e.setData(i,u)},clearData:i=>{py(r)&&e.clearData(i)}};return iF(r),r},NT=e=>{const n=fF(),o=HW(e);return X3(e),rF(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,NW(e).each(r=>n.setDragImage(r.image,r.x,r.y)),Se(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),Se(e.files,r=>n.items.add(r)),PW(e).each(r=>{BW(n,r)}),o.each(r=>{Bb(e,r),Bb(n,r)}),n},UW=e=>{const n=e.getData("text/html");return n===""?W.none():W.some(n)},mF=(e,n)=>e.setData("text/html",n),hF="x-tinymce/html",PT=ct(hF),J3="<!-- "+hF+" -->",WW=e=>J3+e,ZW=e=>e.replace(J3,""),gF=e=>e.indexOf(J3)!==-1,jW=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),qW=(e,n)=>{let o="<"+e;const r=hi(n,(i,u)=>u+'="'+fd.encodeAllRaw(i)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},GW=(e,n,o)=>{const r=e.split(/\n\n/),i=qW(n,o),u="</"+n+">",m=dt(r,S=>S.split(/\n/).join("<br />")),y=S=>i+S+u;return m.length===1?m[0]:dt(m,y).join("")},pF="%MCEPASTEBIN%",KW=(e,n)=>{const{dom:o,selection:r}=e,i=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},pF);pn.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(i,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),r.select(u,!0)},zs=(e,n)=>{const o=e.dom;if(Q3(e)){let r;const i=n.get();for(;r=Q3(e);)o.remove(r),o.unbind(r);i&&e.selection.setRng(i)}n.set(null)},Q3=e=>e.dom.get("mcepastebin"),bF=e=>Fe(e)&&e.id==="mcepastebin",YW=e=>{const n=e.dom,o=(m,y)=>{m.appendChild(y),n.remove(y,!0)},[r,...i]=Zt(e.getBody().childNodes,bF);Se(i,m=>{o(r,m)});const u=n.select("div[id=mcepastebin]",r);for(let m=u.length-1;m>=0;m--){const y=n.create("div");r.insertBefore(y,u[m]),o(y,u[m])}return r?r.innerHTML:""},BT=e=>e===pF,vF=e=>{const n=Be(null);return{create:()=>KW(e,n),remove:()=>zs(e,n),getEl:()=>Q3(e),getHtml:()=>YW(e),getLastRng:n.get}},yF=(e,n)=>(vt.each(n,o=>{Nt(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),XW=e=>{const n=Kd(),o=Y0({},n);let r="";const i=n.getVoidElements(),u=vt.makeMap("script noscript style textarea video audio iframe object"," "),m=n.getBlockElements(),y=S=>{const O=S.name,L=S;if(O==="br"){r+=`
`;return}if(O!=="wbr"){if(i[O]&&(r+=" "),u[O]){r+=" ";return}if(S.type===3&&(r+=S.value),!(S.name in n.getVoidElements())){let F=S.firstChild;if(F)do y(F);while(F=F.next)}m[O]&&L.next&&(r+=`
`,O==="p"&&(r+=`
`))}};return e=yF(e,[/<!\[[^\]]+\]>/g]),y(o.parse(e)),r},eR=e=>(e=yF(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,i)=>!r&&!i?" ":Xr],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),tR=e=>{let n=0;return()=>e+n++},JW=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return vt.hasOwn(o,n)?"image/"+o[n]:"image/"+n},QW=(e,n)=>{const o=Y0({sanitize:Ei(e),sandbox_iframes:Yx(e),sandbox_iframes_exclusions:Zv(e),convert_unsafe_embeds:V1(e)},e.schema);o.addNodeFilter("meta",i=>{vt.each(i,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Ag({validate:!0},e.schema).serialize(r)},wF=(e,n)=>({content:e,cancelled:n}),CF=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),i=RE(e,r,o);return wF(i.node.innerHTML,i.isDefaultPrevented())},eZ=(e,n,o)=>{const r=HA(e,n,o),i=QW(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?CF(e,i,o):wF(i,r.isDefaultPrevented())},tZ=(e,n,o)=>eZ(e,n,o),a1=(e,n)=>(e.insertContent(n,{merge:Zx(e),paste:!0}),!0),nR=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),by=(e,n)=>nR(n)&&Tt(H1(e),o=>na(n.toLowerCase(),`.${o.toLowerCase()}`)),dS=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),nZ=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),oZ=(e,n,o)=>!e.selection.isCollapsed()&&nR(n)?nZ(e,n,o):!1,vy=(e,n,o)=>by(e,n)?dS(e,n,o):!1,sZ=(e,n)=>{vt.each([oZ,vy,a1],o=>!o(e,n,a1))},oR=(e,n,o)=>{o||!dA(e)?a1(e,n):sZ(e,n)},rZ=tR("mceclip"),SF=e=>{const n=fF();return mF(n,e),X3(n),n},sR=(e,n,o,r,i)=>{const u=tZ(e,n,o);if(!u.cancelled){const m=u.content,y=()=>oR(e,m,r);i?Od(e,"insertFromPaste",{dataTransfer:SF(m)}).isDefaultPrevented()||(y(),Pb(e,"insertFromPaste")):y()}},yy=(e,n,o,r)=>{const i=o||gF(n);sR(e,ZW(n),i,!1,r)},IT=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),i=bl(r,jx(e)),u=GW(i,Si(e),Ym(e));sR(e,u,!1,!0,o)},xF=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},i1=(e,n)=>n in e&&e[n].length>0,rR=e=>i1(e,"text/html")||i1(e,"text/plain"),aZ=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Fe(o)?e.dom.encode(o[1]):void 0},EF=(e,n,o,r)=>{const i=rZ(),u=us(e)&&Fe(o.name),m=u?aZ(e,o.name):i,y=u?o.name:void 0,S=n.create(i,o,r,m,y);return n.add(S),S},aR=(e,n)=>{Up(n.uri).each(({data:o,type:r,base64Encoded:i})=>{const u=i?o:btoa(o),m=n.file,y=e.editorUpload.blobCache,S=y.getByData(u,r),O=S??EF(e,y,m,u);yy(e,`<img src="${O.blobUri()}">`,!1,!0)})},_F=e=>e.type==="paste",iZ=e=>Promise.all(dt(e,n=>Ng(n).then(o=>({file:n,uri:o})))),cZ=e=>{const n=H1(e);return o=>es(o.type,"image/")&&Tt(n,r=>JW(r)===o.type)},lZ=(e,n)=>{const o=n.items?ws(_r(n.items),i=>i.kind==="file"?[i.getAsFile()]:[]):[],r=n.files?_r(n.files):[];return Zt(o.length>0?o:r,cZ(e))},iR=(e,n,o)=>{const r=_F(n)?n.clipboardData:n.dataTransfer;if(pp(e)&&r){const i=lZ(e,r);if(i.length>0)return n.preventDefault(),iZ(i).then(u=>{o&&e.selection.setRng(o),Se(u,m=>{aR(e,m)})}),!0}return!1},cR=e=>{var n,o;return pn.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},uZ=e=>bt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,LT=(e,n,o,r,i)=>{let u=eR(o);const m=i1(n,PT())||gF(o),y=!m&&jW(u),S=nR(u);(BT(u)||!u.length||y&&!S)&&(r=!0),(r||S)&&(i1(n,"text/plain")&&y?u=n["text/plain"]:u=XW(u)),!BT(u)&&(r?IT(e,u,i):yy(e,u,m,i))},TF=(e,n,o)=>{let r;const i=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{uZ(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||cR(u))return;const m=o.get()==="text"||r;r=!1;const y=xF(u.clipboardData);!rR(y)&&iR(e,u,i())||(i1(y,"text/html")?(u.preventDefault(),LT(e,y,y["text/html"],m,!0)):i1(y,"text/plain")&&i1(y,"text/uri-list")?(u.preventDefault(),LT(e,y,y["text/plain"],m,!0)):(n.create(),$u.setEditorTimeout(e,()=>{const S=n.getHtml();n.remove(),LT(e,y,S,m,!1)},0)))})},dZ=e=>{const n=i=>es(i,"webkit-fake-url"),o=i=>es(i,"data:"),r=i=>{var u;return((u=i.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(i,u,m)=>{if(!pp(e)&&r(m))for(const y of i){const S=y.attr("src");ce(S)&&!y.attr("data-mce-object")&&S!==pn.transparentSrc&&(n(S)||!bp(e)&&o(S))&&y.remove()}})},kF=(e,n,o)=>{TF(e,n,o),dZ(e)},fZ=(e,n)=>{n.get()==="text"?(n.set("html"),A0(e,!1)):(n.set("text"),A0(e,!0)),e.focus()},mZ=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{fZ(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&yy(e,r.html,r.internal,!1),r.text&&IT(e,r.text,!1)})},hZ=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(PT(),n),!0}catch{return!1}else return!1},AF=(e,n,o,r)=>{hZ(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},OF=e=>(n,o)=>{const{dom:r,selection:i}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),m=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(m),r.add(e.getBody(),u);const y=i.getRng();m.focus();const S=r.createRng();S.selectNodeContents(m),i.setRng(S),$u.setEditorTimeout(e,()=>{i.setRng(y),r.remove(u),o()},0)},fS=e=>({html:WW(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),gZ=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),lR=e=>!e.selection.isCollapsed()||gZ(e),pZ=e=>n=>{!n.isDefaultPrevented()&&lR(e)&&e.selection.isEditable()&&AF(n,fS(e),OF(e),()=>{if(pn.browser.isChromium()||pn.browser.isFirefox()){const o=e.selection.getRng();$u.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},bZ=e=>n=>{!n.isDefaultPrevented()&&lR(e)&&AF(n,fS(e),OF(e),Pe)},DF=e=>{e.on("cut",pZ(e)),e.on("copy",bZ(e))},uR=(e,n)=>{var o,r;return _t.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},vZ=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},RF=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},yZ=e=>Tt(e.files,n=>/^image\//.test(n.type)),wZ=(e,n,o,r)=>{const i=e.getParent(o,m=>Ou(n,m));if(!ne(e.getParent(o,"summary")))return!0;if(i&&Sn(r,"text/html")){const m=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!ne(m.querySelector(i.nodeName.toLowerCase()))}else return!1},CZ=e=>{e.on("input",n=>{const o=r=>ne(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Zt(e.dom.select("details"),o);Se(r,i=>{Lo(i.firstChild)&&i.firstChild.remove();const u=e.dom.create("summary");u.appendChild(ag().dom),i.prepend(u)})}})},MF=(e,n)=>{Hx(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),pp(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&yZ(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=uR(e,o);if(Qt(r))return;const i=xF(o.dataTransfer),u=i1(i,PT());if((!rR(i)||vZ(i))&&iR(e,o,r))return;const m=i[PT()],y=m||i["text/html"]||i["text/plain"],S=wZ(e.dom,e.schema,r.startContainer,i),O=n.get();O&&!S||y&&(o.preventDefault(),$u.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(m||O&&S)&&e.execCommand("Delete"),RF(e,r);const L=eR(y);i["text/html"]?yy(e,L,u,!0):IT(e,L,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{pp(e)&&!n.get()&&(o.preventDefault(),RF(e,uR(e,o))),o.type==="dragend"&&n.set(!1)}),CZ(e)},SZ=e=>{const n=i=>u=>{i(e,u)},o=Vx(e);ve(o)&&e.on("PastePreProcess",n(o));const r=zx(e);ve(r)&&e.on("PastePostProcess",n(r))},xZ=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},EZ=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,NF=e=>vt.trim(e).replace(EZ,hd).toLowerCase(),_Z=(e,n,o)=>{const r=uA(e);if(o||r==="all"||!Wx(e))return n;const i=r?r.split(/[, ]/):[];if(i&&r!=="none"){const u=e.dom,m=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(y,S,O,L)=>{const F=u.parseStyle(u.decode(O)),V={};for(let re=0;re<i.length;re++){const ee=F[i[re]];let ue=ee,we=u.getStyle(m,i[re],!0);/color/.test(i[re])&&(ue=NF(ue),we=NF(we)),we!==ue&&(V[i[re]]=ee)}const Q=u.serializeStyle(V,"span");return Q?S+' style="'+Q+'"'+L:S+L})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,m,y,S)=>m+' style="'+y+'"'+S),n},TZ=e=>{(pn.browser.isChromium()||pn.browser.isSafari())&&xZ(e,_Z)},kZ=e=>{const n=Be(!1),o=Be(zv(e)?"text":"html"),r=vF(e);TZ(e),mZ(e,o),SZ(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{DF(e),MF(e,n),kF(e,r,o)})},AZ=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},PF=e=>{e.parser.addNodeFilter("details",n=>{const o=Kx(e);Se(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=Xw(e);Se(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},BF=e=>{AZ(e),PF(e)},OZ=Lo,IF=pt,DZ=e=>Fo(e.dom),RZ=e=>rt(e.dom),LF=e=>n=>ro(be.fromDom(e),n),MZ=(e,n,o)=>Qs(be.fromDom(e),r=>RZ(r)||o.isBlock(yo(r)),LF(n)).getOr(be.fromDom(n)).dom,FF=(e,n)=>Qs(be.fromDom(e),DZ,LF(n)),mS=(e,n,o)=>{const r=new Ha(e,n),i=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let m=o?e:i();m&&!OZ(m);m=i())wl(m)&&(u=m);return u},$F=(e,n,o)=>{const i=Ge.fromRangeStart(e).getNode(),u=MZ(i,n,o),m=mS(i,u,!1),y=mS(i,u,!0),S=document.createRange();return FF(m,u).fold(()=>{IF(m)?S.setStart(m,0):S.setStartBefore(m)},O=>S.setStartBefore(O.dom)),FF(y,u).fold(()=>{IF(y)?S.setEnd(y,y.data.length):S.setEndAfter(y)},O=>S.setEndAfter(O.dom)),S},NZ=e=>{const n=$F(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Vs(n))},HF=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),NZ(e))})};var Ib;(function(e){e.Before="before",e.After="after"})(Ib||(Ib={}));const dR=(e,n)=>Math.abs(e.left-n),PZ=(e,n)=>Math.abs(e.right-n),VF=(e,n)=>e>=n.top&&e<=n.bottom,BZ=(e,n)=>e.top<n.bottom&&e.bottom>n.top,zF=(e,n)=>{const o=cg(e,n)/Math.min(e.height,n.height);return BZ(e,n)&&o>.5},IZ=(e,n)=>{const o=Zt(e,r=>VF(n,r));return Pk(o).fold(()=>[[],e],r=>{const{pass:i,fail:u}=To(e,m=>zF(m,r));return[i,u]})},UF=(e,n)=>({node:e.node,position:dR(e,n)<PZ(e,n)?Ib.Before:Ib.After}),LZ=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),fR=(e,n,o,r)=>{const i=F=>wl(F.node)?W.some(F):Wt(F.node)?fR(_r(F.node.childNodes),n,o,!1):W.none(),u=(F,V,Q)=>i(V).filter(re=>Math.abs(Q(F,n,o)-Q(re,n,o))<2&&pt(re.node)),m=(F,V)=>{const Q=Vo(F,(re,ee)=>V(re,n,o)-V(ee,n,o));return Oi(Q,i).map(re=>r&&!pt(re.node)&&Q.length>1?u(re,Q[1],V).getOr(re):re)},[y,S]=IZ(Ad(e),o),{pass:O,fail:L}=To(S,F=>F.top<o);return m(y,LZ).orThunk(()=>m(L,ix)).orThunk(()=>m(O,ix))},FZ=(e,n,o,r)=>{const i=(u,m)=>{const y=O=>Wt(O)&&O.classList.contains("mce-drag-container"),S=Zt(u.dom.childNodes,eo(y));return m.fold(()=>fR(S,o,r,!0),O=>{const L=Zt(S,F=>F!==O.dom);return fR(L,o,r,!0)}).orThunk(()=>(ro(u,e)?W.none():Af(u)).bind(L=>i(L,W.some(u))))};return i(n,W.none())},hS=(e,n,o)=>{const r=be.fromDom(e),i=Cu(r),m=be.fromPoint(i,n,o).filter(y=>Rr(r,y)).getOr(r);return FZ(r,m,n,o)},WF=(e,n,o)=>hS(e,n,o).filter(r=>tf(r.node)).map(r=>UF(r,n)),ZF=e=>{var n,o;const r=e.getBoundingClientRect(),i=e.ownerDocument,u=i.documentElement,m=i.defaultView;return{top:r.top+((n=m==null?void 0:m.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=m==null?void 0:m.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},jF=e=>e.inline?ZF(e.getBody()):{left:0,top:0},$Z=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},HZ=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},i={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:i},VZ=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=ZF(e.getContentAreaContainer()),r=HZ(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},zZ=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),UZ=(e,n)=>zZ(jF(e),$Z(e),VZ(e,n)),gS=e=>({target:e,srcElement:e}),qF=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...gS(o)}),GF=(e,n,o)=>{const r=ms("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Pe,stopImmediatePropagation:Pe,stopPropagation:Pe,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...gS(n)}},WZ=(e,n)=>{const o=NT(e);return n==="dragstart"?(rF(o),iF(o)):n==="drop"?(aF(o),X3(o)):(IW(o),cF(o)),o},ZZ=(e,n,o,r)=>{const i=WZ(o,e);return Bn(r)?GF(e,n,i):qF(e,r,n,i)},FT=32,kY=100,$T=8,pS=16,HT=Fo,VT=Bk(HT,rt),jZ=(e,n,o)=>HT(o)&&o!==n&&e.isEditable(o.parentElement),qZ=(e,n,o)=>Qt(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),KF=(e,n,o,r)=>{const i=e.dom,u=n.cloneNode(!0);i.setStyles(u,{width:o,height:r}),i.setAttrib(u,"data-mce-selected",null);const m=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(m,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),i.setStyles(u,{margin:0,boxSizing:"border-box"}),m.appendChild(u),m},GZ=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},wy=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},mR=wy("left",-FT),YF=wy("left",FT),XF=wy("top",-FT),hR=wy("top",FT),KZ=(e,n,o,r,i,u,m,y,S,O,L,F)=>{let V=0,Q=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>i&&(V=n.pageX+o-i),n.pageY+r>u&&(Q=n.pageY+r-u),e.style.width=o-V+"px",e.style.height=r-Q+"px";const re=S.clientHeight,ee=S.clientWidth,ue=m+S.getBoundingClientRect().top,we=y+S.getBoundingClientRect().left;L.on(De=>{De.intervalId.clear(),De.dragging&&F&&(m+$T>=re?De.intervalId.set(hR(O)):m-$T<=0?De.intervalId.set(XF(O)):y+$T>=ee?De.intervalId.set(YF(O)):y-$T<=0?De.intervalId.set(mR(O)):ue+pS>=window.innerHeight?De.intervalId.set(hR(window)):ue-pS<=0?De.intervalId.set(XF(window)):we+pS>=window.innerWidth?De.intervalId.set(YF(window)):we-pS<=0&&De.intervalId.set(mR(window)))})},YZ=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},XZ=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);YZ(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&eu(be.fromDom(o))},JZ=e=>e.button===0,QZ=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),JF=(e,n)=>o=>{if(JZ(o)){const r=Po(n.dom.getParents(o.target),VT).getOr(null);if(Fe(r)&&jZ(n.dom,n.getBody(),r)){const i=n.dom.getPos(r),u=n.getBody(),m=n.getDoc().documentElement;e.set({element:r,dataTransfer:fF(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:m.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:m.offsetHeight)-2,relX:o.pageX-i.x,relY:o.pageY-i.y,width:r.offsetWidth,height:r.offsetHeight,ghost:KF(n,r,r.offsetWidth,r.offsetHeight),intervalId:Tm(kY)})}}},ej=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),WF(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const i=e._selectionOverrides.showCaret(1,r.node,r.position===Ib.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(n,o)})},Cy=(e,n,o,r,i)=>{n==="dragstart"&&mF(r,e.dom.getOuterHTML(o));const u=ZZ(n,o,r,i);return e.dispatch(n,u)},tj=(e,n)=>{const o=T1((i,u)=>ej(n,i,u),0);n.on("remove",o.cancel);const r=e;return i=>e.on(u=>{const m=Math.max(Math.abs(i.screenX-u.screenX),Math.abs(i.screenY-u.screenY));if(!u.dragging&&m>10){const y=Cy(n,"dragstart",u.element,u.dataTransfer,i);if(Fe(y.dataTransfer)&&(u.dataTransfer=y.dataTransfer),y.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const y=i.currentTarget===n.getDoc().documentElement,S=QZ(u,UZ(n,i));GZ(u.ghost,n.getBody()),KZ(u.ghost,S,u.width,u.height,u.maxX,u.maxY,i.clientY,i.clientX,n.getContentAreaContainer(),n.getWin(),r,y),o.throttle(i.clientX,i.clientY)}})},nj=e=>{const n=e.getSel();if(Fe(n)){const r=n.getRangeAt(0).startContainer;return pt(r)?r.parentNode:r}else return null},oj=(e,n)=>o=>{e.on(r=>{var i;if(r.intervalId.clear(),r.dragging){if(qZ(n,nj(n.selection),r.element)){const u=(i=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&i!==void 0?i:n.getBody();Cy(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{XZ(n.dom,r.element),UW(r.dataTransfer).each(y=>n.insertContent(y)),n._selectionOverrides.hideFakeCaret()})}Cy(n,"dragend",n.getBody(),r.dataTransfer,o)}}),gR(e)},QF=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>Cy(n,"dragend",r.element,r.dataTransfer),i=>Cy(n,"dragend",r.element,r.dataTransfer,i))}),gR(e)},sj=(e,n)=>o=>QF(e,n,W.some(o)),gR=e=>{e.on(n=>{n.intervalId.clear(),YZ(n.ghost)}),e.clear()},AY=e=>{const n=Ci(),o=Ks.DOM,r=document,i=JF(n,e),u=tj(n,e),m=oj(n,e),y=sj(n,e);e.on("mousedown",i),e.on("mousemove",u),e.on("mouseup",m),o.bind(r,"mousemove",u),o.bind(r,"mouseup",y),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",y)}),e.on("keydown",S=>{S.keyCode===bt.ESC&&QF(n,e,W.none())})},rj=e=>{const n=i=>{if(!i.isDefaultPrevented()){const u=i.dataTransfer;u&&(et(u.types,"Files")||u.files.length>0)&&(i.preventDefault(),i.type==="drop"&&S2(e,"Dropped file type is not supported"))}},o=i=>{UE(e,i.target)&&n(i)},r=()=>{const i=Ks.DOM,u=e.dom,m=document,y=e.inline?e.getBody():e.getDoc(),S=["drop","dragover"];Se(S,O=>{i.bind(m,O,o),u.bind(y,O,n)}),e.on("remove",()=>{Se(S,O=>{i.unbind(m,O,o),u.unbind(y,O,n)})})};e.on("init",()=>{$u.setEditorTimeout(e,r,0)})},e$=e=>{AY(e),Fx(e)&&rj(e)},aj=e=>{const n=T1(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=ay(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},pR=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(wi(o)){const r=$p(e.getBody(),o),i=Fo(r)?r:o;e.selection.getNode()!==i&&ry(e,i).each(u=>e.selection.setRng(u))}})})},bS=Fo,t$=(e,n)=>$p(e.getBody(),n),ij=e=>{const n=e.selection,o=e.dom,r=e.getBody(),i=DM(e,r,o.isBlock,()=>kg(e)),u="sel-"+o.uniqueId(),m="data-mce-selected";let y;const S=Kt=>Fe(Kt)&&o.hasClass(Kt,"mce-offscreen-selection"),O=Kt=>Kt!==r&&(bS(Kt)||wi(Kt))&&o.isChildOf(Kt,r)&&o.isEditable(Kt.parentNode),L=Kt=>{Kt&&n.setRng(Kt)},F=(Kt,Je,ze,ut=!0)=>e.dispatch("ShowCaret",{target:Je,direction:Kt,before:ze}).isDefaultPrevented()?null:(ut&&n.scrollIntoView(Je,Kt===-1),i.show(ze,Je)),V=Kt=>{Kt.hasAttribute("data-mce-caret")&&(Qd(Kt),n.scrollIntoView(Kt))},Q=()=>{e.on("click",Je=>{o.isEditable(Je.target)||(Je.preventDefault(),e.focus())}),e.on("blur NewBlock",$e),e.on("ResizeWindow FullscreenStateChanged",i.reposition),e.on("tap",Je=>{const ze=Je.target,ut=t$(e,ze);bS(ut)?(Je.preventDefault(),ry(e,ut).each(Oe)):O(ze)&&ry(e,ze).each(Oe)},!0),e.on("mousedown",Je=>{const ze=Je.target;if(ze!==r&&ze.nodeName!=="HTML"&&!o.isChildOf(ze,r)||!O9(e,Je.clientX,Je.clientY))return;$e(),Ot();const ut=t$(e,ze);bS(ut)?(Je.preventDefault(),ry(e,ut).each(Oe)):WF(r,Je.clientX,Je.clientY).each(rn=>{Je.preventDefault();const wn=F(1,rn.node,rn.position===Ib.Before,!1);L(wn),qc(ut)?ut.focus():e.getBody().focus()})}),e.on("keypress",Je=>{bt.modifierPressed(Je)||bS(n.getNode())&&Je.preventDefault()}),e.on("GetSelectionRange",Je=>{let ze=Je.range;if(y){if(!y.parentNode){y=null;return}ze=ze.cloneRange(),ze.selectNode(y),Je.range=ze}}),e.on("SetSelectionRange",Je=>{Je.range=ue(Je.range);const ze=Oe(Je.range,Je.forward);ze&&(Je.range=ze)});const Kt=Je=>Wt(Je)&&Je.id==="mcepastebin";e.on("AfterSetSelectionRange",Je=>{const ze=Je.range,ut=ze.startContainer.parentElement;!ee(ze)&&!Kt(ut)&&Ot(),S(ut)||$e()}),e$(e),aj(e),pR(e)},re=Kt=>tl(Kt)||Vm(Kt)||ko(Kt),ee=Kt=>re(Kt.startContainer)||re(Kt.endContainer),ue=Kt=>{const Je=e.schema.getVoidElements(),ze=o.createRng(),ut=Kt.startContainer,rn=Kt.startOffset,wn=Kt.endContainer,go=Kt.endOffset;return Sn(Je,ut.nodeName.toLowerCase())?rn===0?ze.setStartBefore(ut):ze.setStartAfter(ut):ze.setStart(ut,rn),Sn(Je,wn.nodeName.toLowerCase())?go===0?ze.setEndBefore(wn):ze.setEndAfter(wn):ze.setEnd(wn,go),ze},we=(Kt,Je)=>{const ze=be.fromDom(e.getBody()),ut=e.getDoc(),rn=mn(ze,"#"+u).getOrThunk(()=>{const wo=be.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ut);return js(wo,"id",u),rr(ze,wo),wo}),wn=o.createRng();ad(rn),xu(rn,[be.fromText(Xr,ut),be.fromDom(Je),be.fromText(Xr,ut)]),wn.setStart(rn.dom.firstChild,1),wn.setEnd(rn.dom.lastChild,0),Yn(rn,{top:o.getPos(Kt,e.getBody()).y+"px"}),R0(rn);const go=n.getSel();return go&&(go.removeAllRanges(),go.addRange(wn)),wn},De=Kt=>{const Je=Kt.cloneNode(!0),ze=e.dispatch("ObjectSelected",{target:Kt,targetClone:Je});if(ze.isDefaultPrevented())return null;const ut=we(Kt,ze.targetClone),rn=be.fromDom(Kt);return Se(ci(be.fromDom(e.getBody()),`*[${m}]`),wn=>{ro(rn,wn)||Cr(wn,m)}),o.getAttrib(Kt,m)||Kt.setAttribute(m,"1"),y=Kt,Ot(),ut},Oe=(Kt,Je)=>{if(!Kt)return null;if(Kt.collapsed){if(!ee(Kt)){const wn=Je?1:-1,go=Z1(wn,r,Kt),wo=go.getNode(!Je);if(Fe(wo)){if(tf(wo))return F(wn,wo,Je?!go.isAtEnd():!1,!1);if(Uf(wo)&&Fo(wo.nextSibling)){const ps=o.createRng();return ps.setStart(wo,0),ps.setEnd(wo,0),ps}}const ns=go.getNode(Je);if(Fe(ns)){if(tf(ns))return F(wn,ns,Je?!1:!go.isAtEnd(),!1);if(Uf(ns)&&Fo(ns.previousSibling)){const ps=o.createRng();return ps.setStart(ns,1),ps.setEnd(ns,1),ps}}}return null}let ze=Kt.startContainer,ut=Kt.startOffset;const rn=Kt.endOffset;if(pt(ze)&&ut===0&&bS(ze.parentNode)&&(ze=ze.parentNode,ut=o.nodeIndex(ze),ze=ze.parentNode),!Wt(ze))return null;if(rn===ut+1&&ze===Kt.endContainer){const wn=ze.childNodes[ut];if(O(wn))return De(wn)}return null},$e=()=>{y&&y.removeAttribute(m),mn(be.fromDom(e.getBody()),"#"+u).each(gs),y=null},ft=()=>{i.destroy(),y=null},Ot=()=>{i.hide()};return uh(e)||Q(),{showCaret:F,showBlockCaretContainer:V,hideFakeCaret:Ot,destroy:ft}},n$=(e,n)=>{let o=n;for(let r=e.previousSibling;pt(r);r=r.previousSibling)o+=r.data.length;return o},vS=(e,n,o,r,i)=>{if(pt(o)&&(r<0||r>o.data.length))return[];const u=i&&pt(o)?[n$(o,r)]:[r];let m=o;for(;m!==n&&m.parentNode;)u.push(e.nodeIndex(m,i)),m=m.parentNode;return m===n?u.reverse():[]},zT=(e,n,o,r,i,u,m=!1)=>{const y=vS(e,n,o,r,m),S=vS(e,n,i,u,m);return{start:y,end:S}},bR=(e,n)=>{const o=n.slice(),r=o.pop();return so(r)?Mo(o,(u,m)=>u.bind(y=>W.from(y.childNodes[m])),W.some(e)).bind(u=>pt(u)&&(r<0||r>u.data.length)?W.none():W.some({node:u,offset:r})):W.none()},o$=(e,n)=>bR(e,n.start).bind(({node:o,offset:r})=>bR(e,n.end).map(({node:i,offset:u})=>{const m=document.createRange();return m.setStart(o,r),m.setEnd(i,u),m})),cj=(e,n,o,r=!1)=>zT(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Lb=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,pt(n.firstChild)&&Tc(n.firstChild.data)),Lb(e,r,o)}},UT=(e,n,o,r=!0)=>{const i=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(pt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),pt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Lb(e,i,o),i!==u&&Lb(e,u,o))},WT=(e,n)=>W.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),vR=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Iw(r).concat(e.blockPatterns),inlinePatterns:Ex(r).concat(e.inlinePatterns)}},yS=(e,n,o,r)=>{const i=e.createRng();return i.setStart(n,0),i.setEnd(o,r),i.toString()},s$=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),ZT=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},r$=(e,n,o)=>{const r=o$(e.getRoot(),o).getOrDie("Unable to resolve path range"),i=r.startContainer,u=r.endContainer,m=r.endOffset===0?u:u.splitText(r.endOffset),y=r.startOffset===0?i:i.splitText(r.startOffset),S=y.parentNode,O=m.parentNode;return{prefix:n,end:O.insertBefore(s$(e,n+"-end"),m),start:S.insertBefore(s$(e,n+"-start"),y)}},a$=(e,n,o)=>{Lb(e,e.get(n.prefix+"-end"),o),Lb(e,e.get(n.prefix+"-start"),o)},yR=e=>e.start.length===0,lj=e=>(n,o)=>{const i=n.data.substring(0,o),u=i.lastIndexOf(e.charAt(e.length-1)),m=i.lastIndexOf(e);return m!==-1?m+e.length:u!==-1?u+1:-1},wR=(e,n,o,r)=>{const i=n.start;return p3(e,r.container,r.offset,lj(i),o).bind(m=>{var y,S;const O=(S=(y=o.textContent)===null||y===void 0?void 0:y.indexOf(i))!==null&&S!==void 0?S:-1;if(O!==-1&&m.offset>=O+i.length){const F=e.createRng();return F.setStart(m.container,m.offset-i.length),F.setEnd(m.container,m.offset),W.some(F)}else{const F=m.offset-i.length;return g3(m.container,F,o).map(V=>{const Q=e.createRng();return Q.setStart(V.container,V.offset),Q.setEnd(m.container,m.offset),Q}).filter(V=>V.toString()===i).orThunk(()=>wR(e,n,o,pf(m.container,0)))}})},i$=(e,n,o,r,i,u=!1)=>{if(n.start.length===0&&!u){const m=e.createRng();return m.setStart(o,r),m.setEnd(o,r),W.some(m)}return h3(o,r,i).bind(m=>wR(e,n,i,m).bind(S=>{var O;if(u){if(S.endContainer===m.container&&S.endOffset===m.offset)return W.none();if(m.offset===0&&((O=S.endContainer.textContent)===null||O===void 0?void 0:O.length)===S.endOffset)return W.none()}return W.some(S)}))},CR=(e,n,o,r)=>{const i=e.dom,u=i.getRoot(),m=o.pattern,y=o.position.container,S=o.position.offset;return g3(y,S-o.pattern.end.length,n).bind(O=>{const L=zT(i,u,O.container,O.offset,y,S,r);if(yR(m))return W.some({matches:[{pattern:m,startRng:L,endRng:L}],position:O});{const F=Sy(e,o.remainingPatterns,O.container,O.offset,n,r),V=F.getOr({matches:[],position:O}),Q=V.position;return i$(i,m,Q.container,Q.offset,n,F.isNone()).map(ee=>{const ue=cj(i,u,ee,r);return{matches:V.matches.concat([{pattern:m,startRng:ue,endRng:L}]),position:pf(ee.startContainer,ee.startOffset)}})}})},Sy=(e,n,o,r,i,u)=>{const m=e.dom;return h3(o,r,m.getRoot()).bind(y=>{const S=yS(m,i,o,r);for(let O=0;O<n.length;O++){const L=n[O];if(!na(S,L.end))continue;const F=n.slice();F.splice(O,1);const V=CR(e,i,{pattern:L,remainingPatterns:F,position:y},u);if(V.isNone()&&r>0)return Sy(e,n,o,r-1,i,u);if(V.isSome())return V}return W.none()})},c$=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?Se(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},SR=(e,n,o,r)=>{const i=ZT(e.dom,o);UT(e.dom,i,r),c$(e,n,i)},uj=(e,n,o,r,i)=>{const u=e.dom,m=ZT(u,r),y=ZT(u,o);UT(u,y,i),UT(u,m,i);const S={prefix:o.prefix,start:o.end,end:r.start},O=ZT(u,S);c$(e,n,O)},dj=(e,n)=>{const o=dv("mce_textpattern"),r=ss(n,(i,u)=>{const m=r$(e,o+`_end${i.length}`,u.endRng);return i.concat([{...u,endMarker:m}])},[]);return ss(r,(i,u)=>{const m=r.length-i.length-1,y=yR(u.pattern)?u.endMarker:r$(e,o+`_start${m}`,u.startRng);return i.concat([{...u,startMarker:y}])},[])},l$=e=>Vo(e,(n,o)=>o.end.length-n.end.length),fj=(e,n)=>{const o=bs(e,r=>Tt(n,i=>r.pattern.start===i.pattern.start&&r.pattern.end===i.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},u$=(e,n,o,r,i,u)=>{const m=Sy(e,i.inlinePatterns,o,r,n,u).fold(()=>[],S=>S.matches),y=Sy(e,l$(i.inlinePatterns),o,r,n,u).fold(()=>[],S=>S.matches);return fj(m,y)},d$=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),i=dj(o,n);Se(i,u=>{const m=o.getParent(u.startMarker.start,o.isBlock),y=S=>S===m;yR(u.pattern)?SR(e,u.pattern,u.endMarker,y):uj(e,u.pattern,u.startMarker,u.endMarker,y),a$(o,u.endMarker,y),a$(o,u.startMarker,y)}),e.selection.moveToBookmark(r)},f$=(e,n,o)=>Xz(n,0,n).map(r=>{const i=r.container;return Q2(i,o.start.length,n).each(u=>{const m=e.createRng();m.setStart(i,0),m.setEnd(u.container,u.offset),UT(e,m,y=>y===n)}),i}),m$=e=>(n,o)=>{const r=n.dom,i=o.pattern,u=o$(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),m=(y,S)=>{const O=S.get(y);return jt(O)&&fo(O).exists(L=>Sn(L,"block"))};return WT(n,u).each(y=>{i.type==="block-format"?m(i.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,y,i),n.formatter.apply(i.format)}):i.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,y,i),n.execCommand(i.cmd,!1,i.value)})}),!0},mj=e=>Vo(e,(n,o)=>o.start.length-n.start.length),h$=e=>(n,o)=>{const r=mj(n),i=o.replace(Xr," ");return Po(r,u=>e(u,o,i))},xR=(e,n)=>(o,r,i,u,m)=>{var y;m===void 0&&(m=(y=r.textContent)!==null&&y!==void 0?y:"");const S=o.dom,O=Si(o);return S.is(r,O)?e(i.blockPatterns,m).map(L=>n&&vt.trim(m).length===L.start.length?[]:[{pattern:L,range:zT(S,S.getRoot(),r,0,r,0,u)}]).getOr([]):[]},hj=e=>/^\s[^\s]/.test(e),gj=m$((e,n,o)=>{f$(e,n,o).each(r=>{const i=be.fromDom(r),u=Lm(i);hj(u)&&gw(i,u.slice(1))})}),pj=h$((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),bj=xR(pj,!0),vj=(e,n)=>{const o=e.selection.getRng();return WT(e,o).map(r=>{var i;const u=Math.max(0,o.startOffset),m=vR(n,r,(i=r.textContent)!==null&&i!==void 0?i:""),y=u$(e,r,o.startContainer,u,m,!0),S=bj(e,r,m,!0);return{inlineMatches:y,blockMatches:S}}).filter(({inlineMatches:r,blockMatches:i})=>i.length>0||r.length>0)},yj=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();Se(n,r=>gj(e,r)),e.selection.moveToBookmark(o)},wj=m$(f$),jT=h$((e,n,o)=>n===e.start||o===e.start),Cj=xR(jT,!1),Sj=(e,n)=>{const o=e.selection.getRng();return WT(e,o).map(r=>{const i=Math.max(0,o.startOffset),u=yS(e.dom,r,o.startContainer,i),m=vR(n,r,u);return Cj(e,r,m,!1,u)}).filter(r=>r.length>0)},xj=(e,n)=>{Se(n,o=>wj(e,o))},Ej=(e,n)=>vj(e,n).fold(tt,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{Rk(e),d$(e,o),yj(e,r);const i=e.selection.getRng(),u=h3(i.startContainer,i.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(m=>{const y=m.container;y.data.charAt(m.offset-1)===Gg&&(y.deleteData(m.offset-1,1),Lb(e.dom,y.parentNode,S=>S===e.dom.getRoot()))})}),!0)),_j=(e,n)=>{const o=e.selection.getRng();WT(e,o).map(r=>{const i=Math.max(0,o.startOffset-1),u=yS(e.dom,r,o.startContainer,i),m=vR(n,r,u),y=u$(e,r,o.startContainer,i,m,!1);y.length>0&&e.undoManager.transact(()=>{d$(e,y)})})},Tj=(e,n)=>Sj(e,n).fold(tt,o=>(e.undoManager.transact(()=>{xj(e,o)}),!0)),p$=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},kj=(e,n)=>p$(e,n,(o,r)=>o===r.keyCode&&!bt.modifierPressed(r)),Aj=(e,n)=>p$(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),b$=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>ug(qx(e).filter(m=>m.type==="inline-command"||m.type==="block-command"?e.queryCommandSupported(m.cmd):!0),Kw(e)),i=()=>xl(e);e.on("keydown",m=>{if(m.keyCode===13&&!bt.modifierPressed(m)&&e.selection.isCollapsed()){const y=Ua(r(),"enter");(y.inlinePatterns.length>0||y.blockPatterns.length>0||i())&&Ej(e,y)&&m.preventDefault()}},!0),e.on("keydown",m=>{if(m.keyCode===32&&e.selection.isCollapsed()){const y=Ua(r(),"space");(y.blockPatterns.length>0||i())&&Tj(e,y)&&m.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const m=Ua(r(),"space");(m.inlinePatterns.length>0||i())&&_j(e,m)}};e.on("keyup",m=>{kj(o,m)&&u()}),e.on("keypress",m=>{Aj(n,m)&&$u.setEditorTimeout(e,u)})},Oj=e=>{b$(e)},v$=e=>{const n=vt.each,o=bt.BACKSPACE,r=bt.DELETE,i=e.dom,u=e.selection,m=e.parser,y=pn.browser,S=y.isFirefox(),O=y.isChromium()||y.isSafari(),L=pn.deviceType.isiPhone()||pn.deviceType.isiPad(),F=pn.os.isMacOS()||pn.os.isiOS(),V=(zt,Tn)=>{try{e.getDoc().execCommand(zt,!1,String(Tn))}catch{}},Q=zt=>zt.isDefaultPrevented(),re=()=>{const zt=mo=>{const Gt=i.create("body"),ho=mo.cloneContents();return Gt.appendChild(ho),u.serializer.serialize(Gt,{format:"html"})},Tn=mo=>{const Gt=zt(mo),ho=i.createRng();ho.selectNode(e.getBody());const Co=zt(ho);return Gt===Co};e.on("keydown",mo=>{const Gt=mo.keyCode;if(!Q(mo)&&(Gt===r||Gt===o)&&e.selection.isEditable()){const ho=e.selection.isCollapsed(),Co=e.getBody();if(ho&&!Au(e.schema,Co)||!ho&&!Tn(e.selection.getRng()))return;mo.preventDefault(),e.setContent(""),Co.firstChild&&i.isBlock(Co.firstChild)?e.selection.setCursorLocation(Co.firstChild,0):e.selection.setCursorLocation(Co,0),e.nodeChanged()}})},ee=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ue=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",zt=>{let Tn;if(zt.target===e.getDoc().documentElement)if(Tn=u.getRng(),e.getBody().focus(),zt.type==="mousedown"){if(tl(Tn.startContainer))return;u.placeCaretAt(zt.clientX,zt.clientY)}else u.setRng(Tn)})},we=()=>{e.on("keydown",zt=>{if(!Q(zt)&&zt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Tn=u.getNode(),mo=Tn.previousSibling;if(Tn.nodeName==="HR"){i.remove(Tn),zt.preventDefault();return}mo&&mo.nodeName&&mo.nodeName.toLowerCase()==="hr"&&(i.remove(mo),zt.preventDefault())}}})},De=()=>{Range.prototype.getClientRects||e.on("mousedown",zt=>{if(!Q(zt)&&zt.target.nodeName==="HTML"){const Tn=e.getBody();Tn.blur(),$u.setEditorTimeout(e,()=>{Tn.focus()})}})},Oe=()=>{const zt=Zw(e);e.on("click",Tn=>{const mo=Tn.target;/^(IMG|HR)$/.test(mo.nodeName)&&i.isEditable(mo)&&(Tn.preventDefault(),e.selection.select(mo),e.nodeChanged()),mo.nodeName==="A"&&i.hasClass(mo,zt)&&mo.childNodes.length===0&&i.isEditable(mo.parentNode)&&(Tn.preventDefault(),u.select(mo))})},$e=()=>{const zt=()=>{const mo=i.getAttribs(u.getStart().cloneNode(!1));return()=>{const Gt=u.getStart();Gt!==e.getBody()&&(i.setAttrib(Gt,"style",null),n(mo,ho=>{Gt.setAttributeNode(ho.cloneNode(!0))}))}},Tn=()=>!u.isCollapsed()&&i.getParent(u.getStart(),i.isBlock)!==i.getParent(u.getEnd(),i.isBlock);e.on("keypress",mo=>{let Gt;return!Q(mo)&&(mo.keyCode===8||mo.keyCode===46)&&Tn()?(Gt=zt(),e.getDoc().execCommand("delete",!1),Gt(),mo.preventDefault(),!1):!0}),i.bind(e.getDoc(),"cut",mo=>{if(!Q(mo)&&Tn()){const Gt=zt();$u.setEditorTimeout(e,()=>{Gt()})}})},ft=()=>{e.on("keydown",zt=>{if(!Q(zt)&&zt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Tn=u.getNode().previousSibling;if(Tn&&Tn.nodeName&&Tn.nodeName.toLowerCase()==="table")return zt.preventDefault(),!1}return!0})},Ot=()=>{e.on("keydown",zt=>{if(Q(zt)||zt.keyCode!==bt.BACKSPACE)return;let Tn=u.getRng();const mo=Tn.startContainer,Gt=Tn.startOffset,ho=i.getRoot();let Co=mo;if(!(!Tn.collapsed||Gt!==0)){for(;Co.parentNode&&Co.parentNode.firstChild===Co&&Co.parentNode!==ho;)Co=Co.parentNode;Co.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Co),Tn=i.createRng(),Tn.setStart(mo,0),Tn.setEnd(mo,0),u.setRng(Tn))}})},Kt=()=>{const zt=()=>{V("StyleWithCSS",!1),V("enableInlineTableEditing",!1),Sl(e)||V("enableObjectResizing",!1)};Lx(e)||e.on("BeforeExecCommand mousedown",zt)},Je=()=>{const zt=()=>{n(i.select("a:not([data-mce-block])"),Tn=>{var mo;let Gt=Tn.parentNode;const ho=i.getRoot();if((Gt==null?void 0:Gt.lastChild)===Tn){for(;Gt&&!i.isBlock(Gt);){if(((mo=Gt.parentNode)===null||mo===void 0?void 0:mo.lastChild)!==Gt||Gt===ho)return;Gt=Gt.parentNode}i.add(Gt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Tn=>{(Tn.type==="setcontent"||Tn.command==="mceInsertLink")&&zt()})},ze=()=>{e.on("init",()=>{V("DefaultParagraphSeparator",Si(e))})},ut=zt=>{const Tn=zt.getBody(),mo=zt.selection.getRng();return mo.startContainer===mo.endContainer&&mo.startContainer===Tn&&mo.startOffset===0&&mo.endOffset===Tn.childNodes.length},rn=()=>{e.on("keyup focusin mouseup",zt=>{!bt.modifierPressed(zt)&&!ut(e)&&u.normalize()},!0)},wn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},go=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},wo=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",zt=>{let Tn;zt.target.nodeName==="HTML"&&(Tn=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Tn),e.selection.normalize(),e.nodeChanged())}))},ns=()=>{F&&e.on("keydown",zt=>{bt.metaKeyPressed(zt)&&!zt.shiftKey&&(zt.keyCode===37||zt.keyCode===39)&&(zt.preventDefault(),e.selection.getSel().modify("move",zt.keyCode===37?"backward":"forward","lineboundary"))})},ps=()=>{e.on("click",zt=>{let Tn=zt.target;do if(Tn.tagName==="A"){zt.preventDefault();return}while(Tn=Tn.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Lr=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",zt=>{zt.preventDefault()})})},Ea=()=>{m.addNodeFilter("br",zt=>{let Tn=zt.length;for(;Tn--;)zt[Tn].attr("class")==="Apple-interchange-newline"&&zt[Tn].remove()})},Ts=Pe,Bt=()=>{if(!S||e.removed)return!1;const zt=e.selection.getSel();return!zt||!zt.rangeCount||zt.rangeCount===0},vn=()=>{O&&(ue(),Oe(),Lr(),ee(),L&&(go(),wo(),ps())),S&&(De(),Kt(),wn(),ns())},$o=()=>{Ot(),re(),pn.windowsPhone||rn(),O&&(ue(),Oe(),ze(),Lr(),ft(),Ea(),L?(go(),wo(),ps()):ee()),S&&(we(),De(),$e(),Kt(),Je(),wn(),ns(),ft())};return uh(e)?vn():$o(),{refreshContentEditable:Ts,isHidden:Bt}},Dj=e=>e.toLowerCase()==="gpl",Rj=e=>e.length>=64&&e.length<=255,y$=e=>Dj(e)||Rj(e)?"VALID":"INVALID",wS=e=>{const n=Xx(e);!ce(Jx(e))&&(Bn(n)||y$(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},ER=Ks.DOM,w$=(e,n)=>{const o=be.fromDom(e.getBody()),r=Df(jc(o)),i=be.fromTag("style");js(i,"type","text/css"),rr(i,be.fromText(n)),rr(r,i),e.on("remove",()=>{gs(i)})},Mj=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,_R=e=>Wo(e,n=>Bn(n)===!1),C$=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return _R({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:Mj(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:Zv(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},S$=e=>{const n=e.options.get;return _R({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},x$=e=>{const n=e.options.get;return{...C$(e),...S$(e),..._R({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},Nj=e=>{const n=Y0(C$(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const i=e.dom,u="data-mce-"+r;let m=o.length;for(;m--;){const y=o[m];let S=y.attr(r);if(S&&!y.attr(u)){if(S.indexOf("data:")===0||S.indexOf("blob:")===0)continue;r==="style"?(S=i.serializeStyle(i.parseStyle(S),y.name),S.length||(S=null),y.attr(u,S),y.attr(r,S)):r==="tabindex"?(y.attr(u,S),y.attr(r,null)):y.attr(u,e.convertURL(S,r,y.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const i=o[r],u=i.attr("type")||"no/type";u.indexOf("mce-")!==0&&i.attr("type","mce-"+u)}}),Uv(e)&&n.addNodeFilter("#cdata",o=>{var r;let i=o.length;for(;i--;){const u=o[i];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const i=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(i)&&u.getAll("br").length===0&&u.append(new cl("br",1))}}),n},E$=e=>{const n=$x(e);n&&$u.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},Pj=e=>{const n=e.dom.getRoot();!e.inline&&(!Ap(e)||e.selection.getStart(!0)===n)&&_i(n).each(o=>{const r=o.getNode(),i=ql(r)?_i(r).getOr(o):o;e.selection.setRng(i.toRange())})},Bj=e=>{e.bindPendingEventDelegates(),e.initialized=!0,FA(e),e.focus(!0),Pj(e),e.nodeChanged({initial:!0});const n=lA(e);ve(n)&&n.call(e,e),E$(e)},TR=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,Ij=(e,n,o)=>{const{pass:r,fail:i}=To(n,y=>tinymce.Resource.has(_2(y))),m=[...r.map(y=>{const S=tinymce.Resource.get(_2(y));return ce(S)?Promise.resolve(TR(e).loadRawCss(y,S)):Promise.resolve()}),TR(e).loadAll(i)];return e.inline?m:m.concat([e.ui.styleSheetLoader.loadAll(o)])},_$=e=>{const n=TR(e),o=Nc(e),r=e.contentCSS,i=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){let S="";vt.each(e.contentStyles,O=>{S+=O+`\r
`}),e.dom.addStyle(S)}const m=Promise.all(Ij(e,r,o)).then(u).catch(u),y=oA(e);return y&&w$(e,y),m},Lj=e=>{const n=e.getDoc(),o=e.getBody();_0(e),qw(e)||(n.body.spellcheck=!1,ER.setAttrib(o,"spellcheck","false")),e.quirks=v$(e),kE(e);const r=AM(e);r!==void 0&&(o.dir=r);const i=Gw(e);i&&e.on("BeforeSetContent",u=>{vt.each(i,m=>{u.content=u.content.replace(m,y=>"<!--mce:protected "+escape(y)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},Fj=e=>{uh(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},kR=e=>{e.removed!==!0&&(Fj(e),Bj(e))},$j=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},AR=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(ER.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Lx(e),e._editableRoot=iA(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&ER.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=a4(e),e.schema=Kd(S$(e)),e.dom=Ks(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Rx(e),referrerPolicy:Nv(e),onSetAttrib:m=>{e.dispatch("SetAttrib",m)}}),e.parser=Nj(e),e.serializer=zi(x$(e),e),e.selection=i9(e.dom,e.getWin(),e.serializer,e),e.annotator=C0(e),e.formatter=am(e),e.undoManager=sy(e),e._nodeChangeDispatcher=new nF(e),e._selectionOverrides=ij(e),uz(e),BF(e),pz(e),uh(e)||(HF(e),Oj(e));const i=DT(e);bL(e,i),X4(e),eV(e),kZ(e);const u=zH(e);Lj(e),wS(e),u.fold(()=>{const m=$j(e);_$(e).then(()=>{kR(e),m()})},m=>{e.setProgressState(!0),_$(e).then(()=>{m().then(y=>{e.setProgressState(!1),kR(e),YD(e)},y=>{e.notificationManager.open({type:"error",text:String(y)}),kR(e),YD(e)})})})},OR=yt,T$=(e,n,o)=>k(e,n,OR,o),qT=Ks.DOM,Hj=(e,n,o,r)=>{const i=be.fromTag("iframe");return r.each(u=>js(i,"tabindex",u)),Zc(i,o),Zc(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),gl(i,"tox-edit-area__iframe"),i},Vj=e=>{let n=Xk(e)+"<html><head>";ui(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Jk(e),r=Km(e),i=e.translate(jw(e));return Hw(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Hw(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${i}"><br></body></html>`,n},zj=(e,n)=>{const o=pn.browser.isFirefox()?jw(e):"Rich Text Area",r=e.translate(o),i=wr(be.fromDom(e.getElement()),"tabindex").bind(Qi),u=Hj(e.id,r,Tx(e),i).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=Vj(e),qT.add(n.iframeContainer,u)},k$=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,AR(e)};if(OM(e)||pn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=T$(be.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},A$=(e,n)=>{zj(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=qT.isHidden(n.editorContainer)),e.getElement().style.display="none",qT.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,k$(e)},O$=Ks.DOM,Uj=(e,n,o)=>{const r=ey.get(o),i=ey.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=vt.trim(o),r&&vt.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,i)||{};e.plugins[o]=u,ve(u.init)&&(u.init(e,i),n.push(o))}catch(u){L9(e,o,u)}}},DR=e=>e.replace(/^\-/,""),GT=e=>{const n=[];Se($v(e),o=>{Uj(e,n,DR(o))})},KT=e=>{const n=vt.trim(wa(e)),o=e.ui.registry.getAll().icons,r={...j_.get("default").icons,...j_.get(n).icons};kt(r,(i,u)=>{Sn(o,u)||e.ui.registry.addIcon(u,i)})},Hg=e=>{const n=Jm(e);if(ce(n)){const o=jp.get(n);e.theme=o(e,jp.urls[n])||{},ve(e.theme.init)&&e.theme.init(e,jp.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},YT=e=>{const n=Iv(e),o=Q0.get(n);e.model=o(e,Q0.urls[n])},xy=e=>{const n=e.theme.renderUI;return n?n():RR(e)},D$=e=>{const n=e.getElement(),r=Jm(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},R$=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),Wj=e=>{const n=O$.create("div");return O$.insertAfter(n,e),R$(n,n)},RR=e=>{const n=e.getElement();return e.inline?R$(null):Wj(n)},Zj=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ce(Jm(e))?xy(e):ve(Jm(e))?D$(e):RR(e)},MR=(e,n)=>{const o={show:W.from(n.show).getOr(Pe),hide:W.from(n.hide).getOr(Pe),isEnabled:W.from(n.isEnabled).getOr(yt),setEnabled:r=>{e.mode.isReadOnly()||W.from(n.setEnabled).each(i=>i(r))}};e.ui={...e.ui,...o}},XT=async e=>{e.dispatch("ScriptsLoaded"),KT(e),Hg(e),YT(e),GT(e);const n=await Zj(e);MR(e,W.from(n.api).getOr({})),e.editorContainer=n.editorContainer,fs(e),e.inline?AR(e):A$(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Ku=Ks.DOM,c1=e=>e.charAt(0)==="-",M$=(e,n)=>{const o=Xm(n),r=Pv(n);if(!za.hasCode(o)&&o!=="en"){const i=xo(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(i).catch(()=>{P9(n,i,o)})}},jj=(e,n)=>{const o=Jm(e);if(ce(o)&&!c1(o)&&!Sn(jp.urls,o)){const r=Vw(e),i=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;jp.load(o,i).catch(()=>{B9(e,i,o)})}},qj=(e,n)=>{const o=Iv(e);if(o!=="plugin"&&!Sn(Q0.urls,o)){const r=Nx(e),i=ce(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Q0.load(o,i).catch(()=>{I9(e,i,o)})}},Gj=e=>W.from(Ca(e)).filter(xo).map(n=>({url:n,name:W.none()})),N$=(e,n,o)=>W.from(n).filter(r=>xo(r)&&!j_.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:W.some(r)})),Kj=(e,n,o)=>{const r=N$(n,"default",o),i=Gj(n).orThunk(()=>N$(n,wa(n),""));Se(ni([r,i]),u=>{e.add(u.url).catch(()=>{mI(n,u.url,u.name.getOrUndefined())})})},Yj=(e,n)=>{const o=(r,i)=>{ey.load(r,i).catch(()=>{N9(e,i,r)})};kt(cA(e),(r,i)=>{o(i,r),e.options.set("plugins",$v(e).concat(i))}),Se($v(e),r=>{r=vt.trim(r),r&&!ey.urls[r]&&!c1(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},P$=e=>{const n=Jm(e);return!ce(n)||Fe(jp.get(n))},Xj=e=>{const n=Iv(e);return Fe(Q0.get(n))},Jj=(e,n)=>{const o=gd.ScriptLoader,r=()=>{!e.removed&&P$(e)&&Xj(e)&&XT(e)};jj(e,n),qj(e,n),M$(o,e),Kj(o,e,n),Yj(e,n),o.loadQueue().then(r,r)},Qj=(e,n)=>Ms.forElement(e,{contentCssCors:Uw(n),referrerPolicy:Nv(n)}),OY=e=>{const n=e.id;za.setCode(Xm(e));const o=()=>{Ku.unbind(window,"ready",o),e.render()};if(!Nm.Event.domLoaded){Ku.bind(window,"ready",o);return}if(!e.getElement())return;const r=be.fromDom(e.getElement()),i=gu(r);e.on("remove",()=>{_o(r.dom.attributes,m=>Cr(r,m.name)),Zc(r,i)}),e.ui.styleSheetLoader=Qj(r,e),$1(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Ku.getParent(n,"form");u&&(e.formElement=u,sA(e)&&!ar(e.getElement())&&(Ku.insertAfter(Ku.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=m=>{e.dispatch(m.type,m)},Ku.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Lv(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=dI(e),e.notificationManager=uI(e),Qm(e)&&e.on("GetContent",m=>{m.save&&(m.content=Ku.encode(m.content))}),rA(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Ix(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),Jj(e,e.suffix)},eq=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),ME(e,n))},NR=e=>e._editableRoot,tq=(e,n)=>({sections:ct(e),options:ct(n)}),B$=St().deviceType,PR=B$.isPhone(),nq=B$.isTablet(),Ey=e=>{if(Qt(e))return[];{const n=jt(e)?e:e.split(/[ ,]/),o=dt(n,kr);return Zt(o,xo)}},oq=(e,n)=>{const o=Ja(n,(r,i)=>et(e,i));return tq(o.t,o.f)},BR=(e,n,o={})=>{const r=e.sections(),i=zo(r,n).getOr({});return vt.extend({},o,i)},IR=(e,n)=>Sn(e.sections(),n),sq=(e,n)=>IR(e,n)?e.sections()[n]:{},rq=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:zo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),aq=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?vt.extend({},e.external_plugins,r):r},I$=(e,n)=>[...Ey(e),...Ey(n)],LR=(e,n,o,r)=>e&&IR(n,"mobile")?r:o,L$=(e,n,o,r)=>{const i=Ey(o.forced_plugins),u=Ey(r.plugins),m=sq(n,"mobile"),y=m.plugins?Ey(m.plugins):u,S=LR(e,n,u,y),O=I$(i,S);return vt.extend(r,{forced_plugins:i,plugins:O})},FR=(e,n)=>e&&IR(n,"mobile"),iq=(e,n,o,r,i)=>{var u;const m=e?{mobile:rq((u=i.mobile)!==null&&u!==void 0?u:{},n)}:{},y=oq(["mobile"],cu(m,i)),S=vt.extend(o,r,y.options(),FR(e,y)?BR(y,"mobile"):{},{external_plugins:aq(r,y.options())});return L$(e,y,r,S)},DY=(e,n)=>{const o=fy(n);return iq(PR||nq,PR,o,e,o)},RY=(e,n)=>JH(e,n),cq=e=>{const n=(r,i)=>{e.formatter.toggle(r,i),e.nodeChanged()},o=r=>()=>{Se("left,center,right,justify".split(","),i=>{r!==i&&e.formatter.remove("align"+i)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},F$=e=>{const n=o=>()=>{const r=e.selection,i=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Tt(i,u=>Fe(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},lq=e=>{cq(e),F$(e)},uq=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(pn.os.isMacOS()||pn.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:i,type:"error"})}}})},dq=(e,n,o,r)=>{const i=be.fromDom(e.getRoot());return VC(i,Ge.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),L0(i,Ge.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},MY=e=>{if(typeof e!="string"){const n=vt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},NY=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?dq(r,o.getRng(),n,e.schema):n},CS=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=MY(n);P_(e,{...r,content:NY(e,o),format:"html",set:!1,selection:!0}).each(i=>{const u=YH(e,i.content,r);OD(e,u,i),e.addVisual()})}},$$=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{CS(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{CS(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{CS(e,r)},mceInsertContent:(n,o,r)=>{CS(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Ux(e))}})},fq={"font-size":"size","font-family":"face"},mq=si("font"),hq=(e,n,o)=>{const r=u=>Ra(u,e).orThunk(()=>mq(u)?zo(fq,e).bind(m=>wr(u,m)):W.none()),i=u=>ro(be.fromDom(n),u);return o2(be.fromDom(o),u=>r(u),i)},PY=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),BY=(e,n)=>W.from(Ks.DOM.getStyle(n,e,!0)),gq=e=>(n,o)=>W.from(o).map(be.fromDom).filter(Fa).bind(r=>hq(e,n,r.dom).or(BY(e,r.dom))).getOr(""),pq=gq("font-size"),IY=N(PY,gq("font-family")),bq=e=>_i(e.getBody()).bind(n=>{const o=n.container();return W.from(pt(o)?o.parentNode:o)}),Fb=e=>W.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?W.none():W.from(e.selection.getStart(!0))}),$R=(e,n)=>Fb(e).orThunk(nt(bq,e)).map(be.fromDom).filter(Fa).bind(n),_y=(e,n)=>$R(e,an(W.some,n)),HR=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Yw(e),i=mA(e);return i.length>0?i[o-1]||n:r[o-1]||n}else return n}else return n},H$=e=>{const n=e.split(/\s*,\s*/);return dt(n,o=>o.indexOf(" ")!==-1&&!(es(o,'"')||es(o,"'"))?`'${o}'`:o).join(",")},V$=(e,n)=>{const o=HR(e,n);e.formatter.toggle("fontname",{value:H$(o)}),e.nodeChanged()},vq=e=>_y(e,n=>IY(e.getBody(),n.dom)).getOr(""),yq=(e,n)=>{e.formatter.toggle("fontsize",{value:HR(e,n)}),e.nodeChanged()},wq=e=>_y(e,n=>pq(e.getBody(),n.dom)).getOr(""),Cq=e=>_y(e,n=>{const o=be.fromDom(e.getBody()),r=o2(n,u=>Ra(u,"line-height"),nt(ro,o)),i=()=>{const u=parseFloat(Wr(n,"line-height")),m=parseFloat(Wr(n,"font-size"));return String(u/m)};return r.getOrThunk(i)}).getOr(""),Sq=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},xq=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,i)=>{n(o,{value:i})},BackColor:(o,r,i)=>{n("hilitecolor",{value:i})},FontName:(o,r,i)=>{V$(e,i)},FontSize:(o,r,i)=>{yq(e,i)},LineHeight:(o,r,i)=>{Sq(e,i)},Lang:(o,r,i)=>{var u;n(o,{value:i.code,customValue:(u=i.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,i)=>{n(ce(i)?i:"p")},mceToggleFormat:(o,r,i)=>{n(i)}})},l1=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>vq(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>wq(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>Cq(e))},Eq=e=>{xq(e),l1(e)},z$=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},_q=e=>{e.editorCommands.addCommands({Indent:()=>{e1(e)},Outdent:()=>{G4(e)}}),e.editorCommands.addCommands({Outdent:()=>Qp(e)},"state")},JT=e=>{const n=(o,r,i)=>{const u=ce(i)?{href:i}:i,m=e.dom.getParent(e.selection.getNode(),"a");Ke(u)&&ce(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!m||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,m))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},Tq=(e,n,o,r)=>{const i=e.dom,u=y=>i.isBlock(y)&&y.parentElement===o,m=u(n)?n:i.getParent(r,u,o);return W.from(m).map(be.fromDom)},U$=(e,n)=>{const o=e.dom,r=e.selection.getRng(),i=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,m=rS(o,u);if(!m||!m.isContentEditable)return;const y=n?ii:qi,S=Si(e);Tq(e,i,m,u).each(O=>{const L=_5(e,u,O.dom,m,!1,S);y(O,be.fromDom(L)),e.selection.setCursorLocation(L,0),e.dispatch("NewBlock",{newBlock:L}),Pb(e,"insertParagraph")})},kq=e=>U$(e,!0),W$=e=>U$(e,!1),Aq=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{kq(e)},InsertNewBlockAfter:()=>{W$(e)}})},Oq=e=>{e.editorCommands.addCommands({insertParagraph:()=>{gy(P5,e)},mceInsertNewLine:(n,o,r)=>{U5(e,r)},InsertLineBreak:(n,o,r)=>{gy(I5,e)}})},Dq=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let i=0;e.dom.getParent(e.selection.getNode(),u=>Wt(u)&&i++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),rt);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},Rq=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const i=r??e.selection.getNode();if(i!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{p7(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},VR=e=>{lq(e),uq(e),z$(e),Dq(e),$$(e),JT(e),_q(e),Aq(e),Oq(e),Eq(e),Rq(e)},Mq=["toggleview"],Z$=e=>et(Mq,e.toLowerCase());class Na{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,i){const u=this.editor,m=n.toLowerCase(),y=i==null?void 0:i.skip_focus;if(u.removed||(m!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(m)&&!y?u.focus():VM(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const O=this.commands.exec[m];return ve(O)?(O(m,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!Z$(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return ve(r)?r(o):!1}queryCommandValue(n){if(!Z$(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return ve(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;kt(n,(i,u)=>{Se(u.toLowerCase().split(","),m=>{r[o][m]=i})})}addCommand(n,o,r){const i=n.toLowerCase();this.commands.exec[i]=(u,m,y)=>o.call(r??this.editor,m,y)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const $b="data-mce-contenteditable",Nq=(e,n,o)=>{Hl(e,n)&&!o?vu(e,n):o&&gl(e,n)},SS=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},xS=(e,n)=>{e.dom.contentEditable=n?"true":"false"},zR=e=>{Se(ci(e,'*[contenteditable="true"]'),n=>{js(n,$b,"true"),xS(n,!1)})},Pq=e=>{Se(ci(e,`*[${$b}="true"]`),n=>{Cr(n,$b),xS(n,!0)})},Bq=e=>{W.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},Iq=e=>{e.selection.setRng(e.selection.getRng())},Lq=(e,n)=>{const o=be.fromDom(e.getBody());Nq(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),Bq(e),e.readonly=!0,xS(o,!1),zR(o)):(e.readonly=!1,e.hasEditableRoot()&&xS(o,!0),Pq(o),SS(e,"StyleWithCSS",!1),SS(e,"enableInlineTableEditing",!1),SS(e,"enableObjectResizing",!1),eN(e)&&e.focus(),Iq(e),e.nodeChanged())},Hb=e=>e.readonly,j$=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Hb(e)&&Se(n,o=>{o.attr($b,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter($b,n=>{Hb(e)&&Se(n,o=>{o.attr("contenteditable",o.attr($b))})}),e.serializer.addTempAttr($b)},Fq=e=>{e.serializer?j$(e):e.on("PreInit",()=>{j$(e)})},$q=e=>e.type==="click",Ty=["copy"],um=e=>et(Ty,e.type),Hq=(e,n)=>Wl(n,"a",r=>ro(r,be.fromDom(e.getBody()))).bind(r=>wr(r,"href")),Vq=(e,n)=>{if($q(n)&&!bt.metaKeyPressed(n)){const o=be.fromDom(n.target);Hq(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const i=e.dom.select(`${r},[name="${Ps(r,"#")}"]`);i.length&&e.selection.scrollIntoView(i[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else um(n)&&e.dispatch(n.type,n)},zq=e=>{e.on("ShowCaret",n=>{Hb(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{Hb(e)&&n.preventDefault()})},Uq=vt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class UR{static isNative(n){return!!Uq[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||tt}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),i=ew(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const u=this.bindings[r];if(u)for(let m=0,y=u.length;m<y;m++){const S=u[m];if(!S.removed){if(S.once&&this.off(r,S.func),i.isImmediatePropagationStopped())return i;if(S.func.call(this.scope,i)===!1)return i.preventDefault(),i}}return i}on(n,o,r,i){if(o===!1&&(o=tt),o){const u={func:o,removed:!1};i&&vt.extend(u,i);const m=n.toLowerCase().split(" ");let y=m.length;for(;y--;){const S=m[y];let O=this.bindings[S];O||(O=[],this.toggleEvent(S,!0)),r?O=[u,...O]:O=[...O,u],this.bindings[S]=O}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let i=r.length;for(;i--;){const u=r[i];let m=this.bindings[u];if(!u)return kt(this.bindings,(y,S)=>{this.toggleEvent(S,!1),delete this.bindings[S]}),this;if(m){if(!o)m.length=0;else{const y=To(m,S=>S.func===o);m=y.fail,this.bindings[u]=m,Se(y.pass,S=>{S.removed=!0})}m.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else kt(this.bindings,(r,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const ES=e=>(e._eventDispatcher||(e._eventDispatcher=new UR({scope:e,toggleEvent:(n,o)=>{UR.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),WR={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return ew(e.toLowerCase(),n??{},r);const i=ES(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!i.isPropagationStopped();)u.dispatch(e,i,!1),u=u.parent?u.parent():void 0}return i},on(e,n,o){return ES(this).on(e,n,o)},off(e,n){return ES(this).off(e,n)},once(e,n){return ES(this).once(e,n)},hasEventListeners(e){return ES(this).has(e)}},QT=Ks.DOM;let Vb;const ZR=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=vd(e);return o?(e.eventRoot||(e.eventRoot=QT.select(o)[0]),e.eventRoot):e.getBody()},Wq=e=>!e.hidden&&!Hb(e),q$=(e,n,o)=>{Wq(e)?e.dispatch(n,o):Hb(e)&&Vq(e,o)},G$=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=ZR(e,n);if(vd(e)){if(Vb||(Vb={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Vb&&(kt(Vb,(i,u)=>{e.dom.unbind(ZR(e,u))}),Vb=null)})),Vb[n])return;const r=i=>{const u=i.target,m=e.editorManager.get();let y=m.length;for(;y--;){const S=m[y].getBody();(S===u||QT.isChildOf(u,S))&&q$(m[y],n,i)}};Vb[n]=r,QT.bind(o,n,r)}else{const r=i=>{q$(e,n,i)};QT.bind(o,n,r),e.delegates[n]=r}},K$={...WR,bindPendingEventDelegates(){const e=this;vt.each(e._pendingNativeEvents,n=>{G$(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?G$(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(ZR(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(kt(e.delegates,(r,i)=>{e.dom.unbind(ZR(e,i),i,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},Zq=e=>ce(e)?{value:e.split(/[ ,]/),valid:!0}:Me(e,ce)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},jq=e=>{const n=(()=>{switch(e){case"array":return jt;case"boolean":return Jt;case"function":return ve;case"number":return so;case"object":return Ke;case"string":return ce;case"string[]":return Zq;case"object[]":return o=>Me(o,Ke);case"regexp":return o=>Nt(o,RegExp);default:return yt}})();return o=>jR(o,n,`The value must be a ${e}.`)},LY=e=>ce(e.processor),Y$=(e,n)=>{const o=sa(n.message)?"":`. ${n.message}`;return e+o},X$=e=>e.valid,jR=(e,n,o="")=>{const r=n(e);return Jt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},qq=(e,n,o)=>{if(!Bn(n)){const r=jR(n,o);if(X$(r))return r.value;console.error(Y$(`Invalid default value passed for the "${e}" option`,r))}},Gq=(e,n,o=n)=>{const r={},i={},u=(Q,re,ee)=>{const ue=jR(re,ee);return X$(ue)?(i[Q]=ue.value,!0):(console.warn(Y$(`Invalid value passed for the ${Q} option`,ue)),!1)},m=(Q,re)=>{const ee=LY(re)?jq(re.processor):re.processor,ue=qq(Q,re.default,ee);r[Q]={...re,default:ue,processor:ee},zo(i,Q).orThunk(()=>zo(n,Q)).each(De=>u(Q,De,ee))},y=Q=>Sn(r,Q);return{register:m,isRegistered:y,get:Q=>zo(i,Q).orThunk(()=>zo(r,Q).map(re=>re.default)).getOrUndefined(),set:(Q,re)=>{if(y(Q)){const ee=r[Q];return ee.immutable?(console.error(`"${Q}" is an immutable option and cannot be updated`),!1):u(Q,re,ee.processor)}else return console.warn(`"${Q}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:Q=>{const re=y(Q);return re&&delete i[Q],re},isSet:Q=>Sn(i,Q),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(Q,re)=>Jt(re)||so(re)||ce(re)||ne(re)||jt(re)||Kn(re)?re:Object.prototype.toString.call(re))))}catch(Q){console.error(Q)}}}},Kq=["design","readonly"],J$=(e,n,o,r)=>{const i=o[n.get()],u=o[r];try{u.activate()}catch(m){console.error(`problem while activating editor mode ${r}:`,m);return}i.deactivate(),i.editorReadOnly!==u.editorReadOnly&&Lq(e,u.editorReadOnly),n.set(r),BA(e,r)},Yq=(e,n,o,r)=>{if(r!==o.get()){if(!Sn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?J$(e,o,n,r):e.on("init",()=>J$(e,o,n,r))}},Xq=(e,n,o)=>{if(et(Kq,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},Jq=e=>{const n=Be("design"),o=Be({design:{activate:Pe,deactivate:Pe,editorReadOnly:!1},readonly:{activate:Pe,deactivate:Pe,editorReadOnly:!0}});return Fq(e),zq(e),{isReadOnly:()=>Hb(e),set:r=>Yq(e,o.get(),n,r),get:()=>n.get(),register:(r,i)=>{o.set(Xq(o.get(),r,i))}}},qR=vt.each,GR=vt.explode,Qq={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Q$=vt.makeMap("alt,ctrl,shift,meta,access"),eG=e=>e in Q$,tG=e=>{const n={},o=pn.os.isMacOS()||pn.os.isiOS();qR(GR(e.toLowerCase(),"+"),u=>{eG(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=Qq[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let i;for(i in Q$)n[i]?r.push(i):n[i]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class KR{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(qR(o.shortcuts,i=>{o.matchShortcut(r,i)&&(o.pendingPatterns=i.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(i))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,i){const u=this,m=u.normalizeCommandFunc(r);return qR(GR(vt.trim(n)),y=>{const S=u.createShortcut(y,o,m,i);u.shortcuts[S.id]=S}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:vt.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,i){const u=vt.map(GR(n,">"),tG);return u[u.length-1]=vt.extend(u[u.length-1],{func:r,scope:i||this.editor}),vt.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const nG=()=>{const e={},n={},o={},r={},i={},u={},m={},y={},S=(L,F)=>(V,Q)=>{L[V.toLowerCase()]={...Q,type:F}},O=(L,F)=>r[L.toLowerCase()]=F;return{addButton:S(e,"button"),addGroupToolbarButton:S(e,"grouptoolbarbutton"),addToggleButton:S(e,"togglebutton"),addMenuButton:S(e,"menubutton"),addSplitButton:S(e,"splitbutton"),addMenuItem:S(n,"menuitem"),addNestedMenuItem:S(n,"nestedmenuitem"),addToggleMenuItem:S(n,"togglemenuitem"),addAutocompleter:S(o,"autocompleter"),addContextMenu:S(i,"contextmenu"),addContextToolbar:S(u,"contexttoolbar"),addContextForm:S(u,"contextform"),addSidebar:S(m,"sidebar"),addView:S(y,"views"),addIcon:O,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:i,contextToolbars:u,sidebars:m,views:y})}},oG=()=>{const e=nG();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},zb=Ks.DOM,e6=vt.extend,sG=vt.each;class ek{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,e6(this,K$);const i=this;this.id=n,this.hidden=!1;const u=DY(r.defaultOptions,o);this.options=Gq(i,u,o),_x(i);const m=this.options.get;m("deprecation_warnings")&&C9(o,u);const y=m("suffix");y&&(r.suffix=y),this.suffix=r.suffix;const S=m("base_url");S&&r._setBaseUrl(S),this.baseUri=r.baseURI;const O=Nv(i);O&&(gd.ScriptLoader._setReferrerPolicy(O),Ks.DOM.styleSheetLoader._setReferrerPolicy(O));const L=Uw(i);Fe(L)&&Ks.DOM.styleSheetLoader._setContentCssCors(L),rc.languageLoad=m("language_load"),rc.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new hc(ui(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=$1(i),this.hasVisual=dc(i),this.shortcuts=new KR(this),this.editorCommands=new Na(this),VR(this);const F=m("cache_suffix");F&&(pn.cacheSuffix=F.replace(/^[\?\&]+/,"")),this.ui={registry:oG(),styleSheetLoader:void 0,show:Pe,hide:Pe,setEnabled:Pe,isEnabled:yt},this.mode=Jq(i),r.dispatch("SetupEditor",{editor:this});const V=Hv(i);ve(V)&&V.call(i,i)}render(){OY(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return kg(this)}translate(n){return za.translate(n)}getParam(n,o,r){const i=this.options;return i.isRegistered(n)||(Fe(r)?i.register(n,{processor:r,default:o}):i.register(n,{processor:yt,default:o})),!i.isSet(n)&&!Bn(o)?o:i.get(n)}hasPlugin(n,o){return et($v(this),n)?o?ey.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,i){this.shortcuts.add(n,o,r,i)}execCommand(n,o,r,i){return this.editorCommands.execCommand(n,o,r,i)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(zb.show(n.getContainer()),zb.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(zb.hide(n.getContainer()),zb.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const i={...n,load:!0},u=ar(r)?r.value:r.innerHTML,m=o.setContent(u,i);return i.no_events||o.dispatch("LoadContent",{...i,element:r}),m}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const i={...n,save:!0,element:r};let u=o.getContent(i);const m={...i,content:u};if(m.no_events||o.dispatch("SaveContent",m),m.format==="raw"&&o.dispatch("RawSaveContent",m),u=m.content,ar(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const y=zb.getParent(o.id,"form");y&&sG(y.elements,S=>S.name===o.id?(S.value=u,!1):!0)}return m.element=i.element=r=null,m.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return J0(this,n,o)}getContent(n){return sI(this,n)}insertContent(n,o){o&&(n=e6({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?J0(this,this.startContent,{format:"raw"}):J0(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||zb.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=zb.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const i=this,u=i.options.get,m=Vv(i);if(ve(m))return m.call(i,n,r,!0,o);if(!u("convert_urls")||r==="link"||Ke(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const y=new hc(n);return y.protocol!=="http"&&y.protocol!=="https"&&y.protocol!==""?n:u("relative_urls")?i.documentBaseURI.toRelative(n):(n=i.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){RY(this,n)}setEditableRoot(n){eq(this,n)}hasEditableRoot(){return NR(this)}remove(){E9(this)}destroy(n){_9(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const ky=Ks.DOM,tk=vt.each;let YR=!1,nk,Nl=[];const ok=e=>{const n=e.type;tk(u1.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},t6=e=>{if(e!==YR){const n=Ks.DOM;e?(n.bind(window,"resize",ok),n.bind(window,"scroll",ok)):(n.unbind(window,"resize",ok),n.unbind(window,"scroll",ok)),YR=e}},n6=e=>{const n=Nl;return Nl=Zt(Nl,o=>e!==o),u1.activeEditor===e&&(u1.activeEditor=Nl.length>0?Nl[0]:null),u1.focusedEditor===e&&(u1.focusedEditor=null),n.length!==Nl.length},rG=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(n6(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},aG=document.compatMode!=="CSS1Compat",u1={...WR,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"3.0",releaseDate:"2024-08-07",i18n:za,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=hc.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)n=i.base||i.baseURL,o=i.suffix;else{const u=document.getElementsByTagName("script");for(let m=0;m<u.length;m++){const y=u[m].src||"";if(y==="")continue;const S=y.substring(y.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(y)){S.indexOf(".min")!==-1&&(o=".min"),n=y.substring(0,y.lastIndexOf("/"));break}}if(!n&&document.currentScript){const m=document.currentScript.src;m.indexOf(".min")!==-1&&(o=".min"),n=m.substring(0,m.lastIndexOf("/"))}}e.baseURL=new hc(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new hc(e.baseURL),e.suffix=o,GM(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&kt(r,(i,u)=>{rc.PluginManager.urls[u]=i})},init(e){const n=this;let o;const r=vt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=(L,F)=>L.inline&&F.tagName.toLowerCase()in r,u=L=>{let F=L.id;return F||(F=zo(L,"name").filter(V=>!ky.get(V)).getOrThunk(ky.uniqueId),L.setAttribute("id",F)),F},m=L=>{const F=e[L];if(F)return F.apply(n,[])},y=L=>pn.browser.isIE()||pn.browser.isEdge()?(s4("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):aG?(s4("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ce(L.selector)?ky.select(L.selector):Fe(L.target)?[L.target]:[];let S=L=>{o=L};const O=()=>{let L=0;const F=[];let V;const Q=(re,ee,ue)=>{const we=new ek(re,ee,n);F.push(we),we.on("init",()=>{++L===V.length&&S(F)}),we.targetElm=we.targetElm||ue,we.render()};ky.unbind(window,"ready",O),m("onpageload"),V=Zi(y(e)),vt.each(V,re=>{rG(n.get(re.id))}),V=vt.grep(V,re=>!n.get(re.id)),V.length===0?S([]):tk(V,re=>{i(e,re)?s4("Could not initialize inline editor on invalid inline target element",re):Q(u(re),e,re)})};return ky.bind(window,"ready",O),new Promise(L=>{o?L(o):S=F=>{L(F)}})},get(e){return arguments.length===0?Nl.slice(0):ce(e)?Po(Nl,n=>n.id===e).getOr(null):so(e)&&Nl[e]?Nl[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Nl.push(e),t6(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),nk||(nk=r=>{const i=n.dispatch("BeforeUnload");if(i.returnValue)return r.preventDefault(),r.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",nk))),e},createEditor(e,n){return this.add(new ek(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Nl.length-1;r>=0;r--)n.remove(Nl[r]);return}if(ce(e)){tk(ky.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,ne(n.get(o.id))?null:(n6(o)&&n.dispatch("RemoveEditor",{editor:o}),Nl.length===0&&window.removeEventListener("beforeunload",nk),o.remove(),t6(Nl.length>0),o)},execCommand(e,n,o){var r;const i=this,u=Ke(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!i.get(u)){const m=o.options;new ek(u,m,i).render()}return!0}case"mceRemoveEditor":{const m=i.get(u);return m&&m.remove(),!0}case"mceToggleEditor":{const m=i.get(u);return m?(m.isHidden()?m.show():m.hide(),!0):(i.execCommand("mceAddEditor",!1,o),!0)}}return i.activeEditor?i.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{tk(Nl,e=>{e.save()})},addI18n:(e,n)=>{za.add(e,n)},translate:e=>za.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new hc(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new hc(this.baseURL)}};u1.setup();const FY=(()=>{const e=Ci(),n=u=>({items:u,types:Go(u),getType:m=>zo(u,m).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),i=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:i}})(),XR=Math.min,Ay=Math.max,_S=Math.round,o6=(e,n,o)=>{let r=n.x,i=n.y;const u=e.w,m=e.h,y=n.w,S=n.h,O=(o||"").split("");return O[0]==="b"&&(i+=S),O[1]==="r"&&(r+=y),O[0]==="c"&&(i+=_S(S/2)),O[1]==="c"&&(r+=_S(y/2)),O[3]==="b"&&(i-=m),O[4]==="r"&&(r-=u),O[3]==="c"&&(i-=_S(m/2)),O[4]==="c"&&(r-=_S(u/2)),Oy(r,i,u,m)},cG=(e,n,o,r)=>{for(let i=0;i<r.length;i++){const u=o6(e,n,r[i]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[i]}return null},lG=(e,n,o)=>Oy(e.x-n,e.y-o,e.w+n*2,e.h+o*2),uG=(e,n)=>{const o=Ay(e.x,n.x),r=Ay(e.y,n.y),i=XR(e.x+e.w,n.x+n.w),u=XR(e.y+e.h,n.y+n.h);return i-o<0||u-r<0?null:Oy(o,r,i-o,u-r)},dG=(e,n,o)=>{let r=e.x,i=e.y,u=e.x+e.w,m=e.y+e.h;const y=n.x+n.w,S=n.y+n.h,O=Ay(0,n.x-r),L=Ay(0,n.y-i),F=Ay(0,u-y),V=Ay(0,m-S);return r+=O,i+=L,o&&(u+=O,m+=L,r-=F,i-=V),u-=F,m-=V,Oy(r,i,u-r,m-i)},Oy=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),JR={inflate:lG,relativePosition:o6,findBestRelativePosition:cG,intersect:uG,clamp:dG,create:Oy,fromClientRect:e=>Oy(e.left,e.top,e.width,e.height)},fG=(e,n,o=1e3)=>{let r=!1,i=null;const u=O=>(...L)=>{r||(r=!0,i!==null&&(clearTimeout(i),i=null),O.apply(null,L))},m=u(e),y=u(n);return{start:(...O)=>{!r&&i===null&&(i=setTimeout(()=>y.apply(null,O),o))},resolve:m,reject:y}},hG=(()=>{const e={},n={},o={};return{load:(S,O)=>{const L=`Script at URL "${O}" failed to load`,F=`Script at URL "${O}" did not call \`tinymce.Resource.add('${S}', data)\` within 1 second`;if(e[S]!==void 0)return e[S];{const V=new Promise((Q,re)=>{const ee=fG(Q,re);n[S]=ee.resolve,gd.ScriptLoader.loadScript(O).then(()=>ee.start(F),()=>ee.reject(L))});return e[S]=V,V}},add:(S,O)=>{n[S]!==void 0&&(n[S](O),delete n[S]),e[S]=Promise.resolve(O),o[S]=O},has:S=>S in o,get:S=>o[S],unload:S=>{delete e[S],delete o[S]}}})(),gG=()=>(()=>{let e={},n=[];const o={getItem:r=>{const i=e[r];return i||null},setItem:(r,i)=>{n.push(r),e[r]=String(i)},key:r=>n[r],removeItem:r=>{n=n.filter(i=>i===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let TS;try{const e="__storage_test__";TS=window.localStorage,TS.setItem(e,e),TS.removeItem(e)}catch{TS=gG()}var pG=TS;const bG={geom:{Rect:JR},util:{Delay:$u,Tools:vt,VK:bt,URI:hc,EventDispatcher:UR,Observable:WR,I18n:za,LocalStorage:pG,ImageUploader:dh},dom:{EventUtils:Nm,TreeWalker:Ha,TextSeeker:sg,DOMUtils:Ks,ScriptLoader:gd,RangeUtils:_t,Serializer:zi,StyleSheetLoader:Yl,ControlSelection:rb,BookmarkManager:Iu,Selection:i9,Event:Nm.Event},html:{Styles:Jy,Entities:fd,Node:cl,Schema:Kd,DomParser:Y0,Writer:cO,Serializer:Ag},Env:pn,AddOnManager:rc,Annotator:C0,Formatter:am,UndoManager:sy,EditorCommands:Na,WindowManager:dI,NotificationManager:uI,EditorObservable:K$,Shortcuts:KR,Editor:ek,FocusManager:zM,EditorManager:u1,DOM:Ks.DOM,ScriptLoader:gd.ScriptLoader,PluginManager:ey,ThemeManager:jp,ModelManager:Q0,IconManager:j_,Resource:hG,FakeClipboard:FY,trim:vt.trim,isArray:vt.isArray,is:vt.is,toArray:vt.toArray,makeMap:vt.makeMap,each:vt.each,map:vt.map,grep:vt.grep,inArray:vt.inArray,extend:vt.extend,walk:vt.walk,resolve:vt.resolve,explode:vt.explode,_addCacheSuffix:vt._addCacheSuffix},r6=vt.extend(u1,bG),vG=e=>{try{p.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(r6),vG(r6)})()})(Vne);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){const p=Object.getPrototypeOf,g=(t,s,a)=>{var c;return a(t,s.prototype)?!0:((c=t.constructor)===null||c===void 0?void 0:c.name)===s.name},w=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&g(t,String,(a,c)=>c.isPrototypeOf(a))?"string":s},E=t=>s=>w(s)===t,M=t=>s=>typeof s===t,z=t=>s=>t===s,K=(t,s)=>ie(t)&&g(t,s,(a,c)=>p(a)===c),Z=E("string"),ie=E("object"),Ee=t=>K(t,Object),de=E("array"),Ye=z(null),Ut=M("boolean"),Lt=z(void 0),Mt=t=>t==null,Ct=t=>!Mt(t),Xe=M("function"),dn=M("number"),Nt=(t,s)=>{if(de(t)){for(let a=0,c=t.length;a<c;++a)if(!s(t[a]))return!1;return!0}return!1},ce=()=>{},Ke=t=>()=>t(),Kn=(t,s)=>(...a)=>t(s.apply(null,a)),jt=(t,s)=>a=>t(s(a)),ne=t=>()=>t,Jt=t=>t,Bn=(t,s)=>t===s;function Qt(t,...s){return(...a)=>{const c=s.concat(a);return t.apply(null,c)}}const Fe=t=>s=>!t(s),ve=t=>()=>{throw new Error(t)},so=t=>t(),Me=ne(!1),Pe=ne(!0);class N{constructor(s,a){this.tag=s,this.value=a}static some(s){return new N(!0,s)}static none(){return N.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?N.some(s(this.value)):N.none()}bind(s){return this.tag?s(this.value):N.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:N.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Ct(s)?N.some(s):N.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}N.singletonNone=new N(!1);const an=Array.prototype.slice,ct=Array.prototype.indexOf,$n=Array.prototype.push,sn=(t,s)=>ct.call(t,s),nt=(t,s)=>{const a=sn(t,s);return a===-1?N.none():N.some(a)},eo=(t,s)=>sn(t,s)>-1,ms=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return!0}return!1},to=(t,s)=>{const a=[];for(let c=0;c<t;c++)a.push(s(c));return a},os=(t,s)=>{const a=[];for(let c=0;c<t.length;c+=s){const d=an.call(t,c,c+s);a.push(d)}return a},tt=(t,s)=>{const a=t.length,c=new Array(a);for(let d=0;d<a;d++){const h=t[d];c[d]=s(h,d)}return c},yt=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];s(d,a)}},W=(t,s)=>{for(let a=t.length-1;a>=0;a--){const c=t[a];s(c,a)}},ta=(t,s)=>{const a=[],c=[];for(let d=0,h=t.length;d<h;d++){const b=t[d];(s(b,d)?a:c).push(b)}return{pass:a,fail:c}},uo=(t,s)=>{const a=[];for(let c=0,d=t.length;c<d;c++){const h=t[c];s(h,c)&&a.push(h)}return a},qo=(t,s,a)=>(W(t,(c,d)=>{a=s(a,c,d)}),a),Ho=(t,s,a)=>(yt(t,(c,d)=>{a=s(a,c,d)}),a),Wi=(t,s,a)=>{for(let c=0,d=t.length;c<d;c++){const h=t[c];if(s(h,c))return N.some(h);if(a(h,c))break}return N.none()},et=(t,s)=>Wi(t,s,Me),Tt=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return N.some(a)}return N.none()},dt=t=>{const s=[];for(let a=0,c=t.length;a<c;++a){if(!de(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);$n.apply(s,t[a])}return s},Se=(t,s)=>dt(tt(t,s)),_o=(t,s)=>{for(let a=0,c=t.length;a<c;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},To=t=>{const s=an.call(t,0);return s.reverse(),s},Zt=(t,s)=>uo(t,a=>!eo(s,a)),ss=(t,s)=>{const a={};for(let c=0,d=t.length;c<d;c++){const h=t[c];a[String(h)]=s(h,c)}return a},Mo=t=>[t],$r=(t,s)=>{const a=an.call(t,0);return a.sort(s),a},Po=(t,s)=>s>=0&&s<t.length?N.some(t[s]):N.none(),Is=t=>Po(t,0),Xa=t=>Po(t,t.length-1),ws=Xe(Array.from)?Array.from:t=>an.call(t),bs=(t,s)=>{for(let a=0;a<t.length;a++){const c=s(t[a],a);if(c.isSome())return c}return N.none()},vs=Object.keys,qr=Object.hasOwnProperty,Cs=(t,s)=>{const a=vs(t);for(let c=0,d=a.length;c<d;c++){const h=a[c],b=t[h];s(b,h)}},Vo=(t,s)=>vc(t,(a,c)=>({k:c,v:s(a,c)})),vc=(t,s)=>{const a={};return Cs(t,(c,d)=>{const h=s(c,d);a[h.k]=h.v}),a},fo=t=>(s,a)=>{t[a]=s},cs=(t,s,a,c)=>{Cs(t,(d,h)=>{(s(d,h)?a:c)(d,h)})},_r=(t,s)=>{const a={},c={};return cs(t,s,fo(a),fo(c)),{t:a,f:c}},Oi=(t,s)=>{const a={};return cs(t,s,fo(a),ce),a},Zi=(t,s)=>{const a=[];return Cs(t,(c,d)=>{a.push(s(c,d))}),a},Go=(t,s)=>{const a=vs(t);for(let c=0,d=a.length;c<d;c++){const h=a[c],b=t[h];if(s(b,h,t))return N.some(b)}return N.none()},Vc=t=>Zi(t,Jt),kt=(t,s)=>po(t,s)?N.from(t[s]):N.none(),po=(t,s)=>qr.call(t,s),Hr=(t,s)=>po(t,s)&&t[s]!==void 0&&t[s]!==null,Vr=(t,s,a=Bn)=>t.exists(c=>a(c,s)),Ba=(t,s,a=Bn)=>hi(t,s,a).getOr(t.isNone()&&s.isNone()),Ja=t=>{const s=[],a=c=>{s.push(c)};for(let c=0;c<t.length;c++)t[c].each(a);return s},Wo=t=>{const s=[];for(let a=0;a<t.length;a++){const c=t[a];if(c.isSome())s.push(c.getOrDie());else return N.none()}return N.some(s)},hi=(t,s,a)=>t.isSome()&&s.isSome()?N.some(a(t.getOrDie(),s.getOrDie())):N.none(),Di=(t,s,a,c)=>t.isSome()&&s.isSome()&&a.isSome()?N.some(c(t.getOrDie(),s.getOrDie(),a.getOrDie())):N.none(),zo=(t,s)=>t!=null?N.some(s(t)):N.none(),Sn=(t,s)=>t?N.some(s):N.none(),Ys=(t,s)=>t+s,Qa=(t,s)=>t.substring(s),ul=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,dl=(t,s)=>Zs(t,s)?Qa(t,s.length):t,hs=(t,s)=>Ta(t,s)?t:Ys(t,s),pr=(t,s,a=0,c)=>{const d=t.indexOf(s,a);return d!==-1?Lt(c)?!0:d+s.length<=c:!1},Zs=(t,s)=>ul(t,s,0),Ta=(t,s)=>ul(t,s,t.length-s.length),Tr=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),pe=t=>t.length>0,fe=t=>!pe(t),He=t=>t.style!==void 0&&Xe(t.style.getPropertyValue),qe=(t,s)=>{const c=(s||document).createElement("div");if(c.innerHTML=t,!c.hasChildNodes()||c.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Un(c.childNodes[0])},gn=(t,s)=>{const c=(s||document).createElement(t);return Un(c)},Nn=(t,s)=>{const c=(s||document).createTextNode(t);return Un(c)},Un=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},_e={fromHtml:qe,fromTag:gn,fromText:Nn,fromDom:Un,fromPoint:(t,s,a)=>N.from(t.dom.elementFromPoint(s,a)).map(Un)},Wn=typeof window<"u"?window:Function("return this;")(),Xs=(t,s)=>{let a=s??Wn;for(let c=0;c<t.length&&a!==void 0&&a!==null;++c)a=a[t[c]];return a},ur=(t,s)=>{const a=t.split(".");return Xs(a,s)},ka=(t,s)=>ur(t,s),Zo=(t,s)=>{const a=ka(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},zc=Object.getPrototypeOf,Gr=t=>Zo("HTMLElement",t),Aa=t=>{const s=ur("ownerDocument.defaultView",t);return ie(t)&&(Gr(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(zc(t).constructor.name))},Ps=9,Ko=11,es=1,na=3,oa=t=>t.dom.nodeName.toLowerCase(),kr=t=>t.dom.nodeType,Ji=t=>s=>kr(s)===t,Ri=t=>xo(t)&&Aa(t.dom),xo=Ji(es),sa=Ji(na),zr=Ji(Ps),Qi=Ji(Ko),ei=t=>s=>xo(s)&&oa(s)===t,Ar=(t,s)=>{const a=t.dom;if(a.nodeType!==es)return!1;{const c=a;if(c.matches!==void 0)return c.matches(s);if(c.msMatchesSelector!==void 0)return c.msMatchesSelector(s);if(c.webkitMatchesSelector!==void 0)return c.webkitMatchesSelector(s);if(c.mozMatchesSelector!==void 0)return c.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Ls=t=>t.nodeType!==es&&t.nodeType!==Ps&&t.nodeType!==Ko||t.childElementCount===0,Cf=(t,s)=>{const a=s===void 0?document:s.dom;return Ls(a)?[]:tt(a.querySelectorAll(t),_e.fromDom)},ji=(t,s)=>{const a=s===void 0?document:s.dom;return Ls(a)?N.none():N.from(a.querySelector(t)).map(_e.fromDom)},Uo=(t,s)=>t.dom===s.dom,Oa=(t,s)=>{const a=t.dom,c=s.dom;return a===c?!1:a.contains(c)},ma=t=>_e.fromDom(t.dom.ownerDocument),br=t=>zr(t)?t:ma(t),$l=t=>_e.fromDom(br(t).dom.documentElement),Da=t=>_e.fromDom(br(t).dom.defaultView),Ia=t=>N.from(t.dom.parentNode).map(_e.fromDom),ec=t=>Ia(t),Mi=t=>N.from(t.dom.parentElement).map(_e.fromDom),uu=(t,s)=>{const a=Xe(s)?s:Me;let c=t.dom;const d=[];for(;c.parentNode!==null&&c.parentNode!==void 0;){const h=c.parentNode,b=_e.fromDom(h);if(d.push(b),a(b)===!0)break;c=h}return d},fl=t=>N.from(t.dom.offsetParent).map(_e.fromDom),Uc=t=>N.from(t.dom.nextSibling).map(_e.fromDom),ti=t=>tt(t.dom.childNodes,_e.fromDom),Or=(t,s)=>{const a=t.dom.childNodes;return N.from(a[s]).map(_e.fromDom)},du=t=>Or(t,0),fu=(t,s)=>({element:t,offset:s}),mu=(t,s)=>{const a=ti(t);return a.length>0&&s<a.length?fu(a[s],0):fu(t,s)},hu=t=>Qi(t)&&Ct(t.dom.host),vr=t=>_e.fromDom(t.dom.getRootNode()),gi=t=>hu(t)?t:_e.fromDom(br(t).dom.body),X=t=>he(t).isSome(),he=t=>{const s=vr(t);return hu(s)?N.some(s):N.none()},Re=t=>_e.fromDom(t.dom.host),at=t=>{if(Ct(t.target)){const s=_e.fromDom(t.target);if(xo(s)&&St(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Is(a)}}return N.from(t.target)},St=t=>Ct(t.dom.shadowRoot),en=t=>{const s=sa(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return he(_e.fromDom(s)).fold(()=>a.body.contains(s),jt(en,Re))},io=()=>ls(_e.fromDom(document)),ls=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return _e.fromDom(s)},vo=(t,s,a)=>{if(Z(a)||Ut(a)||dn(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},qt=(t,s,a)=>{vo(t.dom,s,a)},sr=(t,s)=>{const a=t.dom;Cs(s,(c,d)=>{vo(a,d,c)})},pn=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},Dr=(t,s)=>N.from(pn(t,s)),wc=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},H=(t,s)=>{t.dom.removeAttribute(s)},oe=t=>Ho(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),ye=(t,s,a)=>{if(!Z(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);He(t)&&t.style.setProperty(s,a)},Ie=(t,s)=>{He(t)&&t.style.removeProperty(s)},lt=(t,s,a)=>{const c=t.dom;ye(c,s,a)},qn=(t,s)=>{const a=t.dom;Cs(s,(c,d)=>{ye(a,d,c)})},Ss=(t,s)=>{const a=t.dom;Cs(s,(c,d)=>{c.fold(()=>{Ie(a,d)},h=>{ye(a,d,h)})})},rs=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!en(t)?vt(a,s):d},vt=(t,s)=>He(t)?t.style.getPropertyValue(s):"",Os=(t,s)=>{const a=t.dom,c=vt(a,s);return N.from(c).filter(d=>d.length>0)},ha=t=>{const s={},a=t.dom;if(He(a))for(let c=0;c<a.style.length;c++){const d=a.style.item(c);s[d]=a.style[d]}return s},ni=(t,s,a)=>{const c=_e.fromTag(t);return lt(c,s,a),Os(c,s).isSome()},Xn=(t,s)=>{const a=t.dom;Ie(a,s),Vr(Dr(t,"style").map(Tr),"")&&H(t,"style")},oi=t=>t.dom.offsetWidth,lr=(t,s)=>{const a=(x,T)=>{if(!dn(T)&&!T.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+T);const D=x.dom;He(D)&&(D.style[t]=T+"px")},c=x=>{const T=s(x);if(T<=0||T===null){const D=rs(x,t);return parseFloat(D)||0}return T},d=c,h=(x,T)=>Ho(T,(D,P)=>{const $=rs(x,P),G=$===void 0?0:parseInt($,10);return isNaN(G)?D:D+G},0);return{set:a,get:c,getOuter:d,aggregate:h,max:(x,T,D)=>{const P=h(x,D);return T>P?T-P:0}}},ed=lr("height",t=>{const s=t.dom;return en(t)?s.getBoundingClientRect().height:s.offsetHeight}),xs=t=>ed.get(t),ml=t=>ed.getOuter(t),gm=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],c=ed.max(t,s,a);lt(t,"max-height",c+"px")},m1=(t,s)=>({left:t,top:s,translate:(c,d)=>m1(t+c,s+d)}),Js=m1,pm=t=>{const s=t.getBoundingClientRect();return Js(s.left,s.top)},yr=(t,s)=>t!==void 0?t:s!==void 0?s:0,ga=t=>{const s=t.dom.ownerDocument,a=s.body,c=s.defaultView,d=s.documentElement;if(a===t.dom)return Js(a.offsetLeft,a.offsetTop);const h=yr(c==null?void 0:c.pageYOffset,d.scrollTop),b=yr(c==null?void 0:c.pageXOffset,d.scrollLeft),x=yr(d.clientTop,a.clientTop),T=yr(d.clientLeft,a.clientLeft);return Wc(t).translate(b-T,h-x)},Wc=t=>{const s=t.dom,c=s.ownerDocument.body;return c===s?Js(c.offsetLeft,c.offsetTop):en(t)?pm(s):Js(0,0)},Cc=lr("width",t=>t.dom.offsetWidth),Ld=(t,s)=>Cc.set(t,s),La=t=>Cc.get(t),yo=t=>Cc.getOuter(t),hl=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],c=Cc.max(t,s,a);lt(t,"max-width",c+"px")},Sc=t=>{let s=!1,a;return(...c)=>(s||(s=!0,a=t.apply(null,c)),a)},h1=(t,s,a,c)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,h=t.isiOS()&&!d,b=t.isiOS()||t.isAndroid(),x=b||c("(pointer:coarse)"),T=d||!h&&b&&c("(min-device-width:768px)"),D=h||b&&!T,P=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,$=!D&&!T&&!P;return{isiPad:ne(d),isiPhone:ne(h),isTablet:ne(T),isPhone:ne(D),isTouch:ne(x),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:ne(P),isDesktop:ne($)}},Kr=(t,s)=>{for(let a=0;a<t.length;a++){const c=t[a];if(c.test(s))return c}},Fa=(t,s)=>{const a=Kr(t,s);if(!a)return{major:0,minor:0};const c=d=>Number(s.replace(a,"$"+d));return Sf(c(1),c(2))},Yr=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Oh():Fa(t,a)},Oh=()=>Sf(0,0),Sf=(t,s)=>({major:t,minor:s}),si={nu:Sf,detect:Yr,unknown:Oh},Dh=(t,s)=>bs(s.brands,a=>{const c=a.brand.toLowerCase();return et(t,d=>{var h;return c===((h=d.brand)===null||h===void 0?void 0:h.toLowerCase())}).map(d=>({current:d.name,version:si.nu(parseInt(a.version,10),0)}))}),js=(t,s)=>{const a=String(s).toLowerCase();return et(t,c=>c.search(a))},Zc=(t,s)=>js(t,s).map(a=>{const c=si.detect(a.versionRegexes,s);return{current:a.name,version:c}}),ri=(t,s)=>js(t,s).map(a=>{const c=si.detect(a.versionRegexes,s);return{current:a.name,version:c}}),wr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pi=t=>s=>pr(s,t),Cr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>pr(t,"edge/")&&pr(t,"chrome")&&pr(t,"safari")&&pr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,wr],search:t=>pr(t,"chrome")&&!pr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>pr(t,"msie")||pr(t,"trident")},{name:"Opera",versionRegexes:[wr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pi("firefox")},{name:"Safari",versionRegexes:[wr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(pr(t,"safari")||pr(t,"mobile/"))&&pr(t,"applewebkit")}],Rh=[{name:"Windows",search:pi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>pr(t,"iphone")||pr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:pi("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pi("linux"),versionRegexes:[]},{name:"Solaris",search:pi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pi("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pi("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],gu={browsers:ne(Cr),oses:ne(Rh)},pu="Edge",xf="Chromium",bu="IE",xc="Opera",Ef="Firefox",Sr="Safari",_f=()=>Mh({current:void 0,version:si.unknown()}),Mh=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isEdge:c(pu),isChromium:c(xf),isIE:c(bu),isOpera:c(xc),isFirefox:c(Ef),isSafari:c(Sr)}},gl={unknown:_f,nu:Mh,edge:ne(pu),chromium:ne(xf),ie:ne(bu),opera:ne(xc),firefox:ne(Ef),safari:ne(Sr)},Nh="Windows",vu="iOS",Ph="Android",Hl="Linux",Bh="macOS",Tf="Solaris",bm="FreeBSD",yu="ChromeOS",vm=()=>be({current:void 0,version:si.unknown()}),be=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isWindows:c(Nh),isiOS:c(vu),isAndroid:c(Ph),isMacOS:c(Bh),isLinux:c(Hl),isSolaris:c(Tf),isFreeBSD:c(bm),isChromeOS:c(yu)}},Vl={unknown:vm,nu:be,windows:ne(Nh),ios:ne(vu),android:ne(Ph),linux:ne(Hl),macos:ne(Bh),solaris:ne(Tf),freebsd:ne(bm),chromeos:ne(yu)},Ih={detect:(t,s,a)=>{const c=gu.browsers(),d=gu.oses(),h=s.bind(T=>Dh(c,T)).orThunk(()=>Zc(c,t)).fold(gl.unknown,gl.nu),b=ri(d,t).fold(Vl.unknown,Vl.nu),x=h1(b,h,t,a);return{browser:h,os:b,deviceType:x}}},g1=t=>window.matchMedia(t).matches;let wu=Sc(()=>Ih.detect(window.navigator.userAgent,N.from(window.navigator.userAgentData),g1));const ro=()=>wu(),Rr=(t,s,a,c,d,h,b)=>({target:t,x:s,y:a,stop:c,prevent:d,kill:h,raw:b}),Ec=t=>{const s=_e.fromDom(at(t).getOr(t.target)),a=()=>t.stopPropagation(),c=()=>t.preventDefault(),d=Kn(c,a);return Rr(s,t.clientX,t.clientY,a,c,d,t)},Cu=(t,s)=>a=>{t(a)&&s(Ec(a))},kf=(t,s,a,c,d)=>{const h=Cu(a,c);return t.dom.addEventListener(s,h,d),{unbind:Qt(Af,t,s,h,d)}},Fd=(t,s,a,c)=>kf(t,s,a,c,!1),$a=(t,s,a,c)=>kf(t,s,a,c,!0),Af=(t,s,a,c)=>{t.dom.removeEventListener(s,a,c)},zl=(t,s)=>{Ia(t).each(c=>{c.dom.insertBefore(s.dom,t.dom)})},Of=(t,s)=>{Uc(t).fold(()=>{Ia(t).each(d=>{bi(d,s)})},c=>{zl(c,s)})},Ul=(t,s)=>{du(t).fold(()=>{bi(t,s)},c=>{t.dom.insertBefore(s.dom,c.dom)})},bi=(t,s)=>{t.dom.appendChild(s.dom)},Lh=(t,s,a)=>{Or(t,a).fold(()=>{bi(t,s)},c=>{zl(c,s)})},$d=(t,s)=>{yt(s,a=>{bi(t,a)})},ra=t=>{t.dom.textContent="",yt(ti(t),s=>{Ni(s)})},Ni=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},ai=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,c=s.body.scrollTop||s.documentElement.scrollTop;return Js(a,c)},td=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},Hd=t=>{const s=t===void 0?window:t;return ro().browser.isFirefox()?N.none():N.from(s.visualViewport)},Fh=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),Vd=t=>{const s=t===void 0?window:t,a=s.document,c=ai(_e.fromDom(a));return Hd(s).fold(()=>{const d=s.document.documentElement,h=d.clientWidth,b=d.clientHeight;return Fh(c.left,c.top,h,b)},d=>Fh(Math.max(d.pageLeft,c.left),Math.max(d.pageTop,c.top),d.width,d.height))},jc=()=>_e.fromDom(document),Df=(t,s)=>t.view(s).fold(ne([]),c=>{const d=t.owner(c),h=Df(t,d);return[c].concat(h)}),Wg=(t,s)=>{const a=s.owner(t),c=Df(s,a);return N.some(c)};var ym=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?N.none():N.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(_e.fromDom)},owner:t=>ma(t)});const zd=t=>{const s=jc(),a=ai(s);return Wg(t,ym).fold(Qt(ga,t),d=>{const h=Wc(t),b=qo(d,(x,T)=>{const D=Wc(T);return{left:x.left+D.left,top:x.top+D.top}},{left:0,top:0});return Js(b.left+h.left+a.left,b.top+h.top+a.top)})},nd=(t,s,a)=>({point:t,width:s,height:a}),Ud=(t,s,a,c)=>({x:t,y:s,width:a,height:c}),qs=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),Qs=t=>{const s=ga(t),a=yo(t),c=ml(t);return qs(s.left,s.top,a,c)},tc=t=>{const s=zd(t),a=yo(t),c=ml(t);return qs(s.left,s.top,a,c)},od=(t,s)=>{const a=Math.max(t.x,s.x),c=Math.max(t.y,s.y),d=Math.min(t.right,s.right),h=Math.min(t.bottom,s.bottom),b=d-a,x=h-c;return qs(a,c,b,x)},Hh=(t,s)=>Ho(s,(a,c)=>od(a,c),t),Ur=()=>Vd(window),mn=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Wl=t=>{const s=mn(N.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(N.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:x=>{a(),s.set(N.some(x))}}},wm=()=>Wl(t=>t.destroy()),pa=()=>Wl(t=>t.unbind()),ts=()=>{const t=Wl(ce);return{...t,on:a=>t.get().each(a)}};var Su=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Vh=t=>{const s=h=>h(t),a=ne(t),c=()=>d,d={tag:!0,inner:t,fold:(h,b)=>b(t),isValue:Pe,isError:Me,map:h=>Yn.value(h(t)),mapError:c,bind:s,exists:s,forall:s,getOr:a,or:c,getOrThunk:a,orThunk:c,getOrDie:a,each:h=>{h(t)},toOptional:()=>N.some(t)};return d},Wd=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(c,d)=>c(t),isValue:Me,isError:Pe,map:s,mapError:c=>Yn.error(c(t)),bind:s,exists:Me,forall:Pe,getOr:Jt,or:Jt,getOrThunk:so,orThunk:so,getOrDie:ve(String(t)),each:ce,toOptional:N.none};return a},Yn={value:Vh,error:Wd,fromOption:(t,s)=>t.fold(()=>Wd(s),Vh)};var Wr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Wr||(Wr={}));const sd=(t,s,a)=>t.stype===Wr.Error?s(t.serror):a(t.svalue),Ra=t=>{const s=[],a=[];return yt(t,c=>{sd(c,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},vi=(t,s)=>t.stype===Wr.Error?{stype:Wr.Error,serror:s(t.serror)}:t,nc=(t,s)=>t.stype===Wr.Value?{stype:Wr.Value,svalue:s(t.svalue)}:t,aa=(t,s)=>t.stype===Wr.Value?s(t.svalue):t,ii=(t,s)=>t.stype===Wr.Error?s(t.serror):t,qi=t=>({stype:Wr.Value,svalue:t}),Cm=t=>({stype:Wr.Error,serror:t}),dr={fromResult:t=>t.fold(Cm,qi),toResult:t=>sd(t,Yn.error,Yn.value),svalue:qi,partition:Ra,serror:Cm,bind:aa,bindError:ii,map:nc,mapError:vi,fold:sd},xu=(t,s,a,c)=>({tag:"field",key:t,newKey:s,presence:a,prop:c}),ad=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),gs=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},_c=(t,s)=>s,jg=(t,s)=>Ee(t)&&Ee(s)?Ds(t,s):s,Zl=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let c=0;c<s.length;c++){const d=s[c];for(const h in d)po(d,h)&&(a[h]=t(a[h],d[h]))}return a},Ds=Zl(jg),Eu=Zl(_c),Pi=()=>({tag:"required",process:{}}),co=t=>({tag:"defaultedThunk",process:t}),id=t=>co(ne(t)),Rf=()=>({tag:"option",process:{}}),Sm=t=>({tag:"mergeWithThunk",process:t}),k=t=>Sm(ne(t)),I=(t,s)=>t.length>0?dr.svalue(Ds(s,Eu.apply(void 0,t))):dr.svalue(s),q=t=>Kn(dr.serror,dt)(t),mt={consolidateObj:(t,s)=>{const a=dr.partition(t);return a.errors.length>0?q(a.errors):I(a.values,s)},consolidateArr:t=>{const s=dr.partition(t);return s.errors.length>0?q(s.errors):dr.svalue(s.values)}},kn=t=>ie(t)&&vs(t).length>100?" removed due to size":JSON.stringify(t,null,2),Jn=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:ne("... (only showing first ten failures)")}]):t;return tt(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Dn=(t,s)=>dr.serror([{path:t,getErrorInfo:s}]),An=(t,s,a)=>Dn(t,()=>'Could not find valid *required* value for "'+s+'" in '+kn(a)),Rs=(t,s)=>Dn(t,()=>'Choice schema did not contain choice key: "'+s+'"'),xr=(t,s,a)=>Dn(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+kn(s)),oc=(t,s)=>Dn(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),jl=(t,s)=>Dn(t,ne(s)),Mf=t=>{const s=(c,d)=>dr.bindError(t(d),h=>jl(c,h)),a=ne("val");return{extract:s,toString:a}},zh=Mf(dr.svalue),ci=(t,s,a,c)=>kt(s,a).fold(()=>An(t,a,s),c),Uh=(t,s,a,c)=>{const d=kt(t,s).getOrThunk(()=>a(t));return c(d)},Jb=(t,s,a)=>a(kt(t,s)),qg=(t,s,a,c)=>{const d=kt(t,s).map(h=>h===!0?a(t):h);return c(d)},Ha=(t,s,a,c,d)=>{const h=x=>d.extract(s.concat([c]),x),b=x=>x.fold(()=>dr.svalue(N.none()),T=>{const D=d.extract(s.concat([c]),T);return dr.map(D,N.some)});switch(t.tag){case"required":return ci(s,a,c,h);case"defaultedThunk":return Uh(a,c,t.process,h);case"option":return Jb(a,c,b);case"defaultedOptionThunk":return qg(a,c,t.process,b);case"mergeWithThunk":return Uh(a,c,ne({}),x=>{const T=Ds(t.process(a),x);return h(T)})}},Gg=(t,s,a)=>{const c={},d=[];for(const h of a)gs(h,(b,x,T,D)=>{const P=Ha(T,t,s,b,D);dr.fold(P,$=>{d.push(...$)},$=>{c[x]=$})},(b,x)=>{c[b]=x(s)});return d.length>0?dr.serror(d):dr.svalue(c)},Xr=t=>({extract:(c,d)=>t().extract(c,d),toString:()=>t().toString()}),Qb=t=>vs(Oi(t,Ct)),Bi=t=>{const s=On(t),a=qo(t,(d,h)=>gs(h,b=>Ds(d,{[b]:!0}),ne(d)),{});return{extract:(d,h)=>{const b=Ut(h)?[]:Qb(h),x=uo(b,T=>!Hr(a,T));return x.length===0?s.extract(d,h):oc(d,x)},toString:s.toString}},On=t=>({extract:(c,d)=>Gg(c,d,t),toString:()=>`obj{
`+tt(t,d=>gs(d,(h,b,x,T)=>h+" -> "+T.toString(),(h,b)=>"state("+h+")")).join(`
`)+"}"}),Tc=t=>({extract:(c,d)=>{const h=tt(d,(b,x)=>t.extract(c.concat(["["+x+"]"]),b));return mt.consolidateArr(h)},toString:()=>"array("+t.toString()+")"}),xm=(t,s)=>{const a=s!==void 0?s:Jt;return{extract:(h,b)=>{const x=[];for(const T of t){const D=T.extract(h,b);if(D.stype===Wr.Value)return{stype:Wr.Value,svalue:a(D.svalue)};x.push(D)}return mt.consolidateArr(x)},toString:()=>"oneOf("+tt(t,h=>h.toString()).join(", ")+")"}},Wh=(t,s)=>{const a=(h,b)=>Tc(Mf(t)).extract(h,b);return{extract:(h,b)=>{const x=vs(b),T=a(h,x);return dr.bind(T,D=>{const P=tt(D,$=>xu($,$,Pi(),s));return On(P).extract(h,b)})},toString:()=>"setOf("+s.toString()+")"}},Kg=(t,s)=>{const a=Sc(s);return{extract:(h,b)=>a().extract(h,b),toString:()=>a().toString()}},p1=Kn(Tc,On),bl=ne(zh),_u=(t,s)=>Mf(a=>{const c=typeof a;return t(a)?dr.svalue(a):dr.serror(`Expected type: ${s} but got: ${c}`)}),Zd=_u(dn,"number"),Wt=_u(Z,"string"),qc=_u(Ut,"boolean"),Yg=_u(Xe,"function"),Nf=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Nf(t[s]));default:return!1}},vl=Mf(t=>Nf(t)?dr.svalue(t):dr.serror("Expected value to be acceptable for sending via postMessage")),Zh=(t,s,a,c)=>kt(a,c).fold(()=>xr(t,a,c),h=>h.extract(t.concat(["branch: "+c]),s)),jd=(t,s)=>({extract:(d,h)=>kt(h,t).fold(()=>Rs(d,t),x=>Zh(d,h,s,x)),toString:()=>"chooseOn("+t+"). Possible values: "+vs(s)}),Pf=()=>Tc(zh),jh=t=>Mf(s=>t(s).fold(dr.serror,dr.svalue)),ql=(t,s)=>Wh(a=>dr.fromResult(t(a)),s),ev=(t,s,a)=>{const c=s.extract([t],a);return dr.mapError(c,d=>({input:a,errors:d}))},ar=(t,s,a)=>dr.toResult(ev(t,s,a)),pt=t=>t.fold(s=>{throw new Error(Gl(s))},Jt),yi=(t,s,a)=>pt(ar(t,s,a)),Gl=t=>`Errors: 
`+Jn(t.errors).join(`
`)+`

Input object: `+kn(t.input),ba=(t,s)=>jd(t,Vo(s,On)),Em=(t,s)=>Kg(t,s),ia=xu,Lo=ad,Xg=t=>jh(s=>eo(t,s)?Yn.value(s):Yn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),rt=t=>ia(t,t,Pi(),bl()),Fo=(t,s)=>ia(t,t,Pi(),s),qh=t=>Fo(t,Zd),Jr=t=>Fo(t,Wt),wi=(t,s)=>ia(t,t,Pi(),Xg(s)),tv=t=>Fo(t,qc),kc=t=>Fo(t,Yg),Vy=(t,s)=>ia(t,t,Rf(),Mf(a=>dr.serror("The field: "+t+" is forbidden. "+s))),cd=(t,s)=>ia(t,t,Pi(),On(s)),nv=(t,s)=>ia(t,t,Pi(),p1(s)),Ac=(t,s)=>ia(t,t,Pi(),Tc(s)),Bo=t=>ia(t,t,Rf(),bl()),Tu=(t,s)=>ia(t,t,Rf(),s),Bf=t=>Tu(t,Zd),ca=t=>Tu(t,Wt),Jg=(t,s)=>Tu(t,Xg(s)),ku=t=>Tu(t,Yg),Au=(t,s)=>Tu(t,Tc(s)),Bs=(t,s)=>Tu(t,On(s)),_m=(t,s)=>Tu(t,Bi(s)),Be=(t,s)=>ia(t,t,id(s),bl()),Oc=(t,s,a)=>ia(t,t,id(s),a),Tm=(t,s)=>Oc(t,s,Zd),Ci=(t,s)=>Oc(t,s,Wt),Dc=(t,s,a)=>Oc(t,s,Xg(a)),Mr=(t,s)=>Oc(t,s,qc),fr=(t,s)=>Oc(t,s,Yg),zy=(t,s)=>Oc(t,s,vl),_=(t,s,a)=>Oc(t,s,Tc(a)),R=(t,s,a)=>Oc(t,s,On(a)),te={generate:t=>{if(!de(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return yt(t,(c,d)=>{const h=vs(c);if(h.length!==1)throw new Error("one and only one name per case");const b=h[0],x=c[b];if(a[b]!==void 0)throw new Error("duplicate key detected:"+b);if(b==="cata")throw new Error("cannot have a case named cata (sorry)");if(!de(x))throw new Error("case arguments must be an array");s.push(b),a[b]=(...T)=>{const D=T.length;if(D!==x.length)throw new Error("Wrong number of arguments to case "+b+". Expected "+x.length+" ("+x+"), got "+D);return{fold:(...$)=>{if($.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+$.length);return $[d].apply(null,T)},match:$=>{const G=vs($);if(s.length!==G.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+G.join(","));if(!_o(s,se=>eo(G,se)))throw new Error("Not all branches were specified when using match. Specified: "+G.join(", ")+`
Required: `+s.join(", "));return $[b].apply(null,T)},log:$=>{console.log($,{constructors:s,constructor:b,params:T})}}}}),a}};te.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Te=t=>{const s=[],a=[];return yt(t,c=>{c.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},ot=(t,s)=>{const a={};return Cs(t,(c,d)=>{eo(s,d)||(a[d]=c)}),a},At=(t,s)=>({[t]:s}),on=t=>{const s={};return yt(t,a=>{s[a.key]=a.value}),s},Zn=(t,s)=>ot(t,s),oo=(t,s)=>At(t,s),Yo=t=>on(t),Xo=(t,s)=>t.length===0?Yn.value(s):Yn.value(Ds(s,Eu.apply(void 0,t))),er=t=>Yn.error(dt(t)),Rc=(t,s)=>{const a=Te(t);return a.errors.length>0?er(a.errors):Xo(a.values,s)},Va=t=>Xe(t)?t:Me,Kl=(t,s,a)=>{let c=t.dom;const d=Va(a);for(;c.parentNode;){c=c.parentNode;const h=_e.fromDom(c),b=s(h);if(b.isSome())return b;if(d(h))break}return N.none()},yl=(t,s,a)=>{const c=s(t),d=Va(a);return c.orThunk(()=>d(t)?N.none():Kl(t,s,d))},Ou=(t,s)=>Uo(t.element,s.event.target),Gh={can:Pe,abort:Me,run:ce},Gc=t=>{if(!Hr(t,"can")&&!Hr(t,"abort")&&!Hr(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Gh,...t}},km=(t,s)=>(...a)=>Ho(t,(c,d)=>c&&s(d).apply(void 0,a),!0),Qg=(t,s)=>(...a)=>Ho(t,(c,d)=>c||s(d).apply(void 0,a),!1),ep=t=>Xe(t)?{can:Pe,abort:Me,run:t}:t,If=t=>{const s=km(t,d=>d.can),a=Qg(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{yt(t,h=>{h.run.apply(void 0,d)})}}},va=ne,Yl=va("touchstart"),No=va("touchmove"),Ms=va("touchend"),Ii=va("touchcancel"),Er=va("mousedown"),tp=va("mousemove"),Lf=va("mouseout"),Ff=va("mouseup"),Kc=va("mouseover"),ld=va("focusin"),qd=va("focusout"),Du=va("keydown"),b1=va("keyup"),Gd=va("input"),np=va("change"),Kh=va("click"),VS=va("transitioncancel"),ud=va("transitionend"),zS=va("transitionstart"),Uy=va("selectstart"),Nr=t=>ne("alloy."+t),ov={tap:Nr("tap")},dd=Nr("focus"),Am=Nr("blur.post"),$f=Nr("paste.post"),Xl=Nr("receive"),Jl=Nr("execute"),v1=Nr("focus.item"),fd=ov.tap,Li=Nr("longpress"),y1=Nr("sandbox.close"),Wy=Nr("typeahead.cancel"),w1=Nr("system.init"),C1=Nr("system.touchmove"),Zy=Nr("system.touchend"),Yh=Nr("system.scroll"),md=Nr("system.resize"),sc=Nr("system.attached"),Ql=Nr("system.detached"),Om=Nr("system.dismissRequested"),jy=Nr("system.repositionRequested"),Xh=Nr("focusmanager.shifted"),qy=Nr("slotcontainer.visibility"),US=Nr("system.external.element.scroll"),WS=Nr("change.tab"),ZS=Nr("dismiss.tab"),Dm=Nr("highlight"),Jh=Nr("dehighlight"),ao=(t,s)=>{sv(t,t.element,s,{})},_n=(t,s,a)=>{sv(t,t.element,s,a)},Rm=t=>{ao(t,Jl())},S1=(t,s,a)=>{sv(t,s,a,{})},sv=(t,s,a,c)=>{const d={target:s,...c};t.getSystem().triggerEvent(a,s,d)},Gy=(t,s,a,c)=>{const d={...c,target:s};t.getSystem().triggerEvent(a,s,d)},Kd=(t,s,a,c)=>{t.getSystem().triggerEvent(a,s,c.event)},Fs=t=>Yo(t),jS=(t,s)=>({key:t,value:Gc({abort:s})}),Ky=(t,s)=>({key:t,value:Gc({can:s})}),Yy=t=>({key:t,value:Gc({run:(s,a)=>{a.event.prevent()}})}),it=(t,s)=>({key:t,value:Gc({run:s})}),Qh=(t,s,a)=>({key:t,value:Gc({run:(c,d)=>{s.apply(void 0,[c,d].concat(a))}})}),Ck=t=>s=>it(t,s),Mm=t=>s=>({key:t,value:Gc({run:(a,c)=>{Ou(a,c)&&s(a,c)}})}),Sk=(t,s)=>it(t,(a,c)=>{a.getSystem().getByUid(s).each(d=>{Kd(d,d.element,t,c)})}),eg=(t,s,a)=>{const c=s.partUids[a];return Sk(t,c)},Xy=(t,s)=>it(t,(a,c)=>{const d=c.event,h=a.getSystem().getByDom(d.target).getOrThunk(()=>yl(d.target,x=>a.getSystem().getByDom(x).toOptional(),Me).getOr(a));s(a,h,c)}),hd=t=>it(t,(s,a)=>{a.cut()}),Jy=t=>it(t,(s,a)=>{a.stop()}),op=(t,s)=>Mm(t)(s),Gs=Mm(sc()),Yd=Mm(Ql()),Qy=Mm(w1()),Ru=Ck(Jl()),ew=(t,s,a)=>{const c=a.toString(),d=c.indexOf(")")+1,h=c.indexOf("("),b=c.substring(h+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:x1(b.slice(0,1).concat(b.slice(3)))}),t},x1=t=>tt(t,s=>Ta(s,"/*")?s.substring(0,s.length-2):s),sp=(t,s)=>{const a=t.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:x1(h)}),t},E1=(t,s)=>{const a=s.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:x1(h.slice(1))}),t},Yc=t=>({classes:Lt(t.classes)?[]:t.classes,attributes:Lt(t.attributes)?{}:t.attributes,styles:Lt(t.styles)?{}:t.styles}),qS=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),_1=(t,s,a)=>Ru(c=>{a(c,t,s)}),tw=(t,s,a)=>Qy((c,d)=>{a(c,t,s)}),Nm=(t,s,a,c,d,h)=>{const b=Bi(t),x=Bs(s,[_m("config",t)]);return KS(b,x,s,a,c,d,h)},nw=(t,s,a,c,d,h)=>{const b=t,x=Bs(s,[Tu("config",t)]);return KS(b,x,s,a,c,d,h)},GS=(t,s,a)=>ew((d,...h)=>{const b=[d].concat(h);return d.config({name:ne(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},x=>{const T=Array.prototype.slice.call(b,1);return s.apply(void 0,[d,x.config,x.state].concat(T))})},a,s),ow=t=>({key:t,value:void 0}),KS=(t,s,a,c,d,h,b)=>{const x=$=>Hr($,a)?$[a]():N.none(),T=Vo(d,($,G)=>GS(a,$,G)),P={...Vo(h,($,G)=>sp($,G)),...T,revoke:Qt(ow,a),config:$=>{const G=yi(a+"-config",t,$);return{key:a,value:{config:G,me:P,configAsRaw:Sc(()=>yi(a+"-config",t,$)),initialConfig:$,state:b}}},schema:ne(s),exhibit:($,G)=>hi(x($),kt(c,"exhibit"),(Y,se)=>se(G,Y.config,Y.state)).getOrThunk(()=>Yc({})),name:ne(a),handlers:$=>x($).map(G=>kt(c,"events").getOr(()=>({}))(G.config,G.state)).getOr({})};return P},Gi={init:()=>Xc({readState:ne("No State required")})},Xc=t=>t,xt=t=>Yo(t),rv=Bi([rt("fields"),rt("name"),Be("active",{}),Be("apis",{}),Be("state",Gi),Be("extra",{})]),li=t=>{const s=yi("Creating behaviour: "+t.name,rv,t);return Nm(s.fields,s.name,s.active,s.apis,s.extra,s.state)},av=Bi([rt("branchKey"),rt("branches"),rt("name"),Be("active",{}),Be("apis",{}),Be("state",Gi),Be("extra",{})]),YS=t=>{const s=yi("Creating behaviour: "+t.name,av,t);return nw(ba(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Ks=ne(void 0),Hf=(t,s)=>{const a=pn(t,s);return a===void 0||a===""?[]:a.split(" ")},iv=(t,s,a)=>{const d=Hf(t,s).concat([a]);return qt(t,s,d.join(" ")),!0},xk=(t,s,a)=>{const c=uo(Hf(t,s),d=>d!==a);return c.length>0?qt(t,s,c.join(" ")):H(t,s),!1},Vf=t=>t.dom.classList!==void 0,cv=t=>Hf(t,"class"),gd=(t,s)=>iv(t,"class",s),XS=(t,s)=>xk(t,"class",s),sw=(t,s)=>eo(cv(t),s)?XS(t,s):gd(t,s),$s=(t,s)=>{Vf(t)?t.dom.classList.add(s):gd(t,s)},rp=t=>{(Vf(t)?t.dom.classList:cv(t)).length===0&&H(t,"class")},mr=(t,s)=>{Vf(t)?t.dom.classList.remove(s):XS(t,s),rp(t)},JS=(t,s)=>{const a=Vf(t)?t.dom.classList.toggle(s):sw(t,s);return rp(t),a},Jc=(t,s)=>Vf(t)&&t.dom.classList.contains(s),ap=(t,s)=>{yt(s,a=>{$s(t,a)})},Qc=(t,s)=>{yt(s,a=>{mr(t,a)})},Ek=(t,s)=>{yt(s,a=>{JS(t,a)})},_k=(t,s)=>_o(s,a=>Jc(t,a)),Tk=t=>{const s=t.dom.classList,a=new Array(s.length);for(let c=0;c<s.length;c++){const d=s.item(c);d!==null&&(a[c]=d)}return a},kk=t=>Vf(t)?Tk(t):cv(t),za=(t,s,a,c,d)=>{const h=b=>b+"px";return{position:t,left:s.map(h),top:a.map(h),right:c.map(h),bottom:d.map(h)}},rc=t=>({...t,position:N.some(t.position)}),T1=(t,s)=>{Ss(t,rc(s))},Pm=t=>(Vr(Os(t,"position"),"fixed")?N.none():fl(t)).orThunk(()=>{const c=_e.fromTag("span");return Ia(t).bind(d=>{bi(d,c);const h=fl(c);return Ni(c),h})}),rw=t=>Pm(t).map(ga).getOrThunk(()=>Js(0,0)),ip=(t,s)=>{const a=t.element;$s(a,s.transitionClass),mr(a,s.fadeOutClass),$s(a,s.fadeInClass),s.onShow(t)},Xd=(t,s)=>{const a=t.element;$s(a,s.transitionClass),mr(a,s.fadeInClass),$s(a,s.fadeOutClass),s.onHide(t)},cp=(t,s)=>t.y<s.bottom&&t.bottom>s.y,tg=(t,s)=>t.y>=s.y,Bm=(t,s)=>t.bottom<=s.bottom,Jd=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),ng=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),og=t=>t.box.x-t.win.x,Ak=(t,s,a)=>{const c=s.win,d=s.box,h=og(s);return bs(t,b=>{switch(b){case"bottom":return Bm(d,a.bounds)?N.none():N.some(ng(c,h,a));case"top":return tg(d,a.bounds)?N.none():N.some(Jd(c,h,a));default:return N.none()}}).getOr({location:"no-dock"})},aw=(t,s,a)=>_o(t,c=>{switch(c){case"bottom":return Bm(s,a.bounds);case"top":return tg(s,a.bounds)}}),lv=(t,s)=>{const a=s.optScrollEnv.fold(ne(t.bounds.y),c=>c.scrollElmTop+(t.bounds.y-c.currentScrollTop));return Js(t.bounds.x,a)},QS=(t,s)=>{const a=s.optScrollEnv.fold(ne(t.y),c=>t.y+c.currentScrollTop-c.scrollElmTop);return Js(t.x,a)},iw=(t,s,a)=>a.getInitialPos().map(c=>{const d=lv(c,s);return{box:qs(d.left,d.top,La(t),xs(t)),location:c.location}}),uv=(t,s,a,c,d)=>{const h=QS(s,a),b=qs(h.left,h.top,s.width,s.height);c.setInitialPos({style:ha(t),position:rs(t,"position")||"static",bounds:b,location:d.location})},cw=(t,s,a,c,d)=>{c.getInitialPos().fold(()=>uv(t,s,a,c,d),()=>ce)},lw=(t,s,a)=>a.getInitialPos().bind(c=>{var d;switch(a.clearInitialPos(),c.position){case"static":return N.some({morph:"static"});case"absolute":const h=Pm(t).getOr(io()),b=Qs(h),x=(d=h.dom.scrollTop)!==null&&d!==void 0?d:0;return N.some({morph:"absolute",positionCss:za("absolute",kt(c.style,"left").map(T=>s.x-b.x),kt(c.style,"top").map(T=>s.y-b.y+x),kt(c.style,"right").map(T=>b.right-s.right),kt(c.style,"bottom").map(T=>b.bottom-s.bottom))});default:return N.none()}}),uw=(t,s,a)=>iw(t,s,a).filter(({box:c})=>aw(a.getModes(),c,s)).bind(({box:c})=>lw(t,c,a)),k1=t=>{switch(t.location){case"top":return N.some({morph:"fixed",positionCss:za("fixed",N.some(t.leftX),N.some(t.topY),N.none(),N.none())});case"bottom":return N.some({morph:"fixed",positionCss:za("fixed",N.some(t.leftX),N.none(),N.none(),N.some(t.bottomY))});default:return N.none()}},dv=(t,s,a)=>{const c=Qs(t),d=Ur(),h=Ak(a.getModes(),{win:d,box:c},s);return h.location==="top"||h.location==="bottom"?(uv(t,c,s,a,h),k1(h)):N.none()},TM=(t,s,a)=>uw(t,s,a).orThunk(()=>s.optScrollEnv.bind(c=>iw(t,s,a)).bind(({box:c,location:d})=>{const h=Ur(),b=og({win:h,box:c}),x=d==="top"?Jd(h,b,s):ng(h,b,s);return k1(x)})),A1=(t,s,a)=>{const c=t.element;return Vr(Os(c,"position"),"fixed")?TM(c,s,a):dv(c,s,a)},lp=(t,s,a)=>{const c=t.element;return iw(c,s,a).bind(({box:d})=>lw(c,d,a))},Im=(t,s,a,c)=>{const d=Qs(t),h=Ur(),b=og({win:h,box:d}),x=c(h,b,s);return x.location==="bottom"||x.location==="top"?(cw(t,d,s,a,x),k1(x)):N.none()},dw=(t,s,a)=>{a.setDocked(!1),yt(["left","right","top","bottom","position"],c=>Xn(t.element,c)),s.onUndocked(t)},fw=(t,s,a,c)=>{const d=c.position==="fixed";a.setDocked(d),T1(t.element,c),(d?s.onDocked:s.onUndocked)(t)},ex=(t,s,a,c,d=!1)=>{s.contextual.each(h=>{h.lazyContext(t).each(b=>{const x=cp(b,c.bounds);x!==a.isVisible()&&(a.setVisible(x),d&&!x?(ap(t.element,[h.fadeOutClass]),h.onHide(t)):(x?ip:Xd)(t,h))})})},mw=(t,s,a,c,d)=>{ex(t,s,a,c,!0),fw(t,s,a,d.positionCss)},sg=(t,s,a,c,d)=>{switch(d.morph){case"static":return dw(t,s,a);case"absolute":return fw(t,s,a,d.positionCss);case"fixed":return mw(t,s,a,c,d)}},Ok=(t,s,a)=>{const c=s.lazyViewport(t);ex(t,s,a,c),A1(t,c,a).each(d=>{sg(t,s,a,c,d)})},hw=(t,s,a)=>{const c=t.element;a.setDocked(!1);const d=s.lazyViewport(t);lp(t,d,a).each(h=>{switch(h.morph){case"static":{dw(t,s,a);break}case"absolute":{fw(t,s,a,h.positionCss);break}}}),a.setVisible(!0),s.contextual.each(h=>{Qc(c,[h.fadeInClass,h.fadeOutClass,h.transitionClass]),h.onShow(t)}),Lm(t,s,a)},Lm=(t,s,a)=>{t.getSystem().isConnected()&&Ok(t,s,a)},up=(t,s,a)=>{a.isDocked()&&hw(t,s,a)},gw=t=>(s,a,c)=>{const d=a.lazyViewport(s);Im(s.element,d,c,t).each(b=>{mw(s,a,c,d,b)})},fv=gw(Jd),pw=gw(ng);var bw=Object.freeze({__proto__:null,refresh:Lm,reset:up,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,c)=>a.setModes(c),forceDockToTop:fv,forceDockToBottom:pw}),Dk=Object.freeze({__proto__:null,events:(t,s)=>Fs([op(ud(),(a,c)=>{t.contextual.each(d=>{Jc(a.element,d.transitionClass)&&(Qc(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),c.stop()})}),it(Yh(),(a,c)=>{Lm(a,t,s)}),it(US(),(a,c)=>{Lm(a,t,s)}),it(md(),(a,c)=>{up(a,t,s)})])});const el=(t,s)=>{const c=(s||document).createElement("div");return c.innerHTML=t,ti(_e.fromDom(c))},Mu=t=>t.dom.innerHTML,Fm=(t,s)=>{const c=ma(t).dom,d=_e.fromDom(c.createDocumentFragment()),h=el(s,c);$d(d,h),ra(t),bi(t,d)},rg=t=>{const s=_e.fromTag("div"),a=_e.fromDom(t.dom.cloneNode(!0));return bi(s,a),Mu(s)},nx=(t,s)=>_e.fromDom(t.dom.cloneNode(s)),D1=t=>nx(t,!1),mv=t=>nx(t,!0),ox=t=>{if(hu(t))return"#shadow-root";{const s=D1(t);return rg(s)}},$m=t=>ox(t),ag="unknown";var eu;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(eu||(eu={}));const hv=mn({}),Ma=(t,s)=>{const a=[],c=new Date().getTime();return{logEventCut:(d,h,b)=>{a.push({outcome:"cut",target:h,purpose:b})},logEventStopped:(d,h,b)=>{a.push({outcome:"stopped",target:h,purpose:b})},logNoParent:(d,h,b)=>{a.push({outcome:"no-parent",target:h,purpose:b})},logEventNoHandlers:(d,h)=>{a.push({outcome:"no-handlers-left",target:h})},logEventResponse:(d,h,b)=>{a.push({outcome:"response",purpose:b,target:h})},write:()=>{const d=new Date().getTime();eo(["mousemove","mouseover","mouseout",w1()],t)||console.log(t,{event:t,time:d-c,target:s.dom,sequence:tt(a,h=>eo(["cut","stopped","response"],h.outcome)?"{"+h.purpose+"} "+h.outcome+" at ("+$m(h.target)+")":h.outcome)})}}},vw=(t,s,a)=>{switch(kt(hv.get(),t).orThunk(()=>{const d=vs(hv.get());return bs(d,h=>t.indexOf(h)>-1?N.some(hv.get()[h]):N.none())}).getOr(eu.NORMAL)){case eu.NORMAL:return a(Hm());case eu.LOGGING:{const d=Ma(t,s),h=a(d);return d.write(),h}case eu.STOP:return!0}},ac=["alloy/data/Fields","alloy/debugging/Debugging"],Rk=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return et(s,a=>a.indexOf("alloy")>0&&!ms(ac,c=>a.indexOf(c)>-1)).getOr(ag)}else return ag},sx={logEventCut:ce,logEventStopped:ce,logNoParent:ce,logEventNoHandlers:ce,logEventResponse:ce,write:ce},zf=(t,s,a)=>vw(t,s,a),Hm=ne(sx),Uf=ne([rt("menu"),rt("selectedMenu")]),tl=ne([rt("item"),rt("selectedItem")]);ne(On(tl().concat(Uf())));const rx=ne(On(tl())),R1=cd("initSize",[rt("numColumns"),rt("numRows")]),yw=()=>Fo("markers",rx()),dp=()=>cd("markers",[rt("backgroundMenu")].concat(Uf()).concat(tl())),ig=t=>cd("markers",tt(t,rt)),Vm=(t,s,a)=>(Rk(),ia(s,s,a,jh(c=>Yn.value((...d)=>c.apply(void 0,d))))),ko=t=>Vm("onHandler",t,id(ce)),Mc=t=>Vm("onKeyboardHandler",t,id(N.none)),Qd=t=>Vm("onHandler",t,Pi()),gv=t=>Vm("onKeyboardHandler",t,Pi()),ys=(t,s)=>Lo(t,ne(s)),zm=t=>Lo(t,Jt),pv=ne(R1);var Mk=[Bs("contextual",[Jr("fadeInClass"),Jr("fadeOutClass"),Jr("transitionClass"),kc("lazyContext"),ko("onShow"),ko("onShown"),ko("onHide"),ko("onHidden")]),fr("lazyViewport",()=>({bounds:Ur(),optScrollEnv:N.none()})),_("modes",["top","bottom"],Wt),ko("onDocked"),ko("onUndocked")],M1=Object.freeze({__proto__:null,init:t=>{const s=mn(!1),a=mn(!0),c=ts(),d=mn(t.modes),h=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Xc({isDocked:s.get,setDocked:s.set,getInitialPos:c.get,setInitialPos:c.set,clearInitialPos:c.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:h})}});const Hs=li({fields:Mk,name:"docking",active:Dk,apis:bw,state:M1}),ax=(t,s,a)=>Uo(s,t.element)&&!Uo(s,a),Pk=Fs([Ky(dd(),(t,s)=>{const a=s.event,c=a.originator,d=a.target;return ax(t,c,d)?(console.warn(dd()+` did not get interpreted by the desired target. 
Originator: `+$m(c)+`
Target: `+$m(d)+`
Check the `+dd()+" event handlers"),!1):!0})]);var ix=Object.freeze({__proto__:null,events:Pk});const cg=(t,s,a,c)=>{const d=t+s;return d>c?a:d<a?c:d},nl=(t,s,a)=>Math.min(Math.max(t,s),a),Um=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let ww=0;const tn=t=>{const a=new Date().getTime(),c=Math.floor(Um()*1e9);return ww++,t+"_"+c+ww+String(a)},Cw=ne("alloy-id-"),Bk=ne("data-alloy-id"),cx=Cw(),Sw=Bk(),lx=(t,s)=>{const a=tn(cx+t);return ux(s,a),a},ux=(t,s)=>{Object.defineProperty(t.dom,Sw,{value:s,writable:!0})},pd=t=>{const s=xo(t)?t.dom[Sw]:null;return N.from(s)},N1=t=>tn(t),lg=Jt,bv=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+$m(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},c=d=>()=>{console.warn(s(d))};return{debugInfo:ne("fake"),triggerEvent:c("triggerEvent"),triggerFocus:c("triggerFocus"),triggerEscape:c("triggerEscape"),broadcast:c("broadcast"),broadcastOn:c("broadcastOn"),broadcastEvent:c("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Me}},Ik=bv(),wl=tn("alloy-premade"),dx=t=>(Object.defineProperty(t.element.dom,wl,{value:t.uid,writable:!0}),oo(wl,t)),xw=t=>po(t.dom,wl),fx=t=>kt(t,wl),vv=t=>E1((s,...a)=>t(s.getApis(),s,...a),t),Lk=(t,s)=>{const a=tt(s,d=>Bs(d.name(),[rt("config"),Be("state",Gi)])),c=ar("component.behaviours",On(a),t.behaviours).fold(d=>{throw new Error(Gl(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Jt);return{list:s,data:Vo(c,d=>{const h=d.map(b=>({config:b.config,state:b.state.init(b.config)}));return ne(h)})}},yv=t=>t.list,Ew=t=>t.data,_w=(t,s)=>{const a={};return Cs(t,(c,d)=>{Cs(c,(h,b)=>{const x=kt(a,b).getOr([]);a[b]=x.concat([s(d,h)])})}),a},mx=(t,s,a,c)=>{const d={...s};yt(a,P=>{d[P.name()]=P.exhibit(t,c)});const h=_w(d,(P,$)=>({name:P,modification:$})),b=P=>qo(P,($,G)=>({...G.modification,...$}),{}),x=qo(h.classes,(P,$)=>$.modification.concat(P),[]),T=b(h.attributes),D=b(h.styles);return Yc({classes:x,attributes:T,styles:D})},Fk=(t,s,a,c)=>{try{const d=$r(a,(h,b)=>{const x=h[s],T=b[s],D=c.indexOf(x),P=c.indexOf(T);if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(c,null,2));if(P===-1)throw new Error("The ordering for "+t+" does not have an entry for "+T+`.
Order specified: `+JSON.stringify(c,null,2));return D<P?-1:P<D?1:0});return Yn.value(d)}catch(d){return Yn.error([d])}},ef=(t,s)=>({handler:t,purpose:s}),hx=(t,s)=>({cHandler:t,purpose:s}),fp=(t,s)=>hx(Qt.apply(void 0,[t.handler].concat(s)),t.purpose),mp=t=>t.cHandler,gx=(t,s)=>({name:t,handler:s}),wv=(t,s)=>{const a={};return yt(t,c=>{a[c.name()]=c.handlers(s)}),a},Tw=(t,s,a)=>{const c={...a,...wv(s,t)};return _w(c,gx)},Cv=(t,s,a,c)=>{const d=Tw(t,a,c);return Vk(d,s)},$k=t=>{const s=ep(t);return(a,c,...d)=>{const h=[a,c].concat(d);s.abort.apply(void 0,h)?c.stop():s.can.apply(void 0,h)&&s.run.apply(void 0,h)}},ic=(t,s)=>Yn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(tt(s,a=>a.name),null,2)]),Hk=(t,s,a)=>{const c=s[a];return c?Fk("Event: "+a,"name",t,c).map(d=>{const h=tt(d,b=>b.handler);return If(h)}):ic(a,t)},Vk=(t,s)=>{const a=Zi(t,(c,d)=>(c.length===1?Yn.value(c[0].handler):Hk(c,s,d)).map(b=>{const x=$k(b),T=c.length>1?uo(s[d],D=>ms(c,P=>P.name===D)).join(" > "):c[0].name;return oo(d,ef(x,T))}));return Rc(a,{})},Wm="alloy.base.behaviour",Zm=On([ia("dom","dom",Pi(),On([rt("tag"),Be("styles",{}),Be("classes",[]),Be("attributes",{}),Bo("value"),Bo("innerHtml")])),rt("components"),rt("uid"),Be("events",{}),Be("apis",{}),ia("eventOrder","eventOrder",k({[Jl()]:["disabling",Wm,"toggling","typeaheadevents"],[dd()]:[Wm,"focusing","keying"],[w1()]:[Wm,"disabling","toggling","representing","tooltipping"],[Gd()]:[Wm,"representing","streaming","invalidating"],[Ql()]:[Wm,"representing","item-events","toolbar-button-events","tooltipping"],[Er()]:["focusing",Wm,"item-type-events"],[Yl()]:["focusing",Wm,"item-type-events"],[Kc()]:["item-type-events","tooltipping"],[Xl()]:["receiving","reflecting","tooltipping"]}),bl()),Bo("domModification")]),Wf=t=>ar("custom.definition",Zm,t),kw=t=>({...t.dom,uid:t.uid,domChildren:tt(t.components,s=>s.element)}),Ge=t=>t.domModification.fold(()=>Yc({}),Yc),Sv=t=>t.events,Zf=t=>t.dom.value,jm=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},xv=(t,s,a)=>Or(t,s).map(d=>{if(a.exists(b=>!Uo(b,d))){const b=a.map(oa).getOr("span"),x=_e.fromTag(b);return zl(d,x),x}else return d}),ol=(t,s,a)=>{a.fold(()=>bi(t,s),c=>{Uo(c,s)||(zl(c,s),Ni(c))})},Aw=(t,s,a)=>{const c=tt(s,a),d=ti(t);return yt(d.slice(c.length),Ni),c},Ow=(t,s,a,c)=>{const d=Or(t,s),h=c(a,d),b=xv(t,s,d);return ol(t,h.element,b),h},cc=(t,s,a)=>Aw(t,s,(c,d)=>Ow(t,d,c,a)),hp=(t,s)=>Aw(t,s,(a,c)=>{const d=Or(t,c);return ol(t,a,d),a}),px=(t,s)=>{const a=vs(t),c=vs(s),d=Zt(c,a),h=_r(t,(b,x)=>!po(s,x)||b!==s[x]).t;return{toRemove:d,toSet:h}},bx=(t,s)=>{const{class:a,style:c,...d}=oe(s),{toSet:h,toRemove:b}=px(t.attributes,d),x=()=>{yt(b,Ae=>H(s,Ae)),sr(s,h)},T=ha(s),{toSet:D,toRemove:P}=px(t.styles,T),$=()=>{yt(P,Ae=>Xn(s,Ae)),qn(s,D)},G=kk(s),Y=Zt(G,t.classes),se=Zt(t.classes,G),le=()=>{ap(s,se),Qc(s,Y)},Ne=Ae=>{Fm(s,Ae)},ge=()=>{const Ae=t.domChildren;hp(s,Ae)},ke=()=>{const Ae=s,st=t.value.getOrUndefined();st!==Zf(Ae)&&jm(Ae,st??"")};return x(),le(),$(),t.innerHtml.fold(ge,Ne),ke(),s},zk=t=>{const s=_e.fromTag(t.tag);sr(s,t.attributes),ap(s,t.classes),qn(s,t.styles),t.innerHtml.each(c=>Fm(s,c));const a=t.domChildren;return $d(s,a),t.value.each(c=>{jm(s,c)}),s},vx=(t,s)=>{try{const a=bx(t,s);return N.some(a)}catch{return N.none()}},Uk=t=>t.innerHtml.isSome()&&t.domChildren.length>0,yx=(t,s)=>{const a=d=>oa(d)===t.tag&&!Uk(t)&&!xw(d),c=s.filter(a).bind(d=>vx(t,d)).getOrThunk(()=>zk(t));return ux(c,t.uid),c},Wk=t=>{const s=kt(t,"behaviours").getOr({});return Se(vs(s),a=>{const c=s[a];return Ct(c)?[c.me]:[]})},Zk=(t,s)=>Lk(t,s),Ev=t=>{const s=Wk(t);return Zk(t,s)},_v=(t,s,a)=>{const c=kw(t),d=Ge(t),h={"alloy.base.modification":d},b=s.length>0?mx(a,h,s,c):d;return qS(c,b)},jk=(t,s,a)=>{const c={"alloy.base.behaviour":Sv(t)};return Cv(a,t.eventOrder,s,c).getOrDie()},wx=(t,s)=>{const a=()=>Ae,c=mn(Ik),d=pt(Wf(t)),h=Ev(t),b=yv(h),x=Ew(h),T=_v(d,b,x),D=yx(T,s),P=jk(d,b,x),$=mn(d.components),G=st=>{c.set(st)},Y=()=>{c.set(bv(a))},se=()=>{const st=ti(D),je=Se(st,$t=>c.get().getByDom($t).fold(()=>[],Mo));$.set(je)},le=st=>{const je=x;return(Xe(je[st.name()])?je[st.name()]:()=>{throw new Error("Could not find "+st.name()+" in "+JSON.stringify(t,null,2))})()},Ne=st=>Xe(x[st.name()]),ge=()=>d.apis,ke=st=>x[st]().map(je=>je.state.readState()).getOr("not enabled"),Ae={uid:t.uid,getSystem:c.get,config:le,hasConfigured:Ne,spec:t,readState:ke,getApis:ge,connect:G,disconnect:Y,element:D,syncComponents:se,components:$.get,events:P};return Ae},qk=(t,s)=>{const a=kt(t,"components").getOr([]);return s.fold(()=>tt(a,$i),c=>tt(a,(d,h)=>kv(d,Or(c,h))))},Dw=(t,s)=>{const{events:a,...c}=lg(t),d=qk(c,s),h={...c,events:{...ix,...a},components:d};return Yn.value(wx(h,s))},hr=t=>{const s=_e.fromText(t);return Rw({element:s})},Rw=t=>{const s=yi("external.component",Bi([rt("element"),Bo("uid")]),t),a=mn(bv()),c=x=>{a.set(x)},d=()=>{a.set(bv(()=>b))},h=s.uid.getOrThunk(()=>N1("external"));ux(s.element,h);const b={uid:h,getSystem:a.get,config:N.none,hasConfigured:Me,connect:c,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:ne("No state"),syncComponents:ce,components:ne([]),events:{}};return dx(b)},Cx=N1,Tv=t=>po(t,"uid"),kv=(t,s)=>fx(t).getOrThunk(()=>{const a=Tv(t)?t:{uid:Cx(""),...t};return Dw(a,s).getOrDie()}),$i=t=>kv(t,N.none()),Cl=dx;var Mw=(t,s,a,c,d)=>t(a,c)?N.some(a):Xe(d)&&d(a)?N.none():s(a,c,d);const Nw=(t,s,a)=>{let c=t.dom;const d=Xe(a)?a:Me;for(;c.parentNode;){c=c.parentNode;const h=_e.fromDom(c);if(s(h))return N.some(h);if(d(h))break}return N.none()},Sx=(t,s,a)=>Mw((d,h)=>h(d),Nw,t,s,a),Pw=(t,s)=>{const a=t.dom;return a.parentNode?P1(_e.fromDom(a.parentNode),c=>!Uo(t,c)&&s(c)):N.none()},P1=(t,s)=>{const a=d=>s(_e.fromDom(d));return et(t.dom.childNodes,a).map(_e.fromDom)},Av=(t,s)=>{const a=c=>{for(let d=0;d<c.childNodes.length;d++){const h=_e.fromDom(c.childNodes[d]);if(s(h))return N.some(h);const b=a(c.childNodes[d]);if(b.isSome())return b}return N.none()};return a(t.dom)},xx=(t,s,a)=>Sx(t,s,a).isSome(),lc=t=>ji(t),qm=(t,s,a)=>Nw(t,c=>Ar(c,s),a),bd=(t,s)=>Pw(t,a=>Ar(a,s)),Bw=(t,s)=>P1(t,a=>Ar(a,s)),tr=(t,s)=>ji(s,t),Nu=(t,s,a)=>Mw((d,h)=>Ar(d,h),qm,t,s,a),Gm="aria-controls",Gk=t=>Sx(t,a=>{if(!xo(a))return!1;const c=pn(a,"id");return c!==void 0&&c.indexOf(Gm)>-1}).bind(a=>{const c=pn(a,"id"),d=vr(a);return tr(d,`[${Gm}="${c}"]`)}),Iw=()=>{const t=tn(Gm);return{id:t,link:c=>{qt(c,Gm,t)},unlink:c=>{H(c,Gm)}}},Ex=(t,s)=>Gk(s).exists(a=>ug(t,a)),ug=(t,s)=>xx(s,a=>Uo(a,t.element),Me)||Ex(t,s),Ua=(t,s,a,c,d,h,b,x=!1)=>({x:t,y:s,bubble:a,direction:c,placement:d,restriction:h,label:`${b}-${d}`,alwaysFit:x}),jf=te.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Kk=(t,s,a,c,d,h,b,x,T)=>t.fold(s,a,c,d,h,b,x,T),Lw=(t,s,a,c)=>t.fold(s,s,c,c,s,c,a,a),Yk=(t,s,a,c)=>t.fold(s,c,s,c,a,a,s,c),Ov=jf.southeast,Fw=jf.southwest,Dv=jf.northeast,nn=jf.northwest,B1=jf.south,$w=jf.north,_x=jf.east,Tx=jf.west,Xk=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},ui=(t,s)=>ss(["left","right","top","bottom"],a=>kt(s,a).map(c=>Xk(t,c))),Jk=(t,s,a)=>{const c=(T,D)=>s[T].map(P=>{const $=T==="top"||T==="bottom",G=$?a.top:a.left,se=(T==="left"||T==="top"?Math.max:Math.min)(P,D)+G;return $?nl(se,t.y,t.bottom):nl(se,t.x,t.right)}).getOr(D),d=c("left",t.x),h=c("top",t.y),b=c("right",t.right),x=c("bottom",t.bottom);return qs(d,h,b-d,x-h)},Km="layout",Hw=t=>t.x,kx=(t,s)=>t.x+t.width/2-s.width/2,Si=(t,s)=>t.x+t.width-s.width,Ym=(t,s)=>t.y-s.height,qf=t=>t.y+t.height,Ax=(t,s)=>t.y+t.height/2-s.height/2,Qk=t=>t.x+t.width,eA=(t,s)=>t.x-s.width,ya=(t,s,a)=>Ua(Hw(t),qf(t),a.southeast(),Ov(),"southeast",ui(t,{left:1,top:3}),Km),Pr=(t,s,a)=>Ua(Si(t,s),qf(t),a.southwest(),Fw(),"southwest",ui(t,{right:0,top:3}),Km),us=(t,s,a)=>Ua(Hw(t),Ym(t,s),a.northeast(),Dv(),"northeast",ui(t,{left:1,bottom:2}),Km),xi=(t,s,a)=>Ua(Si(t,s),Ym(t,s),a.northwest(),nn(),"northwest",ui(t,{right:0,bottom:2}),Km),wa=(t,s,a)=>Ua(kx(t,s),Ym(t,s),a.north(),$w(),"north",ui(t,{bottom:2}),Km),Ca=(t,s,a)=>Ua(kx(t,s),qf(t),a.south(),B1(),"south",ui(t,{top:3}),Km),Rv=(t,s,a)=>Ua(Qk(t),Ax(t,s),a.east(),_x(),"east",ui(t,{left:0}),Km),Mv=(t,s,a)=>Ua(eA(t,s),Ax(t,s),a.west(),Tx(),"west",ui(t,{right:1}),Km),Ox=()=>[ya,Pr,us,xi,Ca,wa,Rv,Mv],Dx=()=>[Pr,ya,xi,us,Ca,wa,Rv,Mv],Rx=()=>[us,xi,ya,Pr,wa,Ca],Nv=()=>[xi,us,Pr,ya,wa,Ca],Xm=()=>[ya,Pr,us,xi,Ca,wa],Pv=()=>[Pr,ya,xi,us,Ca,wa],tA=(t,s)=>s.universal?t:uo(t,a=>eo(s.channels,a));var nA=Object.freeze({__proto__:null,events:t=>Fs([it(Xl(),(s,a)=>{const c=t.channels,d=vs(c),h=a,b=tA(d,h);yt(b,x=>{const T=c[x],D=T.schema,P=yi("channel["+x+`] data
Receiver: `+$m(s.element),D,h.data);T.onReceive(s,P)})})])}),oA=[Fo("channels",ql(Yn.value,Bi([Qd("onReceive"),Be("schema",bl())])))];const Nc=li({fields:oA,name:"receiving",active:nA});var Mx=Object.freeze({__proto__:null,exhibit:(t,s)=>Yc({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const Sl=(t,s=!1)=>t.dom.focus({preventScroll:s}),Bv=t=>t.dom.blur(),I1=t=>{const s=vr(t).dom;return t.dom===s.activeElement},vd=(t=jc())=>N.from(t.dom.activeElement).map(_e.fromDom),uc=t=>vd(vr(t)).filter(s=>t.dom.contains(s.dom)),Jm=(t,s)=>{const a=vr(s),c=vd(a).bind(h=>{const b=x=>Uo(h,x);return b(s)?N.some(s):Av(s,b)}),d=t(s);return c.each(h=>{vd(a).filter(b=>Uo(b,h)).fold(()=>{Sl(h)},ce)}),d},Vw=te.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Iv=(t,s,a,c,d,h)=>{const b=s.rect,x=b.x-a,T=b.y-c,D=b.width,P=b.height,$=d-(x+D),G=h-(T+P),Y=N.some(x),se=N.some(T),le=N.some($),Ne=N.some(G),ge=N.none();return Kk(s.direction,()=>za(t,Y,se,ge,ge),()=>za(t,ge,se,le,ge),()=>za(t,Y,ge,ge,Ne),()=>za(t,ge,ge,le,Ne),()=>za(t,Y,se,ge,ge),()=>za(t,Y,ge,ge,Ne),()=>za(t,Y,se,ge,ge),()=>za(t,ge,se,le,ge))},Nx=(t,s)=>t.fold(()=>{const a=s.rect;return za("absolute",N.some(a.x),N.some(a.y),N.none(),N.none())},(a,c,d,h)=>Iv("absolute",s,a,c,d,h),(a,c,d,h)=>Iv("fixed",s,a,c,d,h)),Gf=(t,s)=>{const a=Qt(zd,s),c=t.fold(a,a,()=>{const b=ai();return zd(s).translate(-b.left,-b.top)}),d=yo(s),h=ml(s);return qs(c.left,c.top,d,h)},Px=(t,s)=>s.fold(()=>t.fold(Ur,Ur,qs),a=>t.fold(ne(a),ne(a),()=>{const c=zw(t,a.x,a.y);return qs(c.left,c.top,a.width,a.height)})),zw=(t,s,a)=>{const c=Js(s,a),d=()=>{const h=ai();return c.translate(-h.left,-h.top)};return t.fold(ne(c),ne(c),d)},Bx=(t,s,a,c)=>t.fold(s,a,c);Vw.none;const L1=Vw.relative,F1=Vw.fixed,$1=(t,s)=>({anchorBox:t,origin:s}),sA=(t,s)=>$1(t,s),Lv="data-alloy-placement",rA=(t,s)=>{qt(t,Lv,s)},Ix=t=>Dr(t,Lv),aA=t=>H(t,Lv),Fv=te.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Lx=(t,s)=>{const{x:a,y:c,right:d,bottom:h}=s,{x:b,y:x,right:T,bottom:D,width:P,height:$}=t,G=b>=a&&b<=d,Y=x>=c&&x<=h,se=G&&Y,le=T<=d&&T>=a,Ne=D<=h&&D>=c,ge=le&&Ne,ke=Math.min(P,b>=a?d-b:T-a),Ae=Math.min($,x>=c?h-x:D-c);return{originInBounds:se,sizeInBounds:ge,visibleW:ke,visibleH:Ae}},iA=(t,s)=>{const{x:a,y:c,right:d,bottom:h}=s,{x:b,y:x,width:T,height:D}=t,P=Math.max(a,d-T),$=Math.max(c,h-D),G=nl(b,a,P),Y=nl(x,c,$),se=Math.min(G+T,d)-G,le=Math.min(Y+D,h)-Y;return qs(G,Y,se,le)},Uw=(t,s,a)=>{const c=ne(s.bottom-a.y),d=ne(a.bottom-s.y),h=Lw(t,d,d,c),b=ne(s.right-a.x),x=ne(a.right-s.x);return{maxWidth:Yk(t,x,x,b),maxHeight:h}},$v=(t,s,a,c)=>{const d=t.bubble,h=d.offset,b=Jk(c,t.restriction,h),x=t.x+h.left,T=t.y+h.top,D=qs(x,T,s,a),{originInBounds:P,sizeInBounds:$,visibleW:G,visibleH:Y}=Lx(D,b),se=P&&$,le=se?D:iA(D,b),Ne=le.width>0&&le.height>0,{maxWidth:ge,maxHeight:ke}=Uw(t.direction,le,c),Ae={rect:le,maxHeight:ke,maxWidth:ge,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:T};return se||t.alwaysFit?Fv.fit(Ae):Fv.nofit(Ae,G,Y,Ne)},cA=(t,s,a,c,d,h)=>{const b=c.width,x=c.height,T=(P,$,G,Y,se)=>{const le=P(a,c,d,t,h),Ne=$v(le,b,x,h);return Ne.fold(ne(Ne),(ge,ke,Ae,st)=>(se===st?Ae>Y||ke>G:!se&&st)?Ne:Fv.nofit($,G,Y,se))};return Ho(s,(P,$)=>{const G=Qt(T,$);return P.fold(ne(P),G)},Fv.nofit({rect:a,maxHeight:c.height,maxWidth:c.width,direction:Ov(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(Jt,Jt)},Fx=Pe,dc=(t,s,a)=>Fd(t,s,Fx,a),Ww=(t,s,a)=>$a(t,s,Fx,a),Zw=Ec,jw=["top","bottom","right","left"],Hv="data-alloy-transition-timer",lA=(t,s)=>_k(t,s.classes),Vv=(t,s,a)=>a.exists(c=>{const d=t.mode;return d==="all"?!0:c[d]!==s[d]}),$x=(t,s)=>{const a=c=>parseFloat(c).toFixed(3);return Go(s,(c,d)=>{const h=t[d].map(a),b=c.map(a);return!Ba(h,b)}).isSome()},qw=t=>{const s=h=>{const x=rs(t,h).split(/\s*,\s*/);return uo(x,pe)},a=h=>{if(Z(h)&&/^[\d.]+/.test(h)){const b=parseFloat(h);return Ta(h,"ms")?b:b*1e3}else return 0},c=s("transition-delay"),d=s("transition-duration");return Ho(d,(h,b,x)=>{const T=a(c[x])+a(b);return Math.max(h,T)},0)},Gw=(t,s)=>{const a=pa(),c=pa();let d;const h=D=>{var P;const $=(P=D.raw.pseudoElement)!==null&&P!==void 0?P:"";return Uo(D.target,t)&&fe($)&&eo(jw,D.raw.propertyName)},b=D=>{if(Mt(D)||h(D)){a.clear(),c.clear();const P=D==null?void 0:D.raw.type;(Mt(P)||P===ud())&&(clearTimeout(d),H(t,Hv),Qc(t,s.classes))}},x=dc(t,zS(),D=>{h(D)&&(x.unbind(),a.set(dc(t,ud(),b)),c.set(dc(t,VS(),b)))}),T=qw(t);requestAnimationFrame(()=>{d=setTimeout(b,T+17),qt(t,Hv,d)})},Hx=(t,s)=>{ap(t,s.classes),Dr(t,Hv).each(a=>{clearTimeout(parseInt(a,10)),H(t,Hv)}),Gw(t,s)},pp=(t,s,a,c,d,h)=>{const b=Vv(c,d,h);if(b||lA(t,c)){lt(t,"position",a.position);const x=Gf(s,t),T=Nx(s,{...d,rect:x}),D=ss(jw,P=>T[P]);$x(a,D)&&(Ss(t,D),b&&Hx(t,c),oi(t))}else Qc(t,c.classes)},Vx=t=>({width:yo(t),height:ml(t)}),zx=(t,s,a,c)=>{Xn(s,"max-height"),Xn(s,"max-width");const d=Vx(s);return cA(s,c.preference,t,d,a,c.bounds)},Ux=(t,s)=>{const a=s.classes;Qc(t,a.off),ap(t,a.on)},uA=(t,s,a)=>{const c=a.maxHeightFunction;c(t,s.maxHeight)},Wx=(t,s,a)=>{const c=a.maxWidthFunction;c(t,s.maxWidth)},Zx=(t,s,a)=>{const c=Nx(a.origin,s);a.transition.each(d=>{pp(t,a.origin,c,d,s,a.lastPlacement)}),T1(t,c)},dA=(t,s)=>{rA(t,s.placement)},zv=(t,s)=>{gm(t,Math.floor(s))},jx=ne((t,s)=>{zv(t,s),qn(t,{"overflow-x":"hidden","overflow-y":"auto"})}),bp=ne((t,s)=>{zv(t,s)}),qx=(t,s,a)=>t[s]===void 0?a:t[s],Kw=(t,s,a,c,d,h,b,x)=>{const T=qx(b,"maxHeightFunction",jx()),D=qx(b,"maxWidthFunction",ce),P=t.anchorBox,$=t.origin,G={bounds:Px($,h),origin:$,preference:c,maxHeightFunction:T,maxWidthFunction:D,lastPlacement:d,transition:x};return Gx(P,s,a,G)},Gx=(t,s,a,c)=>{const d=zx(t,s,a,c);return Zx(s,d,c),dA(s,d),Ux(s,d),uA(s,d,c),Wx(s,d,c),{layout:d.layout,placement:d.placement}},fA=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Pu=(t,s,a,c=1)=>{const d=t*c,h=s*c,b=T=>kt(a,T).getOr([]),x=(T,D,P)=>{const $=Zt(fA,P);return{offset:Js(T,D),classesOn:Se(P,b),classesOff:Se($,b)}};return{southeast:()=>x(-t,s,["top","alignLeft"]),southwest:()=>x(t,s,["top","alignRight"]),south:()=>x(-t/2,s,["top","alignCentre"]),northeast:()=>x(-t,-s,["bottom","alignLeft"]),northwest:()=>x(t,-s,["bottom","alignRight"]),north:()=>x(-t/2,-s,["bottom","alignCentre"]),east:()=>x(t,-s/2,["valignCentre","left"]),west:()=>x(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>x(d,h,["top","alignLeft","inset"]),insetNorthwest:()=>x(-d,h,["top","alignRight","inset"]),insetNorth:()=>x(-d/2,h,["top","alignCentre","inset"]),insetSoutheast:()=>x(d,-h,["bottom","alignLeft","inset"]),insetSouthwest:()=>x(-d,-h,["bottom","alignRight","inset"]),insetSouth:()=>x(-d/2,-h,["bottom","alignCentre","inset"]),insetEast:()=>x(-d,-h/2,["valignCentre","right","inset"]),insetWest:()=>x(d,-h/2,["valignCentre","left","inset"])}},Uv=()=>Pu(0,0,{}),Wv=Jt,Ei=(t,s)=>a=>OM(a)==="rtl"?s:t,OM=t=>rs(t,"direction")==="rtl"?"rtl":"ltr";var xl;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(xl||(xl={}));const Yw="data-alloy-vertical-dir",mA=t=>xx(t,s=>xo(s)&&pn(s,"data-alloy-vertical-dir")===xl.BottomToTop),Qm=()=>Bs("layouts",[rt("onLtr"),rt("onRtl"),Bo("onBottomLtr"),Bo("onBottomRtl")]),H1=(t,s,a,c,d,h,b)=>{const x=b.map(mA).getOr(!1),T=s.layouts.map(Y=>Y.onLtr(t)),D=s.layouts.map(Y=>Y.onRtl(t)),P=x?s.layouts.bind(Y=>Y.onBottomLtr.map(se=>se(t))).or(T).getOr(d):T.getOr(a),$=x?s.layouts.bind(Y=>Y.onBottomRtl.map(se=>se(t))).or(D).getOr(h):D.getOr(c);return Ei(P,$)(t)},hA=(t,s,a)=>{const c=s.hotspot,d=Gf(a,c.element),h=H1(t.element,s,Xm(),Pv(),Rx(),Nv(),N.some(s.hotspot.element));return N.some(Wv({anchorBox:d,bubble:s.bubble.getOr(Uv()),overrides:s.overrides,layouts:h}))};var Kx=[rt("hotspot"),Bo("bubble"),Be("overrides",{}),Qm(),ys("placement",hA)];const Xw=(t,s,a)=>{const c=zw(a,s.x,s.y),d=qs(c.left,c.top,s.width,s.height),h=H1(t.element,s,Ox(),Dx(),Ox(),Dx(),N.none());return N.some(Wv({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:h}))};var Yx=[rt("x"),rt("y"),Be("height",0),Be("width",0),Be("bubble",Uv()),Be("overrides",{}),Qm(),ys("placement",Xw)];const Zv=te.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),V1=t=>t.fold(Jt,(s,a,c)=>s.translate(-a,-c)),Xx=t=>t.fold(Jt,Jt),Jx=t=>Ho(t,(s,a)=>s.translate(a.left,a.top),Js(0,0)),gA=t=>{const s=tt(t,V1);return Jx(s)},jv=t=>{const s=tt(t,Xx);return Jx(s)},qv=Zv.screen,pA=Zv.absolute,vp=(t,s,a)=>{const c=Da(a.root).dom,d=h=>{const b=ma(h),x=ma(t.element);return Uo(b,x)};return N.from(c.frameElement).map(_e.fromDom).filter(d).map(ga)},Qx=(t,s,a)=>{const c=ma(t.element),d=ai(c),h=vp(t,s,a).getOr(d);return pA(h,d.left,d.top)},Gv=(t,s,a,c)=>{const d=qv(Js(t,s));return N.some(nd(d,a,c))},Jw=(t,s,a,c,d)=>t.map(h=>{const b=[s,h.point],x=Bx(c,()=>jv(b),()=>jv(b),()=>gA(b)),T=Ud(x.left,x.top,h.width,h.height),D=a.showAbove?Rx():Xm(),P=a.showAbove?Nv():Pv(),$=H1(d,a,D,P,D,P,N.none());return Wv({anchorBox:T,bubble:a.bubble.getOr(Uv()),overrides:a.overrides,layouts:$})}),Kv=(t,s,a)=>{const c=Qx(t,a,s);return s.node.filter(en).bind(d=>{const h=d.dom.getBoundingClientRect(),b=Gv(h.left,h.top,h.width,h.height),x=s.node.getOr(t.element);return Jw(b,c,s,a,x)})};var bA=[rt("node"),rt("root"),Bo("bubble"),Qm(),Be("overrides",{}),Be("showAbove",!1),ys("placement",Kv)];const eE="\uFEFF",dg="",z1={create:(t,s,a,c)=>({start:t,soffset:s,finish:a,foffset:c})},eh=te.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),U1=(t,s,a,c)=>t.fold(s,a,c),nE=t=>t.fold(Jt,Jt,Jt),oE=eh.before,DM=eh.on,vA=eh.after,yp={before:oE,on:DM,after:vA,cata:U1,getStart:nE},tf=te.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),yA=t=>tf.exact(t.start,t.soffset,t.finish,t.foffset),Qw=t=>t.match({domRange:s=>_e.fromDom(s.startContainer),relative:(s,a)=>yp.getStart(s),exact:(s,a,c,d)=>s}),sE=tf.domRange,rE=tf.relative,aE=tf.exact,eC=t=>{const s=Qw(t);return Da(s)},iE=z1.create,th={domRange:sE,relative:rE,exact:aE,exactFromRange:yA,getWin:eC,range:iE},cE=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,c)=>{t.setStart(a.dom,c)},a=>{t.setStartAfter(a.dom)})},fg=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,c)=>{t.setEnd(a.dom,c)},a=>{t.setEndAfter(a.dom)})},nh=(t,s,a)=>{const c=t.document.createRange();return cE(c,s),fg(c,a),c},W1=(t,s,a,c,d)=>{const h=t.document.createRange();return h.setStart(s.dom,a),h.setEnd(c.dom,d),h},wp=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Yv=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?N.some(a).map(wp):N.none()},oh=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?N.some(s).map(wp):N.none()},El=te.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),tC=(t,s,a)=>s(_e.fromDom(a.startContainer),a.startOffset,_e.fromDom(a.endContainer),a.endOffset),wA=(t,s)=>s.match({domRange:a=>({ltr:ne(a),rtl:N.none}),relative:(a,c)=>({ltr:Sc(()=>nh(t,a,c)),rtl:Sc(()=>N.some(nh(t,c,a)))}),exact:(a,c,d,h)=>({ltr:Sc(()=>W1(t,a,c,d,h)),rtl:Sc(()=>N.some(W1(t,d,h,a,c)))})}),Cp=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>El.rtl(_e.fromDom(d.endContainer),d.endOffset,_e.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>tC(t,El.ltr,a)):tC(t,El.ltr,a)},lE=(t,s)=>{const a=wA(t,s);return Cp(t,a)},Sp=(t,s)=>lE(t,s).match({ltr:(c,d,h,b)=>{const x=t.document.createRange();return x.setStart(c.dom,d),x.setEnd(h.dom,b),x},rtl:(c,d,h,b)=>{const x=t.document.createRange();return x.setStart(h.dom,b),x.setEnd(c.dom,d),x}});El.ltr,El.rtl;const xp=(t,s,a)=>uo(uu(t,a),s),di=(t,s)=>Cf(s,t),Xv=(t,s,a,c)=>{const h=ma(t).dom.createRange();return h.setStart(t.dom,s),h.setEnd(a.dom,c),h},Z1=(t,s,a,c)=>{const d=Xv(t,s,a,c),h=Uo(t,a)&&s===c;return d.collapsed&&!h},Jv=t=>N.from(t.getSelection()),uE=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return N.some(z1.create(_e.fromDom(s.startContainer),s.startOffset,_e.fromDom(a.endContainer),a.endOffset))}else return N.none()},nC=t=>{if(t.anchorNode===null||t.focusNode===null)return uE(t);{const s=_e.fromDom(t.anchorNode),a=_e.fromDom(t.focusNode);return Z1(s,t.anchorOffset,a,t.focusOffset)?N.some(z1.create(s,t.anchorOffset,a,t.focusOffset)):uE(t)}},Qv=t=>Jv(t).filter(s=>s.rangeCount>0).bind(nC),la=(t,s)=>{const a=Sp(t,s);return Yv(a)},e0=(t,s)=>{const a=Sp(t,s);return oh(a)},dE=((t,s)=>{const a=h=>{if(!t(h))throw new Error("Can only get "+s+" value of a "+s+" node");return c(h).getOr("")},c=h=>t(h)?N.from(h.dom.nodeValue):N.none();return{get:a,getOption:c,set:(h,b)=>{if(!t(h))throw new Error("Can only set raw "+s+" value of a "+s+" node");h.dom.nodeValue=b}}})(sa,"text"),oC=t=>dE.get(t),Kf=(t,s)=>({element:t,offset:s}),j1=(t,s)=>{const a=ti(t);if(a.length===0)return Kf(t,s);if(s<a.length)return Kf(a[s],0);{const c=a[a.length-1],d=sa(c)?oC(c).length:ti(c).length;return Kf(c,d)}},Ep=(t,s)=>sa(t)?Kf(t,s):j1(t,s),t0=t=>t.foffset!==void 0,n0=(t,s)=>s.getSelection.getOrThunk(()=>()=>Qv(t))().map(c=>{if(t0(c)){const d=Ep(c.start,c.soffset),h=Ep(c.finish,c.foffset);return th.range(d.element,d.offset,h.element,h.offset)}else return c}),sh=(t,s,a)=>{const c=Da(s.root).dom,d=Qx(t,a,s),h=n0(c,s).bind(T=>{if(t0(T))return e0(c,th.exactFromRange(T)).orThunk(()=>{const P=_e.fromText(eE);zl(T.start,P);const $=la(c,th.exact(P,0,P,1));return Ni(P),$}).bind(P=>Gv(P.left,P.top,P.width,P.height));{const D=Vo(T,$=>$.dom.getBoundingClientRect()),P={left:Math.min(D.firstCell.left,D.lastCell.left),right:Math.max(D.firstCell.right,D.lastCell.right),top:Math.min(D.firstCell.top,D.lastCell.top),bottom:Math.max(D.firstCell.bottom,D.lastCell.bottom)};return Gv(P.left,P.top,P.right-P.left,P.bottom-P.top)}}),x=n0(c,s).bind(T=>t0(T)?xo(T.start)?N.some(T.start):Mi(T.start):N.some(T.firstCell)).getOr(t.element);return Jw(h,d,s,a,x)};var CA=[Bo("getSelection"),rt("root"),Bo("bubble"),Qm(),Be("overrides",{}),Be("showAbove",!1),ys("placement",sh)];const sl="link-layout",yd=t=>t.x+t.width,sC=(t,s)=>t.x-s.width,fE=(t,s)=>t.y-s.height+t.height,mE=t=>t.y,rC=(t,s,a)=>Ua(yd(t),mE(t),a.southeast(),Ov(),"southeast",ui(t,{left:0,top:2}),sl),aC=(t,s,a)=>Ua(sC(t,s),mE(t),a.southwest(),Fw(),"southwest",ui(t,{right:1,top:2}),sl),hE=(t,s,a)=>Ua(yd(t),fE(t,s),a.northeast(),Dv(),"northeast",ui(t,{left:0,bottom:3}),sl),gE=(t,s,a)=>Ua(sC(t,s),fE(t,s),a.northwest(),nn(),"northwest",ui(t,{right:1,bottom:3}),sl),Pc=()=>[rC,aC,hE,gE],mg=()=>[aC,rC,gE,hE],iC=(t,s,a)=>{const c=Gf(a,s.item.element),d=H1(t.element,s,Pc(),mg(),Pc(),mg(),N.none());return N.some(Wv({anchorBox:c,bubble:Uv(),overrides:s.overrides,layouts:d}))};var rh=[rt("item"),Qm(),Be("overrides",{}),ys("placement",iC)],Bc=ba("type",{selection:CA,node:bA,hotspot:Kx,submenu:rh,makeshift:Yx});const rl=[Ac("classes",Wt),Dc("mode","all",["all","layout","placement"])],_i=[Be("useFixed",Me),Bo("getBounds")],tu=[Fo("anchor",Bc),Bs("transition",rl)],o0=()=>{const t=document.documentElement;return F1(0,0,t.clientWidth,t.clientHeight)},nu=t=>{const s=ga(t.element),a=t.element.dom.getBoundingClientRect();return L1(s.left,s.top,a.width,a.height)},hg=(t,s,a,c,d,h)=>{const b=sA(s.anchorBox,t);return Kw(b,c.element,s.bubble,s.layouts,d,a,s.overrides,h)},SA=(t,s,a,c,d)=>{const h=N.none();cC(t,s,a,c,d,h)},cC=(t,s,a,c,d,h)=>{const b=yi("placement.info",On(tu),d),x=b.anchor,T=c.element,D=a.get(c.uid);Jm(()=>{lt(T,"position","fixed");const P=Os(T,"visibility");lt(T,"visibility","hidden");const $=s.useFixed()?o0():nu(t);x.placement(t,x,$).each(G=>{const Y=h.orThunk(()=>s.getBounds.map(so)),se=hg($,G,Y,c,D,b.transition);a.set(c.uid,se)}),P.fold(()=>{Xn(T,"visibility")},G=>{lt(T,"visibility",G)}),Os(T,"left").isNone()&&Os(T,"top").isNone()&&Os(T,"right").isNone()&&Os(T,"bottom").isNone()&&Vr(Os(T,"position"),"fixed")&&Xn(T,"position")},T)};var pE=Object.freeze({__proto__:null,position:SA,positionWithinBounds:cC,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,c)=>{const d=c.element;yt(["position","left","right","top","bottom"],h=>Xn(d,h)),aA(d),a.clear(c.uid)}}),r0=Object.freeze({__proto__:null,init:()=>{let t={};return Xc({readState:()=>t,clear:d=>{Ct(d)?delete t[d]:t={}},set:(d,h)=>{t[d]=h},get:d=>kt(t,d)})}});const Hi=li({fields:_i,name:"positioning",active:Mx,apis:pE,state:r0}),_p=t=>t.getSystem().isConnected(),Tp=t=>{ao(t,Ql());const s=t.components();yt(s,Tp)},q1=t=>{const s=t.components();yt(s,q1),ao(t,sc())},lC=(t,s)=>{t.getSystem().addToWorld(s),en(t.element)&&q1(s)},G1=t=>{Tp(t),t.getSystem().removeFromWorld(t)},K1=(t,s)=>{bi(t.element,s.element)},gg=t=>{yt(t.components(),s=>Ni(s.element)),ra(t.element),t.syncComponents()},uC=(t,s,a)=>{const c=t.components();gg(t);const d=a(s),h=Zt(c,d);yt(h,b=>{Tp(b),t.getSystem().removeFromWorld(b)}),yt(d,b=>{_p(b)?K1(t,b):(t.getSystem().addToWorld(b),K1(t,b),en(t.element)&&q1(b))}),t.syncComponents()},a0=(t,s,a)=>{const c=t.components(),d=Se(s,x=>fx(x).toArray());yt(c,x=>{eo(d,x)||G1(x)});const h=a(s),b=Zt(c,h);yt(b,x=>{_p(x)&&G1(x)}),yt(h,x=>{_p(x)||lC(t,x)}),t.syncComponents()},Bu=(t,s)=>{bE(t,s,bi)},bE=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),en(t.element)&&q1(s),t.syncComponents()},vE=t=>{Tp(t),Ni(t.element),t.getSystem().removeFromWorld(t)},Yf=t=>{const s=Ia(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());vE(t),s.each(a=>{a.syncComponents()})},_l=t=>{const s=t.components();yt(s,vE),ra(t.element),t.syncComponents()},Y1=(t,s)=>{ah(t,s,bi)},pg=(t,s)=>{ah(t,s,Of)},ah=(t,s,a)=>{a(t,s.element);const c=ti(s.element);yt(c,d=>{s.getByDom(d).each(q1)})},dC=t=>{const s=ti(t.element);yt(s,a=>{t.getByDom(a).each(Tp)}),Ni(t.element)},i0=(t,s,a,c)=>{a.get().each(b=>{_l(t)});const d=s.getAttachPoint(t);Bu(d,t);const h=t.getSystem().build(c);return Bu(t,h),a.set(h),h},yE=(t,s,a,c)=>{const d=i0(t,s,a,c);return s.onOpen(t,d),d},_A=(t,s,a,c)=>a.get().map(()=>i0(t,s,a,c)),TA=(t,s,a,c,d)=>{mC(t,s),yE(t,s,a,c),d(),l0(t,s)},bg=(t,s,a)=>{a.get().each(c=>{_l(t),Yf(t),s.onClose(t,c),a.clear()})},fC=(t,s,a)=>a.isOpen(),kp=(t,s,a,c)=>fC(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,c)),X1=(t,s,a)=>a.get(),kA=(t,s,a,c)=>{Os(t.element,s).fold(()=>{H(t.element,a)},d=>{qt(t.element,a,d)}),lt(t.element,s,c)},c0=(t,s,a)=>{Dr(t.element,a).fold(()=>Xn(t.element,s),c=>lt(t.element,s,c))},mC=(t,s,a)=>{const c=s.getAttachPoint(t);lt(t.element,"position",Hi.getMode(c)),kA(t,"visibility",s.cloakVisibilityAttr,"hidden")},hC=t=>ms(["top","left","right","bottom"],s=>Os(t,s).isSome()),l0=(t,s,a)=>{hC(t.element)||Xn(t.element,"position"),c0(t,"visibility",s.cloakVisibilityAttr)};var gC=Object.freeze({__proto__:null,cloak:mC,decloak:l0,open:yE,openWhileCloaked:TA,close:bg,isOpen:fC,isPartOf:kp,getState:X1,setContent:_A}),u0=Object.freeze({__proto__:null,events:(t,s)=>Fs([it(y1(),(a,c)=>{bg(a,t,s)})])}),d0=[ko("onOpen"),ko("onClose"),rt("isPartOf"),rt("getAttachPoint"),Be("cloakVisibilityAttr","data-precloak-visibility")],m0=Object.freeze({__proto__:null,init:()=>{const t=ts(),s=ne("not-implemented");return Xc({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Do=li({fields:d0,name:"sandboxing",active:u0,apis:gC,state:m0}),of=ne("dismiss.popups"),vg=ne("reposition.popups"),h0=ne("mouse.released"),g0=Bi([Be("isExtraPart",Me),Bs("fireEventInstead",[Be("event",Om())])]),ih=t=>{const s=yi("Dismissal",g0,t);return{[of()]:{schema:Bi([rt("target")]),onReceive:(a,c)=>{Do.isOpen(a)&&(Do.isPartOf(a,c.target)||s.isExtraPart(a,c.target)||s.fireEventInstead.fold(()=>Do.close(a),h=>ao(a,h.event)))}}}},p0=Bi([Bs("fireEventInstead",[Be("event",jy())]),kc("doReposition")]),pC=t=>{const s=yi("Reposition",p0,t);return{[vg()]:{onReceive:a=>{Do.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),c=>ao(a,c.event))}}}},bC=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},vC=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var J1=Object.freeze({__proto__:null,onLoad:bC,onUnload:vC,setValue:(t,s,a,c)=>{s.store.manager.setValue(t,s,a,c)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),b0=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Gs((c,d)=>{bC(c,t,s)}),Yd((c,d)=>{vC(c,t,s)})]:[tw(t,s,bC)];return Fs(a)}});const v0=()=>{const t=mn(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,c=()=>{t.set(null)};return Xc({set:t.set,get:t.get,isNotSet:a,clear:c,readState:s})},wC=()=>Xc({readState:ce}),CE=()=>{const t=mn({}),s=mn({});return Xc({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:b=>kt(t.get(),b).orThunk(()=>kt(s.get(),b)),update:b=>{const x=t.get(),T=s.get(),D={},P={};yt(b,$=>{D[$.value]=$,kt($,"meta").each(G=>{kt(G,"text").each(Y=>{P[Y]=$})})}),t.set({...x,...D}),s.set({...T,...P})},clear:()=>{t.set({}),s.set({})}})};var y0=Object.freeze({__proto__:null,memory:v0,dataset:CE,manual:wC,init:t=>t.store.manager.state(t)});const SE=(t,s,a,c)=>{const d=s.store;a.update([c]),d.setValue(t,c),s.onSetValue(t,c)},ou=(t,s,a)=>{const c=s.store,d=c.getDataKey(t);return a.lookup(d).getOrThunk(()=>c.getFallbackEntry(d))},Wa=(t,s,a)=>{s.store.initialValue.each(d=>{SE(t,s,a,d)})},Qf=(t,s,a)=>{a.clear()};var CC=[Bo("initialValue"),rt("getFallbackEntry"),rt("getDataKey"),rt("setValue"),ys("manager",{setValue:SE,getValue:ou,onLoad:Wa,onUnload:Qf,state:CE})];const AA=(t,s,a)=>s.store.getValue(t),w0=(t,s,a,c)=>{s.store.setValue(t,c),s.onSetValue(t,c)},SC=(t,s,a)=>{s.store.initialValue.each(c=>{s.store.setValue(t,c)})};var Op=[rt("getValue"),Be("setValue",ce),Bo("initialValue"),ys("manager",{setValue:w0,getValue:AA,onLoad:SC,onUnload:ce,state:Gi.init})];const xE=(t,s,a,c)=>{a.set(c),s.onSetValue(t,c)},OA=(t,s,a)=>a.get(),RM=(t,s,a)=>{s.store.initialValue.each(c=>{a.isNotSet()&&a.set(c)})},DA=(t,s,a)=>{a.clear()};var EE=[Bo("initialValue"),ys("manager",{setValue:xE,getValue:OA,onLoad:RM,onUnload:DA,state:v0})],_E=[Oc("store",{mode:"memory"},ba("mode",{memory:EE,manual:Op,dataset:CC})),ko("onSetValue"),Be("resetOnDom",!1)];const Yt=li({fields:_E,name:"representing",active:b0,apis:J1,extra:{setValueFrom:(t,s)=>{const a=Yt.getValue(s);Yt.setValue(t,a)}},state:y0}),Za=(t,s)=>R(t,{},tt(s,a=>Vy(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Lo("dump",Jt)])),Q1=t=>t.dump,ja=(t,s)=>({...xt(s),...t.dump}),su={field:Za,augment:ja,get:Q1},xC="placeholder",wg=te.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),eb=t=>po(t,"uiType"),Cg=(t,s,a,c)=>t.exists(d=>d!==a.owner)?wg.single(!0,ne(a)):kt(c,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+vs(c)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),tb=(t,s,a,c)=>eb(a)&&a.uiType===xC?Cg(t,s,a,c):wg.single(!1,ne(a)),TE=(t,s,a,c)=>tb(t,s,a,c).fold((h,b)=>{const x=eb(a)?b(s,a.config,a.validated):b(s),T=kt(x,"components").getOr([]),D=Se(T,P=>TE(t,s,P,c));return[{...x,components:D}]},(h,b)=>{if(eb(a)){const x=b(s,a.config,a.validated);return a.validated.preprocess.getOr(Jt)(x)}else return b(s)}),RA=(t,s,a,c)=>Se(a,d=>TE(t,s,d,c)),MA=(t,s)=>{let a=!1;const c=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},h=()=>s.fold((b,x)=>b,(b,x)=>b);return{name:ne(t),required:h,used:c,replace:d}},Dp=(t,s,a,c)=>{const d=Vo(c,(b,x)=>MA(x,b)),h=RA(t,s,a,d);return Cs(d,b=>{if(b.used()===!1&&b.required())throw new Error("Placeholder: "+b.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),h},Sg=wg.single,EC=wg.multiple,_C=ne(xC),al=te.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),sf=Be("factory",{sketch:Jt}),C0=Be("schema",[]),Iu=rt("name"),S0=ia("pname","pname",co(t=>"<alloy."+tn(t.name)+">"),bl()),NA=Lo("schema",()=>[Bo("preprocess")]),x0=Be("defaults",ne({})),E0=Be("overrides",ne({})),PA=On([sf,C0,Iu,S0,x0,E0]),BA=On([sf,C0,Iu,x0,E0]),IA=On([sf,C0,Iu,S0,x0,E0]),LA=On([sf,NA,Iu,rt("unit"),S0,x0,E0]),_0=t=>t.fold(N.some,N.none,N.some,N.some),kE=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},FA=t=>t.fold(Jt,Jt,Jt,Jt),T0=(t,s)=>a=>{const c=yi("Converting part type",s,a);return t(c)},Ti=T0(al.required,PA),ru=T0(al.external,BA),Tl=T0(al.optional,IA),k0=T0(al.group,LA),nb=ne("entirety");var MM=Object.freeze({__proto__:null,required:Ti,external:ru,optional:Tl,group:k0,asNamedPart:_0,name:kE,asCommon:FA,original:nb});const ob=(t,s,a,c)=>Ds(s.defaults(t,a,c),a,{uid:t.partUids[s.name]},s.overrides(t,a,c)),$A=(t,s,a)=>{const c={},d={};return yt(a,h=>{h.fold(b=>{c[b.pname]=Sg(!0,(x,T,D)=>b.factory.sketch(ob(x,b,T,D)))},b=>{const x=s.parts[b.name];d[b.name]=ne(b.factory.sketch(ob(s,b,x[nb()]),x))},b=>{c[b.pname]=Sg(!1,(x,T,D)=>b.factory.sketch(ob(x,b,T,D)))},b=>{c[b.pname]=EC(!0,(x,T,D)=>{const P=x[b.name];return tt(P,$=>b.factory.sketch(Ds(b.defaults(x,$,D),$,b.overrides(x,$))))})})}),{internals:ne(c),externals:ne(d)}},AE=(t,s)=>{const a={};return yt(s,c=>{_0(c).each(d=>{const h=OE(t,d.pname);a[d.name]=b=>{const x=yi("Part: "+d.name+" in "+t,On(d.schema),b);return{...h,config:b,validated:x}}})}),a},OE=(t,s)=>({uiType:_C(),owner:t,name:s}),DE=(t,s,a)=>({uiType:_C(),owner:t,name:s,config:a,validated:{}}),HA=t=>Se(t,s=>s.fold(N.none,N.some,N.none,N.none).map(a=>cd(a.name,a.schema.concat([zm(nb())]))).toArray()),RE=t=>tt(t,kE),A0=(t,s,a)=>$A(t,s,a),ME=(t,s,a)=>Dp(N.some(t),s,s.components,a),bt=(t,s,a)=>{const c=s.partUids[a];return t.getSystem().getByUid(c).toOptional()},kl=(t,s,a)=>bt(t,s,a).getOrDie("Could not find part: "+a),NE=(t,s,a)=>{const c={},d=s.partUids,h=t.getSystem();return yt(a,b=>{c[b]=ne(h.getByUid(d[b]))}),c},TC=(t,s)=>{const a=t.getSystem();return Vo(s.partUids,(c,d)=>ne(a.getByUid(c)))},sb=t=>vs(t.partUids),xg=(t,s,a)=>{const c={},d=s.partUids,h=t.getSystem();return yt(a,b=>{c[b]=ne(h.getByUid(d[b]).getOrDie())}),c},kC=(t,s)=>{const a=RE(s);return Yo(tt(a,c=>({key:c,value:t+"-"+c})))},rb=t=>ia("partUids","partUids",Sm(s=>kC(s.uid,t)),bl());var PE=Object.freeze({__proto__:null,generate:AE,generateOne:DE,schemas:HA,names:RE,substitutes:A0,components:ME,defaultUids:kC,defaultUidsSchema:rb,getAllParts:TC,getAllPartNames:sb,getPart:bt,getPartOrDie:kl,getParts:NE,getPartsOrDie:xg});const VA=(t,s)=>(t.length>0?[cd("parts",t)]:[]).concat([rt("uid"),Be("dom",{}),Be("components",[]),zm("originalSpec"),Be("debug.sketcher",{})]).concat(s),AC=(t,s,a,c,d)=>{const h=VA(c,d);return yi(t+" [SpecSchema]",Bi(h.concat(s)),a)},ab=(t,s,a,c)=>{const d=IE(c),h=AC(t,s,d,[],[]);return a(h,d)},ch=(t,s,a,c,d)=>{const h=IE(d),b=HA(a),x=rb(a),T=AC(t,s,h,b,[x]),D=A0(t,T,a),P=ME(t,T,D.internals());return c(T,P,h,D.externals())},BE=t=>po(t,"uid"),IE=t=>BE(t)?t:{...t,uid:N1("uid")},zA=t=>t.uid!==void 0,OC=Bi([rt("name"),rt("factory"),rt("configFields"),Be("apis",{}),Be("extraApis",{})]),UA=Bi([rt("name"),rt("factory"),rt("configFields"),rt("partFields"),Be("apis",{}),Be("extraApis",{})]),il=t=>{const s=yi("Sketcher for "+t.name,OC,t),a=h=>ab(s.name,s.configFields,s.factory,h),c=Vo(s.apis,vv),d=Vo(s.extraApis,(h,b)=>sp(h,b));return{name:s.name,configFields:s.configFields,sketch:a,...c,...d}},Ki=t=>{const s=yi("Sketcher for "+t.name,UA,t),a=b=>ch(s.name,s.configFields,s.partFields,s.factory,b),c=AE(s.name,s.partFields),d=Vo(s.apis,vv),h=Vo(s.extraApis,(b,x)=>sp(b,x));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:c,...d,...h}},Rp=t=>ei("input")(t)&&pn(t,"type")!=="radio"||ei("textarea")(t);var WA=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const DC=[rt("find")],Ro=li({fields:DC,name:"composing",apis:WA}),ZA=["input","button","textarea","select"],jA=(t,s,a)=>{(s.disabled()?ib:RC)(t,s)},LE=(t,s)=>s.useNative===!0&&eo(ZA,oa(t.element)),PM=t=>wc(t.element,"disabled"),rf=t=>{qt(t.element,"disabled","disabled")},O0=t=>{H(t.element,"disabled")},qA=t=>pn(t.element,"aria-disabled")==="true",GA=t=>{qt(t.element,"aria-disabled","true")},FE=t=>{qt(t.element,"aria-disabled","false")},ib=(t,s,a)=>{s.disableClass.each(d=>{$s(t.element,d)}),(LE(t,s)?rf:GA)(t),s.onDisabled(t)},RC=(t,s,a)=>{s.disableClass.each(d=>{mr(t.element,d)}),(LE(t,s)?O0:FE)(t),s.onEnabled(t)},$E=(t,s)=>LE(t,s)?PM(t):qA(t);var Mp=Object.freeze({__proto__:null,enable:RC,disable:ib,isDisabled:$E,onLoad:jA,set:(t,s,a,c)=>{(c?ib:RC)(t,s)}}),HE=Object.freeze({__proto__:null,exhibit:(t,s)=>Yc({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Fs([jS(Jl(),(a,c)=>$E(a,t)),tw(t,s,jA)])}),KA=[fr("disabled",Me),Be("useNative",!0),Bo("disableClass"),ko("onDisabled"),ko("onEnabled")];const l=li({fields:KA,name:"disabling",active:HE,apis:Mp}),f=(t,s,a,c)=>{const d=di(t.element,"."+s.highlightClass);yt(d,h=>{ms(c,x=>Uo(x.element,h))||(mr(h,s.highlightClass),t.getSystem().getByDom(h).each(x=>{s.onDehighlight(t,x),ao(x,Jh())}))})},v=(t,s,a)=>f(t,s,a,[]),C=(t,s,a,c)=>{Ce(t,s,a,c)&&(mr(c.element,s.highlightClass),s.onDehighlight(t,c),ao(c,Jh()))},A=(t,s,a,c)=>{f(t,s,a,[c]),Ce(t,s,a,c)||($s(c.element,s.highlightClass),s.onHighlight(t,c),ao(c,Dm()))},B=(t,s,a)=>{Vt(t,s).each(c=>{A(t,s,a,c)})},U=(t,s,a)=>{Ft(t,s).each(c=>{A(t,s,a,c)})},J=(t,s,a,c)=>{wt(t,s,a,c).fold(d=>{throw d},d=>{A(t,s,a,d)})},ae=(t,s,a,c)=>{const d=_t(t,s);et(d,c).each(b=>{A(t,s,a,b)})},Ce=(t,s,a,c)=>Jc(c.element,s.highlightClass),Le=(t,s,a)=>tr(t.element,"."+s.highlightClass).bind(c=>t.getSystem().getByDom(c).toOptional()),wt=(t,s,a,c)=>{const d=di(t.element,"."+s.itemClass);return N.from(d[c]).fold(()=>Yn.error(new Error("No element found with index "+c)),t.getSystem().getByDom)},Vt=(t,s,a)=>tr(t.element,"."+s.itemClass).bind(c=>t.getSystem().getByDom(c).toOptional()),Ft=(t,s,a)=>{const c=di(t.element,"."+s.itemClass);return(c.length>0?N.some(c[c.length-1]):N.none()).bind(h=>t.getSystem().getByDom(h).toOptional())},Dt=(t,s,a,c)=>{const d=di(t.element,"."+s.itemClass);return Tt(d,b=>Jc(b,s.highlightClass)).bind(b=>{const x=cg(b,c,0,d.length-1);return t.getSystem().getByDom(d[x]).toOptional()})},ln=(t,s,a)=>Dt(t,s,a,-1),ht=(t,s,a)=>Dt(t,s,a,1),_t=(t,s,a)=>{const c=di(t.element,"."+s.itemClass);return Ja(tt(c,d=>t.getSystem().getByDom(d).toOptional()))};var Mn=Object.freeze({__proto__:null,dehighlightAll:v,dehighlight:C,highlight:A,highlightFirst:B,highlightLast:U,highlightAt:J,highlightBy:ae,isHighlighted:Ce,getHighlighted:Le,getFirst:Vt,getLast:Ft,getPrevious:ln,getNext:ht,getCandidates:_t}),In=[rt("highlightClass"),rt("itemClass"),ko("onHighlight"),ko("onDehighlight")];const bn=li({fields:In,name:"highlighting",apis:Mn}),ir=[8],ds=[9],Br=[13],Al=[27],ki=[32],Eg=[37],_g=[38],as=[39],qa=[40],fc=(t,s,a)=>{const c=To(t.slice(0,s)),d=To(t.slice(s+1));return et(c.concat(d),a)},Lu=(t,s,a)=>{const c=To(t.slice(0,s));return et(c,a)},Ol=(t,s,a)=>{const c=t.slice(0,s),d=t.slice(s+1);return et(d.concat(c),a)},Np=(t,s,a)=>{const c=t.slice(s+1);return et(c,a)},Qn=t=>s=>{const a=s.raw;return eo(t,a.which)},Dl=t=>s=>_o(t,a=>a(s)),Fu=t=>t.raw.shiftKey===!0,af=t=>t.raw.ctrlKey===!0,Sa=Fe(Fu),Io=(t,s)=>({matches:t,classification:s}),NC=(t,s)=>et(t,c=>c.matches(s)).map(c=>c.classification),PC=(t,s,a)=>{s.exists(d=>a.exists(h=>Uo(h,d)))||_n(t,Xh(),{prevFocus:s,newFocus:a})},D0=()=>{const t=a=>uc(a.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().triggerFocus(c,a.element);const h=t(a);PC(a,d,h)}}},VE=()=>{const t=a=>bn.getHighlighted(a).map(c=>c.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().getByDom(c).fold(ce,b=>{bn.highlight(a,b)});const h=t(a);PC(a,d,h)}}};var em;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(em||(em={}));const Tg=(t,s,a,c,d)=>{const h=()=>t.concat([Be("focusManager",D0()),Oc("focusInside","onFocus",jh(D=>eo(["onFocus","onEnterOrSpace","onApi"],D)?Yn.value(D):Yn.error("Invalid value for focusInside"))),ys("handler",T),ys("state",s),ys("sendFocusIn",d)]),b=(D,P,$,G,Y)=>{const se=$(D,P,G,Y);return NC(se,P.event).bind(le=>le(D,P,G,Y))},T={schema:h,processKey:b,toEvents:(D,P)=>{const $=D.focusInside!==em.OnFocusMode?N.none():d(D).map(se=>it(dd(),(le,Ne)=>{se(le,D,P),Ne.stop()})),G=(se,le)=>{const Ne=Qn(ki.concat(Br))(le.event);D.focusInside===em.OnEnterOrSpaceMode&&Ne&&Ou(se,le)&&d(D).each(ge=>{ge(se,D,P),le.stop()})},Y=[it(Du(),(se,le)=>{b(se,le,a,D,P).fold(()=>{G(se,le)},Ne=>{le.stop()})}),it(b1(),(se,le)=>{b(se,le,c,D,P).each(Ne=>{le.stop()})})];return Fs($.toArray().concat(Y))}};return T},Pp=t=>{const s=[Bo("onEscape"),Bo("onEnter"),Be("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Be("firstTabstop",0),Be("useTabstopAt",Pe),Bo("visibilitySelector")].concat([t]),a=(ge,ke)=>{const Ae=ge.visibilitySelector.bind(st=>Nu(ke,st)).getOr(ke);return xs(Ae)>0},c=(ge,ke)=>{const Ae=di(ge.element,ke.selector),st=uo(Ae,je=>a(ke,je));return N.from(st[ke.firstTabstop])},d=(ge,ke)=>ke.focusManager.get(ge).bind(Ae=>Nu(Ae,ke.selector)),h=(ge,ke)=>a(ge,ke)&&ge.useTabstopAt(ke),b=(ge,ke,Ae)=>{c(ge,ke).each(st=>{ke.focusManager.set(ge,st)})},x=(ge,ke,Ae,st,je)=>je(ke,Ae,$t=>h(st,$t)).fold(()=>st.cyclic?N.some(!0):N.none(),$t=>(st.focusManager.set(ge,$t),N.some(!0))),T=(ge,ke,Ae,st)=>{const je=di(ge.element,Ae.selector);return d(ge,Ae).bind($t=>Tt(je,Qt(Uo,$t)).bind(Qe=>x(ge,je,Qe,Ae,st)))},D=(ge,ke,Ae)=>{const st=Ae.cyclic?fc:Lu;return T(ge,ke,Ae,st)},P=(ge,ke,Ae)=>{const st=Ae.cyclic?Ol:Np;return T(ge,ke,Ae,st)},$=ge=>ec(ge).bind(du).exists(ke=>Uo(ke,ge)),G=(ge,ke,Ae)=>d(ge,Ae).filter(st=>!Ae.useTabstopAt(st)).bind(st=>($(st)?D:P)(ge,ke,Ae)),Y=(ge,ke,Ae)=>Ae.onEnter.bind(st=>st(ge,ke)),se=(ge,ke,Ae)=>Ae.onEscape.bind(st=>st(ge,ke)),le=ne([Io(Dl([Fu,Qn(ds)]),D),Io(Qn(ds),P),Io(Dl([Sa,Qn(Br)]),Y)]),Ne=ne([Io(Qn(Al),se),Io(Qn(ds),G)]);return Tg(s,Gi.init,le,Ne,()=>N.some(b))};var o7=Pp(Lo("cyclic",Me)),s7=Pp(Lo("cyclic",Pe));const BC=(t,s,a)=>(S1(t,a,Jl()),N.some(!0)),R0=(t,s,a)=>Rp(a)&&Qn(ki)(s.event)?N.none():BC(t,s,a),cb=(t,s)=>N.some(!0),YA=[Be("execute",R0),Be("useSpace",!1),Be("useEnter",!0),Be("useControlEnter",!1),Be("useDown",!1)],LM=(t,s,a)=>a.execute(t,s,t.element),FM=(t,s,a,c)=>{const d=a.useSpace&&!Rp(t.element)?ki:[],h=a.useEnter?Br:[],b=a.useDown?qa:[],x=d.concat(h).concat(b);return[Io(Qn(x),LM)].concat(a.useControlEnter?[Io(Dl([af,Qn(Br)]),LM)]:[])},r7=(t,s,a,c)=>a.useSpace&&!Rp(t.element)?[Io(Qn(ki),cb)]:[];var $M=Tg(YA,Gi.init,FM,r7,()=>N.none());const XA=()=>{const t=ts();return Xc({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,h)=>{t.set({numRows:d,numColumns:h})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var a7=Object.freeze({__proto__:null,flatgrid:XA,init:t=>t.state(t)});const HM=t=>(s,a,c,d)=>{const h=t(s.element);return IC(h,s,a,c,d)},JA=(t,s)=>{const a=Ei(t,s);return HM(a)},QA=(t,s)=>{const a=Ei(s,t);return HM(a)},eO=t=>(s,a,c,d)=>IC(t,s,a,c,d),IC=(t,s,a,c,d)=>c.focusManager.get(s).bind(b=>t(s.element,b,c,d)).map(b=>(c.focusManager.set(s,b),!0)),zE=eO,VM=eO,tO=eO,zM=t=>t.offsetWidth<=0&&t.offsetHeight<=0,UM=t=>!zM(t.dom),i7=(t,s)=>Tt(t,s).map(a=>({index:a,candidates:t})),$u=(t,s,a)=>{const c=b=>Uo(b,s),d=di(t,a),h=uo(d,UM);return i7(h,c)},WM=(t,s)=>Tt(t,a=>Uo(s,a)),ZM=(t,s,a,c)=>{const d=Math.floor(s/a),h=s%a;return c(d,h).bind(b=>{const x=b.row*a+b.column;return x>=0&&x<t.length?N.some(t[x]):N.none()})},jM=(t,s,a,c,d)=>ZM(t,s,c,(h,b)=>{const T=h===a-1?t.length-h*c:c,D=cg(b,d,0,T-1);return N.some({row:h,column:D})}),qM=(t,s,a,c,d)=>ZM(t,s,c,(h,b)=>{const x=cg(h,d,0,a-1),D=x===a-1?t.length-x*c:c,P=nl(b,0,D-1);return N.some({row:x,column:P})}),c7=(t,s,a,c)=>jM(t,s,a,c,1),M0=(t,s,a,c)=>jM(t,s,a,c,-1),nO=(t,s,a,c)=>qM(t,s,a,c,-1),l7=(t,s,a,c)=>qM(t,s,a,c,1),oO=[rt("selector"),Be("execute",R0),Mc("onEscape"),Be("captureTab",!1),pv()],UE=(t,s,a)=>{tr(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},sO=(t,s)=>s.focusManager.get(t).bind(a=>Nu(a,s.selector)),u7=(t,s,a,c)=>sO(t,a).bind(d=>a.execute(t,s,d)),WE=t=>(s,a,c,d)=>$u(s,a,c.selector).bind(h=>t(h.candidates,h.index,d.getNumRows().getOr(c.initSize.numRows),d.getNumColumns().getOr(c.initSize.numColumns))),GM=(t,s,a)=>a.captureTab?N.some(!0):N.none(),d7=(t,s,a)=>a.onEscape(t,s),KM=WE(M0),YM=WE(c7),f7=WE(nO),XM=WE(l7),ZE=ne([Io(Qn(Eg),JA(KM,YM)),Io(Qn(as),QA(KM,YM)),Io(Qn(_g),zE(f7)),Io(Qn(qa),VM(XM)),Io(Dl([Fu,Qn(ds)]),GM),Io(Dl([Sa,Qn(ds)]),GM),Io(Qn(ki.concat(Br)),u7)]),m7=ne([Io(Qn(Al),d7),Io(Qn(ki),cb)]);var h7=Tg(oO,XA,ZE,m7,()=>N.some(UE));const JM=(t,s,a,c,d)=>{const h=x=>oa(x)==="button"&&pn(x,"disabled")==="disabled",b=(x,T,D)=>d(x,T,c,0,D.length-1,D[T],P=>h(D[P])?b(x,P,D):N.from(D[P]));return $u(t,a,s).bind(x=>{const T=x.index,D=x.candidates;return b(T,T,D)})},QM=(t,s,a,c)=>JM(t,s,a,c,(d,h,b,x,T,D,P)=>{const $=nl(h+b,x,T);return $===d?N.from(D):P($)}),kg=(t,s,a,c)=>JM(t,s,a,c,(d,h,b,x,T,D,P)=>{const $=cg(h,b,x,T);return $===d?N.none():P($)}),eN=[rt("selector"),Be("getInitial",N.none),Be("execute",R0),Mc("onEscape"),Be("executeOnMove",!1),Be("allowVertical",!0),Be("allowHorizontal",!0),Be("cycles",!0)],g7=(t,s)=>s.focusManager.get(t).bind(a=>Nu(a,s.selector)),LC=(t,s,a)=>g7(t,a).bind(c=>a.execute(t,s,c)),p7=(t,s,a)=>{s.getInitial(t).orThunk(()=>tr(t.element,s.selector)).each(c=>{s.focusManager.set(t,c)})},rO=(t,s,a)=>(a.cycles?kg:QM)(t,a.selector,s,-1),aO=(t,s,a)=>(a.cycles?kg:QM)(t,a.selector,s,1),iO=t=>(s,a,c,d)=>t(s,a,c,d).bind(()=>c.executeOnMove?LC(s,a,c):N.some(!0)),tN=(t,s,a)=>a.onEscape(t,s),nN=(t,s,a,c)=>{const d=[...a.allowHorizontal?Eg:[]].concat(a.allowVertical?_g:[]),h=[...a.allowHorizontal?as:[]].concat(a.allowVertical?qa:[]);return[Io(Qn(d),iO(JA(rO,aO))),Io(Qn(h),iO(QA(rO,aO))),Io(Qn(Br),LC),Io(Qn(ki),LC)]},b7=ne([Io(Qn(ki),cb),Io(Qn(Al),tN)]);var v7=Tg(eN,Gi.init,nN,b7,()=>N.some(p7));const jE=(t,s,a)=>N.from(t[s]).bind(c=>N.from(c[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),qE=(t,s,a,c)=>{const h=t[s].length,b=cg(a,c,0,h-1);return jE(t,s,b)},oN=(t,s,a,c)=>{const d=cg(a,c,0,t.length-1),h=t[d].length,b=nl(s,0,h-1);return jE(t,d,b)},FC=(t,s,a,c)=>{const h=t[s].length,b=nl(a+c,0,h-1);return jE(t,s,b)},sN=(t,s,a,c)=>{const d=nl(a+c,0,t.length-1),h=t[d].length,b=nl(s,0,h-1);return jE(t,d,b)},rN=(t,s,a)=>qE(t,s,a,1),cl=(t,s,a)=>qE(t,s,a,-1),y7=(t,s,a)=>oN(t,a,s,-1),aN=(t,s,a)=>oN(t,a,s,1),iN=(t,s,a)=>FC(t,s,a,-1),w7=(t,s,a)=>FC(t,s,a,1),cN=(t,s,a)=>sN(t,a,s,-1),lN=(t,s,a)=>sN(t,a,s,1),C7=[cd("selectors",[rt("row"),rt("cell")]),Be("cycles",!0),Be("previousSelector",N.none),Be("execute",R0)],S7=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return tr(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},x7=(t,s,a)=>uc(t.element).bind(c=>a.execute(t,s,c)),E7=(t,s)=>tt(t,a=>di(a,s.selectors.cell)),$C=(t,s)=>(a,c,d)=>{const h=d.cycles?t:s;return Nu(c,d.selectors.row).bind(b=>{const x=di(b,d.selectors.cell);return WM(x,c).bind(T=>{const D=di(a,d.selectors.row);return WM(D,b).bind(P=>{const $=E7(D,d);return h($,P,T).map(G=>G.cell)})})})},uN=$C(cl,iN),dN=$C(rN,w7),fN=$C(y7,cN),mN=$C(aN,lN),hN=ne([Io(Qn(Eg),JA(uN,dN)),Io(Qn(as),QA(uN,dN)),Io(Qn(_g),zE(fN)),Io(Qn(qa),VM(mN)),Io(Qn(ki.concat(Br)),x7)]),_7=ne([Io(Qn(ki),cb)]);var T7=Tg(C7,Gi.init,hN,_7,()=>N.some(S7));const k7=[rt("selector"),Be("execute",R0),Be("moveOnTab",!1)],gN=(t,s,a)=>a.focusManager.get(t).bind(c=>a.execute(t,s,c)),pN=(t,s,a)=>{tr(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},cO=(t,s,a)=>kg(t,a.selector,s,-1),Ag=(t,s,a)=>kg(t,a.selector,s,1),bN=(t,s,a,c)=>a.moveOnTab?tO(cO)(t,s,a,c):N.none(),vN=(t,s,a,c)=>a.moveOnTab?tO(Ag)(t,s,a,c):N.none(),yN=ne([Io(Qn(_g),tO(cO)),Io(Qn(qa),tO(Ag)),Io(Dl([Fu,Qn(ds)]),bN),Io(Dl([Sa,Qn(ds)]),vN),Io(Qn(Br),gN),Io(Qn(ki),gN)]),A7=ne([Io(Qn(ki),cb)]);var N0=Tg(k7,Gi.init,yN,A7,()=>N.some(pN));const O7=[Mc("onSpace"),Mc("onEnter"),Mc("onShiftEnter"),Mc("onLeft"),Mc("onRight"),Mc("onTab"),Mc("onShiftTab"),Mc("onUp"),Mc("onDown"),Mc("onEscape"),Be("stopSpaceKeyup",!1),Bo("focusIn")],D7=(t,s,a)=>[Io(Qn(ki),a.onSpace),Io(Dl([Sa,Qn(Br)]),a.onEnter),Io(Dl([Fu,Qn(Br)]),a.onShiftEnter),Io(Dl([Fu,Qn(ds)]),a.onShiftTab),Io(Dl([Sa,Qn(ds)]),a.onTab),Io(Qn(_g),a.onUp),Io(Qn(qa),a.onDown),Io(Qn(Eg),a.onLeft),Io(Qn(as),a.onRight),Io(Qn(ki),a.onSpace)],wN=(t,s,a)=>[...a.stopSpaceKeyup?[Io(Qn(ki),cb)]:[],Io(Qn(Al),a.onEscape)];var R7=Tg(O7,Gi.init,D7,wN,t=>t.focusIn);const M7=o7.schema(),N7=s7.schema(),CN=v7.schema(),lO=h7.schema(),uO=T7.schema(),P7=$M.schema(),Bp=N0.schema(),SN=R7.schema();var xN=Object.freeze({__proto__:null,acyclic:M7,cyclic:N7,flow:CN,flatgrid:lO,matrix:uO,execution:P7,menu:Bp,special:SN});const B7=t=>Hr(t,"setGridSize"),En=YS({branchKey:"mode",branches:xN,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},c=>{c(t,s,a)})},setGridSize:(t,s,a,c,d)=>{B7(a)?a.setGridSize(c,d):console.error("Layout does not support setGridSize")}},state:a7}),P0=(t,s)=>{Jm(()=>{uC(t,s,()=>tt(s,t.getSystem().build))},t.element)},B0=(t,s)=>{Jm(()=>{a0(t,s,()=>cc(t.element,s,t.getSystem().buildOrPatch))},t.element)},EN=(t,s,a,c)=>{G1(s);const d=Ow(t.element,a,c,t.getSystem().buildOrPatch);lC(t,d),t.syncComponents()},HC=(t,s,a)=>{const c=t.getSystem().build(a);bE(t,c,s)},Ip=(t,s,a,c)=>{Yf(s),HC(t,(d,h)=>Lh(d,h,a),c)},Lp=(t,s,a,c)=>(s.reuseDom?B0:P0)(t,c),I7=(t,s,a,c)=>{HC(t,bi,c)},L7=(t,s,a,c)=>{HC(t,Ul,c)},_N=(t,s,a,c)=>{const d=cf(t);et(d,b=>Uo(c.element,b.element)).each(Yf)},cf=(t,s)=>t.components(),GE=(t,s,a,c,d)=>{const h=cf(t);return N.from(h[c]).map(b=>(d.fold(()=>Yf(b),x=>{(s.reuseDom?EN:Ip)(t,b,c,x)}),b))};var TN=Object.freeze({__proto__:null,append:I7,prepend:L7,remove:_N,replaceAt:GE,replaceBy:(t,s,a,c,d)=>{const h=cf(t);return Tt(h,c).bind(b=>GE(t,s,a,b,d))},set:Lp,contents:cf});const Vn=li({fields:[Mr("reuseDom",!0)],name:"replacing",apis:TN}),kN=(t,s)=>{const a=Fs(s);return li({fields:[rt("enabled")],name:t,active:{events:ne(a)}})},no=(t,s)=>{const a=kN(t,s);return{key:t,value:{config:{},me:a,configAsRaw:ne({}),initialConfig:{},state:Gi}}},dO=(t,s)=>{s.ignore||(Sl(t.element),s.onFocus(t))};var F7=Object.freeze({__proto__:null,focus:dO,blur:(t,s)=>{s.ignore||Bv(t.element)},isFocused:t=>I1(t.element)}),KE=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Yc(a)},events:t=>Fs([it(dd(),(s,a)=>{dO(s,t),a.stop()})].concat(t.stopMousedown?[it(Er(),(s,a)=>{a.event.prevent()})]:[]))}),ON=[ko("onFocus"),Be("stopMousedown",!1),Be("ignore",!1)];const Ln=li({fields:ON,name:"focusing",active:KE,apis:F7}),DN=t=>({init:()=>{const a=mn(t);return{get:()=>a.get(),set:x=>a.set(x),clear:()=>a.set(t),readState:()=>a.get()}}}),RN=(t,s,a)=>{const c=s.aria;c.update(t,c,a.get())},MN=(t,s,a)=>{s.toggleClass.each(c=>{a.get()?$s(t.element,c):mr(t.element,c)})},I0=(t,s,a,c)=>{const d=a.get();a.set(c),MN(t,s,a),RN(t,s,a),d!==c&&s.onToggled(t,c)},NN=(t,s,a)=>{I0(t,s,a,!a.get())},mO=(t,s,a)=>{I0(t,s,a,!0)},$7=(t,s,a)=>{I0(t,s,a,!1)},H7=(t,s,a)=>a.get(),PN=(t,s,a)=>{I0(t,s,a,s.selected)};var V7=Object.freeze({__proto__:null,onLoad:PN,toggle:NN,isOn:H7,on:mO,off:$7,set:I0}),U7=Object.freeze({__proto__:null,exhibit:()=>Yc({}),events:(t,s)=>{const a=_1(t,s,NN),c=tw(t,s,PN);return Fs(dt([t.toggleOnExecute?[a]:[],[c]]))}});const BN=(t,s,a)=>{qt(t.element,"aria-pressed",a),s.syncWithExpanded&&L0(t,s,a)},VC=(t,s,a)=>{qt(t.element,"aria-selected",a)},W7=(t,s,a)=>{qt(t.element,"aria-checked",a)},L0=(t,s,a)=>{qt(t.element,"aria-expanded",a)};var hO=[Be("selected",!1),Bo("toggleClass"),Be("toggleOnExecute",!0),ko("onToggled"),Oc("aria",{mode:"none"},ba("mode",{pressed:[Be("syncWithExpanded",!1),ys("update",BN)],checked:[ys("update",W7)],expanded:[ys("update",L0)],selected:[ys("update",VC)],none:[ys("update",ce)]}))];const lo=li({fields:hO,name:"toggling",active:U7,apis:V7,state:DN(!1)}),gO=()=>{const t=(s,a)=>{a.stop(),Rm(s)};return[it(Kh(),t),it(fd(),t),hd(Yl()),hd(Er())]},YE=t=>{const s=a=>Ru((c,d)=>{a(c),d.stop()});return Fs(dt([t.map(s).toArray(),gO()]))},IN="alloy.item-hover",pO="alloy.item-focus",LN="alloy.item-toggled",bO=t=>{(uc(t.element).isNone()||Ln.isFocused(t))&&(Ln.isFocused(t)||Ln.focus(t),_n(t,IN,{item:t}))},FN=t=>{_n(t,pO,{item:t})},Z7=(t,s)=>{_n(t,LN,{item:t,state:s})},vO=ne(IN),XE=ne(pO),yO=ne(LN),wO=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Jt),j7=(t,s)=>({aria:{mode:s?"selected":"checked"},...Oi(t,(a,c)=>c!=="exclusive"),onToggled:(a,c)=>{Xe(t.onToggled)&&t.onToggled(a,c),Z7(a,c)}}),q7=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:wO(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:su.augment(t.itemBehaviours,[t.toggling.fold(lo.revoke,s=>lo.config(j7(s,t.role.exists(a=>a==="option")))),Ln.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{FN(s)}}),En.config({mode:"execution"}),Yt.config({store:{mode:"memory",initialValue:t.data}}),no("item-type-events",[...gO(),it(Kc(),bO),it(v1(),Ln.focus)])]),components:t.components,eventOrder:t.eventOrder}),G7=[rt("data"),rt("components"),rt("dom"),Be("hasSubmenu",!1),Bo("toggling"),Bo("role"),su.field("itemBehaviours",[lo,Ln,En,Yt]),Be("ignoreFocus",!1),Be("domModification",{}),ys("builder",q7),Be("eventOrder",{})],K7=t=>({dom:t.dom,components:t.components,events:Fs([Jy(v1())])}),$N=[rt("dom"),rt("components"),ys("builder",K7)],JE=ne("item-widget"),CO=ne([Ti({name:"widget",overrides:t=>({behaviours:xt([Yt.config({store:{mode:"manual",getValue:s=>t.data,setValue:ce}})])})})]),Y7=t=>{const s=A0(JE(),t,CO()),a=ME(JE(),t,s.internals()),c=h=>bt(h,t,"widget").map(b=>(En.focusIn(b),b)),d=(h,b)=>Rp(b.event.target)?N.none():(t.autofocus&&b.setSource(h.element),N.none());return{dom:t.dom,components:a,domModification:t.domModification,events:Fs([Ru((h,b)=>{c(h).each(x=>{b.stop()})}),it(Kc(),bO),it(v1(),(h,b)=>{t.autofocus?c(h):Ln.focus(h)})]),behaviours:su.augment(t.widgetBehaviours,[Yt.config({store:{mode:"memory",initialValue:t.data}}),Ln.config({ignore:t.ignoreFocus,onFocus:h=>{FN(h)}}),En.config({mode:"special",focusIn:t.autofocus?h=>{c(h)}:Ks(),onLeft:d,onRight:d,onEscape:(h,b)=>!Ln.isFocused(h)&&!t.autofocus?(Ln.focus(h),N.some(!0)):(t.autofocus&&b.setSource(h.element),N.none())})])}},X7=[rt("uid"),rt("data"),rt("components"),rt("dom"),Be("autofocus",!1),Be("ignoreFocus",!1),su.field("widgetBehaviours",[Yt,Ln,En]),Be("domModification",{}),rb(CO()),ys("builder",Y7)],J7=ba("type",{widget:X7,item:G7,separator:$N}),Q7=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),e8=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),HN=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),t8=ne([k0({factory:{sketch:t=>{const s=yi("menu.spec item",J7,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>po(s,"uid")?s:{...s,uid:N1("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),n8=ne([ca("role"),rt("value"),rt("items"),rt("dom"),rt("components"),Be("eventOrder",{}),Za("menuBehaviours",[bn,Yt,Ro,En]),Oc("movement",{mode:"menu",moveOnTab:!0},ba("mode",{grid:[pv(),ys("config",Q7)],matrix:[ys("config",e8),rt("rowSelector"),Be("previousSelector",N.none)],menu:[Be("moveOnTab",!0),ys("config",HN)]})),yw(),Be("fakeFocus",!1),Be("focusManager",D0()),ko("onHighlight"),ko("onDehighlight"),Be("showMenuRole",!0)]),VN=ne("alloy.menu-focus"),o8=(t,s)=>{const a=di(t.element,'[role="menuitemradio"][aria-checked="true"]');yt(a,c=>{Uo(c,s.element)||t.getSystem().getByDom(c).each(d=>{lo.off(d)})})},s8=(t,s,a,c)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ja(t.menuBehaviours,[bn.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Yt.config({store:{mode:"memory",initialValue:t.value}}),Ro.config({find:N.some}),En.config(t.movement.config(t,t.movement))]),events:Fs([it(XE(),(d,h)=>{const b=h.event;d.getSystem().getByDom(b.target).each(x=>{bn.highlight(d,x),h.stop(),_n(d,VN(),{menu:d,item:x})})}),it(vO(),(d,h)=>{const b=h.event.item;bn.highlight(d,b)}),it(yO(),(d,h)=>{const{item:b,state:x}=h.event;x&&pn(b.element,"role")==="menuitemradio"&&o8(d,b)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),wd=Ki({name:"Menu",configFields:n8(),partFields:t8(),factory:s8}),r8=t=>vc(t,(s,a)=>({k:s,v:a})),zN=(t,s,a,c)=>kt(a,c).bind(d=>kt(t,d).bind(h=>{const b=zN(t,s,a,h);return N.some([h].concat(b))})).getOr([]),lb=(t,s)=>{const a={};Cs(t,(b,x)=>{yt(b,T=>{a[T]=x})});const c=s,d=r8(s),h=Vo(d,(b,x)=>[x].concat(zN(a,c,d,x)));return Vo(a,b=>kt(h,b).getOr([b]))},UN=()=>{const t=mn({}),s=mn({}),a=mn({}),c=ts(),d=mn({}),h=()=>{t.set({}),s.set({}),a.set({}),c.clear()},b=()=>c.get().isNone(),x=(je,$t)=>{s.set({...s.get(),[je]:{type:"prepared",menu:$t}})},T=(je,$t,Xt,Qe)=>{c.set(je),t.set(Xt),s.set($t),d.set(Qe);const cn=lb(Qe,Xt);a.set(cn)},D=je=>Go(t.get(),($t,Xt)=>$t===je),P=(je,$t,Xt)=>le(je).bind(Qe=>D(je).bind(cn=>$t(cn).map(It=>({triggeredMenu:Qe,triggeringItem:It,triggeringPath:Xt})))),$=(je,$t)=>{const Xt=uo(ge(je).toArray(),Qe=>le(Qe).isSome());return kt(a.get(),je).bind(Qe=>{const cn=To(Xt.concat(Qe)),It=Se(cn,(fn,bo)=>P(fn,$t,cn.slice(0,bo+1)).fold(()=>Vr(c.get(),fn)?[]:[N.none()],Us=>[N.some(Us)]));return Wo(It)})},G=je=>kt(t.get(),je).map($t=>{const Xt=kt(a.get(),je).getOr([]);return[$t].concat(Xt)}),Y=je=>kt(a.get(),je).bind($t=>$t.length>1?N.some($t.slice(1)):N.none()),se=je=>kt(a.get(),je),le=je=>Ne(je).bind(WN),Ne=je=>kt(s.get(),je),ge=je=>kt(t.get(),je);return{setMenuBuilt:x,setContents:T,expand:G,refresh:se,collapse:Y,lookupMenu:Ne,lookupItem:ge,otherMenus:je=>{const $t=d.get();return Zt(vs($t),je)},getPrimary:()=>c.get().bind(le),getMenus:()=>s.get(),clear:h,isClear:b,getTriggeringPath:$}},WN=t=>t.type==="prepared"?N.some(t.menu):N.none(),Og={init:UN,extractPreparedMenu:WN},ZN=tn("tiered-menu-item-highlight"),jN=tn("tiered-menu-item-dehighlight");var Zr;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Zr||(Zr={}));const qN=(t,s)=>{const a=ts(),c=(gt,Ht,Fn)=>Vo(Fn,(Rn,xn)=>{const Gn=()=>wd.sketch({...Rn,value:xn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(ks,Qo)=>{_n(ks,ZN,{menuComp:ks,itemComp:Qo})},onDehighlight:(ks,Qo)=>{_n(ks,jN,{menuComp:ks,itemComp:Qo})},focusManager:t.fakeFocus?VE():D0()});return xn===Ht?{type:"prepared",menu:gt.getSystem().build(Gn())}:{type:"notbuilt",nbMenu:Gn}}),d=Og.init(),h=gt=>{const Ht=c(gt,t.data.primary,t.data.menus),Fn=T();return d.setContents(t.data.primary,Ht,t.data.expansions,Fn),d.getPrimary()},b=gt=>Yt.getValue(gt).value,x=(gt,Ht,Fn)=>bs(Ht,Rn=>{if(!Rn.getSystem().isConnected())return N.none();const xn=bn.getCandidates(Rn);return et(xn,Gn=>b(Gn)===Fn)}),T=gt=>Vo(t.data.menus,(Ht,Fn)=>Se(Ht.items,Rn=>Rn.type==="separator"?[]:[Rn.data.value])),D=bn.highlight,P=(gt,Ht)=>{D(gt,Ht),bn.getHighlighted(Ht).orThunk(()=>bn.getFirst(Ht)).each(Fn=>{t.fakeFocus?bn.highlight(Ht,Fn):S1(gt,Fn.element,v1())})},$=(gt,Ht)=>Ja(tt(Ht,Fn=>gt.lookupMenu(Fn).bind(Rn=>Rn.type==="prepared"?N.some(Rn.menu):N.none()))),G=(gt,Ht,Fn)=>{const Rn=$(Ht,Ht.otherMenus(Fn));yt(Rn,xn=>{Qc(xn.element,[t.markers.backgroundMenu]),t.stayInDom||Vn.remove(gt,xn)})},Y=gt=>a.get().getOrThunk(()=>{const Ht={},Fn=di(gt.element,`.${t.markers.item}`),Rn=uo(Fn,xn=>pn(xn,"aria-haspopup")==="true");return yt(Rn,xn=>{gt.getSystem().getByDom(xn).each(Gn=>{const ks=b(Gn);Ht[ks]=Gn})}),a.set(Ht),Ht}),se=(gt,Ht)=>{const Fn=Y(gt);Cs(Fn,(Rn,xn)=>{const Gn=eo(Ht,xn);qt(Rn.element,"aria-expanded",Gn)})},le=(gt,Ht,Fn)=>N.from(Fn[0]).bind(Rn=>Ht.lookupMenu(Rn).bind(xn=>{if(xn.type==="notbuilt")return N.none();{const Gn=xn.menu,ks=$(Ht,Fn.slice(1));return yt(ks,Qo=>{$s(Qo.element,t.markers.backgroundMenu)}),en(Gn.element)||Vn.append(gt,Cl(Gn)),Qc(Gn.element,[t.markers.backgroundMenu]),P(gt,Gn),G(gt,Ht,Fn),N.some(Gn)}}));let Ne;(function(gt){gt[gt.HighlightSubmenu=0]="HighlightSubmenu",gt[gt.HighlightParent=1]="HighlightParent"})(Ne||(Ne={}));const ge=(gt,Ht,Fn)=>{if(Fn.type==="notbuilt"){const Rn=gt.getSystem().build(Fn.nbMenu());return d.setMenuBuilt(Ht,Rn),Rn}else return Fn.menu},ke=(gt,Ht,Fn=Ne.HighlightSubmenu)=>{if(Ht.hasConfigured(l)&&l.isDisabled(Ht))return N.some(Ht);{const Rn=b(Ht);return d.expand(Rn).bind(xn=>(se(gt,xn),N.from(xn[0]).bind(Gn=>d.lookupMenu(Gn).bind(ks=>{const Qo=ge(gt,Gn,ks);return en(Qo.element)||Vn.append(gt,Cl(Qo)),t.onOpenSubmenu(gt,Ht,Qo,To(xn)),Fn===Ne.HighlightSubmenu?(bn.highlightFirst(Qo),le(gt,d,xn)):(bn.dehighlightAll(Qo),N.some(Ht))}))))}},Ae=(gt,Ht)=>{const Fn=b(Ht);return d.collapse(Fn).bind(Rn=>(se(gt,Rn),le(gt,d,Rn).map(xn=>(t.onCollapseMenu(gt,Ht,xn),xn))))},st=(gt,Ht)=>{const Fn=b(Ht);return d.refresh(Fn).bind(Rn=>(se(gt,Rn),le(gt,d,Rn)))},je=(gt,Ht)=>Rp(Ht.element)?N.none():ke(gt,Ht,Ne.HighlightSubmenu),$t=(gt,Ht)=>Rp(Ht.element)?N.none():Ae(gt,Ht),Xt=(gt,Ht)=>Ae(gt,Ht).orThunk(()=>t.onEscape(gt,Ht).map(()=>gt)),Qe=gt=>(Ht,Fn)=>Nu(Fn.getSource(),`.${t.markers.item}`).bind(Rn=>Ht.getSystem().getByDom(Rn).toOptional().bind(xn=>gt(Ht,xn).map(Pe))),cn=Fs([it(VN(),(gt,Ht)=>{const Fn=Ht.event.item;d.lookupItem(b(Fn)).each(()=>{const Rn=Ht.event.menu;bn.highlight(gt,Rn);const xn=b(Ht.event.item);d.refresh(xn).each(Gn=>G(gt,d,Gn))})}),Ru((gt,Ht)=>{const Fn=Ht.event.target;gt.getSystem().getByDom(Fn).each(Rn=>{b(Rn).indexOf("collapse-item")===0&&Ae(gt,Rn),ke(gt,Rn,Ne.HighlightSubmenu).fold(()=>{t.onExecute(gt,Rn)},ce)})}),Gs((gt,Ht)=>{h(gt).each(Fn=>{Vn.append(gt,Cl(Fn)),t.onOpenMenu(gt,Fn),t.highlightOnOpen===Zr.HighlightMenuAndItem?P(gt,Fn):t.highlightOnOpen===Zr.HighlightJustMenu&&D(gt,Fn)})}),it(ZN,(gt,Ht)=>{t.onHighlightItem(gt,Ht.event.menuComp,Ht.event.itemComp)}),it(jN,(gt,Ht)=>{t.onDehighlightItem(gt,Ht.event.menuComp,Ht.event.itemComp)}),...t.navigateOnHover?[it(vO(),(gt,Ht)=>{const Fn=Ht.event.item;st(gt,Fn),ke(gt,Fn,Ne.HighlightParent),t.onHover(gt,Fn)})]:[]]),It=gt=>bn.getHighlighted(gt).bind(bn.getHighlighted),fn=gt=>{It(gt).each(Ht=>{Ae(gt,Ht)})},bo=gt=>{d.getPrimary().each(Ht=>{P(gt,Ht)})},Us=gt=>N.from(gt.components()[0]).filter(Ht=>pn(Ht.element,"role")==="menu"),un={collapseMenu:fn,highlightPrimary:bo,repositionMenus:gt=>{d.getPrimary().bind(Fn=>It(gt).bind(Rn=>{const xn=b(Rn),Gn=Vc(d.getMenus()),ks=Ja(tt(Gn,Og.extractPreparedMenu));return d.getTriggeringPath(xn,Qo=>x(gt,ks,Qo))}).map(Rn=>({primary:Fn,triggeringPath:Rn}))).fold(()=>{Us(gt).each(Fn=>{t.onRepositionMenu(gt,Fn,[])})},({primary:Fn,triggeringPath:Rn})=>{t.onRepositionMenu(gt,Fn,Rn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ja(t.tmenuBehaviours,[En.config({mode:"special",onRight:Qe(je),onLeft:Qe($t),onEscape:Qe(Xt),focusIn:(gt,Ht)=>{d.getPrimary().each(Fn=>{S1(gt,Fn.element,v1())})}}),bn.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Ro.config({find:gt=>bn.getHighlighted(gt)}),Vn.config({})]),eventOrder:t.eventOrder,apis:un,events:cn}},GN=ne("collapse-item"),KN=(t,s,a)=>({primary:t,menus:s,expansions:a}),a8=(t,s)=>({primary:t,menus:oo(t,s),expansions:{}}),QE=t=>({value:tn(GN()),meta:{text:t}}),Fp=il({name:"TieredMenu",configFields:[gv("onExecute"),gv("onEscape"),Qd("onOpenMenu"),Qd("onOpenSubmenu"),ko("onRepositionMenu"),ko("onCollapseMenu"),Be("highlightOnOpen",Zr.HighlightMenuAndItem),cd("data",[rt("primary"),rt("menus"),rt("expansions")]),Be("fakeFocus",!1),ko("onHighlightItem"),ko("onDehighlightItem"),ko("onHover"),dp(),rt("dom"),Be("navigateOnHover",!0),Be("stayInDom",!1),Za("tmenuBehaviours",[En,bn,Ro,Vn]),Be("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:qN,extraApis:{tieredData:KN,singleData:a8,collapseItem:QE}}),i8=(t,s,a,c,d)=>{const h=()=>t.lazySink(s),b=c.type==="horizontal"?{layouts:{onLtr:()=>Xm(),onRtl:()=>Pv()}}:{},x=D=>D.length===2,T=D=>x(D)?b:{};return Fp.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightOnOpen:c.menu.highlightOnOpen,fakeFocus:c.menu.fakeFocus,onEscape:()=>(Do.close(s),t.onEscape.map(D=>D(s)),N.some(!0)),onExecute:()=>N.some(!0),onOpenMenu:(D,P)=>{Hi.positionWithinBounds(h().getOrDie(),P,a,d())},onOpenSubmenu:(D,P,$,G)=>{const Y=h().getOrDie();Hi.position(Y,$,{anchor:{type:"submenu",item:P,...T(G)}})},onRepositionMenu:(D,P,$)=>{const G=h().getOrDie();Hi.positionWithinBounds(G,P,a,d()),yt($,Y=>{const se=T(Y.triggeringPath);Hi.position(G,Y.triggeredMenu,{anchor:{type:"submenu",item:Y.triggeringItem,...se}})})}})},c8=(t,s)=>{const a=(G,Y)=>t.getRelated(G).exists(le=>ug(le,Y)),c=(G,Y)=>{Do.setContent(G,Y)},d=(G,Y,se)=>{const le=N.none;h(G,Y,se,le)},h=(G,Y,se,le)=>{const Ne=t.lazySink(G).getOrDie();Do.openWhileCloaked(G,Y,()=>Hi.positionWithinBounds(Ne,G,se,le())),Yt.setValue(G,N.some({mode:"position",config:se,getBounds:le}))},b=(G,Y,se)=>{x(G,Y,se,N.none)},x=(G,Y,se,le)=>{const Ne=i8(t,G,Y,se,le);Do.open(G,Ne),Yt.setValue(G,N.some({mode:"menu",menu:Ne}))},T=G=>{Do.isOpen(G)&&(Yt.setValue(G,N.none()),Do.close(G))},D=G=>Do.getState(G),P=G=>{Do.isOpen(G)&&Yt.getValue(G).each(Y=>{switch(Y.mode){case"menu":Do.getState(G).each(Fp.repositionMenus);break;case"position":const se=t.lazySink(G).getOrDie();Hi.positionWithinBounds(se,G,Y.config,Y.getBounds());break}})},$={setContent:c,showAt:d,showWithinBounds:h,showMenuAt:b,showMenuWithinBounds:x,hide:T,getContent:D,reposition:P,isOpen:Do.isOpen};return{uid:t.uid,dom:t.dom,behaviours:ja(t.inlineBehaviours,[Do.config({isPartOf:(G,Y,se)=>ug(Y,se)||a(G,se),getAttachPoint:G=>t.lazySink(G).getOrDie(),onOpen:G=>{t.onShow(G)},onClose:G=>{t.onHide(G)}}),Yt.config({store:{mode:"memory",initialValue:N.none()}}),Nc.config({channels:{...ih({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(G=>({fireEventInstead:{event:G.event}})).getOr({})}),...pC({...t.fireRepositionEventInstead.map(G=>({fireEventInstead:{event:G.event}})).getOr({}),doReposition:P})}})]),eventOrder:t.eventOrder,apis:$}},nr=il({name:"InlineView",configFields:[rt("lazySink"),ko("onShow"),ko("onHide"),ku("onEscape"),Za("inlineBehaviours",[Do,Yt,Nc]),Bs("fireDismissalEventInstead",[Be("event",Om())]),Bs("fireRepositionEventInstead",[Be("event",jy())]),Be("getRelated",N.none),Be("isExtraPart",Me),Be("eventOrder",N.none)],factory:c8,apis:{showAt:(t,s,a,c)=>{t.showAt(s,a,c)},showWithinBounds:(t,s,a,c,d)=>{t.showWithinBounds(s,a,c,d)},showMenuAt:(t,s,a,c)=>{t.showMenuAt(s,a,c)},showMenuWithinBounds:(t,s,a,c,d)=>{t.showMenuWithinBounds(s,a,c,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var F0=tinymce.util.Tools.resolve("tinymce.util.Delay"),ub=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),YN=tinymce.util.Tools.resolve("tinymce.EditorManager"),db=tinymce.util.Tools.resolve("tinymce.Env"),Cd;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Cd||(Cd={}));var fb;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(fb||(fb={}));const Ns=t=>s=>s.options.get(t),zC=t=>s=>N.from(t(s)),XN=t=>{const s=db.deviceType.isPhone(),a=db.deviceType.isTablet()||s,c=t.options.register,d=b=>Z(b)||b===!1,h=b=>Z(b)||dn(b);c("skin",{processor:b=>Z(b)||b===!1,default:"oxide"}),c("skin_url",{processor:"string"}),c("height",{processor:h,default:Math.max(t.getElement().offsetHeight,400)}),c("width",{processor:h,default:ub.DOM.getStyle(t.getElement(),"width")}),c("min_height",{processor:"number",default:100}),c("min_width",{processor:"number"}),c("max_height",{processor:"number"}),c("max_width",{processor:"number"}),c("style_formats",{processor:"object[]"}),c("style_formats_merge",{processor:"boolean",default:!1}),c("style_formats_autohide",{processor:"boolean",default:!1}),c("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),c("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),c("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),c("font_size_input_default_unit",{processor:"string",default:"pt"}),c("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),c("content_langs",{processor:"object[]"}),c("removed_menuitems",{processor:"string",default:""}),c("menubar",{processor:b=>Z(b)||Ut(b),default:!s}),c("menu",{processor:"object",default:{}}),c("toolbar",{processor:b=>Ut(b)||Z(b)||de(b)?{value:b,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),to(9,b=>{c("toolbar"+(b+1),{processor:"string"})}),c("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),c("toolbar_groups",{processor:"object",default:{}}),c("toolbar_location",{processor:"string",default:fb.auto}),c("toolbar_persist",{processor:"boolean",default:!1}),c("toolbar_sticky",{processor:"boolean",default:t.inline}),c("toolbar_sticky_offset",{processor:"number",default:0}),c("fixed_toolbar_container",{processor:"string",default:""}),c("fixed_toolbar_container_target",{processor:"object"}),c("ui_mode",{processor:"string",default:"combined"}),c("file_picker_callback",{processor:"function"}),c("file_picker_validator_handler",{processor:"function"}),c("file_picker_types",{processor:"string"}),c("typeahead_urls",{processor:"boolean",default:!0}),c("anchor_top",{processor:d,default:"#top"}),c("anchor_bottom",{processor:d,default:"#bottom"}),c("draggable_modal",{processor:"boolean",default:!1}),c("statusbar",{processor:"boolean",default:!0}),c("elementpath",{processor:"boolean",default:!0}),c("branding",{processor:"boolean",default:!0}),c("promotion",{processor:"boolean",default:!0}),c("resize",{processor:b=>b==="both"||Ut(b),default:!db.deviceType.isTouch()}),c("sidebar_show",{processor:"string"}),c("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),c("default_font_stack",{processor:"string[]",default:[]})},JN=Ns("readonly"),UC=Ns("height"),SO=Ns("width"),mb=zC(Ns("min_width")),$0=zC(Ns("min_height")),WC=zC(Ns("max_width")),e_=zC(Ns("max_height")),QN=zC(Ns("style_formats")),eP=Ns("style_formats_merge"),tP=Ns("style_formats_autohide"),nP=Ns("content_langs"),t_=Ns("removed_menuitems"),hb=Ns("toolbar_mode"),xO=Ns("toolbar_groups"),ZC=Ns("toolbar_location"),l8=Ns("fixed_toolbar_container"),oP=Ns("fixed_toolbar_container_target"),sP=Ns("toolbar_persist"),rP=Ns("toolbar_sticky_offset"),aP=Ns("menubar"),jC=Ns("toolbar"),iP=Ns("file_picker_callback"),cP=Ns("file_picker_validator_handler"),n_=Ns("font_size_input_default_unit"),EO=Ns("file_picker_types"),_O=Ns("typeahead_urls"),lP=Ns("anchor_top"),o_=Ns("anchor_bottom"),uP=Ns("draggable_modal"),dP=Ns("statusbar"),fP=Ns("elementpath"),TO=Ns("branding"),mP=Ns("resize"),kO=Ns("paste_as_text"),s_=Ns("sidebar_show"),hP=Ns("promotion"),qC=Ns("help_accessibility"),gP=Ns("default_font_stack"),AO=t=>t.options.get("skin")===!1,r_=t=>t.options.get("menubar")!==!1,OO=t=>{const s=t.options.get("skin_url");if(AO(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return YN.baseURL+"/skins/ui/"+a}},a_=t=>N.from(t.options.get("skin_url")),pP=t=>t.options.get("line_height_formats").split(" "),GC=t=>{const s=jC(t),a=Z(s),c=de(s)&&s.length>0;return!KC(t)&&(c||a||s===!0)},DO=t=>{const s=to(9,c=>t.options.get("toolbar"+(c+1))),a=uo(s,Z);return Sn(a.length>0,a)},KC=t=>DO(t).fold(()=>{const s=jC(t);return Nt(s,Z)&&s.length>0},Pe),YC=t=>ZC(t)===fb.bottom,$p=t=>{var s;if(!t.inline)return N.none();const a=(s=l8(t))!==null&&s!==void 0?s:"";if(a.length>0)return tr(io(),a);const c=oP(t);return Ct(c)?N.some(_e.fromDom(c)):N.none()},H0=t=>t.inline&&$p(t).isSome(),RO=t=>$p(t).getOrThunk(()=>gi(vr(_e.fromDom(t.getElement())))),XC=t=>t.inline&&!r_(t)&&!GC(t)&&!KC(t),gb=t=>(t.options.get("toolbar_sticky")||t.inline)&&!H0(t)&&!XC(t),Hp=t=>!H0(t)&&t.options.get("ui_mode")==="split",bP=t=>{const s=t.options.get("menu");return Vo(s,a=>({...a,items:a.items}))};var vP=Object.freeze({__proto__:null,get ToolbarMode(){return Cd},get ToolbarLocation(){return fb},register:XN,getSkinUrl:OO,getSkinUrlOption:a_,isReadOnly:JN,isSkinDisabled:AO,getHeightOption:UC,getWidthOption:SO,getMinWidthOption:mb,getMinHeightOption:$0,getMaxWidthOption:WC,getMaxHeightOption:e_,getUserStyleFormats:QN,shouldMergeStyleFormats:eP,shouldAutoHideStyleFormats:tP,getLineHeightFormats:pP,getContentLanguages:nP,getRemovedMenuItems:t_,isMenubarEnabled:r_,isMultipleToolbars:KC,isToolbarEnabled:GC,isToolbarPersist:sP,getMultipleToolbarsOption:DO,getUiContainer:RO,useFixedContainer:H0,isSplitUiMode:Hp,getToolbarMode:hb,isDraggableModal:uP,isDistractionFree:XC,isStickyToolbar:gb,getStickyToolbarOffset:rP,getToolbarLocation:ZC,isToolbarLocationBottom:YC,getToolbarGroups:xO,getMenus:bP,getMenubar:aP,getToolbar:jC,getFilePickerCallback:iP,getFilePickerTypes:EO,useTypeaheadUrls:_O,getAnchorTop:lP,getAnchorBottom:o_,getFilePickerValidatorHandler:cP,getFontSizeInputDefaultUnit:n_,useStatusBar:dP,useElementPath:fP,promotionEnabled:hP,useBranding:TO,getResize:mP,getPasteAsText:kO,getSidebarShow:s_,useHelpAccessibility:qC,getDefaultFontStack:gP});const u8=["visible","hidden","clip"],MO=t=>Tr(t).length>0&&!eo(u8,t),NO=t=>{if(Ri(t)){const s=rs(t,"overflow-x"),a=rs(t,"overflow-y");return MO(s)||MO(a)}else return!1},PO=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),d8=(t,s)=>{const a=xp(s,NO),c=a.length===0?he(s).map(Re).map(d=>xp(d,NO)).getOr([]):a;return Is(c).map(d=>({element:d,others:c.slice(1),isFullscreen:()=>PO(t)}))},Dg=(t,s)=>Hp(t)?d8(t,s):N.none(),pb=t=>{const s=[...tt(t.others,Qs),Ur()];return t.isFullscreen()?Ur():Hh(Qs(t.element),s)},Vi=il({name:"Button",factory:t=>{const s=YE(t.action),a=t.dom.tag,c=h=>kt(t.dom,"attributes").bind(b=>kt(b,h)),d=()=>{if(a==="button"){const h=c("type").getOr("button"),b=c("role").map(x=>({role:x})).getOr({});return{type:h,...b}}else return{role:t.role.getOr(c("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:su.augment(t.buttonBehaviours,[Ln.config({}),En.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Be("uid",void 0),rt("dom"),Be("components",[]),su.field("buttonBehaviours",[Ln,En]),Bo("action"),Bo("role"),Be("eventOrder",{})]}),f8=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Ho(s,(a,c)=>c.name==="class"?a:{...a,[c.name]:c.value},{})},BO=t=>Array.prototype.slice.call(t.dom.classList,0),tm=t=>{const s=_e.fromHtml(t),a=ti(s),c=f8(s),d=BO(s),h=a.length===0?{}:{innerHtml:Mu(s)};return{tag:oa(s),classes:d,attributes:c,...h}},Jo=t=>{const s=zA(t)&&Hr(t,"uid")?t.uid:N1("memento");return{get:h=>h.getSystem().getByUid(s).getOrDie(),getOpt:h=>h.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var m8=Object.freeze({__proto__:null,exhibit:(t,s)=>Yc({attributes:Yo([{key:s.tabAttr,value:"true"}])})}),h8=[Be("tabAttr","data-alloy-tabstop")];const Vs=li({fields:h8,name:"tabstopping",active:m8}),wP=tn("tooltip.exclusive"),JC=tn("tooltip.show"),QC=tn("tooltip.hide"),e2=tn("tooltip.immediateHide"),t2=tn("tooltip.immediateShow"),CP=(t,s,a)=>{t.getSystem().broadcastOn([wP],{})};var g8=Object.freeze({__proto__:null,hideAllExclusive:CP,immediateOpenClose:(t,s,a,c)=>ao(t,c?t2:e2),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,c)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Vn.set(d,c)})},setEnabled:(t,s,a,c)=>a.setEnabled(c)}),IO=Object.freeze({__proto__:null,events:(t,s)=>{const a=b=>{s.getTooltip().each(x=>{x.getSystem().isConnected()&&(Yf(x),t.onHide(b,x),s.clearTooltip())}),s.clearTimer()},c=b=>{if(!s.isShowing()&&s.isEnabled()){CP(b);const x=t.lazySink(b).getOrDie(),T=b.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Fs(t.mode==="normal"?[it(Kc(),D=>{ao(b,JC)}),it(Lf(),D=>{ao(b,QC)})]:[]),behaviours:xt([Vn.config({})])});s.setTooltip(T),Bu(x,T),t.onShow(b,T),Hi.position(x,T,{anchor:t.anchor(b)})}},d=b=>{s.getTooltip().each(x=>{const T=t.lazySink(b).getOrDie();Hi.position(T,x,{anchor:t.anchor(b)})})},h=()=>{switch(t.mode){case"normal":return[it(ld(),b=>{ao(b,t2)}),it(Am(),b=>{ao(b,e2)}),it(Kc(),b=>{ao(b,JC)}),it(Lf(),b=>{ao(b,QC)})];case"follow-highlight":return[it(Dm(),(b,x)=>{ao(b,JC)}),it(Jh(),b=>{ao(b,QC)})];case"children-normal":return[it(ld(),(b,x)=>{uc(b.element).each(T=>{Ar(x.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{ao(b,t2)},D=>{s.isShowing()&&(t.onShow(b,D),d(b))})})}),it(Am(),b=>{uc(b.element).fold(()=>{ao(b,e2)},ce)}),it(Kc(),b=>{tr(b.element,"[data-mce-tooltip]:hover").each(x=>{s.getTooltip().fold(()=>{ao(b,JC)},T=>{s.isShowing()&&(t.onShow(b,T),d(b))})})}),it(Lf(),b=>{tr(b.element,"[data-mce-tooltip]:hover").fold(()=>{ao(b,QC)},ce)})];default:return[it(ld(),(b,x)=>{uc(b.element).each(T=>{Ar(x.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{ao(b,t2)},D=>{s.isShowing()&&(t.onShow(b,D),d(b))})})}),it(Am(),b=>{uc(b.element).fold(()=>{ao(b,e2)},ce)})]}};return Fs(dt([[Qy(b=>{t.onSetup(b)}),it(JC,b=>{s.resetTimer(()=>{c(b)},t.delayForShow())}),it(QC,b=>{s.resetTimer(()=>{a(b)},t.delayForHide())}),it(t2,b=>{s.resetTimer(()=>{c(b)},0)}),it(e2,b=>{s.resetTimer(()=>{a(b)},0)}),it(Xl(),(b,x)=>{const T=x;T.universal||eo(T.channels,wP)&&a(b)}),Yd(b=>{a(b)})],h()]))}}),p8=[rt("lazySink"),rt("tooltipDom"),Be("exclusive",!0),Be("tooltipComponents",[]),fr("delayForShow",ne(300)),fr("delayForHide",ne(300)),fr("onSetup",ce),Dc("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Be("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:ne([Ca,wa,ya,us,Pr,xi]),onRtl:ne([Ca,wa,ya,us,Pr,xi])},bubble:Pu(0,-2,{})})),ko("onHide"),ko("onShow")],b8=Object.freeze({__proto__:null,init:()=>{const t=mn(!0),s=ts(),a=ts(),c=()=>{s.on(clearTimeout)},d=(b,x)=>{c(),s.set(setTimeout(b,x))},h=ne("not-implemented");return Xc({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:c,resetTimer:d,readState:h,isEnabled:()=>t.get(),setEnabled:b=>t.set(b)})}});const Ir=li({fields:p8,name:"tooltipping",active:IO,state:b8,apis:g8}),{entries:SP,setPrototypeOf:xP,isFrozen:v8,getPrototypeOf:y8,getOwnPropertyDescriptor:w8}=Object;let{freeze:au,seal:Sd,create:C8}=Object,{apply:LO,construct:FO}=typeof Reflect<"u"&&Reflect;LO||(LO=function(s,a,c){return s.apply(a,c)}),au||(au=function(s){return s}),Sd||(Sd=function(s){return s}),FO||(FO=function(s,a){return new s(...a)});const S8=lf(Array.prototype.forEach),x8=lf(Array.prototype.pop),n2=lf(Array.prototype.push),c_=lf(String.prototype.toLowerCase),$O=lf(String.prototype.toString),E8=lf(String.prototype.match),nm=lf(String.prototype.replace),_8=lf(String.prototype.indexOf),T8=lf(String.prototype.trim),xd=lf(RegExp.prototype.test),Vp=HO(TypeError);function lf(t){return function(s){for(var a=arguments.length,c=new Array(a>1?a-1:0),d=1;d<a;d++)c[d-1]=arguments[d];return LO(t,s,c)}}function HO(t){return function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return FO(t,a)}}function Es(t,s,a){var c;a=(c=a)!==null&&c!==void 0?c:c_,xP&&xP(t,null);let d=s.length;for(;d--;){let h=s[d];if(typeof h=="string"){const b=a(h);b!==h&&(v8(s)||(s[d]=b),h=b)}t[h]=!0}return t}function V0(t){const s=C8(null);for(const[a,c]of SP(t))s[a]=c;return s}function l_(t,s){for(;t!==null;){const c=w8(t,s);if(c){if(c.get)return lf(c.get);if(typeof c.value=="function")return lf(c.value)}t=y8(t)}function a(c){return console.warn("fallback value for",c),null}return a}const VO=au(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zO=au(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),o2=au(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),UO=au(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),u_=au(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),WO=au(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),s2=au(["#text"]),ZO=au(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),uf=au(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),d_=au(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),f_=au(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),k8=Sd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),A8=Sd(/<%[\w\W]*|[\w\W]*%>/gm),O8=Sd(/\${[\w\W]*}/gm),r2=Sd(/^data-[\-\w.\u00B7-\uFFFF]/),D8=Sd(/^aria-[\-\w]+$/),jO=Sd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),qO=Sd(/^(?:\w+script|data):/i),R8=Sd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),m_=Sd(/^html$/i);var h_=Object.freeze({__proto__:null,MUSTACHE_EXPR:k8,ERB_EXPR:A8,TMPLIT_EXPR:O8,DATA_ATTR:r2,ARIA_ATTR:D8,IS_ALLOWED_URI:jO,IS_SCRIPT_OR_DATA:qO,ATTR_WHITESPACE:R8,DOCTYPE_NAME:m_});const M8=()=>typeof window>"u"?null:window,EP=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let c=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(c=a.getAttribute(d));const h="dompurify"+(c?"#"+c:"");try{return s.createPolicy(h,{createHTML(b){return b},createScriptURL(b){return b}})}catch{return console.warn("TrustedTypes policy "+h+" could not be created."),null}};function GO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M8();const s=Ao=>GO(Ao);if(s.version="3.0.5",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;const a=t.document,c=a.currentScript;let{document:d}=t;const{DocumentFragment:h,HTMLTemplateElement:b,Node:x,Element:T,NodeFilter:D,NamedNodeMap:P=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:$,DOMParser:G,trustedTypes:Y}=t,se=T.prototype,le=l_(se,"cloneNode"),Ne=l_(se,"nextSibling"),ge=l_(se,"childNodes"),ke=l_(se,"parentNode");if(typeof b=="function"){const Ao=d.createElement("template");Ao.content&&Ao.content.ownerDocument&&(d=Ao.content.ownerDocument)}let Ae,st="";const{implementation:je,createNodeIterator:$t,createDocumentFragment:Xt,getElementsByTagName:Qe}=d,{importNode:cn}=a;let It={};s.isSupported=typeof SP=="function"&&typeof ke=="function"&&je&&je.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:fn,ERB_EXPR:bo,TMPLIT_EXPR:Us,DATA_ATTR:jo,ARIA_ATTR:un,IS_SCRIPT_OR_DATA:gt,ATTR_WHITESPACE:Ht}=h_;let{IS_ALLOWED_URI:Fn}=h_,Rn=null;const xn=Es({},[...VO,...zO,...o2,...u_,...s2]);let Gn=null;const ks=Es({},[...ZO,...uf,...d_,...f_]);let Qo=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),bc=null,Ju=null,fm=!0,Xi=!0,Qu=!1,Id=!0,Il=!1,Ch=!1,Zb=!1,nM=!1,My=!1,ak=!1,u6=!1,HY=!0,VY=!1;const YJ="user-content-";let CG=!0,oM=!1,ik={},ck=null;const zY=Es({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let UY=null;const WY=Es({},["audio","video","img","source","image","track"]);let SG=null;const ZY=Es({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),d6="http://www.w3.org/1998/Math/MathML",f6="http://www.w3.org/2000/svg",jb="http://www.w3.org/1999/xhtml";let lk=jb,xG=!1,EG=null;const XJ=Es({},[d6,f6,jb],$O);let AS;const JJ=["application/xhtml+xml","text/html"],QJ="text/html";let Ll,uk=null;const eQ=d.createElement("form"),jY=function(Ze){return Ze instanceof RegExp||Ze instanceof Function},_G=function(Ze){if(!(uk&&uk===Ze)){if((!Ze||typeof Ze!="object")&&(Ze={}),Ze=V0(Ze),AS=JJ.indexOf(Ze.PARSER_MEDIA_TYPE)===-1?AS=QJ:AS=Ze.PARSER_MEDIA_TYPE,Ll=AS==="application/xhtml+xml"?$O:c_,Rn="ALLOWED_TAGS"in Ze?Es({},Ze.ALLOWED_TAGS,Ll):xn,Gn="ALLOWED_ATTR"in Ze?Es({},Ze.ALLOWED_ATTR,Ll):ks,EG="ALLOWED_NAMESPACES"in Ze?Es({},Ze.ALLOWED_NAMESPACES,$O):XJ,SG="ADD_URI_SAFE_ATTR"in Ze?Es(V0(ZY),Ze.ADD_URI_SAFE_ATTR,Ll):ZY,UY="ADD_DATA_URI_TAGS"in Ze?Es(V0(WY),Ze.ADD_DATA_URI_TAGS,Ll):WY,ck="FORBID_CONTENTS"in Ze?Es({},Ze.FORBID_CONTENTS,Ll):zY,bc="FORBID_TAGS"in Ze?Es({},Ze.FORBID_TAGS,Ll):{},Ju="FORBID_ATTR"in Ze?Es({},Ze.FORBID_ATTR,Ll):{},ik="USE_PROFILES"in Ze?Ze.USE_PROFILES:!1,fm=Ze.ALLOW_ARIA_ATTR!==!1,Xi=Ze.ALLOW_DATA_ATTR!==!1,Qu=Ze.ALLOW_UNKNOWN_PROTOCOLS||!1,Id=Ze.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Il=Ze.SAFE_FOR_TEMPLATES||!1,Ch=Ze.WHOLE_DOCUMENT||!1,My=Ze.RETURN_DOM||!1,ak=Ze.RETURN_DOM_FRAGMENT||!1,u6=Ze.RETURN_TRUSTED_TYPE||!1,nM=Ze.FORCE_BODY||!1,HY=Ze.SANITIZE_DOM!==!1,VY=Ze.SANITIZE_NAMED_PROPS||!1,CG=Ze.KEEP_CONTENT!==!1,oM=Ze.IN_PLACE||!1,Fn=Ze.ALLOWED_URI_REGEXP||jO,lk=Ze.NAMESPACE||jb,Qo=Ze.CUSTOM_ELEMENT_HANDLING||{},Ze.CUSTOM_ELEMENT_HANDLING&&jY(Ze.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Qo.tagNameCheck=Ze.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ze.CUSTOM_ELEMENT_HANDLING&&jY(Ze.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Qo.attributeNameCheck=Ze.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ze.CUSTOM_ELEMENT_HANDLING&&typeof Ze.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Qo.allowCustomizedBuiltInElements=Ze.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Il&&(Xi=!1),ak&&(My=!0),ik&&(Rn=Es({},[...s2]),Gn=[],ik.html===!0&&(Es(Rn,VO),Es(Gn,ZO)),ik.svg===!0&&(Es(Rn,zO),Es(Gn,uf),Es(Gn,f_)),ik.svgFilters===!0&&(Es(Rn,o2),Es(Gn,uf),Es(Gn,f_)),ik.mathMl===!0&&(Es(Rn,u_),Es(Gn,d_),Es(Gn,f_))),Ze.ADD_TAGS&&(Rn===xn&&(Rn=V0(Rn)),Es(Rn,Ze.ADD_TAGS,Ll)),Ze.ADD_ATTR&&(Gn===ks&&(Gn=V0(Gn)),Es(Gn,Ze.ADD_ATTR,Ll)),Ze.ADD_URI_SAFE_ATTR&&Es(SG,Ze.ADD_URI_SAFE_ATTR,Ll),Ze.FORBID_CONTENTS&&(ck===zY&&(ck=V0(ck)),Es(ck,Ze.FORBID_CONTENTS,Ll)),CG&&(Rn["#text"]=!0),Ch&&Es(Rn,["html","head","body"]),Rn.table&&(Es(Rn,["tbody"]),delete bc.tbody),Ze.TRUSTED_TYPES_POLICY){if(typeof Ze.TRUSTED_TYPES_POLICY.createHTML!="function")throw Vp('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ze.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Vp('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ae=Ze.TRUSTED_TYPES_POLICY,st=Ae.createHTML("")}else Ae===void 0&&(Ae=EP(Y,c)),Ae!==null&&typeof st=="string"&&(st=Ae.createHTML(""));au&&au(Ze),uk=Ze}},qY=Es({},["mi","mo","mn","ms","mtext"]),GY=Es({},["foreignobject","desc","title","annotation-xml"]),tQ=Es({},["title","style","font","a","script"]),m6=Es({},zO);Es(m6,o2),Es(m6,UO);const TG=Es({},u_);Es(TG,WO);const nQ=function(Ze){let yn=ke(Ze);(!yn||!yn.tagName)&&(yn={namespaceURI:lk,tagName:"template"});const jn=c_(Ze.tagName),_a=c_(yn.tagName);return EG[Ze.namespaceURI]?Ze.namespaceURI===f6?yn.namespaceURI===jb?jn==="svg":yn.namespaceURI===d6?jn==="svg"&&(_a==="annotation-xml"||qY[_a]):!!m6[jn]:Ze.namespaceURI===d6?yn.namespaceURI===jb?jn==="math":yn.namespaceURI===f6?jn==="math"&&GY[_a]:!!TG[jn]:Ze.namespaceURI===jb?yn.namespaceURI===f6&&!GY[_a]||yn.namespaceURI===d6&&!qY[_a]?!1:!TG[jn]&&(tQ[jn]||!m6[jn]):!!(AS==="application/xhtml+xml"&&EG[Ze.namespaceURI]):!1},OS=function(Ze){n2(s.removed,{element:Ze});try{Ze.parentNode.removeChild(Ze)}catch{Ze.remove()}},sM=function(Ze,yn){try{n2(s.removed,{attribute:yn.getAttributeNode(Ze),from:yn})}catch{n2(s.removed,{attribute:null,from:yn})}if(yn.removeAttribute(Ze),Ze==="is"&&!Gn[Ze])if(My||ak)try{OS(yn)}catch{}else try{yn.setAttribute(Ze,"")}catch{}},KY=function(Ze){let yn,jn;if(nM)Ze="<remove></remove>"+Ze;else{const Sh=E8(Ze,/^[\r\n\t ]+/);jn=Sh&&Sh[0]}AS==="application/xhtml+xml"&&lk===jb&&(Ze='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ze+"</body></html>");const _a=Ae?Ae.createHTML(Ze):Ze;if(lk===jb)try{yn=new G().parseFromString(_a,AS)}catch{}if(!yn||!yn.documentElement){yn=je.createDocument(lk,"template",null);try{yn.documentElement.innerHTML=xG?st:_a}catch{}}const Fl=yn.body||yn.documentElement;return Ze&&jn&&Fl.insertBefore(d.createTextNode(jn),Fl.childNodes[0]||null),lk===jb?Qe.call(yn,Ch?"html":"body")[0]:Ch?yn.documentElement:Fl},YY=function(Ze){return $t.call(Ze.ownerDocument||Ze,Ze,D.SHOW_ELEMENT|D.SHOW_COMMENT|D.SHOW_TEXT,null,!1)},oQ=function(Ze){return Ze instanceof $&&(typeof Ze.nodeName!="string"||typeof Ze.textContent!="string"||typeof Ze.removeChild!="function"||!(Ze.attributes instanceof P)||typeof Ze.removeAttribute!="function"||typeof Ze.setAttribute!="function"||typeof Ze.namespaceURI!="string"||typeof Ze.insertBefore!="function"||typeof Ze.hasChildNodes!="function")},h6=function(Ze){return typeof x=="object"?Ze instanceof x:Ze&&typeof Ze=="object"&&typeof Ze.nodeType=="number"&&typeof Ze.nodeName=="string"},qb=function(Ze,yn,jn){It[Ze]&&S8(It[Ze],_a=>{_a.call(s,yn,jn,uk)})},XY=function(Ze){let yn;if(qb("beforeSanitizeElements",Ze,null),oQ(Ze))return OS(Ze),!0;const jn=Ll(Ze.nodeName);if(qb("uponSanitizeElement",Ze,{tagName:jn,allowedTags:Rn}),Ze.hasChildNodes()&&!h6(Ze.firstElementChild)&&(!h6(Ze.content)||!h6(Ze.content.firstElementChild))&&xd(/<[/\w]/g,Ze.innerHTML)&&xd(/<[/\w]/g,Ze.textContent))return OS(Ze),!0;if(!Rn[jn]||bc[jn]){if(!bc[jn]&&QY(jn)&&(Qo.tagNameCheck instanceof RegExp&&xd(Qo.tagNameCheck,jn)||Qo.tagNameCheck instanceof Function&&Qo.tagNameCheck(jn)))return!1;if(CG&&!ck[jn]){const _a=ke(Ze)||Ze.parentNode,Fl=ge(Ze)||Ze.childNodes;if(Fl&&_a){const Sh=Fl.length;for(let Ui=Sh-1;Ui>=0;--Ui)_a.insertBefore(le(Fl[Ui],!0),Ne(Ze))}}return OS(Ze),!0}return Ze instanceof T&&!nQ(Ze)||(jn==="noscript"||jn==="noembed"||jn==="noframes")&&xd(/<\/no(script|embed|frames)/i,Ze.innerHTML)?(OS(Ze),!0):(Il&&Ze.nodeType===3&&(yn=Ze.textContent,yn=nm(yn,fn," "),yn=nm(yn,bo," "),yn=nm(yn,Us," "),Ze.textContent!==yn&&(n2(s.removed,{element:Ze.cloneNode()}),Ze.textContent=yn)),qb("afterSanitizeElements",Ze,null),!1)},JY=function(Ze,yn,jn){if(HY&&(yn==="id"||yn==="name")&&(jn in d||jn in eQ))return!1;if(!(Xi&&!Ju[yn]&&xd(jo,yn))){if(!(fm&&xd(un,yn))){if(!Gn[yn]||Ju[yn]){if(!(QY(Ze)&&(Qo.tagNameCheck instanceof RegExp&&xd(Qo.tagNameCheck,Ze)||Qo.tagNameCheck instanceof Function&&Qo.tagNameCheck(Ze))&&(Qo.attributeNameCheck instanceof RegExp&&xd(Qo.attributeNameCheck,yn)||Qo.attributeNameCheck instanceof Function&&Qo.attributeNameCheck(yn))||yn==="is"&&Qo.allowCustomizedBuiltInElements&&(Qo.tagNameCheck instanceof RegExp&&xd(Qo.tagNameCheck,jn)||Qo.tagNameCheck instanceof Function&&Qo.tagNameCheck(jn))))return!1}else if(!SG[yn]){if(!xd(Fn,nm(jn,Ht,""))){if(!((yn==="src"||yn==="xlink:href"||yn==="href")&&Ze!=="script"&&_8(jn,"data:")===0&&UY[Ze])){if(!(Qu&&!xd(gt,nm(jn,Ht,"")))){if(jn)return!1}}}}}}return!0},QY=function(Ze){return Ze.indexOf("-")>0},eX=function(Ze){let yn,jn,_a,Fl;qb("beforeSanitizeAttributes",Ze,null);const{attributes:Sh}=Ze;if(!Sh)return;const Ui={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Gn};for(Fl=Sh.length;Fl--;){yn=Sh[Fl];const{name:xh,namespaceURI:kG}=yn;jn=xh==="value"?yn.value:T8(yn.value);const rQ=jn;if(_a=Ll(xh),Ui.attrName=_a,Ui.attrValue=jn,Ui.keepAttr=!0,Ui.forceKeepAttr=void 0,qb("uponSanitizeAttribute",Ze,Ui),jn=Ui.attrValue,Ui.forceKeepAttr)continue;if(!Ui.keepAttr){sM(xh,Ze);continue}if(!Id&&xd(/\/>/i,jn)){sM(xh,Ze);continue}Il&&(jn=nm(jn,fn," "),jn=nm(jn,bo," "),jn=nm(jn,Us," "));const tX=Ll(Ze.nodeName);if(!JY(tX,_a,jn)){sM(xh,Ze);continue}if(VY&&(_a==="id"||_a==="name")&&(sM(xh,Ze),jn=YJ+jn),Ae&&typeof Y=="object"&&typeof Y.getAttributeType=="function"&&!kG)switch(Y.getAttributeType(tX,_a)){case"TrustedHTML":{jn=Ae.createHTML(jn);break}case"TrustedScriptURL":{jn=Ae.createScriptURL(jn);break}}if(jn!==rQ)try{kG?Ze.setAttributeNS(kG,xh,jn):Ze.setAttribute(xh,jn)}catch{sM(xh,Ze)}}qb("afterSanitizeAttributes",Ze,null)},sQ=function Ao(Ze){let yn;const jn=YY(Ze);for(qb("beforeSanitizeShadowDOM",Ze,null);yn=jn.nextNode();)qb("uponSanitizeShadowNode",yn,null),!XY(yn)&&(yn.content instanceof h&&Ao(yn.content),eX(yn));qb("afterSanitizeShadowDOM",Ze,null)};return s.sanitize=function(Ao){let Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yn,jn,_a,Fl;if(xG=!Ao,xG&&(Ao="<!-->"),typeof Ao!="string"&&!h6(Ao))if(typeof Ao.toString=="function"){if(Ao=Ao.toString(),typeof Ao!="string")throw Vp("dirty is not a string, aborting")}else throw Vp("toString is not a function");if(!s.isSupported)return Ao;if(Zb||_G(Ze),s.removed=[],typeof Ao=="string"&&(oM=!1),oM){if(Ao.nodeName){const xh=Ll(Ao.nodeName);if(!Rn[xh]||bc[xh])throw Vp("root node is forbidden and cannot be sanitized in-place")}}else if(Ao instanceof x)yn=KY("<!---->"),jn=yn.ownerDocument.importNode(Ao,!0),jn.nodeType===1&&jn.nodeName==="BODY"||jn.nodeName==="HTML"?yn=jn:yn.appendChild(jn);else{if(!My&&!Il&&!Ch&&Ao.indexOf("<")===-1)return Ae&&u6?Ae.createHTML(Ao):Ao;if(yn=KY(Ao),!yn)return My?null:u6?st:""}yn&&nM&&OS(yn.firstChild);const Sh=YY(oM?Ao:yn);for(;_a=Sh.nextNode();)XY(_a)||(_a.content instanceof h&&sQ(_a.content),eX(_a));if(oM)return Ao;if(My){if(ak)for(Fl=Xt.call(yn.ownerDocument);yn.firstChild;)Fl.appendChild(yn.firstChild);else Fl=yn;return(Gn.shadowroot||Gn.shadowrootmode)&&(Fl=cn.call(a,Fl,!0)),Fl}let Ui=Ch?yn.outerHTML:yn.innerHTML;return Ch&&Rn["!doctype"]&&yn.ownerDocument&&yn.ownerDocument.doctype&&yn.ownerDocument.doctype.name&&xd(m_,yn.ownerDocument.doctype.name)&&(Ui="<!DOCTYPE "+yn.ownerDocument.doctype.name+`>
`+Ui),Il&&(Ui=nm(Ui,fn," "),Ui=nm(Ui,bo," "),Ui=nm(Ui,Us," ")),Ae&&u6?Ae.createHTML(Ui):Ui},s.setConfig=function(Ao){_G(Ao),Zb=!0},s.clearConfig=function(){uk=null,Zb=!1},s.isValidAttribute=function(Ao,Ze,yn){uk||_G({});const jn=Ll(Ao),_a=Ll(Ze);return JY(jn,_a,yn)},s.addHook=function(Ao,Ze){typeof Ze=="function"&&(It[Ao]=It[Ao]||[],n2(It[Ao],Ze))},s.removeHook=function(Ao){if(It[Ao])return x8(It[Ao])},s.removeHooks=function(Ao){It[Ao]&&(It[Ao]=[])},s.removeAllHooks=function(){It={}},s}var N8=GO();const KO=t=>N8().sanitize(t);var Hu=tinymce.util.Tools.resolve("tinymce.util.I18n");const P8={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},_P="temporary-placeholder",YO=t=>()=>kt(t,_P).getOr("!not found!"),XO=(t,s)=>{const a=t.toLowerCase();if(Hu.isRtl()){const c=hs(a,"-rtl");return po(s,c)?c:a}else return a},TP=(t,s)=>kt(s,XO(t,s)),JO=(t,s)=>{const a=s();return TP(t,a).getOrThunk(YO(a))},kP=(t,s,a)=>{const c=s();return TP(t,c).or(a).getOrThunk(YO(c))},B8=t=>Hu.isRtl()?po(P8,t):!1,g_=()=>no("add-focusable",[Gs(t=>{Bw(t.element,"svg").each(s=>qt(s,"focusable","false"))})]),z0=(t,s,a,c)=>{var d,h;const b=B8(s)?["tox-icon--flip"]:[],x=kt(a,XO(s,a)).or(c).getOrThunk(YO(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(b),innerHtml:x},behaviours:xt([...(h=t.behaviours)!==null&&h!==void 0?h:[],g_()])}},Vu=(t,s,a,c=N.none())=>z0(s,t,a(),c),I8=(t,s,a)=>{const c=a(),d=et(t,h=>po(c,XO(h,c)));return z0(s,d.getOr(_P),c,N.none())},L8={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},QO=il({name:"Notification",factory:t=>{const s=tn("notification-text"),a=Jo({dom:tm(`<p id=${s}>${KO(t.backstageProvider.translate(t.text))}</p>`),behaviours:xt([Vn.config({})])}),c=se=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${se}%`}}}),d=se=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${se}%`}}),h=Jo({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(0)]},d(0)],behaviours:xt([Vn.config({})])}),T={updateProgress:(se,le)=>{se.getSystem().isConnected()&&h.getOpt(se).each(Ne=>{Vn.set(Ne,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(le)]},d(le)])})},updateText:(se,le)=>{if(se.getSystem().isConnected()){const Ne=a.get(se);Vn.set(Ne,[hr(le)])}}},D=dt([t.icon.toArray(),t.level.toArray(),t.level.bind(se=>N.from(L8[se])).toArray()]),P=Jo(Vi.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Vu("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:xt([Vs.config({}),Ir.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:se=>{t.onAction(se)}})),$=I8(D,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),G={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:xt([Vn.config({})])},Y=[$,G];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(se=>["tox-notification","tox-notification--in",`tox-notification--${se}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:xt([Vs.config({}),Ln.config({}),En.config({mode:"special",onEscape:se=>(t.onAction(se),N.some(!0))})]),components:Y.concat(t.progress?[h.asSpec()]:[]).concat([P.asSpec()]),apis:T}},configFields:[Bo("level"),rt("progress"),Bo("icon"),rt("onAction"),rt("text"),rt("iconProvider"),rt("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var $8=(t,s,a,c)=>{const d=s.backstage.shared,h=()=>_e.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),b=()=>{const $=Qs(h());return N.some($)},x=$=>{b().each(G=>{yt($,Y=>{Xn(Y.element,"width"),La(Y.element)>G.width&&lt(Y.element,"width",G.width+"px")})})};return{open:($,G,Y)=>{const se=()=>{const ke=$t=>{Vn.remove($t,le),Ne()},Ae=($t,Xt)=>{ti($t.element).length===0?st($t,Xt):je($t,Xt)},st=($t,Xt)=>{nr.hide($t),c.clear(),Xt&&t.focus()},je=($t,Xt)=>{Xt&&En.focusIn($t)};c.on($t=>{G();const Xt=Y();ke($t),Ae($t,Xt)})},le=$i(QO.sketch({text:$.text,level:eo(["success","error","warning","warn","info"],$.type)?$.type:void 0,progress:$.progressBar===!0,icon:$.icon,onAction:se,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(c.isSet()){const ke=Cl(le);c.on(Ae=>{Vn.append(Ae,ke),nr.reposition(Ae),Hs.refresh(Ae),x(Ae.components())})}else{const ke=$i(nr.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:xt([En.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Vn.config({}),...gb(t)&&!d.header.isPositionedAtTop()?[]:[Hs.config({contextual:{lazyContext:()=>N.some(Qs(h())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:$t=>Dg(t,$t.element).map(Qe=>({bounds:pb(Qe),optScrollEnv:N.some({currentScrollTop:Qe.element.dom.scrollTop,scrollElmTop:ga(Qe.element).top})})).getOrThunk(()=>({bounds:Ur(),optScrollEnv:N.none()}))})]])})),Ae=Cl(le),st={maxHeightFunction:bp()},je={...d.anchors.banner(),overrides:st};c.set(ke),a.add(ke),nr.showWithinBounds(ke,Ae,{anchor:je},b)}dn($.timeout)&&$.timeout>0&&F0.setEditorTimeout(t,()=>{se()},$.timeout);const Ne=()=>{c.on(ke=>{nr.reposition(ke),Hs.refresh(ke),x(ke.components())})};return{close:se,reposition:Ne,text:ke=>{QO.updateText(le,ke)},settings:$,getEl:()=>le.element.dom,progressBar:{value:ke=>{QO.updateProgress(le,ke)}}}},close:$=>{$.close()},getArgs:$=>$.settings}};const AP={setup:(t,s)=>{const a=(d,h)=>{_n(d,Du(),{raw:h})},c=()=>t.getMenu().bind(bn.getHighlighted);s.on("keydown",d=>{const h=d.which;t.isActive()&&(t.isMenuOpen()?h===13?(c().each(Rm),d.preventDefault()):h===40?(c().fold(()=>{t.getMenu().each(bn.highlightFirst)},b=>{a(b,d)}),d.preventDefault(),d.stopImmediatePropagation()):(h===37||h===38||h===39)&&c().each(b=>{a(b,d),d.preventDefault(),d.stopImmediatePropagation()}):(h===13||h===38||h===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var p_;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(p_||(p_={}));var df=p_;const eD="tox-menu-nav__js",b_="tox-collection__item",v_="tox-swatch",tD={normal:eD,color:v_},y_="tox-collection__item--enabled",OP="tox-collection__group-heading",nD="tox-collection__item-icon",w_="tox-collection__item-label",V8="tox-collection__item-accessory",C_="tox-collection__item-caret",z8="tox-collection__item-checkmark",zp="tox-collection__item--active",oD="tox-collection__item-container",bb="tox-collection__item-container--column",DP="tox-collection__item-container--row",sD="tox-collection__item-container--align-right",S_="tox-collection__item-container--align-left",U8="tox-collection__item-container--valign-top",RP="tox-collection__item-container--valign-middle",MP="tox-collection__item-container--valign-bottom",rD=t=>kt(tD,t).getOr(eD),aD=t=>t==="color"?"tox-swatches":"tox-menu",x_=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:aD(t),tieredMenu:"tox-tiered-menu"}),vb=t=>{const s=x_(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:rD(t)}},NP=(t,s,a)=>{const c=x_(a);return{tag:"div",classes:dt([[c.menu,`tox-menu-${s}-column`],t?[c.hasIcons]:[]])}},PP=[wd.parts.items({})],a2=(t,s,a)=>{const c=x_(a);return{dom:{tag:"div",classes:dt([[c.tieredMenu]])},markers:vb(a)}},iD=ne([Bo("data"),Be("inputAttributes",{}),Be("inputStyles",{}),Be("tag","input"),Be("inputClasses",[]),ko("onSetValue"),Be("styles",{}),Be("eventOrder",{}),Za("inputBehaviours",[Yt,Ln]),Be("selectOnFocus",!0)]),BP=t=>xt([Ln.config({onFocus:t.selectOnFocus?s=>{const a=s.element,c=Zf(a);a.dom.setSelectionRange(0,c.length)}:ce})]),IP=t=>({...BP(t),...ja(t.inputBehaviours,[Yt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Zf(s.element),setValue:(s,a)=>{Zf(s.element)!==a&&jm(s.element,a)}},onSetValue:t.onSetValue})])}),LP=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),W8=(t,s)=>({uid:t.uid,dom:LP(t),components:[],behaviours:IP(t),eventOrder:t.eventOrder}),yb=il({name:"Input",configFields:iD(),factory:W8}),FP=tn("refetch-trigger-event"),cD=tn("redirect-menu-item-interaction"),U0="tox-menu__searcher",i2=t=>tr(t.element,`.${U0}`).bind(s=>t.getSystem().getByDom(s).toOptional()),$P=i2,Z8=(t,s)=>{Yt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},HP=t=>{const s=Yt.getValue(t),a=t.element.dom.selectionStart,c=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:c}},j8=(t,s)=>{Dr(s.element,"id").each(a=>qt(t.element,"aria-activedescendant",a))},q8=t=>{const s=(d,h)=>(h.cut(),N.none()),a=(d,h)=>{const b={interactionEvent:h.event,eventType:h.event.raw.type};return _n(d,cD,b),N.some(!0)},c="searcher-events";return{dom:{tag:"div",classes:[b_]},components:[yb.sketch({inputClasses:[U0,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:xt([no(c,[it(Gd(),d=>{ao(d,FP)}),it(Du(),(d,h)=>{h.event.raw.key==="Escape"&&h.stop()})]),En.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[c,En.name()]}})]}},wb="tox-collection--results__js",VP=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:tn("aria-item-search-result-id"),"aria-selected":"false"}}}:t},E_=(t,s)=>a=>{const c=os(a,s);return tt(c,d=>({dom:t,components:d}))},G8=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[wd.parts.items({preprocess:t!=="auto"?E_({tag:"div",classes:["tox-swatches__row"]},t):Jt})]}]}),zP=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[wd.parts.items({preprocess:E_({tag:"div",classes:["tox-collection__group"]},t)})]}),lD=(t,s)=>{const a=[];let c=[];return yt(t,(d,h)=>{s(d,h)?(c.length>0&&a.push(c),c=[],(po(d.dom,"innerHtml")||d.components&&d.components.length>0)&&c.push(d)):c.push(d)}),c.length>0&&a.push(c),tt(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},uD=(t,s,a)=>wd.parts.items({preprocess:c=>{const d=tt(c,a);return t!=="auto"&&t>1?E_({tag:"div",classes:["tox-collection__group"]},t)(d):lD(d,(h,b)=>s[b].type==="separator")}}),dD=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[uD(t,s,Jt)]}),UP=(t,s,a=!0)=>{const c=tn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",wb].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:c}},components:[uD(t,s,VP)]}},WP=(t,s,a)=>{const c=tn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[q8({i18n:Hu.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],wb],attributes:{id:c}},components:[uD(t,s,VP)]}]}},ZP=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[wd.parts.items({preprocess:a=>lD(a,(c,d)=>t[d].type==="separator")})]}),__=t=>ms(t,s=>"icon"in s&&s.icon!==void 0),Rg=t=>(console.error(Gl(t)),console.log(t),N.none()),K8=(t,s,a,c,d)=>{const h=ZP(a);return{value:t,dom:h.dom,components:h.components,items:a}},fD=(t,s,a,c,d)=>{const h=()=>d.menuType!=="searchable"?dD(c,a):d.searchMode.searchMode==="search-with-field"?WP(c,a,d.searchMode):UP(c,a);if(d.menuType==="color"){const b=G8(c);return{value:t,dom:b.dom,components:b.components,items:a}}else if(d.menuType==="normal"&&c==="auto"){const b=dD(c,a);return{value:t,dom:b.dom,components:b.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const b=h();return{value:t,dom:b.dom,components:b.components,items:a}}else if(d.menuType==="listpreview"&&c!=="auto"){const b=zP(c);return{value:t,dom:b.dom,components:b.components,items:a}}else return{value:t,dom:NP(s,c,d.menuType),components:PP,items:a}},Qr=Jr("type"),T_=Jr("name"),mD=Jr("label"),Mg=Jr("text"),jP=Jr("title"),qP=Jr("icon"),c2=Jr("value"),Y8=kc("fetch"),X8=kc("getSubmenuItems"),Up=kc("onAction"),GP=kc("onItemAction"),Cb=fr("onSetup",()=>ce),J8=ca("name"),Ng=ca("text"),Q8=ca("role"),Ed=ca("icon"),W0=ca("tooltip"),k_=ca("label"),A_=ca("shortcut"),eH=ku("select"),O_=Mr("active",!1),tH=Mr("borderless",!1),_d=Mr("enabled",!0),Z0=Mr("primary",!1),KP=t=>Be("columns",t),hD=Be("meta",{}),gD=fr("onAction",ce),Sb=t=>Ci("type",t),pD=t=>ia("name","name",co(()=>tn(`${t}-name`)),Wt),nH=t=>ia("value","value",co(()=>tn(`${t}-value`)),bl()),bD=On([Qr,Ng]),YP=t=>ar("separatormenuitem",bD,t),oH=On([Sb("autocompleteitem"),O_,_d,hD,c2,Ng,Ed]),sH=t=>ar("Autocompleter.Separator",bD,t),rH=t=>ar("Autocompleter.Item",oH,t),mc=[_d,W0,Ed,Ng,Cb],om=On([Qr,Up,A_].concat(mc)),XP=t=>ar("toolbarbutton",om,t),l2=[O_].concat(mc),vD=On(l2.concat([Qr,Up,A_])),JP=t=>ar("ToggleButton",vD,t),QP=[fr("predicate",Me),Dc("scope","node",["node","editor"]),Dc("position","selection",["node","selection","line"])],u2=mc.concat([Sb("contextformbutton"),Z0,Up,Lo("original",Jt)]),D_=l2.concat([Sb("contextformbutton"),Z0,Up,Lo("original",Jt)]),yD=mc.concat([Sb("contextformbutton")]),aH=l2.concat([Sb("contextformtogglebutton")]),sm=ba("type",{contextformbutton:u2,contextformtogglebutton:D_}),iH=On([Sb("contextform"),fr("initValue",ne("")),k_,Ac("commands",sm),Tu("launch",ba("type",{contextformbutton:yD,contextformtogglebutton:aH}))].concat(QP)),cH=t=>ar("ContextForm",iH,t),Td=On([Sb("contexttoolbar"),Jr("items")].concat(QP)),d2=t=>ar("ContextToolbar",Td,t),ff=[Qr,Jr("src"),ca("alt"),_("classes",[],Wt)],lH=On(ff),_s=[Qr,Mg,J8,_("classes",["tox-collection__item-label"],Wt)],j0=On(_s),f2=Xr(()=>jd("type",{cardimage:lH,cardtext:j0,cardcontainer:eB})),eB=On([Qr,Ci("direction","horizontal"),Ci("align","left"),Ci("valign","middle"),Ac("items",f2)]),Wp=[_d,Ng,Q8,A_,nH("menuitem"),hD],wD=On([Qr,k_,Ac("items",f2),Cb,gD].concat(Wp)),uH=t=>ar("cardmenuitem",wD,t),CD=On([Qr,O_,Ed].concat(Wp)),dH=t=>ar("choicemenuitem",CD,t),SD=[Qr,Jr("fancytype"),gD],tB=[Be("initData",{})].concat(SD),xD=[ku("select"),R("initData",{},[Mr("allowCustomColors",!0),Ci("storageKey","default"),Au("colors",bl())])].concat(SD),nB=ba("fancytype",{inserttable:tB,colorswatch:xD}),R_=t=>ar("fancymenuitem",nB,t),fH=On([Qr,Cb,gD,Ed].concat(Wp)),mH=t=>ar("menuitem",fH,t),hH=On([Qr,X8,Cb,Ed].concat(Wp)),gH=t=>ar("nestedmenuitem",hH,t),pH=On([Qr,Ed,O_,Cb,Up].concat(Wp)),oB=t=>ar("togglemenuitem",pH,t),ED=(t,s,a)=>{const c=di(t.element,"."+a);if(c.length>0){const d=Tt(c,h=>{const b=h.dom.getBoundingClientRect().top,x=c[0].dom.getBoundingClientRect().top;return Math.abs(b-x)>s}).getOr(c.length);return N.some({numColumns:d,numRows:Math.ceil(c.length/d)})}else return N.none()},sB=(t,s)=>xt([no(t,s)]),q0={namedEvents:sB,unnamedEvents:t=>sB(tn("unnamed-events"),t)},vH=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),rB="silver.readonly",aB=On([tv("readonly")]),G0=(t,s)=>{const c=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&yt(d,h=>{h.broadcastOn([of()],{target:c})}),yt(d,h=>{h.broadcastOn([rB],{readonly:s})})},_D=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&G0(s,!0)}),t.on("SwitchMode",()=>G0(s,t.mode.isReadOnly())),JN(t)&&t.mode.set("readonly")},Ga=()=>Nc.config({channels:{[rB]:{schema:aB,onReceive:(t,s)=>{l.set(t,s.readonly)}}}}),mf={item:t=>l.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>l.config({disabled:t}),splitButton:t=>l.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>l.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},m2=(t,s)=>{const a=t.getApi(s);return c=>{c(a)}},hc=(t,s)=>Gs(a=>{m2(t,a)(d=>{const h=t.onSetup(d);Xe(h)&&s.set(h)})}),Zp=(t,s)=>Yd(a=>m2(t,a)(s.get())),TD=(t,s)=>Ru((a,c)=>{m2(t,a)(t.onAction),!t.triggersSubmenu&&s===df.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&ao(a,y1()),c.stop())}),iB={[Jl()]:["disabling","alloy.base.behaviour","toggling","item-events"]},xb=Ja,K0=(t,s,a,c)=>{const d=mn(ce);return{type:"item",dom:s.dom,components:xb(s.optComponents),data:t.data,eventOrder:iB,hasSubmenu:t.triggersSubmenu,itemBehaviours:xt([no("item-events",[TD(t,a),hc(t,d),Zp(t,d)]),mf.item(()=>!t.enabled||c.isDisabled()),Ga(),Vn.config({})].concat(t.itemBehaviours))}},Eb=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),M_=t=>{const s=db.os.isMacOS()||db.os.isiOS(),d=s?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},h=t.split("+"),b=tt(h,x=>{const T=x.toLowerCase().trim();return po(d,T)?d[T]:x});return s?b.join(""):b.join("+")},N_=(t,s,a=[nD])=>Vu(t,{tag:"div",classes:a},s),cB=t=>({dom:{tag:"div",classes:[w_]},components:[hr(Hu.translate(t))]}),lB=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),yH=(t,s)=>({dom:{tag:"div",classes:[w_]},components:[{dom:{tag:t.tag,styles:t.styles},components:[hr(Hu.translate(s))]}]}),wH=t=>({dom:{tag:"div",classes:[V8]},components:[hr(M_(t))]}),uB=t=>N_("checkmark",t,[z8]),dB=t=>N_("chevron-right",t,[C_]),fB=t=>N_("chevron-down",t,[C_]),mB=(t,s)=>{const a=t.direction==="vertical"?bb:DP,c=t.align==="left"?S_:sD;return{dom:{tag:"div",classes:[oD,a,c,(()=>{switch(t.valign){case"top":return U8;case"middle":return RP;case"bottom":return MP}})()]},components:s}},CH=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),SH=(t,s,a)=>{const c="custom",d="remove",h=t.value,b=t.iconContent.map(D=>kP(D,s.icons,a)),x=t.ariaLabel.map(D=>({"aria-label":s.translate(D),"data-mce-name":D})).getOr({});return{dom:(()=>{const D=v_,P=b.getOr(""),$={tag:"div",attributes:x,classes:[D]};return h===c?{...$,tag:"button",classes:[...$.classes,"tox-swatches__picker-btn"],innerHtml:P}:h===d?{...$,classes:[...$.classes,"tox-swatch--remove"],innerHtml:P}:Ct(h)?{...$,attributes:{...$.attributes,"data-mce-color":h},styles:{"background-color":h},innerHtml:P}:$})(),optComponents:[]}},hB=t=>{const s=t.map(a=>({attributes:{id:tn("menu-item"),"aria-label":Hu.translate(a)}})).getOr({});return{tag:"div",classes:[eD,b_],...s}},Y0=(t,s,a,c)=>{const d={tag:"div",classes:[nD]},h=G=>Vu(G,d,s.icons,c),b=()=>N.some({dom:d}),x=a?t.iconContent.map(h).orThunk(b):N.none(),T=t.checkMark,D=N.from(t.meta).fold(()=>cB,G=>po(G,"style")?Qt(yH,G.style):cB),P=t.htmlContent.fold(()=>t.textContent.map(D),G=>N.some(lB(G,[w_])));return{dom:hB(t.ariaLabel),optComponents:[x,P,t.shortcutContent.map(wH),T,t.caret]}},h2=(t,s,a,c=N.none())=>t.presets==="color"?SH(t,s,c):Y0(t,s,a,c),kD=(t,s,a)=>kt(t,"tooltipWorker").map(c=>[Ir.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:bp}}),mode:"follow-highlight",onShow:(d,h)=>{c(b=>{Ir.setComponents(d,[Rw({element:_e.fromDom(b)})])})}})]).getOrThunk(()=>a.map(c=>[Ir.config({...s.providers.tooltips.getConfig({tooltipText:c}),mode:"follow-highlight"})]).getOr([])),gB=t=>ub.DOM.encode(t),AD=(t,s)=>{const a=Hu.translate(t),c=gB(a);if(s.length>0){const d=new RegExp(vH(s),"gi");return c.replace(d,h=>`<span class="tox-autocompleter-highlight">${h}</span>`)}else return c},pB=(t,s,a,c,d,h,b,x=!0)=>{const T=h2({presets:c,textContent:N.none(),htmlContent:a?t.text.map(P=>AD(P,s)):N.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:N.none(),checkMark:N.none(),caret:N.none(),value:t.value},b.providers,x,t.icon),D=t.text.filter(P=>!a&&P!=="");return K0({data:Eb(t),enabled:t.enabled,getApi:ne({}),onAction:P=>d(t.value,t.meta),onSetup:ne(ce),triggersSubmenu:!1,itemBehaviours:kD(t,b,D)},T,h,b.providers)},P_=(t,s)=>tt(t,a=>{switch(a.type){case"cardcontainer":return mB(a,P_(a.items,s));case"cardimage":return CH(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(h=>eo(s.cardText.highlightOn,h))?N.from(s.cardText.matchText).getOr(""):"";return lB(AD(a.text,d),a.classes)}}),OD=(t,s,a,c)=>{const d=b=>({isEnabled:()=>!l.isDisabled(b),setEnabled:x=>{l.set(b,!x),yt(di(b.element,"*"),T=>{b.getSystem().getByDom(T).each(D=>{D.hasConfigured(l)&&l.set(D,!x)})})}}),h={dom:hB(t.label),optComponents:[N.some({dom:{tag:"div",classes:[oD,DP]},components:P_(t.items,c)})]};return K0({data:Eb({text:N.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:N.from(c.itemBehaviours).getOr([])},h,s,a.providers)},DD=(t,s,a,c,d,h,b,x=!0)=>{const T=$=>({setActive:G=>{lo.set($,G)},isActive:()=>lo.isOn($),isEnabled:()=>!l.isDisabled($),setEnabled:G=>l.set($,!G)}),D=h2({presets:a,textContent:s?t.text:N.none(),htmlContent:N.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:N.none(),checkMark:s?N.some(uB(b.icons)):N.none(),caret:N.none(),value:t.value},b,x),P=t.text.filter(ne(!s)).map($=>Ir.config(b.tooltips.getConfig({tooltipText:b.translate($)})));return Ds(K0({data:Eb(t),enabled:t.enabled,getApi:T,onAction:$=>c(t.value),onSetup:$=>($.setActive(d),ce),triggersSubmenu:!1,itemBehaviours:[...P.toArray()]},D,h,b),{toggling:{toggleClass:y_,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},RD=AE(JE(),CO()),bB=t=>({value:wB(t)}),MD=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,vB=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,yB=t=>MD.test(t)||vB.test(t),wB=t=>dl(t,"#").toUpperCase(),CB=t=>yB(t)?N.some({value:wB(t)}):N.none(),SB=t=>({value:t.value.replace(MD,(a,c,d,h)=>c+c+d+d+h+h)}),xB=t=>{const s=SB(t),a=vB.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},ND=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},g2=t=>{const s=ND(t.red)+ND(t.green)+ND(t.blue);return bB(s)},EB=Math.min,_B=Math.max,B_=Math.round,xH=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,EH=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,_b=(t,s,a,c)=>({red:t,green:s,blue:a,alpha:c}),PD=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},TB=t=>{let s,a,c;const d=(t.hue||0)%360;let h=t.saturation/100,b=t.value/100;if(h=_B(0,EB(h,1)),b=_B(0,EB(b,1)),h===0)return s=a=c=B_(255*b),_b(s,a,c,1);const x=d/60,T=b*h,D=T*(1-Math.abs(x%2-1)),P=b-T;switch(Math.floor(x)){case 0:s=T,a=D,c=0;break;case 1:s=D,a=T,c=0;break;case 2:s=0,a=T,c=D;break;case 3:s=0,a=D,c=T;break;case 4:s=D,a=0,c=T;break;case 5:s=T,a=0,c=D;break;default:s=a=c=0}return s=B_(255*(s+P)),a=B_(255*(a+P)),c=B_(255*(c+P)),_b(s,a,c,1)},p2=t=>{const s=xB(t),a=parseInt(s[1],16),c=parseInt(s[2],16),d=parseInt(s[3],16);return _b(a,c,d,1)},BD=(t,s,a,c)=>{const d=parseInt(t,10),h=parseInt(s,10),b=parseInt(a,10),x=parseFloat(c);return _b(d,h,b,x)},ID=t=>{const s=xH.exec(t);if(s!==null)return N.some(BD(s[1],s[2],s[3],"1"));const a=EH.exec(t);return a!==null?N.some(BD(a[1],a[2],a[3],a[4])):N.none()},kB=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,AB=_b(255,0,0,1),_H=t=>{t.dispatch("SkinLoaded")},TH=(t,s)=>{t.dispatch("SkinLoadError",s)},I_=t=>{t.dispatch("ResizeEditor")},L_=(t,s)=>{t.dispatch("ResizeContent",s)},kH=(t,s)=>{t.dispatch("ScrollContent",s)},OB=(t,s)=>{t.dispatch("TextColorChange",s)},AH=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},OH=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),DH=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},RH=(t,s)=>{t.dispatch("StylesTextUpdate",s)},LD=(t,s)=>{t.dispatch("AlignTextUpdate",s)},DB=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},RB=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},MH=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},MB=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},NH=t=>{t.dispatch("ToggleSidebar")},PH=t=>{t.dispatch("ToggleView")},F_=(t,s)=>()=>{t(),s()},Ic=t=>Tb(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),BH=(t,s)=>a=>{const c=pa(),d=()=>{a.setActive(t.formatter.match(s));const h=t.formatter.formatChanged(s,a.setActive);c.set(h)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),c.clear()}},$_=(t,s)=>a=>{const c=Ic(t)(a),d=BH(t,s)(a);return()=>{c(),d()}},Tb=(t,s,a)=>c=>{const d=()=>a(c),h=()=>{a(c),t.on(s,d)};return t.initialized?h():t.once("init",h),()=>{t.off("init",h),t.off(s,d)}},NB=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},iu=(t,s)=>()=>t.execCommand(s);var kb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const b2={},FD=(t,s=10)=>{const a=kb.getItem(t),c=Z(a)?JSON.parse(a):[],h=(D=>s-D.length<0?D.slice(0,s):D)(c),b=D=>{nt(h,D).each(x),h.unshift(D),h.length>s&&h.pop(),kb.setItem(t,JSON.stringify(h))},x=D=>{h.splice(D,1)};return{add:b,state:()=>h.slice(0)}},H_=t=>kt(b2,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=kb.getItem(s);if(Mt(a)){const d=kb.getItem("tinymce-custom-colors");kb.setItem(s,Ct(d)?d:"[]")}const c=FD(s,10);return b2[t]=c,c}),PB=t=>tt(H_(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),BB=(t,s)=>{H_(t).add(s)},v2=(t,s,a)=>({hue:t,saturation:s,value:a}),y2=t=>{let s=0,a=0,c=0;const d=t.red/255,h=t.green/255,b=t.blue/255,x=Math.min(d,Math.min(h,b)),T=Math.max(d,Math.max(h,b));if(x===T)return c=x,v2(0,0,c*100);const D=d===x?h-b:b===x?d-h:b-d;return s=d===x?3:b===x?1:5,s=60*(s-D/(T-x)),a=(T-x)/T,c=T,v2(Math.round(s),Math.round(a*100),Math.round(c*100))},$D=t=>y2(p2(t)),w2=t=>g2(TB(t)),IB=t=>CB(t).orThunk(()=>ID(t).map(g2)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const c=a.getImageData(0,0,1,1).data,d=c[0],h=c[1],b=c[2],x=c[3];return g2(_b(d,h,b,x))}),HD="forecolor",VD="hilitecolor",IH=5,LH=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+IB(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},lh=t=>s=>s.options.get(t),zD="#000000",FH=t=>{const s=t.options.register,a=d=>Nt(d,Z)?{value:LH(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},c=d=>dn(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:c,default:UD(t)}),s("color_cols_foreground",{processor:c,default:LB(t,HD)}),s("color_cols_background",{processor:c,default:LB(t,VD)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:zD}),s("color_default_background",{processor:"string",default:zD})},V_=(t,s)=>s===HD&&t.options.isSet("color_map_foreground")?lh("color_map_foreground")(t):s===VD&&t.options.isSet("color_map_background")?lh("color_map_background")(t):lh("color_map")(t),UD=(t,s="default")=>Math.max(IH,Math.ceil(Math.sqrt(V_(t,s).length))),LB=(t,s)=>{const a=lh("color_cols")(t),c=UD(t,s);return a===UD(t)?c:a},FB=(t,s="default")=>Math.round(s===HD?lh("color_cols_foreground")(t):s===VD?lh("color_cols_background")(t):lh("color_cols")(t)),$B=lh("custom_colors"),$H=lh("color_default_foreground"),HB=lh("color_default_background"),HH="rgba(0, 0, 0, 0)",VH=t=>ID(t).exists(s=>s.alpha!==0),uh=t=>yl(t,s=>{if(xo(s)){const a=rs(s,"background-color");return Sn(VH(a),a)}else return N.none()}).getOr(HH),VB=(t,s)=>{const a=_e.fromDom(t.selection.getStart()),c=s==="hilitecolor"?uh(a):rs(a,"color");return ID(c).map(d=>"#"+g2(d).value)},zH=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},WD=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},fi=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{zH(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{WD(t,s)})},zB=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},ZD=(t,s,a,c)=>{a==="custom"?GB(t)(h=>{h.each(b=>{BB(s,b),t.execCommand("mceApplyTextcolor",s,b),c(b)})},VB(t,s).getOr(zD)):a==="remove"?(c(""),t.execCommand("mceRemoveTextcolor",s)):(c(a),t.execCommand("mceApplyTextcolor",s,a))},jD=(t,s,a)=>t.concat(PB(s).concat(zB(a))),UB=(t,s,a)=>c=>{c(jD(t,s,a))},qD=(t,s,a)=>{const c=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(c,a)},WB=(t,s)=>{t.setTooltip(s)},ZB=(t,s)=>a=>{const c=VB(t,s);return Vr(c,a.toUpperCase())},GD=(t,s,a)=>{if(fe(a))return s==="forecolor"?"Text color":"Background color";const c=s==="forecolor"?"Text color {0}":"Background color {0}",d=jD(V_(t,s),s,!1),h=et(d,b=>b.value===a).getOr({text:""}).text;return t.translate([c,t.translate(h)])},jB=(t,s,a,c)=>{t.ui.registry.addSplitButton(s,{tooltip:GD(t,a,c.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:ZB(t,a),columns:FB(t,a),fetch:UB(V_(t,a),a,$B(t)),onAction:d=>{ZD(t,a,c.get(),ce)},onItemAction:(d,h)=>{ZD(t,a,h,b=>{c.set(b),OB(t,{name:s,color:b})})},onSetup:d=>{qD(d,s,c.get());const h=b=>{b.name===s&&(qD(d,b.name,b.color),WB(d,GD(t,a,b.color)))};return t.on("TextColorChange",h),F_(Ic(t)(d),()=>{t.off("TextColorChange",h)})}})},qB=(t,s,a,c,d)=>{t.ui.registry.addNestedMenuItem(s,{text:c,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:h=>(WB(h,GD(t,a,d.get())),qD(h,s,d.get()),Ic(t)(h)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:ZB(t,a),initData:{storageKey:a},onAction:h=>{ZD(t,a,h.value,b=>{d.set(b),OB(t,{name:s,color:b})})}}]})},GB=t=>(s,a)=>{let c=!1;const d=x=>{const D=x.getData().colorpicker;c?(s(N.from(D)),x.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",D]))},h=(x,T)=>{T.name==="hex-valid"&&(c=T.value)},b={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:b,onAction:h,onSubmit:d,onClose:ce,onCancel:()=>{s(N.none())}})},UH=t=>{fi(t);const s=$H(t),a=HB(t),c=mn(s),d=mn(a);jB(t,"forecolor","forecolor",c),jB(t,"backcolor","hilitecolor",d),qB(t,"forecolor","forecolor","Text color",c),qB(t,"backcolor","hilitecolor","Background color",d)},KD=(t,s,a,c,d,h,b,x)=>{const T=__(s),P=WH(s,a,c,d!=="color"?"normal":"color",h,b,x);return fD(t,T,P,c,{menuType:d})},WH=(t,s,a,c,d,h,b)=>Ja(tt(t,x=>x.type==="choiceitem"?dH(x).fold(Rg,T=>N.some(DD(T,a===1,c,s,h(T.value),d,b,__(t)))):N.none())),z_=(t,s)=>{const a=vb(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?tr(d.element,"[aria-checked=true]"):N.none()}},ZH=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${v_}`:`.${b_}`}},jH=(t,s)=>{const a=qH(t,s),c=s.colorinput.getColorCols(t.initData.storageKey),d="color",b={...KD(tn("menu-value"),a,x=>{t.onAction({value:x})},c,d,df.CLOSE_ON_EXECUTE,t.select.getOr(Me),s.shared.providers),markers:vb(d),movement:z_(c,d),showMenuRole:!1};return{type:"widget",data:{value:tn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[RD.widget(wd.sketch(b))]}},qH=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>jD(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),c=>c.concat(zB(a)))},KB=tn("cell-over"),YB=tn("cell-execute"),GH=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),KH=(t,s,a)=>{const c=b=>_n(b,KB,{row:t,col:s}),d=b=>_n(b,YB,{row:t,col:s}),h=(b,x)=>{x.stop(),d(b)};return $i({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:xt([no("insert-table-picker-cell",[it(Kc(),Ln.focus),it(Jl(),d),it(Kh(),h),it(fd(),h)]),lo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ln.config({onFocus:c})])})},YH=(t,s,a)=>{const c=[];for(let d=0;d<s;d++){const h=[];for(let b=0;b<a;b++){const x=t(d+1,b+1);h.push(KH(d,b,x))}c.push(h)}return c},XH=(t,s,a,c,d)=>{for(let h=0;h<c;h++)for(let b=0;b<d;b++)lo.set(t[h][b],h<=s&&b<=a)},JH=t=>Se(t,s=>tt(s,Cl)),YD=(t,s)=>hr(`${s}x${t}`),XB={inserttable:(t,s)=>{const d=GH(s),h=YH(d,10,10),b=YD(0,0),x=Jo({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[b],behaviours:xt([Vn.config({})])});return{type:"widget",data:{value:tn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[RD.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:JH(h).concat(x.asSpec()),behaviours:xt([no("insert-table-picker",[Gs(T=>{Vn.set(x.get(T),[b])}),Xy(KB,(T,D,P)=>{const{row:$,col:G}=P.event;XH(h,$,G,10,10),Vn.set(x.get(T),[YD($+1,G+1)])}),Xy(YB,(T,D,P)=>{const{row:$,col:G}=P.event;ao(T,y1()),t.onAction({numRows:$+1,numColumns:G+1})})]),En.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:jH},QH=(t,s)=>kt(XB,t.fancytype).map(a=>a(t,s)),e9=(t,s,a,c=!0,d=!1)=>{const h=d?fB(a.icons):dB(a.icons),b=T=>({isEnabled:()=>!l.isDisabled(T),setEnabled:D=>l.set(T,!D),setIconFill:(D,P)=>{tr(T.element,`svg path[class="${D}"], rect[class="${D}"]`).each($=>{qt($,"fill",P)})},setTooltip:D=>{const P=a.translate(D);qt(T.element,"aria-label",P)}}),x=h2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:N.none(),ariaLabel:t.text,caret:N.some(h),checkMark:N.none(),shortcutContent:t.shortcut},a,c);return K0({data:Eb(t),getApi:b,enabled:t.enabled,onAction:ce,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},x,s,a)},t9=(t,s,a,c=!0)=>{const d=b=>({isEnabled:()=>!l.isDisabled(b),setEnabled:x=>l.set(b,!x)}),h=h2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:N.none(),ariaLabel:t.text,caret:N.none(),checkMark:N.none(),shortcutContent:t.shortcut},a,c);return K0({data:Eb(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a)},JB=t=>({type:"separator",dom:{tag:"div",classes:[b_,OP]},components:t.text.map(hr).toArray()}),n9=(t,s,a,c=!0)=>{const d=b=>({setActive:x=>{lo.set(b,x)},isActive:()=>lo.isOn(b),isEnabled:()=>!l.isDisabled(b),setEnabled:x=>l.set(b,!x)}),h=h2({iconContent:t.icon,textContent:t.text,htmlContent:N.none(),ariaLabel:t.text,checkMark:N.some(uB(a.icons)),caret:N.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,c);return Ds(K0({data:Eb(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a),{toggling:{toggleClass:y_,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},o9=pB,QB=JB,s9=t9,eI=e9,r9=n9,tI=QH,a9=OD;var c9=Object.freeze({__proto__:null,getCoupled:(t,s,a,c)=>a.getOrCreate(t,s,c),getExistingCoupled:(t,s,a,c)=>a.getExisting(t,s,c)}),l9=[Fo("others",ql(Yn.value,bl()))],u9=Object.freeze({__proto__:null,init:()=>{const t={},s=(h,b)=>{if(vs(h.others).length===0)throw new Error("Cannot find any known coupled components");return kt(t,b)},a=(h,b,x)=>s(b,x).getOrThunk(()=>{const D=kt(b.others,x).getOrDie("No information found for coupled component: "+x)(h),P=h.getSystem().build(D);return t[x]=P,P}),c=(h,b,x)=>s(b,x).orThunk(()=>(kt(b.others,x).getOrDie("No information found for coupled component: "+x),N.none())),d=ne({});return Xc({readState:d,getExisting:c,getOrCreate:a})}});const jr=li({fields:l9,name:"coupling",apis:c9,state:u9}),XD=t=>{let s=N.none(),a=[];const c=D=>XD(P=>{d($=>{P(D($))})}),d=D=>{b()?T(D):a.push(D)},h=D=>{b()||(s=N.some(D),x(a),a=[])},b=()=>s.isSome(),x=D=>{yt(D,T)},T=D=>{s.each(P=>{setTimeout(()=>{D(P)},0)})};return t(h),{get:d,map:c,isReady:b}},d9={nu:XD,pure:t=>XD(s=>{s(t)})},f9=t=>{setTimeout(()=>{throw t},0)},X0=t=>{const s=T=>{t().then(T,f9)};return{map:T=>X0(()=>t().then(T)),bind:T=>X0(()=>t().then(D=>T(D).toPromise())),anonBind:T=>X0(()=>t().then(()=>T.toPromise())),toLazy:()=>d9.nu(s),toCached:()=>{let T=null;return X0(()=>(T===null&&(T=t()),T))},toPromise:t,get:s}},zi={nu:t=>X0(()=>new Promise(t)),pure:t=>X0(()=>Promise.resolve(t))},nI=ne("sink"),oI=ne(Tl({name:nI(),overrides:ne({dom:{tag:"div"},behaviours:xt([Hi.config({useFixed:Pe})]),events:Fs([hd(Du()),hd(Er()),hd(Kh())])})})),sI=(t,s)=>{const a=t.getHotspot(s).getOr(s),c="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:c,hotspot:a,overrides:d}),h=>({type:c,hotspot:a,overrides:d,layouts:h}))},m9=(t,s,a)=>{const c=t.fetch;return c(a).map(s)},h9=(t,s,a,c,d,h,b)=>{const x=m9(t,s,c),T=QD(c,t);return x.map(D=>D.bind(P=>{const $=P.menus[P.primary];return N.from($).each(G=>{t.listRole.each(Y=>{G.role=Y})}),N.from(Fp.sketch({...h.menu(),uid:N1(""),data:P,highlightOnOpen:b,onOpenMenu:(G,Y)=>{const se=T().getOrDie();Hi.position(se,Y,{anchor:a}),Do.decloak(d)},onOpenSubmenu:(G,Y,se)=>{const le=T().getOrDie();Hi.position(le,se,{anchor:{type:"submenu",item:Y}}),Do.decloak(d)},onRepositionMenu:(G,Y,se)=>{const le=T().getOrDie();Hi.position(le,Y,{anchor:a}),yt(se,Ne=>{Hi.position(le,Ne.triggeredMenu,{anchor:{type:"submenu",item:Ne.triggeringItem}})})},onEscape:()=>(Ln.focus(c),Do.close(d),N.some(!0))}))}))},J0=(t,s,a,c,d,h,b)=>{const x=sI(t,a);return h9(t,s,x,a,c,d,b).map(D=>(D.fold(()=>{Do.isOpen(c)&&Do.close(c)},P=>{Do.cloak(c),Do.open(c,P),h(c)}),c))},g9=(t,s,a,c,d,h,b)=>(Do.close(c),zi.pure(c)),JD=(t,s,a,c,d,h)=>{const b=jr.getCoupled(a,"sandbox");return(Do.isOpen(b)?g9:J0)(t,s,a,b,c,d,h)},p9=(t,s,a)=>{const c=Ro.getCurrent(s).getOr(s),d=La(t.element);a?lt(c.element,"min-width",d+"px"):Ld(c.element,d)},QD=(t,s)=>t.getSystem().getByUid(s.uid+"-"+nI()).map(a=>()=>Yn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Yn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),e4=t=>{Do.getState(t).each(s=>{Fp.repositionMenus(s)})},t4=(t,s,a)=>{const c=Iw(),d=(x,T)=>{const D=sI(t,s);c.link(s.element),t.matchWidth&&p9(D.hotspot,T,t.useMinWidth),t.onOpen(D,x,T),a!==void 0&&a.onOpen!==void 0&&a.onOpen(x,T)},h=(x,T)=>{c.unlink(s.element),b().getOr(T).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(x,T)},b=QD(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:c.id}},behaviours:su.augment(t.sandboxBehaviours,[Yt.config({store:{mode:"memory",initialValue:s}}),Do.config({onOpen:d,onClose:h,isPartOf:(x,T,D)=>ug(T,D)||ug(s,D),getAttachPoint:()=>b().getOrDie()}),Ro.config({find:x=>Do.getState(x).bind(T=>Ro.getCurrent(T))}),Nc.config({channels:{...ih({isExtraPart:Me}),...pC({doReposition:e4})}})])}},rI=t=>{const s=jr.getCoupled(t,"sandbox");e4(s)},U_=()=>[Be("sandboxClasses",[]),su.field("sandboxBehaviours",[Ro,Nc,Do,Yt])],b9=ne([rt("dom"),rt("fetch"),ko("onOpen"),Mc("onExecute"),Be("getHotspot",N.some),Be("getAnchorOverrides",ne({})),Qm(),Za("dropdownBehaviours",[lo,jr,En,Ln]),rt("toggleClass"),Be("eventOrder",{}),Bo("lazySink"),Be("matchWidth",!1),Be("useMinWidth",!1),Bo("role"),Bo("listRole")].concat(U_())),v9=ne([ru({schema:[dp(),Be("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),oI()]),y9=(t,s,a,c)=>{const d=P=>kt(t.dom,"attributes").bind($=>kt($,P)),h=P=>{Do.getState(P).each($=>{Fp.highlightPrimary($)})},b=(P,$,G)=>JD(t,Jt,P,c,$,G),x=P=>{b(P,h,Zr.HighlightMenuAndItem).get(ce)},T={expand:P=>{lo.isOn(P)||b(P,ce,Zr.HighlightNone).get(ce)},open:P=>{lo.isOn(P)||b(P,ce,Zr.HighlightMenuAndItem).get(ce)},refetch:P=>jr.getExistingCoupled(P,"sandbox").fold(()=>b(P,ce,Zr.HighlightMenuAndItem).map(ce),G=>J0(t,Jt,P,G,c,ce,Zr.HighlightMenuAndItem).map(ce)),isOpen:lo.isOn,close:P=>{lo.isOn(P)&&b(P,ce,Zr.HighlightMenuAndItem).get(ce)},repositionMenus:P=>{lo.isOn(P)&&rI(P)}},D=(P,$)=>(Rm(P),N.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:ja(t.dropdownBehaviours,[lo.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),jr.config({others:{sandbox:P=>t4(t,P,{onOpen:()=>lo.on(P),onClose:()=>lo.off(P)})}}),En.config({mode:"special",onSpace:D,onEnter:D,onDown:(P,$)=>{if(kd.isOpen(P)){const G=jr.getCoupled(P,"sandbox");h(G)}else kd.open(P);return N.some(!0)},onEscape:(P,$)=>kd.isOpen(P)?(kd.close(P),N.some(!0)):N.none()}),Ln.config({})]),events:YE(N.some(x)),eventOrder:{...t.eventOrder,[Jl()]:["disabling","toggling","alloy.base.behaviour"]},apis:T,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),P=>({role:P})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},kd=Ki({name:"Dropdown",configFields:b9(),partFields:v9(),factory:y9,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),w9=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},C9=t=>{const s=Yt.getValue(t),a=i2(t).map(HP);kd.refetch(s).get(()=>{const c=jr.getCoupled(s,"sandbox");a.each(d=>i2(c).each(h=>Z8(h,d)))})},W_=(t,s)=>{S9(t).each(a=>{Gy(t,a.element,s.event.eventType,s.event.interactionEvent)})},S9=t=>Do.getState(t).bind(bn.getHighlighted).bind(bn.getHighlighted),Z_=t=>Jc(t.element,wb)?N.some(t.element):tr(t.element,"."+wb),aI=(t,s,a)=>{$P(t).each(c=>{j8(c,a),Z_(s).each(h=>{Dr(h,"id").each(b=>qt(c.element,"aria-controls",b))})}),qt(a.element,"aria-selected","true")},x9=(t,s,a)=>{qt(a.element,"aria-selected","false")},E9=t=>{$P(t).each(s=>Ln.focus(s))},_9=t=>jr.getExistingCoupled(t,"sandbox").bind(i2).map(HP).map(a=>a.fetchPattern).getOr("");var n4;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(n4||(n4={}));const j_=(t,s,a,c,d)=>{const h=a.shared.providers,b=x=>d?{...x,shortcut:N.none(),icon:x.text.isSome()?N.none():x.icon}:x;switch(t.type){case"menuitem":return mH(t).fold(Rg,x=>N.some(s9(b(x),s,h,c)));case"nestedmenuitem":return gH(t).fold(Rg,x=>N.some(eI(b(x),s,h,c,d)));case"togglemenuitem":return oB(t).fold(Rg,x=>N.some(r9(b(x),s,h,c)));case"separator":return YP(t).fold(Rg,x=>N.some(QB(x)));case"fancymenuitem":return R_(t).fold(Rg,x=>tI(x,a));default:return console.error("Unknown item in general menu",t),N.none()}},Q0=(t,s,a,c,d,h,b)=>{const x=c===1,T=!x||__(t);return Ja(tt(t,D=>{switch(D.type){case"separator":return sH(D).fold(Rg,P=>N.some(QB(P)));case"cardmenuitem":return uH(D).fold(Rg,P=>N.some(a9({...P,onAction:$=>{P.onAction($),a(P.value,P.meta)}},d,h,{itemBehaviours:kD(P.meta,h,N.none()),cardText:{matchText:s,highlightOn:b}})));case"autocompleteitem":default:return rH(D).fold(Rg,P=>N.some(o9(P,s,x,"normal",a,d,h,T)))}}))},o4=(t,s,a,c,d,h)=>{const b=__(s),x=Ja(tt(s,P=>{const $=Y=>d?!po(Y,"text"):b,G=Y=>j_(Y,a,c,$(Y),d);return P.type==="nestedmenuitem"&&P.getSubmenuItems().length<=0?G({...P,enabled:!1}):G(P)})),T=w9(h);return(d?K8:fD)(t,b,x,1,T)},q_=t=>Fp.singleData(t.value,t),T9=(t,s,a,c)=>{const d=z_(s,c),h=vb(c);return{data:q_({...t,movement:d,menuBehaviours:q0.unnamedEvents(s!=="auto"?[]:[Gs((b,x)=>{ED(b,4,h.item).each(({numColumns:T,numRows:D})=>{En.setGridSize(b,D,T)})})])}),menu:{markers:vb(c),fakeFocus:a===n4.ContentFocus}}},k9=t=>z1.create(_e.fromDom(t.startContainer),t.startOffset,_e.fromDom(t.endContainer),t.endOffset),A9={register:(t,s)=>{const a=tn("autocompleter"),c=mn(!1),d=mn(!1),h=ts(),b=$i(nr.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:xt([no("dismissAutocompleter",[it(Om(),()=>$()),it(Dm(),(ge,ke)=>{Dr(ke.event.target,"id").each(Ae=>qt(_e.fromDom(t.getBody()),"aria-activedescendant",Ae))})])]),lazySink:s.getSink})),x=()=>nr.isOpen(b),T=d.get,D=()=>{if(x()){nr.hide(b),t.dom.remove(a,!1);const ge=_e.fromDom(t.getBody());Dr(ge,"aria-owns").filter(ke=>ke===a).each(()=>{H(ge,"aria-owns"),H(ge,"aria-activedescendant")})}},P=()=>nr.getContent(b).bind(ge=>Po(ge.components(),0)),$=()=>t.execCommand("mceAutocompleterClose"),G=ge=>{const ke=bs(ge,Ae=>N.from(Ae.columns)).getOr(1);return Se(ge,Ae=>{const st=Ae.items;return Q0(st,Ae.matchText,(je,$t)=>{const Xt={hide:()=>$(),reload:Qe=>{D(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Qe})}};t.execCommand("mceAutocompleterRefreshActiveRange"),h.get().each(Qe=>{c.set(!0),Ae.onAction(Xt,Qe,je,$t),c.set(!1)})},ke,df.BUBBLE_TO_SANDBOX,s,Ae.highlightOn)})},Y=(ge,ke)=>{const Ae=bs(ge,st=>N.from(st.columns)).getOr(1);nr.showMenuAt(b,{anchor:{type:"selection",getSelection:()=>h.get().map(k9),root:_e.fromDom(t.getBody())}},T9(fD("autocompleter-value",!0,ke,Ae,{menuType:"normal"}),Ae,n4.ContentFocus,"normal")),P().each(bn.highlightFirst)},se=ge=>{const ke=G(ge);ke.length>0?(Y(ge,ke),qt(_e.fromDom(t.getBody()),"aria-owns",a),t.inline||le()):D()},le=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const ge=t.getDoc().documentElement,ke=t.selection.getNode(),Ae=mv(b.element);qn(Ae,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ke.offsetTop}px`,left:`${ke.offsetLeft}px`}),t.dom.add(ge,Ae.dom),tr(Ae,'[role="menu"]').each(st=>{Xn(st,"position"),Xn(st,"max-height")})};t.on("AutocompleterStart",({lookupData:ge})=>{d.set(!0),c.set(!1),se(ge)}),t.on("AutocompleterUpdate",({lookupData:ge})=>se(ge)),t.on("AutocompleterUpdateActiveRange",({range:ge})=>h.set(ge)),t.on("AutocompleterEnd",()=>{D(),d.set(!1),c.set(!1),h.clear()});const Ne={cancelIfNecessary:$,isMenuOpen:x,isActive:T,isProcessingAction:c.get,getMenu:P};AP.setup(Ne,t)}},C2=(t,s,a)=>Nu(t,s,a).isSome(),iI=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...h)=>{a=setTimeout(()=>{t.apply(null,h),a=null},s)}}},cI=5,O9=400,lI=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?N.none():N.some(s.touches[0])},D9=(t,s)=>{const a=Math.abs(t.clientX-s.x),c=Math.abs(t.clientY-s.y);return a>cI||c>cI},R9=t=>{const s=ts(),a=mn(!1),c=iI(D=>{t.triggerEvent(Li(),D),a.set(!0)},O9),d=D=>(lI(D).each(P=>{c.cancel();const $={x:P.clientX,y:P.clientY,target:D.target};c.schedule(D),a.set(!1),s.set($)}),N.none()),h=D=>(c.cancel(),lI(D).each(P=>{s.on($=>{D9(P,$)&&s.clear()})}),N.none()),b=D=>{c.cancel();const P=$=>Uo($.target,D.target);return s.get().filter(P).map($=>a.get()?(D.prevent(),!1):t.triggerEvent(fd(),D))},x=Yo([{key:Yl(),value:d},{key:No(),value:h},{key:Ms(),value:b}]);return{fireIfReady:(D,P)=>kt(x,P).bind($=>$(D))}},uI=t=>t.raw.which===ir[0]&&!eo(["input","textarea"],oa(t.target))&&!C2(t.target,'[contenteditable="true"]'),ey=(t,s)=>{const a={stopBackspace:!0,...s},c=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=R9(a),h=tt(c.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),Y=>dc(t,Y,se=>{d.fireIfReady(se,Y).each(Ne=>{Ne&&se.kill()}),a.triggerEvent(Y,se)&&se.kill()})),b=ts(),x=dc(t,"paste",Y=>{d.fireIfReady(Y,"paste").each(le=>{le&&Y.kill()}),a.triggerEvent("paste",Y)&&Y.kill(),b.set(setTimeout(()=>{a.triggerEvent($f(),Y)},0))}),T=dc(t,"keydown",Y=>{a.triggerEvent("keydown",Y)?Y.kill():a.stopBackspace&&uI(Y)&&Y.prevent()}),D=dc(t,"focusin",Y=>{a.triggerEvent("focusin",Y)&&Y.kill()}),P=ts(),$=dc(t,"focusout",Y=>{a.triggerEvent("focusout",Y)&&Y.kill(),P.set(setTimeout(()=>{a.triggerEvent(Am(),Y)},0))});return{unbind:()=>{yt(h,Y=>{Y.unbind()}),T.unbind(),D.unbind(),$.unbind(),x.unbind(),b.on(clearTimeout),P.on(clearTimeout)}}},jp=(t,s)=>{const a=kt(t,"target").getOr(s);return mn(a)},M9=(t,s)=>{const a=mn(!1),c=mn(!1);return{stop:()=>{a.set(!0)},cut:()=>{c.set(!0)},isStopped:a.get,isCut:c.get,event:t,setSource:s.set,getSource:s.get}},dI=t=>{const s=mn(!1);return{stop:()=>{s.set(!0)},cut:ce,isStopped:s.get,isCut:Me,event:t,setSource:ve("Cannot set source of a broadcasted event"),getSource:ve("Cannot get source of a broadcasted event")}},ty=te.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),S2=(t,s,a,c,d,h)=>{const b=t(s,c),x=M9(a,d);return b.fold(()=>(h.logEventNoHandlers(s,c),ty.complete()),T=>{const D=T.descHandler;return mp(D)(x),x.isStopped()?(h.logEventStopped(s,T.element,D.purpose),ty.stopped()):x.isCut()?(h.logEventCut(s,T.element,D.purpose),ty.complete()):Ia(T.element).fold(()=>(h.logNoParent(s,T.element,D.purpose),ty.complete()),$=>(h.logEventResponse(s,T.element,D.purpose),ty.resume($)))})},fI=(t,s,a,c,d,h)=>S2(t,s,a,c,d,h).fold(Pe,b=>fI(t,s,a,b,d,h),Me),x2=(t,s,a,c,d)=>{const h=jp(a,c);return S2(t,s,a,c,h,d)},E2=(t,s,a)=>{const c=dI(s);return yt(t,d=>{const h=d.descHandler;mp(h)(c)}),c.isStopped()},N9=(t,s,a,c)=>mI(t,s,a,a.target,c),mI=(t,s,a,c,d)=>{const h=jp(a,c);return fI(t,s,a,c,h,d)},P9=(t,s)=>({element:t,descHandler:s}),B9=(t,s)=>({id:t,descHandler:s}),I9=()=>{const t={},s=(b,x,T)=>{Cs(T,(D,P)=>{const $=t[P]!==void 0?t[P]:{};$[x]=fp(D,b),t[P]=$})},a=(b,x)=>pd(x).bind(T=>kt(b,T)).map(T=>P9(x,T));return{registerId:s,unregisterId:b=>{Cs(t,(x,T)=>{po(x,b)&&delete x[b]})},filterByType:b=>kt(t,b).map(x=>Zi(x,(T,D)=>B9(D,T))).getOr([]),find:(b,x,T)=>kt(t,x).bind(D=>yl(T,P=>a(D,P),b))}},L9=()=>{const t=I9(),s={},a=D=>{const P=D.element;return pd(P).getOrThunk(()=>lx("uid-",D.element))},c=(D,P)=>{const $=s[P];if($===D)h(D);else throw new Error('The tagId "'+P+'" is already used by: '+$m($.element)+`
Cannot use it for: `+$m(D.element)+`
The conflicting element is`+(en($.element)?" ":" not ")+"already in the DOM")},d=D=>{const P=a(D);Hr(s,P)&&c(D,P);const $=[D];t.registerId($,P,D.events),s[P]=D},h=D=>{pd(D.element).each(P=>{delete s[P],t.unregisterId(P)})};return{find:(D,P,$)=>t.find(D,P,$),filter:D=>t.filterByType(D),register:d,unregister:h,getById:D=>kt(s,D)}},rm=il({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:Q1(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Be("components",[]),Za("containerBehaviours",[]),Be("events",{}),Be("domModification",{}),Be("eventOrder",{})]}),_2=t=>{const s=ge=>Ia(t.element).fold(Pe,ke=>Uo(ge,ke)),a=L9(),c=(ge,ke)=>a.find(s,ge,ke),d=ey(t.element,{triggerEvent:(ge,ke)=>zf(ge,ke.target,Ae=>N9(c,ge,ke,Ae))}),h={debugInfo:ne("real"),triggerEvent:(ge,ke,Ae)=>{zf(ge,ke,st=>mI(c,ge,Ae,ke,st))},triggerFocus:(ge,ke)=>{pd(ge).fold(()=>{Sl(ge)},Ae=>{zf(dd(),ge,st=>(x2(c,dd(),{originator:ke,kill:ce,prevent:ce,target:ge},ge,st),!1))})},triggerEscape:(ge,ke)=>{h.triggerEvent("keydown",ge.element,ke.event)},getByUid:ge=>le(ge),getByDom:ge=>Ne(ge),build:$i,buildOrPatch:kv,addToGui:ge=>{T(ge)},removeFromGui:ge=>{D(ge)},addToWorld:ge=>{b(ge)},removeFromWorld:ge=>{x(ge)},broadcast:ge=>{G(ge)},broadcastOn:(ge,ke)=>{Y(ge,ke)},broadcastEvent:(ge,ke)=>{se(ge,ke)},isConnected:Pe},b=ge=>{ge.connect(h),sa(ge.element)||(a.register(ge),yt(ge.components(),b),h.triggerEvent(w1(),ge.element,{target:ge.element}))},x=ge=>{sa(ge.element)||(yt(ge.components(),x),a.unregister(ge)),ge.disconnect()},T=ge=>{Bu(t,ge)},D=ge=>{Yf(ge)},P=()=>{d.unbind(),Ni(t.element)},$=ge=>{const ke=a.filter(Xl());yt(ke,Ae=>{const st=Ae.descHandler;mp(st)(ge)})},G=ge=>{$({universal:!0,data:ge})},Y=(ge,ke)=>{$({universal:!1,channels:ge,data:ke})},se=(ge,ke)=>{const Ae=a.filter(ge);return E2(Ae,ke)},le=ge=>a.getById(ge).fold(()=>Yn.error(new Error('Could not find component with uid: "'+ge+'" in system.')),Yn.value),Ne=ge=>{const ke=pd(ge).getOr("not found");return le(ke)};return b(t),{root:t,element:t.element,destroy:P,add:T,remove:D,getByUid:le,getByDom:Ne,addToWorld:b,removeFromWorld:x,broadcast:G,broadcastOn:Y,broadcastEvent:se}},F9=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:tt(t.items,s.interpreter)}),$9=ne([Be("prefix","form-field"),Za("fieldBehaviours",[Ro,Yt])]),H9=ne([Tl({schema:[rt("dom")],name:"label"}),Tl({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[rt("text")],name:"aria-descriptor"}),Ti({factory:{sketch:t=>{const s=Zn(t,["factory"]);return t.factory.sketch(s)}},schema:[rt("factory")],name:"field"})]),hI=(t,s,a,c)=>{const d=ja(t.fieldBehaviours,[Ro.config({find:x=>bt(x,t,"field")}),Yt.config({store:{mode:"manual",getValue:x=>Ro.getCurrent(x).bind(Yt.getValue),setValue:(x,T)=>{Ro.getCurrent(x).each(D=>{Yt.setValue(D,T)})}}})]),h=Fs([Gs((x,T)=>{const D=NE(x,t,["label","field","aria-descriptor"]);D.field().each(P=>{const $=tn(t.prefix);D.label().each(G=>{qt(G.element,"for",$),qt(P.element,"id",$)}),D["aria-descriptor"]().each(G=>{const Y=tn(t.prefix);qt(G.element,"id",Y),qt(P.element,"aria-describedby",Y)})})})]),b={getField:x=>bt(x,t,"field"),getLabel:x=>bt(x,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:h,apis:b}},fs=Ki({name:"FormField",configFields:$9(),partFields:H9(),factory:hI,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var V9=tinymce.util.Tools.resolve("tinymce.html.Entities");const T2=(t,s,a,c)=>{const d=z9(t,s,a,c);return fs.sketch(d)},gI=(t,s)=>T2(t,s,[],[]),z9=(t,s,a,c)=>({dom:pI(a),components:t.toArray().concat([s]),fieldBehaviours:xt(c)}),U9=()=>pI([]),pI=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),qp=(t,s)=>fs.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[hr(s.translate(t))]}),Rl=tn("form-component-change"),ny=tn("form-close"),Pg=tn("form-cancel"),dh=tn("form-action"),k2=tn("form-submit"),r4=tn("form-block"),a4=tn("form-unblock"),bI=tn("form-tabchange"),i4=tn("form-resize"),oy=(t,s,a)=>{const c=t.label.map(Y=>qp(Y,s)),d=s.icons(),h=Y=>{var se;return(se=d[Y])!==null&&se!==void 0?se:Y},b=Y=>(se,le)=>{Nu(le.event.target,"[data-collection-item-value]").each(Ne=>{Y(se,le,Ne,pn(Ne,"data-collection-item-value"))})},x=(Y,se)=>{const le=tt(se,ke=>{const Ae=Hu.translate(ke.text),st=t.columns===1?`<div class="tox-collection__item-label">${Ae}</div>`:"",je=`<div class="tox-collection__item-icon">${h(ke.icon)}</div>`,$t={_:" "," - ":" ","-":" "},Xt=Ae.replace(/\_| \- |\-/g,cn=>$t[cn]),Qe=s.isDisabled()?" tox-collection__item--state-disabled":"";return`<div data-mce-tooltip="${Xt}" class="tox-collection__item${Qe}" tabindex="-1" data-collection-item-value="${V9.encodeAllRaw(ke.value)}" aria-label="${Xt}">${je}${st}</div>`}),Ne=t.columns!=="auto"&&t.columns>1?os(le,t.columns):[le],ge=tt(Ne,ke=>`<div class="tox-collection__group">${ke.join("")}</div>`);Fm(Y.element,ge.join(""))},T=b((Y,se,le,Ne)=>{se.stop(),s.isDisabled()||_n(Y,dh,{name:t.name,value:Ne})}),D=[it(Kc(),b((Y,se,le)=>{Sl(le)})),it(Kh(),T),it(fd(),T),it(ld(),b((Y,se,le)=>{tr(Y.element,"."+zp).each(Ne=>{mr(Ne,zp)}),$s(le,zp)})),it(qd(),b(Y=>{tr(Y.element,"."+zp).each(se=>{mr(se,zp),Bv(se)})})),Ru(b((Y,se,le,Ne)=>{_n(Y,dh,{name:t.name,value:Ne})}))],P=(Y,se)=>tt(di(Y.element,".tox-collection__item"),se),$=fs.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Jt},behaviours:xt([l.config({disabled:s.isDisabled,onDisabled:Y=>{P(Y,se=>{$s(se,"tox-collection__item--state-disabled"),qt(se,"aria-disabled",!0)})},onEnabled:Y=>{P(Y,se=>{mr(se,"tox-collection__item--state-disabled"),H(se,"aria-disabled")})}}),Ga(),Vn.config({}),Ir.config({...s.tooltips.getConfig({tooltipText:"",onShow:Y=>{tr(Y.element,"."+zp+"[data-mce-tooltip]").each(se=>{Dr(se,"data-mce-tooltip").each(le=>{Ir.setComponents(Y,s.tooltips.getComponents({tooltipText:le}))})})}}),mode:"children-keyboard-focus",anchor:Y=>({type:"node",node:tr(Y.element,"."+zp).orThunk(()=>lc(".tox-collection__item")),root:Y.element,layouts:{onLtr:ne([Ca,wa,ya,us,Pr,xi]),onRtl:ne([Ca,wa,ya,us,Pr,xi])},bubble:Pu(0,-2,{})})}),Yt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(Y,se)=>{x(Y,se),t.columns==="auto"&&ED(Y,5,"tox-collection__item").each(({numRows:le,numColumns:Ne})=>{En.setGridSize(Y,le,Ne)}),ao(Y,i4)}}),Vs.config({}),En.config(ZH(t.columns,"normal")),no("collection-events",D)]),eventOrder:{[Jl()]:["disabling","alloy.base.behaviour","collection-events"],[ld()]:["collection-events","tooltipping"]}});return T2(c,$,["tox-form__group--collection"],[])},W9=["input","textarea"],vI=t=>{const s=oa(t);return eo(W9,s)},yI=(t,s)=>{const a=s.getRoot(t).getOr(t.element);mr(a,s.invalidClass),s.notify.each(c=>{vI(t.element)&&qt(t.element,"aria-invalid",!1),c.getContainer(t).each(d=>{Fm(d,c.validHtml)}),c.onValid(t)})},A2=(t,s,a,c)=>{const d=s.getRoot(t).getOr(t.element);$s(d,s.invalidClass),s.notify.each(h=>{vI(t.element)&&qt(t.element,"aria-invalid",!0),h.getContainer(t).each(b=>{Fm(b,c)}),h.onInvalid(t,c)})},zu=(t,s,a)=>s.validator.fold(()=>zi.pure(Yn.value(!0)),c=>c.validate(t)),O2=(t,s,a)=>(s.notify.each(c=>{c.onValidate(t)}),zu(t,s).map(c=>t.getSystem().isConnected()?c.fold(d=>(A2(t,s,a,d),Yn.error(d)),d=>(yI(t,s),Yn.value(d))):Yn.error("No longer in system")));var j9=Object.freeze({__proto__:null,markValid:yI,markInvalid:A2,query:zu,run:O2,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Jc(a,s.invalidClass)}}),q9=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Fs([it(a.onEvent,c=>{O2(c,t,s).get(Jt)})].concat(a.validateOnLoad?[Gs(c=>{O2(c,t,s).get(ce)})]:[]))).getOr({})}),G9=[rt("invalidClass"),Be("getRoot",N.none),Bs("notify",[Be("aria","alert"),Be("getContainer",N.none),Be("validHtml",""),ko("onValid"),ko("onInvalid"),ko("onValidate")]),Bs("validator",[rt("validate"),Be("onEvent","input"),Be("validateOnLoad",!0)])];const am=li({fields:G9,name:"invalidating",active:q9,apis:j9,extra:{validation:t=>s=>{const a=Yt.getValue(s);return zi.pure(t(a))}}});var Y9=Object.freeze({__proto__:null,events:()=>Fs([jS(Uy(),Pe)]),exhibit:()=>Yc({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const sy=li({fields:[],name:"unselecting",active:Y9}),X9=(t,s)=>kd.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:xt([mf.button(s.providers.isDisabled),Ga(),sy.config({}),Vs.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>zi.nu(c=>t.fetch(c)).map(c=>N.from(q_(Ds(KD(tn("menu-value"),c,d=>{t.onItemAction(a,d)},t.columns,t.presets,df.CLOSE_ON_EXECUTE,Me,s.providers),{movement:z_(t.columns,t.presets)})))),parts:{menu:a2(!1,1,t.presets)}}),c4=tn("color-input-change"),l4=tn("color-swatch-change"),u4=tn("color-picker-cancel"),J9=(t,s,a,c)=>{const d=fs.parts.field({factory:yb,inputClasses:["tox-textfield"],data:c,onSetValue:D=>am.run(D).get(ce),inputBehaviours:xt([l.config({disabled:s.providers.isDisabled}),Ga(),Vs.config({}),am.config({invalidClass:"tox-textbox-field-invalid",getRoot:D=>Mi(D.element),notify:{onValid:D=>{const P=Yt.getValue(D);_n(D,c4,{color:P})}},validator:{validateOnLoad:!1,validate:D=>{const P=Yt.getValue(D);if(P.length===0)return zi.pure(Yn.value(!0));{const $=_e.fromTag("span");lt($,"background-color",P);const G=Os($,"background-color").fold(()=>Yn.error("blah"),Y=>Yn.value(P));return zi.pure(G)}}}})]),selectOnFocus:!1}),h=t.label.map(D=>qp(D,s.providers)),b=(D,P)=>{_n(D,l4,{value:P})},x=(D,P)=>{T.getOpt(D).each($=>{P==="custom"?a.colorPicker(G=>{G.fold(()=>ao($,u4),Y=>{b($,Y),BB(t.storageKey,Y)})},"#ffffff"):P==="remove"?b($,""):b($,P)})},T=Jo(X9({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Pr,ya,Ca],onLtr:()=>[ya,Pr,Ca]},components:[],fetch:UB(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:x},s));return fs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:h.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,T.asSpec()]}]),fieldBehaviours:xt([no("form-field-events",[it(c4,(D,P)=>{T.getOpt(D).each($=>{lt($.element,"background-color",P.event.color)}),_n(D,Rl,{name:t.name})}),it(l4,(D,P)=>{fs.getField(D).each($=>{Yt.setValue($,P.event.value),Ro.getCurrent(D).each(Ln.focus)})}),it(u4,(D,P)=>{fs.getField(D).each($=>{Ro.getCurrent(D).each(Ln.focus)})})])])})},Q9=Tl({schema:[rt("dom")],name:"label"}),Gp=t=>Tl({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),c=>({events:Fs([Qh(Yl(),(d,h,b)=>c(d,b),[s]),Qh(Er(),(d,h,b)=>c(d,b),[s]),Qh(tp(),(d,h,b)=>{b.mouseIsDown.get()&&c(d,b)},[s])])}))}),eV=Gp("top-left"),tV=Gp("top"),nV=Gp("top-right"),d4=Gp("right"),oV=Gp("bottom-right"),sV=Gp("bottom"),wI=Gp("bottom-left"),rV=Gp("left"),aV=Ti({name:"thumb",defaults:ne({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Fs([eg(Yl(),t,"spectrum"),eg(No(),t,"spectrum"),eg(Ms(),t,"spectrum"),eg(Er(),t,"spectrum"),eg(tp(),t,"spectrum"),eg(Ff(),t,"spectrum")])})}),G_=t=>Fu(t.event),iV=Ti({schema:[Lo("mouseIsDown",()=>mn(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,c=(d,h)=>a.getValueFromEvent(h).map(b=>a.setValueFrom(d,t,b));return{behaviours:xt([En.config({mode:"special",onLeft:(d,h)=>a.onLeft(d,t,G_(h)),onRight:(d,h)=>a.onRight(d,t,G_(h)),onUp:(d,h)=>a.onUp(d,t,G_(h)),onDown:(d,h)=>a.onDown(d,t,G_(h))}),Vs.config({}),Ln.config({})]),events:Fs([it(Yl(),c),it(No(),c),it(Er(),c),it(tp(),(d,h)=>{t.mouseIsDown.get()&&c(d,h)})])}}});var cV=[Q9,rV,d4,tV,sV,eV,nV,wI,oV,aV,iV];const D2=ne("slider.change.value"),CI=t=>t.type.indexOf("touch")!==-1,K_=t=>{const s=t.event.raw;if(CI(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?N.some(a.touches[0]).map(c=>Js(c.clientX,c.clientY)):N.none()}else{const a=s;return a.clientX!==void 0?N.some(a).map(c=>Js(c.clientX,c.clientY)):N.none()}},lV="top",uV="right",dV="bottom",fV="left",Ab=t=>t.model.minX,Ob=t=>t.model.minY,R2=t=>t.model.minX-1,M2=t=>t.model.minY-1,Kp=t=>t.model.maxX,Bg=t=>t.model.maxY,Y_=t=>t.model.maxX+1,N2=t=>t.model.maxY+1,SI=(t,s,a)=>s(t)-a(t),f4=t=>SI(t,Kp,Ab),m4=t=>SI(t,Bg,Ob),xI=t=>f4(t)/2,X_=t=>m4(t)/2,Uu=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,EI=t=>t.snapToGrid,ry=t=>t.snapStart,_I=t=>t.rounded,ay=(t,s)=>t[s+"-edge"]!==void 0,TI=t=>ay(t,fV),kI=t=>ay(t,uV),AI=t=>ay(t,lV),h4=t=>ay(t,dV),Ig=t=>t.model.value.get(),fh=(t,s)=>({x:t,y:s}),Wu=(t,s)=>{_n(t,D2(),{value:s})},g4=(t,s)=>{Wu(t,fh(R2(s),M2(s)))},mV=(t,s)=>{Wu(t,M2(s))},Zu=(t,s)=>{Wu(t,fh(xI(s),M2(s)))},hV=(t,s)=>{Wu(t,fh(Y_(s),M2(s)))},gV=(t,s)=>{Wu(t,Y_(s))},OI=(t,s)=>{Wu(t,fh(Y_(s),X_(s)))},DI=(t,s)=>{Wu(t,fh(Y_(s),N2(s)))},pV=(t,s)=>{Wu(t,N2(s))},bV=(t,s)=>{Wu(t,fh(xI(s),N2(s)))},vV=(t,s)=>{Wu(t,fh(R2(s),N2(s)))},yV=(t,s)=>{Wu(t,R2(s))},wV=(t,s)=>{Wu(t,fh(R2(s),X_(s)))},p4=(t,s,a,c)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-c),b4=(t,s,a,c)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+c),v4=(t,s,a)=>Math.max(s,Math.min(a,t)),CV=(t,s,a,c,d)=>d.fold(()=>{const h=t-s,b=Math.round(h/c)*c;return v4(s+b,s-1,a+1)},h=>{const b=(t-h)%c,x=Math.round(b/c),T=Math.floor((t-h)/c),D=Math.floor((a-h)/c),P=Math.min(D,T+x),$=h+P*c;return Math.max(h,$)}),SV=(t,s,a)=>Math.min(a,Math.max(t,s))-s,RI=t=>{const{min:s,max:a,range:c,value:d,step:h,snap:b,snapStart:x,rounded:T,hasMinEdge:D,hasMaxEdge:P,minBound:$,maxBound:G,screenRange:Y}=t,se=D?s-1:s,le=P?a+1:a;if(d<$)return se;if(d>G)return le;{const Ne=SV(d,$,G),ge=v4(Ne/Y*c+s,se,le);return b&&ge>=s&&ge<=a?CV(ge,s,a,h,x):T?Math.round(ge):ge}},y4=t=>{const{min:s,max:a,range:c,value:d,hasMinEdge:h,hasMaxEdge:b,maxBound:x,maxOffset:T,centerMinEdge:D,centerMaxEdge:P}=t;return d<s?h?0:D:d>a?b?x:P:(d-s)/c*T},P2="top",w4="right",C4="bottom",J_="left",MI="width",S4="height",mh=t=>t.element.dom.getBoundingClientRect(),ju=(t,s)=>t[s],Lg=t=>{const s=mh(t);return ju(s,J_)},x4=t=>{const s=mh(t);return ju(s,w4)},B2=t=>{const s=mh(t);return ju(s,P2)},E4=t=>{const s=mh(t);return ju(s,C4)},NI=t=>{const s=mh(t);return ju(s,MI)},PI=t=>{const s=mh(t);return ju(s,S4)},I2=(t,s,a)=>(t+s)/2-a,BI=(t,s)=>{const a=mh(t),c=mh(s),d=ju(a,J_),h=ju(a,w4),b=ju(c,J_);return I2(d,h,b)},II=(t,s)=>{const a=mh(t),c=mh(s),d=ju(a,P2),h=ju(a,C4),b=ju(c,P2);return I2(d,h,b)},L2=(t,s)=>{_n(t,D2(),{value:s})},Q_=(t,s,a)=>{const c={min:Ab(s),max:Kp(s),range:f4(s),value:a,step:Uu(s),snap:EI(s),snapStart:ry(s),rounded:_I(s),hasMinEdge:TI(s),hasMaxEdge:kI(s),minBound:Lg(t),maxBound:x4(t),screenRange:NI(t)};return RI(c)},_4=(t,s,a)=>{const c=Q_(t,s,a);return L2(t,c),c},LI=(t,s)=>{const a=Ab(s);L2(t,a)},ll=(t,s)=>{const a=Kp(s);L2(t,a)},FI=(t,s,a,c)=>{const h=(t>0?b4:p4)(Ig(a),Ab(a),Kp(a),Uu(a,c));return L2(s,h),N.some(h)},$I=t=>(s,a,c)=>FI(t,s,a,c).map(Pe),xV=t=>K_(t).map(a=>a.left),HI=(t,s,a,c,d)=>{const b=NI(t),x=c.bind(P=>N.some(BI(P,t))).getOr(0),T=d.bind(P=>N.some(BI(P,t))).getOr(b),D={min:Ab(s),max:Kp(s),range:f4(s),value:a,hasMinEdge:TI(s),hasMaxEdge:kI(s),minBound:Lg(t),minOffset:0,maxBound:x4(t),maxOffset:b,centerMinEdge:x,centerMaxEdge:T};return y4(D)},T4=(t,s,a,c,d,h)=>{const b=HI(s,h,a,c,d);return Lg(s)-Lg(t)+b},EV=(t,s,a,c)=>{const d=Ig(a),h=T4(t,c.getSpectrum(t),d,c.getLeftEdge(t),c.getRightEdge(t),a),b=La(s.element)/2;lt(s.element,"left",h-b+"px")},_V=$I(-1),VI=$I(1),hh=N.none,k4=N.none,zI={"top-left":N.none(),top:N.none(),"top-right":N.none(),right:N.some(gV),"bottom-right":N.none(),bottom:N.none(),"bottom-left":N.none(),left:N.some(yV)};var eT=Object.freeze({__proto__:null,setValueFrom:_4,setToMin:LI,setToMax:ll,findValueOfOffset:Q_,getValueFromEvent:xV,findPositionOfValue:T4,setPositionFromValue:EV,onLeft:_V,onRight:VI,onUp:hh,onDown:k4,edgeActions:zI});const iy=(t,s)=>{_n(t,D2(),{value:s})},A4=(t,s,a)=>{const c={min:Ob(s),max:Bg(s),range:m4(s),value:a,step:Uu(s),snap:EI(s),snapStart:ry(s),rounded:_I(s),hasMinEdge:AI(s),hasMaxEdge:h4(s),minBound:B2(t),maxBound:E4(t),screenRange:PI(t)};return RI(c)},TV=(t,s,a)=>{const c=A4(t,s,a);return iy(t,c),c},kV=(t,s)=>{const a=Ob(s);iy(t,a)},AV=(t,s)=>{const a=Bg(s);iy(t,a)},OV=(t,s,a,c)=>{const h=(t>0?b4:p4)(Ig(a),Ob(a),Bg(a),Uu(a,c));return iy(s,h),N.some(h)},UI=t=>(s,a,c)=>OV(t,s,a,c).map(Pe),DV=t=>K_(t).map(a=>a.top),WI=(t,s,a,c,d)=>{const b=PI(t),x=c.bind(P=>N.some(II(P,t))).getOr(0),T=d.bind(P=>N.some(II(P,t))).getOr(b),D={min:Ob(s),max:Bg(s),range:m4(s),value:a,hasMinEdge:AI(s),hasMaxEdge:h4(s),minBound:B2(t),minOffset:0,maxBound:E4(t),maxOffset:b,centerMinEdge:x,centerMaxEdge:T};return y4(D)},O4=(t,s,a,c,d,h)=>{const b=WI(s,h,a,c,d);return B2(s)-B2(t)+b},gh=(t,s,a,c)=>{const d=Ig(a),h=O4(t,c.getSpectrum(t),d,c.getTopEdge(t),c.getBottomEdge(t),a),b=xs(s.element)/2;lt(s.element,"top",h-b+"px")},tT=N.none,RV=N.none,MV=UI(-1),ZI=UI(1),jI={"top-left":N.none(),top:N.some(mV),"top-right":N.none(),right:N.none(),"bottom-right":N.none(),bottom:N.some(pV),"bottom-left":N.none(),left:N.none()};var D4=Object.freeze({__proto__:null,setValueFrom:TV,setToMin:kV,setToMax:AV,findValueOfOffset:A4,getValueFromEvent:DV,findPositionOfValue:O4,setPositionFromValue:gh,onLeft:tT,onRight:RV,onUp:MV,onDown:ZI,edgeActions:jI});const Db=(t,s)=>{_n(t,D2(),{value:s})},Yp=(t,s)=>({x:t,y:s}),F2=(t,s,a)=>{const c=Q_(t,s,a.left),d=A4(t,s,a.top),h=Yp(c,d);return Db(t,h),h},qI=(t,s,a,c,d)=>{const h=t>0?b4:p4,b=s?Ig(c).x:h(Ig(c).x,Ab(c),Kp(c),Uu(c,d)),x=s?h(Ig(c).y,Ob(c),Bg(c),Uu(c,d)):Ig(c).y;return Db(a,Yp(b,x)),N.some(b)},$2=(t,s)=>(a,c,d)=>qI(t,s,a,c,d).map(Pe),GI=(t,s)=>{const a=Ab(s),c=Ob(s);Db(t,Yp(a,c))},KI=(t,s)=>{const a=Kp(s),c=Bg(s);Db(t,Yp(a,c))},NV=t=>K_(t),PV=(t,s,a,c)=>{const d=Ig(a),h=T4(t,c.getSpectrum(t),d.x,c.getLeftEdge(t),c.getRightEdge(t),a),b=O4(t,c.getSpectrum(t),d.y,c.getTopEdge(t),c.getBottomEdge(t),a),x=La(s.element)/2,T=xs(s.element)/2;lt(s.element,"left",h-x+"px"),lt(s.element,"top",b-T+"px")},BV=$2(-1,!1),IV=$2(1,!1),LV=$2(-1,!0),YI=$2(1,!0),XI={"top-left":N.some(g4),top:N.some(Zu),"top-right":N.some(hV),right:N.some(OI),"bottom-right":N.some(DI),bottom:N.some(bV),"bottom-left":N.some(vV),left:N.some(wV)};var FV=Object.freeze({__proto__:null,setValueFrom:F2,setToMin:GI,setToMax:KI,getValueFromEvent:NV,setPositionFromValue:PV,onLeft:BV,onRight:IV,onUp:LV,onDown:YI,edgeActions:XI});const JI=[Be("stepSize",1),Be("speedMultiplier",10),Be("onChange",ce),Be("onChoose",ce),Be("onInit",ce),Be("onDragStart",ce),Be("onDragEnd",ce),Be("snapToGrid",!1),Be("rounded",!0),Bo("snapStart"),Fo("model",ba("mode",{x:[Be("minX",0),Be("maxX",100),Lo("value",t=>mn(t.mode.minX)),rt("getInitialValue"),ys("manager",eT)],y:[Be("minY",0),Be("maxY",100),Lo("value",t=>mn(t.mode.minY)),rt("getInitialValue"),ys("manager",D4)],xy:[Be("minX",0),Be("maxX",100),Be("minY",0),Be("maxY",100),Lo("value",t=>mn({x:t.mode.minX,y:t.mode.minY})),rt("getInitialValue"),ys("manager",FV)]})),Za("sliderBehaviours",[En,Yt]),Lo("mouseIsDown",()=>mn(!1))],Ad=Ki({name:"Slider",configFields:JI,partFields:cV,factory:(t,s,a,c)=>{const d=je=>kl(je,t,"thumb"),h=je=>kl(je,t,"spectrum"),b=je=>bt(je,t,"left-edge"),x=je=>bt(je,t,"right-edge"),T=je=>bt(je,t,"top-edge"),D=je=>bt(je,t,"bottom-edge"),P=t.model,$=P.manager,G=(je,$t)=>{$.setPositionFromValue(je,$t,t,{getLeftEdge:b,getRightEdge:x,getTopEdge:T,getBottomEdge:D,getSpectrum:h})},Y=(je,$t)=>{P.value.set($t);const Xt=d(je);G(je,Xt)},se=(je,$t)=>{Y(je,$t);const Xt=d(je);return t.onChange(je,Xt,$t),N.some(!0)},le=je=>{$.setToMin(je,t)},Ne=je=>{$.setToMax(je,t)},ge=je=>{const $t=()=>{bt(je,t,"thumb").each(Qe=>{const cn=P.value.get();t.onChoose(je,Qe,cn)})},Xt=t.mouseIsDown.get();t.mouseIsDown.set(!1),Xt&&$t()},ke=(je,$t)=>{$t.stop(),t.mouseIsDown.set(!0),t.onDragStart(je,d(je))},Ae=(je,$t)=>{$t.stop(),t.onDragEnd(je,d(je)),ge(je)},st=je=>{bt(je,t,"spectrum").map(En.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:ja(t.sliderBehaviours,[En.config({mode:"special",focusIn:st}),Yt.config({store:{mode:"manual",getValue:je=>P.value.get(),setValue:Y}}),Nc.config({channels:{[h0()]:{onReceive:ge}}})]),events:Fs([it(D2(),(je,$t)=>{se(je,$t.event.value)}),Gs((je,$t)=>{const Xt=P.getInitialValue();P.value.set(Xt);const Qe=d(je);G(je,Qe);const cn=h(je);t.onInit(je,Qe,cn,P.value.get())}),it(Yl(),ke),it(Ms(),Ae),it(Er(),(je,$t)=>{st(je),ke(je,$t)}),it(Ff(),Ae)]),apis:{resetToMin:le,resetToMax:Ne,setValue:Y,refresh:G},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),Rb=tn("rgb-hex-update"),QI=tn("slider-update"),R4=tn("palette-update"),$V=(t,s)=>{const a=Ad.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=Ad.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Ad.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ne(0)},components:[a,c],sliderBehaviours:xt([Ln.config({})]),onChange:(d,h,b)=>{qt(d.element,"aria-valuenow",Math.floor(360-b*3.6)),_n(d,QI,{value:b})}})},eL="form",HV=[Za("formBehaviours",[Yt])],tL=t=>"<alloy.field."+t+">",nL=t=>{const s=(()=>{const h=[];return{field:(x,T)=>(h.push(x),DE(eL,tL(x),T)),record:ne(h)}})(),a=t(s),c=s.record(),d=tt(c,h=>Ti({name:h,pname:tL(h)}));return ch(eL,HV,d,oL,a)},VV=(t,s)=>t.fold(()=>Yn.error(s),Yn.value),oL=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ja(t.formBehaviours,[Yt.config({store:{mode:"manual",getValue:a=>{const c=TC(a,t);return Vo(c,(d,h)=>d().bind(b=>{const x=Ro.getCurrent(b);return VV(x,new Error(`Cannot find a current component to extract the value from for form part '${h}': `+$m(b.element)))}).map(Yt.getValue))},setValue:(a,c)=>{Cs(c,(d,h)=>{bt(a,t,h).each(b=>{Ro.getCurrent(b).each(x=>{Yt.setValue(x,d)})})})}}})]),apis:{getField:(a,c)=>bt(a,t,c).bind(Ro.getCurrent)}}),Xp={getField:vv((t,s,a)=>t.getField(s,a)),sketch:nL},ph=tn("valid-input"),nT=tn("invalid-input"),M4=tn("validating-input"),oT="colorcustom.rgb.",N4={isEnabled:Pe,setEnabled:ce,immediatelyShow:ce,immediatelyHide:ce},sL=(t,s,a,c,d,h)=>{const b=(le,Ne)=>{const ge=Ne.get();le!==ge.isEnabled()&&(ge.setEnabled(le),le?ge.immediatelyShow():ge.immediatelyHide())},x=(le,Ne,ge)=>am.config({invalidClass:s("invalid"),notify:{onValidate:ke=>{_n(ke,M4,{type:le})},onValid:ke=>{b(!1,ge),_n(ke,ph,{type:le,value:Yt.getValue(ke)})},onInvalid:ke=>{b(!0,ge),_n(ke,nT,{type:le,value:Yt.getValue(ke)})}},validator:{validate:ke=>{const Ae=Yt.getValue(ke),st=Ne(Ae)?Yn.value(!0):Yn.error(t("aria.input.invalid"));return zi.pure(st)},validateOnLoad:!1}}),T=(le,Ne,ge,ke,Ae)=>{const st=mn(N4),je=t(oT+"range"),$t=fs.parts.label({dom:{tag:"label",attributes:{"aria-label":ke}},components:[hr(ge)]}),Xt=fs.parts.field({data:Ae,factory:yb,inputAttributes:{type:"text",...Ne==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:xt([x(Ne,le,st),Vs.config({}),Ir.config({...d({tooltipText:"",onSetup:jo=>{st.set({isEnabled:()=>Ir.isEnabled(jo),setEnabled:un=>Ir.setEnabled(jo,un),immediatelyShow:()=>Ir.immediateOpenClose(jo,!0),immediatelyHide:()=>Ir.immediateOpenClose(jo,!1)}),Ir.setEnabled(jo,!1)},onShow:(jo,un)=>{Ir.setComponents(jo,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[hr(t(Ne==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:jo=>{am.isInvalid(jo)&&am.run(jo).get(ce)}}),Qe=tn("aria-invalid"),cn=Jo(h("invalid",N.some(Qe),"warning")),It=Jo({dom:{tag:"div",classes:[s("invalid-icon")]},components:[cn.asSpec()]}),fn=[$t,Xt,It.asSpec()],bo=Ne!=="hex"?[fs.parts["aria-descriptor"]({text:je})]:[],Us=fn.concat(bo);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:Us}},D=(le,Ne)=>{const ge=g2(Ne);return Xp.getField(le,"hex").each(ke=>{Ln.isFocused(ke)||Yt.setValue(le,{hex:ge.value})}),ge},P=(le,Ne)=>{const ge=Ne.red,ke=Ne.green,Ae=Ne.blue;Yt.setValue(le,{red:ge,green:ke,blue:Ae})},$=Jo({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),G=(le,Ne)=>{$.getOpt(le).each(ge=>{lt(ge.element,"background-color","#"+Ne.value)})};return il({factory:()=>{const le={red:mn(N.some(255)),green:mn(N.some(255)),blue:mn(N.some(255)),hex:mn(N.some("ffffff"))},Ne=(un,gt)=>{const Ht=p2(gt);P(un,Ht),st(Ht)},ge=un=>le[un].get(),ke=(un,gt)=>{le[un].set(gt)},Ae=()=>ge("red").bind(un=>ge("green").bind(gt=>ge("blue").map(Ht=>_b(un,gt,Ht,1)))),st=un=>{const gt=un.red,Ht=un.green,Fn=un.blue;ke("red",N.some(gt)),ke("green",N.some(Ht)),ke("blue",N.some(Fn))},je=(un,gt)=>{const Ht=gt.event;Ht.type!=="hex"?ke(Ht.type,N.none()):c(un)},$t=(un,gt)=>{a(un);const Ht=bB(gt);ke("hex",N.some(Ht.value));const Fn=p2(Ht);P(un,Fn),st(Fn),_n(un,Rb,{hex:Ht}),G(un,Ht)},Xt=(un,gt,Ht)=>{const Fn=parseInt(Ht,10);ke(gt,N.some(Fn)),Ae().each(Rn=>{const xn=D(un,Rn);_n(un,Rb,{hex:xn}),G(un,xn)})},Qe=un=>un.type==="hex",cn=(un,gt)=>{const Ht=gt.event;Qe(Ht)?$t(un,Ht.value):Xt(un,Ht.type,Ht.value)},It=un=>({label:t(oT+un+".label"),description:t(oT+un+".description")}),fn=It("red"),bo=It("green"),Us=It("blue"),jo=It("hex");return Ds(Xp.sketch(un=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[un.field("red",fs.sketch(T(PD,"red",fn.label,fn.description,255))),un.field("green",fs.sketch(T(PD,"green",bo.label,bo.description,255))),un.field("blue",fs.sketch(T(PD,"blue",Us.label,Us.description,255))),un.field("hex",fs.sketch(T(yB,"hex",jo.label,jo.description,"ffffff"))),$.asSpec()],formBehaviours:xt([am.config({invalidClass:s("form-invalid")}),no("rgb-form-events",[it(ph,cn),it(nT,je),it(M4,je)])])})),{apis:{updateHex:(un,gt)=>{Yt.setValue(un,{hex:gt.value}),Ne(un,gt),G(un,gt)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(le,Ne,ge)=>{le.updateHex(Ne,ge)}},extraApis:{}})},sT=(t,s)=>{const a=Ad.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),c=Ad.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(D,P)=>{const{width:$,height:G}=D,Y=D.getContext("2d");if(Y===null)return;Y.fillStyle=P,Y.fillRect(0,0,$,G);const se=Y.createLinearGradient(0,0,$,0);se.addColorStop(0,"rgba(255,255,255,1)"),se.addColorStop(1,"rgba(255,255,255,0)"),Y.fillStyle=se,Y.fillRect(0,0,$,G);const le=Y.createLinearGradient(0,0,0,G);le.addColorStop(0,"rgba(0,0,0,0)"),le.addColorStop(1,"rgba(0,0,0,1)"),Y.fillStyle=le,Y.fillRect(0,0,$,G)},h=(D,P)=>{const $=D.components()[0].element.dom,G=v2(P,100,100),Y=TB(G);d($,kB(Y))},b=(D,P)=>{const $=y2(p2(P));Ad.setValue(D,{x:$.saturation,y:100-$.value}),qt(D.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",$.saturation,$.value]))};return il({factory:D=>{const P=ne({x:0,y:0}),$=(se,le,Ne)=>{dn(Ne)||qt(se.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(Ne.x),Math.floor(100-Ne.y)])),_n(se,R4,{value:Ne})},G=(se,le,Ne,ge)=>{d(Ne.element.dom,kB(AB))},Y=xt([Ro.config({find:N.some}),Ln.config({})]);return Ad.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:P},rounded:!1,components:[a,c],onChange:$,onInit:G,sliderBehaviours:Y})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(D,P,$)=>{h(P,$)},setThumb:(D,P,$)=>{b(P,$)}},extraApis:{}})},rL=(t,s,a,c)=>{const d=b=>{const x=sL(t,s,b.onValidHex,b.onInvalidHex,a,c),T=sT(t,s),D=Qe=>(100-Qe)/100*360,P=Qe=>100-Qe/360*100,$={paletteRgba:mn(AB),paletteHue:mn(0)},G=Jo($V(t,s)),Y=Jo(T.sketch({})),se=Jo(x.sketch({})),le=(Qe,cn,It)=>{Y.getOpt(Qe).each(fn=>{T.setHue(fn,It)})},Ne=(Qe,cn)=>{se.getOpt(Qe).each(It=>{x.updateHex(It,cn)})},ge=(Qe,cn,It)=>{G.getOpt(Qe).each(fn=>{Ad.setValue(fn,P(It))})},ke=(Qe,cn)=>{Y.getOpt(Qe).each(It=>{T.setThumb(It,cn)})},Ae=(Qe,cn)=>{const It=p2(Qe);$.paletteRgba.set(It),$.paletteHue.set(cn)},st=(Qe,cn,It,fn)=>{Ae(cn,It),yt(fn,bo=>{bo(Qe,cn,It)})},je=()=>{const Qe=[Ne];return(cn,It)=>{const fn=It.event.value,bo=$.paletteHue.get(),Us=v2(bo,fn.x,100-fn.y),jo=w2(Us);st(cn,jo,bo,Qe)}},$t=()=>{const Qe=[le,Ne];return(cn,It)=>{const fn=D(It.event.value),bo=$.paletteRgba.get(),Us=y2(bo),jo=v2(fn,Us.saturation,Us.value),un=w2(jo);st(cn,un,fn,Qe)}},Xt=()=>{const Qe=[le,ge,ke];return(cn,It)=>{const fn=It.event.hex,bo=$D(fn);st(cn,fn,bo.hue,Qe)}};return{uid:b.uid,dom:b.dom,components:[Y.asSpec(),G.asSpec(),se.asSpec()],behaviours:xt([no("colour-picker-events",[it(Rb,Xt()),it(R4,je()),it(QI,$t())]),Ro.config({find:Qe=>se.getOpt(Qe)}),En.config({mode:"acyclic"})])}};return il({name:"ColourPicker",configFields:[rt("dom"),Be("onValidHex",ce),Be("onInvalidHex",ce)],factory:d})},hf={self:()=>Ro.config({find:N.some}),memento:t=>Ro.config({find:t.getOpt}),childAt:t=>Ro.config({find:s=>Or(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},UV=On([Be("preprocess",Jt),Be("postprocess",Jt)]),WV=(t,s)=>{const a=yi("RepresentingConfigs.memento processors",UV,s);return Yt.config({store:{mode:"manual",getValue:c=>{const d=t.get(c),h=Yt.getValue(d);return a.postprocess(h)},setValue:(c,d)=>{const h=a.preprocess(d),b=t.get(c);Yt.setValue(b,h)}}})},Jp=(t,s,a)=>Yt.config({store:{mode:"manual",...t.map(c=>({initialValue:c})).getOr({}),getValue:s,setValue:a}}),P4=(t,s,a)=>Jp(t,c=>s(c.element),(c,d)=>a(c.element,d)),ZV=t=>P4(t,Mu,Fm),rT=t=>Yt.config({store:{mode:"memory",initialValue:t}}),jV={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},aT=t=>s=>Z(s)?t.translate(jV[s]):t.translate(s),qV=(t,s,a)=>{const c=D=>"tox-"+D,d=(D,P,$=D,G=D)=>Vu($,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+D],attributes:{title:s.translate(G),"aria-live":"polite",...P.fold(()=>({}),Y=>({id:Y}))}},s.icons),h=rL(aT(s),c,s.tooltips.getConfig,d),b=D=>{_n(D,dh,{name:"hex-valid",value:!0})},x=D=>{_n(D,dh,{name:"hex-valid",value:!1})},T=Jo(h.sketch({dom:{tag:"div",classes:[c("color-picker-container")],attributes:{role:"presentation"}},onValidHex:b,onInvalidHex:x}));return{dom:{tag:"div"},components:[T.asSpec()],behaviours:xt([Jp(a,D=>{const P=T.get(D);return Ro.getCurrent(P).bind(Y=>Yt.getValue(Y).hex).map(Y=>"#"+dl(Y,"#")).getOr("")},(D,P)=>{const $=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,G=N.from($.exec(P)).bind(le=>Po(le,1)),Y=T.get(D);Ro.getCurrent(Y).fold(()=>{console.log("Can not find form")},le=>{Yt.setValue(le,{hex:G.getOr("")}),Xp.getField(le,"hex").each(Ne=>{ao(Ne,Gd())})})}),hf.self()])}};var GV=tinymce.util.Tools.resolve("tinymce.Resource");const B4=t=>po(t,"init"),aL=t=>{const s=ts(),a=Jo({dom:{tag:t.tag}}),c=ts(),d=!B4(t)&&t.onFocus.isSome()?[Ln.config({onFocus:h=>{t.onFocus.each(b=>{b(h.element.dom)})}}),Vs.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:xt([no("custom-editor-events",[Gs(h=>{a.getOpt(h).each(b=>{(B4(t)?t.init(b.element.dom):GV.load(t.scriptId,t.scriptUrl).then(x=>x(b.element.dom,t.settings))).then(x=>{c.on(T=>{x.setValue(T)}),c.clear(),s.set(x)})})})]),Jp(N.none(),()=>s.get().fold(()=>c.get().getOr(""),h=>h.getValue()),(h,b)=>{s.get().fold(()=>c.set(b),x=>x.setValue(b))}),hf.self()].concat(d)),components:[a.asSpec()]}};var Fg=tinymce.util.Tools.resolve("tinymce.util.Tools");const KV=(t,s)=>{const a=Fg.explode(s.getOption("images_file_types")),c=d=>ms(a,h=>Ta(d.name.toLowerCase(),`.${h.toLowerCase()}`));return uo(ws(t),c)},I4=(t,s,a)=>{const c=(G,Y)=>{Y.stop()},d=G=>(Y,se)=>{yt(G,le=>{le(Y,se)})},h=(G,Y)=>{var se;if(!l.isDisabled(G)){const le=Y.event.raw;x(G,(se=le.dataTransfer)===null||se===void 0?void 0:se.files)}},b=(G,Y)=>{const se=Y.event.raw.target;x(G,se.files)},x=(G,Y)=>{Y&&(Yt.setValue(G,KV(Y,s)),_n(G,Rl,{name:t.name}))},T=Jo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:xt([no("input-file-events",[hd(Kh()),hd(fd())])])}),D=G=>({uid:G.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:xt([rT(a.getOr([])),hf.self(),l.config({}),lo.config({toggleClass:"dragenter",toggleOnExecute:!1}),no("dropzone-events",[it("dragenter",d([c,lo.toggle])),it("dragleave",d([c,lo.toggle])),it("dragover",c),it("drop",d([c,h])),it(np(),b)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[hr(s.translate("Drop an image here"))]},Vi.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[hr(s.translate("Browse for an image")),T.asSpec()],action:Y=>{T.get(Y).element.dom.click()},buttonBehaviours:xt([Vs.config({}),mf.button(s.isDisabled),Ga()])})]}]}),P=t.label.map(G=>qp(G,s)),$=fs.parts.field({factory:{sketch:D}});return T2(P,$,["tox-form__group--stretched"],[])},YV=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:tt(t.items,s.interpreter)}),iL=(t,s)=>{let a=null,c=null;return{cancel:()=>{Ye(a)||(clearTimeout(a),a=null,c=null)},throttle:(...b)=>{c=b,Ye(a)&&(a=setTimeout(()=>{const x=c;a=null,c=null,t.apply(null,x)},s))}}},XV=(t,s)=>{let a=null;return{cancel:()=>{Ye(a)||(clearTimeout(a),a=null)},throttle:(...h)=>{Ye(a)&&(a=setTimeout(()=>{a=null,t.apply(null,h)},s))}}},L4=(t,s)=>{let a=null;const c=()=>{Ye(a)||(clearTimeout(a),a=null)};return{cancel:c,throttle:(...h)=>{c(),a=setTimeout(()=>{a=null,t.apply(null,h)},s)}}},F4=tn("alloy-fake-before-tabstop"),iT=tn("alloy-fake-after-tabstop"),$4=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:xt([Ln.config({ignore:!0}),Vs.config({})])}),cL=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[$4([F4]),s,$4([iT])],behaviours:xt([hf.childAt(1)])}),lL=(t,s)=>{_n(t,Du(),{raw:{which:9,shiftKey:s}})},JV=(t,s)=>{const a=s.element;Jc(a,F4)?lL(t,!0):Jc(a,iT)&&lL(t,!1)},H2=t=>C2(t,["."+F4,"."+iT].join(","),Me),V2=tn("update-dialog"),uL=tn("update-title"),H4=tn("update-body"),dL=tn("update-footer"),fL=tn("body-send-message"),cT=tn("dialog-focus-shifted"),V4=ro().browser,z2=V4.isSafari(),QV=V4.isFirefox(),mL=z2||QV,ez=V4.isChromium(),tz=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,lT=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),nz=(t,s)=>{const a=t.body;return N.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!ez&&!z2||Ct(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},hL=(t,s,a)=>{const c=t.dom;N.from(c.contentDocument).fold(a,d=>{let h=0;const b=nz(d,s).map(T=>(h=T.scrollTop,T)).forall(tz),x=()=>{const T=c.contentWindow;Ct(T)&&(b?lT(T,"bottom"):!b&&mL&&h!==0&&lT(T,h))};z2&&c.addEventListener("load",x,{once:!0}),d.open(),d.write(s),d.close(),z2||x()})},U2=Sn(mL,z2?500:200).map(t=>iL(hL,t)),z4=(t,s)=>{const a=mn(t.getOr(""));return{getValue:c=>a.get(),setValue:(c,d)=>{if(a.get()!==d){const h=c.element,b=()=>qt(h,"srcdoc",d);s?U2.fold(ne(hL),x=>x.throttle)(h,d,b):b()}a.set(d)}}},oz=(t,s,a)=>{const c="tox-dialog__iframe",d=t.transparent?[]:[`${c}--opaque`],h=t.border?["tox-navobj-bordered"]:[],b={...t.label.map($=>({title:$})).getOr({}),...a.map($=>({srcdoc:$})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},x=z4(a,t.streamContent),T=t.label.map($=>qp($,s)),D=$=>cL(N.from(h),{uid:$.uid,dom:{tag:"iframe",attributes:b,classes:[c,...d]},behaviours:xt([Vs.config({}),Ln.config({}),Jp(a,x.getValue,x.setValue),Nc.config({channels:{[cT]:{onReceive:(G,Y)=>{Y.newFocus.each(se=>{Mi(G.element).each(le=>{(Uo(G.element,se)?$s:mr)(le,"tox-navobj-bordered-focus")})})}}}})])}),P=fs.parts.field({factory:{sketch:D}});return T2(T,P,["tox-form__group--stretched"],[])},sz=t=>new Promise((s,a)=>{const c=()=>{h(),s(t)},d=[dc(t,"load",c),dc(t,"error",()=>{h(),a("Unable to load data from image: "+t.dom.src)})],h=()=>yt(d,b=>b.unbind());t.dom.complete&&c()}),U4=(t,s,a,c,d)=>{const h=a*d,b=c*d,x=Math.max(0,t/2-h/2),T=Math.max(0,s/2-b/2);return{left:x.toString()+"px",top:T.toString()+"px",width:h.toString()+"px",height:b.toString()+"px"}},rz=(t,s,a)=>{const c=La(t),d=xs(t);return Math.min(c/s,d/a,1)},W4=(t,s)=>{const a=mn(s.getOr({url:""})),c=Jo({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(T=>({src:T.url})).getOr({})}}),d=Jo({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[c.asSpec()]}),h=(T,D)=>{const P={url:D.url};D.zoom.each(G=>P.zoom=G),D.cachedWidth.each(G=>P.cachedWidth=G),D.cachedHeight.each(G=>P.cachedHeight=G),a.set(P);const $=()=>{const{cachedWidth:G,cachedHeight:Y,zoom:se}=P;if(!Lt(G)&&!Lt(Y)){if(Lt(se)){const Ne=rz(T.element,G,Y);P.zoom=Ne}const le=U4(La(T.element),xs(T.element),G,Y,P.zoom);d.getOpt(T).each(Ne=>{qn(Ne.element,le)})}};c.getOpt(T).each(G=>{const Y=G.element;D.url!==pn(Y,"src")&&(qt(Y,"src",D.url),mr(T.element,"tox-imagepreview__loaded")),$(),sz(Y).then(se=>{T.getSystem().isConnected()&&($s(T.element,"tox-imagepreview__loaded"),P.cachedWidth=se.dom.naturalWidth,P.cachedHeight=se.dom.naturalHeight,$())})})},b={};t.height.each(T=>b.height=T);const x=s.map(T=>({url:T.url,zoom:N.from(T.zoom),cachedWidth:N.from(T.cachedWidth),cachedHeight:N.from(T.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:b,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:xt([hf.self(),Jp(x,()=>a.get(),h)])}},gL=(t,s,a)=>{const c="tox-label",d=t.align==="center"?[`${c}--center`]:[],h=t.align==="end"?[`${c}--end`]:[],b=Jo({dom:{tag:"label",classes:[c,...d,...h]},components:[hr(s.providers.translate(t.label))]}),x=tt(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[b.asSpec(),...x],behaviours:xt([hf.self(),Vn.config({}),ZV(N.none()),En.config({mode:"acyclic"}),no("label",[Gs(T=>{t.for.each(D=>{a(D).each(P=>{b.getOpt(T).each($=>{var G;const Y=(G=pn(P.element,"id"))!==null&&G!==void 0?G:tn("form-field");qt(P.element,"id",Y),qt($.element,"for",Y)})})})})])])}},pL=tn("toolbar.button.execute"),az=t=>Ru((s,a)=>{m2(t,s)(c=>{_n(s,pL,{buttonApi:c}),t.onAction(c)})}),Qp=tn("common-button-display-events"),Z4={[Jl()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[sc()]:["toolbar-button-events",Qp],[Ql()]:["toolbar-button-events","dropdown-events","tooltipping"],[Er()]:["focusing","alloy.base.behaviour",Qp]},j4=t=>lt(t.element,"width",rs(t.element,"width")),q4=(t,s,a)=>Vu(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),uT=(t,s)=>q4(t,s,[]),e1=(t,s)=>q4(t,s,[Vn.config({})]),G4=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[hr(a.translate(t))],behaviours:xt([Vn.config({})])}),qu=tn("update-menu-text"),t1=tn("update-menu-icon"),K4=(t,s,a,c)=>{const d=mn(ce),h=t.text.map(le=>Jo(G4(le,s,a.providers))),b=t.icon.map(le=>Jo(e1(le,a.providers.icons))),x=(le,Ne)=>{const ge=Yt.getValue(le);return Ln.focus(ge),_n(ge,"keydown",{raw:Ne.event.raw}),kd.close(ge),N.some(!0)},T=t.role.fold(()=>({}),le=>({role:le})),D=N.from(t.listRole).map(le=>({listRole:le})).getOr({}),P=t.ariaLabel.fold(()=>({}),le=>({"aria-label":a.providers.translate(le)})),$=Vu("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),G=tn("common-button-display-events"),Y="dropdown-events";return Jo(kd.sketch({...t.uid?{uid:t.uid}:{},...T,...D,dom:{tag:"button",classes:[s,`${s}--select`].concat(tt(t.classes,le=>`${s}--${le}`)),attributes:{...P,...Ct(c)?{"data-mce-name":c}:{}}},components:xb([b.map(le=>le.asSpec()),h.map(le=>le.asSpec()),N.some($)]),matchWidth:!0,useMinWidth:!0,onOpen:(le,Ne,ge)=>{t.searchable&&E9(ge)},dropdownBehaviours:xt([...t.dropdownBehaviours,mf.button(()=>t.disabled||a.providers.isDisabled()),Ga(),sy.config({}),Vn.config({}),...t.tooltip.map(le=>Ir.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(le)}))).toArray(),no(Y,[hc(t,d),Zp(t,d)]),no(G,[Gs((le,Ne)=>t.listRole==="listbox"?ce:j4(le))]),no("menubutton-update-display-text",[it(qu,(le,Ne)=>{h.bind(ge=>ge.getOpt(le)).each(ge=>{Vn.set(ge,[hr(a.providers.translate(Ne.event.text))])})}),it(t1,(le,Ne)=>{b.bind(ge=>ge.getOpt(le)).each(ge=>{Vn.set(ge,[e1(Ne.event.icon,a.providers.icons)])})})])]),eventOrder:Ds(Z4,{[Er()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[sc()]:["toolbar-button-events",Ir.name(),Y,G]}),sandboxBehaviours:xt([En.config({mode:"special",onLeft:x,onRight:x}),no("dropdown-sandbox-events",[it(FP,(le,Ne)=>{C9(le),Ne.stop()}),it(cD,(le,Ne)=>{W_(le,Ne),Ne.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...a2(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:aI,onCollapseMenu:(le,Ne,ge)=>{bn.getHighlighted(ge).each(ke=>{aI(le,ge,ke)})},onDehighlightItem:x9}}},getAnchorOverrides:()=>({maxHeightFunction:(le,Ne)=>{jx()(le,Ne-10)}}),fetch:le=>zi.nu(Qt(t.fetch,le))})).asSpec()},iz=t=>Z(t),bL=t=>t.type==="separator",vL=t=>po(t,"getSubmenuItems"),cz={type:"separator"},yL=(t,s)=>{const a=Ho(t,(c,d)=>iz(d)?d===""?c:d==="|"?c.length>0&&!bL(c[c.length-1])?c.concat([cz]):c:po(s,d.toLowerCase())?c.concat([s[d.toLowerCase()]]):c:c.concat([d]),[]);return a.length>0&&bL(a[a.length-1])&&a.pop(),a},lz=(t,s)=>{const a=t.getSubmenuItems(),c=dT(a,s),d=Ds(c.menus,{[t.value]:c.items}),h=Ds(c.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:h}},uz=t=>{const s=kt(t,"value").getOrThunk(()=>tn("generated-menu-item"));return Ds({value:s},t)},dT=(t,s)=>{const a=yL(Z(t)?t.split(" "):t,s);return qo(a,(c,d)=>{if(vL(d)){const h=uz(d),b=lz(h,s);return{menus:Ds(c.menus,b.menus),items:[b.item,...c.items],expansions:Ds(c.expansions,b.expansions)}}else return{...c,items:[d,...c.items]}},{menus:{},expansions:{},items:[]})},dz=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),fz=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),cy=(t,s,a,c)=>{const d=tn("primary-menu"),h=dT(t,a.shared.providers.menuItems());if(h.items.length===0)return N.none();const b=dz(c),x=o4(d,h.items,s,a,c.isHorizontalMenu,b),T=fz(c),D=Vo(h.menus,($,G)=>o4(G,$,s,a,!1,T)),P=Ds(D,oo(d,x));return N.from(Fp.tieredData(d,P,h.expansions))},ly=t=>!po(t,"items"),wL="data-value",Y4=(t,s,a,c,d)=>tt(a,h=>ly(h)?{type:"togglemenuitem",...d?{}:{role:"option"},text:h.text,value:h.value,active:h.value===c,onAction:()=>{Yt.setValue(t,h.value),_n(t,Rl,{name:s}),Ln.focus(t)}}:{type:"nestedmenuitem",text:h.text,getSubmenuItems:()=>Y4(t,s,h.items,c,d)}),X4=(t,s)=>bs(t,a=>ly(a)?Sn(a.value===s,a):X4(a.items,s)),CL=(t,s,a)=>{const c=ms(t.items,D=>!ly(D)),d=s.shared.providers,h=a.bind(D=>X4(t.items,D)).orThunk(()=>Is(t.items).filter(ly)),b=t.label.map(D=>qp(D,d)),x=fs.parts.field({dom:{},factory:{sketch:D=>K4({uid:D.uid,text:h.map(P=>P.text),icon:N.none(),tooltip:N.none(),role:Sn(!c,"combobox"),...c?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(P,$)=>{const G=Y4(P,t.name,t.items,Yt.getValue(P),c);$(cy(G,df.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:N.none()}))},onSetup:ne(ce),getApi:ne({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Vs.config({}),Jp(h.map(P=>P.value),P=>pn(P.element,wL),(P,$)=>{X4(t.items,$).each(G=>{qt(P.element,wL,G.value),_n(P,qu,{text:G.text})})})]},"tox-listbox",s.shared)}}),T={dom:{tag:"div",classes:["tox-listboxfield"]},components:[x]};return fs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:dt([b.toArray(),[T]]),fieldBehaviours:xt([l.config({disabled:ne(!t.enabled),onDisabled:D=>{fs.getField(D).each(l.disable)},onEnabled:D=>{fs.getField(D).each(l.enable)}})])})},mz=(t,s)=>({dom:{tag:"div",classes:t.classes},components:tt(t.items,s.shared.interpreter)}),hz=(t,s)=>{const a=tt(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),c=t.data.map(d=>oo("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:ja(t.selectBehaviours,[Ln.config({}),Yt.config({store:{mode:"manual",getValue:d=>Zf(d.element),setValue:(d,h)=>{const b=Is(t.options);et(t.options,T=>T.value===h).isSome()?jm(d.element,h):d.element.dom.selectedIndex===-1&&h===""&&b.each(T=>jm(d.element,T.value))},...c}})])}},gz=il({name:"HtmlSelect",configFields:[rt("options"),Za("selectBehaviours",[Ln,Yt]),Be("selectClasses",[]),Be("selectAttributes",{}),Bo("data")],factory:hz}),pz=(t,s,a)=>{const c=tt(t.items,T=>({text:s.translate(T.text),value:T.value})),d=t.label.map(T=>qp(T,s)),h=fs.parts.field({dom:{},...a.map(T=>({data:T})).getOr({}),selectAttributes:{size:t.size},options:c,factory:gz,selectBehaviours:xt([l.config({disabled:()=>!t.enabled||s.isDisabled()}),Vs.config({}),no("selectbox-change",[it(np(),(T,D)=>{_n(T,Rl,{name:t.name})})])])}),b=t.size>1?N.none():N.some(Vu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),x={dom:{tag:"div",classes:["tox-selectfield"]},components:dt([[h],b.toArray()])};return fs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:dt([d.toArray(),[x]]),fieldBehaviours:xt([l.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:T=>{fs.getField(T).each(l.disable)},onEnabled:T=>{fs.getField(T).each(l.enable)}}),Ga()])})},bz=ne([Be("field1Name","field1"),Be("field2Name","field2"),Qd("onLockedChange"),ig(["lockClass"]),Be("locked",!1),su.field("coupledFieldBehaviours",[Ro,Yt])]),SL=(t,s,a)=>bt(t,s,a).bind(Ro.getCurrent),xL=(t,s)=>Ti({factory:fs,name:t,overrides:a=>({fieldBehaviours:xt([no("coupled-input-behaviour",[it(Gd(),c=>{SL(c,a,s).each(d=>{bt(c,a,"lock").each(h=>{lo.isOn(h)&&a.onLockedChange(c,d,h)})})})])])})}),vz=ne([xL("field1","field2"),xL("field2","field1"),Ti({factory:Vi,schema:[rt("dom")],name:"lock",overrides:t=>({buttonBehaviours:xt([lo.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),EL=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:su.augment(t.coupledFieldBehaviours,[Ro.config({find:N.some}),Yt.config({store:{mode:"manual",getValue:d=>{const h=xg(d,t,["field1","field2"]);return{[t.field1Name]:Yt.getValue(h.field1()),[t.field2Name]:Yt.getValue(h.field2())}},setValue:(d,h)=>{const b=xg(d,t,["field1","field2"]);Hr(h,t.field1Name)&&Yt.setValue(b.field1(),h[t.field1Name]),Hr(h,t.field2Name)&&Yt.setValue(b.field2(),h[t.field2Name])}}})]),apis:{getField1:d=>bt(d,t,"field1"),getField2:d=>bt(d,t,"field2"),getLock:d=>bt(d,t,"lock")}}),Gu=Ki({name:"FormCoupledInputs",configFields:bz(),partFields:vz(),factory:EL,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),yz=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let c=t.value.toFixed(a(t.unit));return c.indexOf(".")!==-1&&(c=c.replace(/\.?0*$/,"")),c+t.unit},J4=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const c=parseFloat(a[1]),d=a[2];return Yn.value({value:c,unit:d})}else return Yn.error(t)},Q4=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},c=d=>po(a,d);return t.unit===s?N.some(t.value):c(t.unit)&&c(s)?a[t.unit]===a[s]?N.some(t.value):N.some(t.value/a[t.unit]*a[s]):N.none()},e3=t=>N.none(),wz=(t,s)=>a=>Q4(a,s).map(c=>({value:c*t,unit:s})),Cz=(t,s)=>{const a=J4(t).toOptional(),c=J4(s).toOptional();return hi(a,c,(d,h)=>Q4(d,h.unit).map(b=>h.value/b).map(b=>wz(b,h.unit)).getOr(e3)).getOr(e3)},_L=(t,s)=>{let a=e3;const c=tn("ratio-event"),d=Y=>Vu(Y,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Y]},s.icons),h=t.label.getOr("Constrain proportions"),b=s.translate(h),x=Gu.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":b,"data-mce-name":h}},components:[d("lock"),d("unlock")],buttonBehaviours:xt([l.config({disabled:()=>!t.enabled||s.isDisabled()}),Ga(),Vs.config({}),Ir.config(s.tooltips.getConfig({tooltipText:b}))])}),T=Y=>({dom:{tag:"div",classes:["tox-form__group"]},components:Y}),D=Y=>fs.parts.field({factory:yb,inputClasses:["tox-textfield"],inputBehaviours:xt([l.config({disabled:()=>!t.enabled||s.isDisabled()}),Ga(),Vs.config({}),no("size-input-events",[it(ld(),(se,le)=>{_n(se,c,{isField1:Y})}),it(np(),(se,le)=>{_n(se,Rl,{name:t.name})})])]),selectOnFocus:!1}),P=Y=>({dom:{tag:"label",classes:["tox-label"]},components:[hr(s.translate(Y))]}),$=Gu.parts.field1(T([fs.parts.label(P("Width")),D(!0)])),G=Gu.parts.field2(T([fs.parts.label(P("Height")),D(!1)]));return Gu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[$,G,T([P(dg),x])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Y,se,le)=>{J4(Yt.getValue(Y)).each(Ne=>{a(Ne).each(ge=>{Yt.setValue(se,yz(ge))})})},coupledFieldBehaviours:xt([l.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:Y=>{Gu.getField1(Y).bind(fs.getField).each(l.disable),Gu.getField2(Y).bind(fs.getField).each(l.disable),Gu.getLock(Y).each(l.disable)},onEnabled:Y=>{Gu.getField1(Y).bind(fs.getField).each(l.enable),Gu.getField2(Y).bind(fs.getField).each(l.enable),Gu.getLock(Y).each(l.enable)}}),Ga(),no("size-input-events2",[it(c,(Y,se)=>{const le=se.event.isField1,Ne=le?Gu.getField1(Y):Gu.getField2(Y),ge=le?Gu.getField2(Y):Gu.getField1(Y),ke=Ne.map(Yt.getValue).getOr(""),Ae=ge.map(Yt.getValue).getOr("");a=Cz(ke,Ae)})])])})},TL=(t,s,a)=>{const c=Ad.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[hr(s.translate(t.label))]}),d=Ad.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),h=Ad.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Ad.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:ne(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[c,d,h],sliderBehaviours:xt([hf.self(),Ln.config({})]),onChoose:(b,x,T)=>{_n(b,Rl,{name:t.name,value:T})},onChange:(b,x,T)=>{_n(b,Rl,{name:t.name,value:T})}})},kL=(t,s)=>{const a=x=>({dom:{tag:"th",innerHtml:s.translate(x)}}),c=x=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:tt(x,a)}]}),d=x=>({dom:{tag:"td",innerHtml:s.translate(x)}}),h=x=>({dom:{tag:"tr"},components:tt(x,d)}),b=x=>({dom:{tag:"tbody"},components:tt(x,h)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[c(t.header),b(t.cells)],behaviours:xt([Vs.config({}),Ln.config({})])}},W2=(t,s)=>{const a=t.label.map(Y=>qp(Y,s)),c=[l.config({disabled:()=>t.disabled||s.isDisabled()}),Ga(),En.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:Y=>(ao(Y,k2),N.some(!0))}),no("textfield-change",[it(Gd(),(Y,se)=>{_n(Y,Rl,{name:t.name})}),it($f(),(Y,se)=>{_n(Y,Rl,{name:t.name})})]),Vs.config({})],d=t.validation.map(Y=>am.config({getRoot:se=>Mi(se.element),invalidClass:"tox-invalid",validator:{validate:se=>{const le=Yt.getValue(se),Ne=Y.validator(le);return zi.pure(Ne===!0?Yn.value(le):Yn.error(Ne))},validateOnLoad:Y.validateOnLoad}})).toArray(),h=t.placeholder.fold(ne({}),Y=>({placeholder:s.translate(Y)})),b=t.inputMode.fold(ne({}),Y=>({inputmode:Y})),x={...h,...b,"data-mce-name":t.name},T=fs.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(Y=>({data:Y})).getOr({}),inputAttributes:x,inputClasses:[t.classname],inputBehaviours:xt(dt([c,d])),selectOnFocus:!1,factory:yb}),D=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[T]}:T,$=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),G=[l.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:Y=>{fs.getField(Y).each(l.disable)},onEnabled:Y=>{fs.getField(Y).each(l.enable)}}),Ga()];return T2(a,D,$,G)},Sz=(t,s,a)=>W2({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:N.none(),maximized:t.maximized,data:a},s),xz=(t,s,a)=>W2({name:t.name,multiline:!0,label:t.label,inputMode:N.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:N.none(),maximized:t.maximized,data:a},s),Z2=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),$g=t=>t.dimension.property,n1=(t,s)=>t.dimension.getDimension(s),fT=(t,s)=>{const a=Z2(t,s);Qc(a,[s.shrinkingClass,s.growingClass])},t3=(t,s)=>{mr(t.element,s.openClass),$s(t.element,s.closedClass),lt(t.element,$g(s),"0px"),oi(t.element)},n3=(t,s)=>{mr(t.element,s.closedClass),$s(t.element,s.openClass),Xn(t.element,$g(s))},o3=(t,s,a,c)=>{a.setCollapsed(),lt(t.element,$g(s),n1(s,t.element)),fT(t,s),t3(t,s),s.onStartShrink(t),s.onShrunk(t)},AL=(t,s,a,c)=>{const d=c.getOrThunk(()=>n1(s,t.element));a.setCollapsed(),lt(t.element,$g(s),d),oi(t.element);const h=Z2(t,s);mr(h,s.growingClass),$s(h,s.shrinkingClass),t3(t,s),s.onStartShrink(t)},OL=(t,s,a)=>{const c=n1(s,t.element);(c==="0px"?o3:AL)(t,s,a,N.some(c))},DL=(t,s,a)=>{const c=Z2(t,s),d=Jc(c,s.shrinkingClass),h=n1(s,t.element);n3(t,s);const b=n1(s,t.element);(d?()=>{lt(t.element,$g(s),h),oi(t.element)}:()=>{t3(t,s)})(),mr(c,s.shrinkingClass),$s(c,s.growingClass),n3(t,s),lt(t.element,$g(s),b),a.setExpanded(),s.onStartGrow(t)},RL=(t,s,a)=>{if(a.isExpanded()){Xn(t.element,$g(s));const c=n1(s,t.element);lt(t.element,$g(s),c)}},Ez=(t,s,a)=>{a.isExpanded()||DL(t,s,a)},_z=(t,s,a)=>{a.isExpanded()&&OL(t,s,a)},zn=(t,s,a)=>{a.isExpanded()&&o3(t,s,a)},j2=(t,s,a)=>a.isExpanded(),ML=(t,s,a)=>a.isCollapsed(),s3=(t,s,a)=>{const c=Z2(t,s);return Jc(c,s.growingClass)===!0},r3=(t,s,a)=>{const c=Z2(t,s);return Jc(c,s.shrinkingClass)===!0};var q2=Object.freeze({__proto__:null,refresh:RL,grow:Ez,shrink:_z,immediateShrink:zn,hasGrown:j2,hasShrunk:ML,isGrowing:s3,isShrinking:r3,isTransitioning:(t,s,a)=>s3(t,s)||r3(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?OL:DL)(t,s,a)},disableTransitions:fT,immediateGrow:(t,s,a)=>{a.isExpanded()||(n3(t,s),lt(t.element,$g(s),n1(s,t.element)),fT(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),Oz=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const c=s.expanded;return Yc(c?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:oo(s.dimension.property,"0px")})},events:(t,s)=>Fs([op(ud(),(a,c)=>{c.event.raw.propertyName===t.dimension.property&&(fT(a,t),s.isExpanded()&&Xn(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),Dz=[rt("closedClass"),rt("openClass"),rt("shrinkingClass"),rt("growingClass"),Bo("getAnimationRoot"),ko("onShrunk"),ko("onStartShrink"),ko("onGrown"),ko("onStartGrow"),Be("expanded",!1),Fo("dimension",ba("property",{width:[ys("property","width"),ys("getDimension",t=>La(t)+"px")],height:[ys("property","height"),ys("getDimension",t=>xs(t)+"px")]}))],NL=Object.freeze({__proto__:null,init:t=>{const s=mn(t.expanded),a=()=>"expanded: "+s.get();return Xc({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Qt(s.set,!1),setExpanded:Qt(s.set,!0),readState:a})}});const Lc=li({fields:Dz,name:"sliding",active:Oz,apis:q2,state:NL}),a3=t=>({isEnabled:()=>!l.isDisabled(t),setEnabled:s=>l.set(t,!s),setActive:s=>{const a=t.element;s?($s(a,"tox-tbtn--enabled"),qt(a,"aria-pressed",!0)):(mr(a,"tox-tbtn--enabled"),H(a,"aria-pressed"))},isActive:()=>Jc(t.element,"tox-tbtn--enabled"),setText:s=>{_n(t,qu,{text:s})},setIcon:s=>_n(t,t1,{icon:s})}),G2=(t,s,a,c,d=!0,h)=>K4({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:c,fetch:(b,x)=>{const T={pattern:t.search.isSome()?_9(b):""};t.fetch(D=>{x(cy(D,df.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},T,a3(b))},onSetup:t.onSetup,getApi:a3,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[Vs.config({})]:[]]},s,a.shared,h),Rz=(t,s,a)=>{const c=h=>b=>{const x=!b.isActive();b.setActive(x),h.storage.set(x),a.shared.getSink().each(T=>{s().getOpt(T).each(D=>{Sl(D.element),_n(D,dh,{name:h.name,value:h.storage.get()})})})},d=h=>b=>{b.setActive(h.storage.get())};return h=>{h(tt(t,b=>{const x=b.text.fold(()=>({}),T=>({text:T}));return{type:b.type,active:!1,...x,onAction:c(b),onSetup:d(b)}}))}},PL=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[hr(t)]}),BL=tn("leaf-label-event-id"),i3=({leaf:t,onLeafAction:s,visible:a,treeId:c,selectedId:d,backstage:h})=>{const b=t.menu.map(T=>G2(T,"tox-mbtn",h,N.none(),a)),x=[PL(t.title)];return b.each(T=>x.push(T)),Vi.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:x,role:"treeitem",action:T=>{s(t.id),T.getSystem().broadcastOn([`update-active-item-${c}`],{value:t.id})},eventOrder:{[Du()]:[BL,"keying"]},buttonBehaviours:xt([...a?[Vs.config({})]:[],lo.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Nc.config({channels:{[`update-active-item-${c}`]:{onReceive:(T,D)=>{(D.value===t.id?lo.on:lo.off)(T)}}}}),no(BL,[Gs((T,D)=>{d.each(P=>{(P===t.id?lo.on:lo.off)(T)})}),it(Du(),(T,D)=>{const P=D.event.raw.code==="ArrowLeft",$=D.event.raw.code==="ArrowRight";P?(qm(T.element,".tox-tree--directory").each(G=>{T.getSystem().getByDom(G).each(Y=>{Bw(G,".tox-tree--directory__label").each(se=>{Y.getSystem().getByDom(se).each(Ln.focus)})})}),D.stop()):$&&D.stop()})])])})},Mz=(t,s,a)=>Vu(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),Nz=(t,s)=>Mz(t,s,[]),IL=tn("directory-label-event-id"),Pz=({directory:t,visible:s,noChildren:a,backstage:c})=>{const d=t.menu.map(x=>G2(x,"tox-mbtn",c,N.none())),h=[{dom:{tag:"div",classes:["tox-chevron"]},components:[Nz("chevron-right",c.shared.providers.icons)]},PL(t.title)];d.each(x=>{h.push(x)});const b=x=>{qm(x.element,".tox-tree--directory").each(T=>{x.getSystem().getByDom(T).each(D=>{const P=!lo.isOn(D);lo.toggle(D),_n(x,"expand-tree-node",{expanded:P,node:t.id})})})};return Vi.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:h,action:b,eventOrder:{[Du()]:[IL,"keying"]},buttonBehaviours:xt([...s?[Vs.config({})]:[],no(IL,[it(Du(),(x,T)=>{const D=T.event.raw.code==="ArrowRight",P=T.event.raw.code==="ArrowLeft";D&&a&&T.stop(),(D||P)&&qm(x.element,".tox-tree--directory").each($=>{x.getSystem().getByDom($).each(G=>{!lo.isOn(G)&&D||lo.isOn(G)&&P?(b(x),T.stop()):P&&!lo.isOn(G)&&(qm(G.element,".tox-tree--directory").each(Y=>{Bw(Y,".tox-tree--directory__label").each(se=>{G.getSystem().getByDom(se).each(Ln.focus)})}),T.stop())})})})])])})},Bz=({children:t,onLeafAction:s,visible:a,treeId:c,expandedIds:d,selectedId:h,backstage:b})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(x=>x.type==="leaf"?i3({leaf:x,selectedId:h,onLeafAction:s,visible:a,treeId:c,backstage:b}):c3({directory:x,expandedIds:d,selectedId:h,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:b})),behaviours:xt([Lc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Vn.config({})])}),LL=tn("directory-event-id"),c3=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:d,expandedIds:h,selectedId:b})=>{const{children:x}=t,T=mn(h),D=$=>x.map(G=>G.type==="leaf"?i3({leaf:G,selectedId:b,onLeafAction:s,visible:$,treeId:c,backstage:d}):c3({directory:G,expandedIds:T.get(),selectedId:b,onLeafAction:s,labelTabstopping:$,treeId:c,backstage:d})),P=h.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[Pz({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),Bz({children:x,expandedIds:h,selectedId:b,onLeafAction:s,visible:P,treeId:c,backstage:d})],behaviours:xt([no(LL,[Gs(($,G)=>{lo.set($,P)}),it("expand-tree-node",($,G)=>{const{expanded:Y,node:se}=G.event;T.set(Y?[...T.get(),se]:T.get().filter(le=>le!==se))})]),lo.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:($,G)=>{const Y=$.components()[1],se=D(G);G?Lc.grow(Y):Lc.shrink(Y),Vn.set(Y,se)}})])}},Iz=tn("tree-event-id"),Lz=(t,s)=>{const a=t.onLeafAction.getOr(ce),c=t.onToggleExpand.getOr(ce),d=t.defaultExpandedIds,h=mn(d),b=mn(t.defaultSelectedId),x=tn("tree-id"),T=(D,P)=>t.items.map($=>$.type==="leaf"?i3({leaf:$,selectedId:D,onLeafAction:a,visible:!0,treeId:x,backstage:s}):c3({directory:$,selectedId:D,onLeafAction:a,expandedIds:P,labelTabstopping:!0,treeId:x,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:T(b.get(),h.get()),behaviours:xt([En.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),no(Iz,[it("expand-tree-node",(D,P)=>{const{expanded:$,node:G}=P.event;h.set($?[...h.get(),G]:h.get().filter(Y=>Y!==G)),c(h.get(),{expanded:$,node:G})})]),Nc.config({channels:{[`update-active-item-${x}`]:{onReceive:(D,P)=>{b.set(N.some(P.value)),Vn.set(D,T(N.some(P.value),h.get()))}}}}),Vn.config({})])}};var Fz=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.stream.streams.setup(t,s);return Fs([it(t.event,c),Yd(()=>s.cancel())].concat(t.cancelEvent.map(d=>[it(d,()=>s.cancel())]).getOr([])))}});const FL=t=>{const s=mn(null);return Xc({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:h=>{s.set(h)},cancel:()=>{const h=s.get();h!==null&&h.cancel()}})};var $z=Object.freeze({__proto__:null,throttle:FL,init:t=>t.stream.streams.state(t)});const Hz=(t,s)=>{const a=t.stream,c=L4(t.onStream,a.delay);return s.setTimer(c),(d,h)=>{c.throttle(d,h),a.stopEvent&&h.stop()}};var Vz=[Fo("stream",ba("mode",{throttle:[rt("delay"),Be("stopEvent",!0),ys("streams",{setup:Hz,state:FL})]})),Be("event","input"),Bo("cancelEvent"),Qd("onStream")];const l3=li({fields:Vz,name:"streaming",active:Fz,state:$z}),K2=(t,s,a)=>{const c=Yt.getValue(a);Yt.setValue(s,c),HL(s)},$L=(t,s)=>{const a=t.element,c=Zf(a),d=a.dom;pn(a,"type")!=="number"&&s(d,c)},HL=t=>{$L(t,(s,a)=>s.setSelectionRange(a.length,a.length))},zz=(t,s)=>{$L(t,(a,c)=>a.setSelectionRange(s,c.length))},Uz=(t,s,a)=>{if(t.selectsOver){const c=Yt.getValue(s),d=t.getDisplayText(c),h=Yt.getValue(a);return t.getDisplayText(h).indexOf(d)===0?N.some(()=>{K2(t,s,a),zz(s,d.length)}):N.none()}else return N.none()},u3=ne("alloy.typeahead.itemexecute"),Wz=(t,s,a,c)=>{const d=($,G,Y)=>{t.previewing.set(!1);const se=jr.getCoupled($,"sandbox");if(Do.isOpen(se))Ro.getCurrent(se).each(le=>{bn.getHighlighted(le).fold(()=>{Y(le)},()=>{Kd(se,le.element,"keydown",G)})});else{const le=Ne=>{Ro.getCurrent(Ne).each(Y)};J0(t,b($),$,se,c,le,Zr.HighlightMenuAndItem).get(ce)}},h=BP(t),b=$=>G=>G.map(Y=>{const se=Vc(Y.menus),le=Se(se,ge=>uo(ge.items,ke=>ke.type==="item"));return Yt.getState($).update(tt(le,ge=>ge.data)),Y}),x=$=>Ro.getCurrent($),T="typeaheadevents",D=[Ln.config({}),Yt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:$=>Zf($.element),getFallbackEntry:$=>({value:$,meta:{}}),setValue:($,G)=>{jm($.element,t.model.getDisplayText(G))},...t.initialData.map($=>oo("initialValue",$)).getOr({})}}),l3.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:($,G)=>{const Y=jr.getCoupled($,"sandbox");if(Ln.isFocused($)&&Zf($.element).length>=t.minChars){const le=x(Y).bind(ge=>bn.getHighlighted(ge).map(Yt.getValue));t.previewing.set(!0);const Ne=ge=>{x(Y).each(ke=>{le.fold(()=>{t.model.selectsOver&&bn.highlightFirst(ke)},Ae=>{bn.highlightBy(ke,st=>Yt.getValue(st).value===Ae.value),bn.getHighlighted(ke).orThunk(()=>(bn.highlightFirst(ke),N.none()))})})};J0(t,b($),$,Y,c,Ne,Zr.HighlightJustMenu).get(ce)}},cancelEvent:Wy()}),En.config({mode:"special",onDown:($,G)=>(d($,G,bn.highlightFirst),N.some(!0)),onEscape:$=>{const G=jr.getCoupled($,"sandbox");return Do.isOpen(G)?(Do.close(G),N.some(!0)):N.none()},onUp:($,G)=>(d($,G,bn.highlightLast),N.some(!0)),onEnter:$=>{const G=jr.getCoupled($,"sandbox"),Y=Do.isOpen(G);if(Y&&!t.previewing.get())return x(G).bind(se=>bn.getHighlighted(se)).map(se=>(_n($,u3(),{item:se}),!0));{const se=Yt.getValue($);return ao($,Wy()),t.onExecute(G,$,se),Y&&Do.close(G),N.some(!0)}}}),lo.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),jr.config({others:{sandbox:$=>t4(t,$,{onOpen:()=>lo.on($),onClose:()=>{t.lazyTypeaheadComp.get().each(G=>H(G.element,"aria-activedescendant")),lo.off($)}})}}),no(T,[Gs($=>{t.lazyTypeaheadComp.set(N.some($))}),Yd($=>{t.lazyTypeaheadComp.set(N.none())}),Ru($=>{const G=ce;JD(t,b($),$,c,G,Zr.HighlightMenuAndItem).get(ce)}),it(u3(),($,G)=>{const Y=jr.getCoupled($,"sandbox");K2(t.model,$,G.event.item),ao($,Wy()),t.onItemExecute($,Y,G.event.item,Yt.getValue($)),Do.close(Y),HL($)})].concat(t.dismissOnBlur?[it(Am(),$=>{const G=jr.getCoupled($,"sandbox");uc(G.element).isNone()&&Do.close(G)})]:[]))],P={[Ql()]:[Yt.name(),l3.name(),T],...t.eventOrder};return{uid:t.uid,dom:LP(Ds(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...h,...ja(t.typeaheadBehaviours,D)},eventOrder:P}},VL=ne([Bo("lazySink"),rt("fetch"),Be("minChars",5),Be("responseTime",1e3),ko("onOpen"),Be("getHotspot",N.some),Be("getAnchorOverrides",ne({})),Be("layouts",N.none()),Be("eventOrder",{}),R("model",{},[Be("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Be("selectsOver",!0),Be("populateFromBrowse",!0)]),ko("onSetValue"),Mc("onExecute"),ko("onItemExecute"),Be("inputClasses",[]),Be("inputAttributes",{}),Be("inputStyles",{}),Be("matchWidth",!0),Be("useMinWidth",!1),Be("dismissOnBlur",!0),ig(["openClass"]),Bo("initialData"),Bo("listRole"),Za("typeaheadBehaviours",[Ln,Yt,l3,En,lo,jr]),Lo("lazyTypeaheadComp",()=>mn(N.none)),Lo("previewing",()=>mn(!0))].concat(iD()).concat(U_())),Zz=ne([ru({schema:[dp()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,c)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{Uz(t.model,d,c).fold(()=>{t.model.selectsOver?(bn.dehighlight(a,c),t.previewing.set(!0)):t.previewing.set(!1)},h=>{h(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&K2(t.model,d,c),Dr(c.element,"id").each(h=>qt(d.element,"aria-activedescendant",h))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(c=>(_n(c,u3(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(c=>{t.model.populateFromBrowse&&K2(t.model,c,a)})}})})]),zL=Ki({name:"Typeahead",configFields:VL(),partFields:Zz(),factory:Wz}),gf=t=>({...t,toCached:()=>gf(t.toCached()),bindFuture:T=>gf(t.bind(D=>D.fold(P=>zi.pure(Yn.error(P)),P=>T(P)))),bindResult:T=>gf(t.map(D=>D.bind(T))),mapResult:T=>gf(t.map(D=>D.map(T))),mapError:T=>gf(t.map(D=>D.mapError(T))),foldResult:(T,D)=>t.map(P=>P.fold(T,D)),withTimeout:(T,D)=>gf(zi.nu(P=>{let $=!1;const G=setTimeout(()=>{$=!0,P(Yn.error(D()))},T);t.get(Y=>{$||(clearTimeout(G),P(Y))})}))}),d3=t=>gf(zi.nu(t)),f3=t=>gf(zi.pure(Yn.value(t))),Gz={nu:d3,wrap:gf,pure:f3,value:f3,error:t=>gf(zi.pure(Yn.error(t))),fromResult:t=>gf(zi.pure(t)),fromFuture:t=>gf(t.map(Yn.value)),fromPromise:t=>d3(s=>{t.then(a=>{s(Yn.value(a))},a=>{s(Yn.error(a))})})},Y2=(t,s,a=[],c,d,h,b)=>{const x=s.fold(()=>({}),P=>({action:P})),T={buttonBehaviours:xt([mf.button(()=>!t.enabled||b.isDisabled()),Ga(),Vs.config({}),...h.map(P=>Ir.config(b.tooltips.getConfig({tooltipText:b.translate(P)}))).toArray(),no("button press",[Yy("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...x},D=Ds(T,{dom:c});return Ds(D,{components:d})},Kz=(t,s,a,c=[],d)=>{const h=t.tooltip.map(D=>({"aria-label":a.translate(D)})).getOr({}),b={tag:"button",classes:["tox-tbtn"],attributes:{...h,"data-mce-name":d}},x=t.icon.map(D=>uT(D,a.icons)),T=xb([x]);return Y2(t,s,c,b,T,t.tooltip,a)},m3=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},pf=(t,s,a,c=[],d=[])=>{const h=a.translate(t.text),b=t.icon.map(Y=>uT(Y,a.icons)),x=[b.getOrThunk(()=>hr(h))],T=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),$={tag:"button",classes:[...m3(T),...b.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":h,"data-mce-name":t.text}},G=t.icon.map(ne(h));return Y2(t,s,c,$,x,G,a)},X2=(t,s,a,c=[],d=[])=>{const h=pf(t,N.some(s),a,c,d);return Vi.sketch(h)},J2=(t,s)=>a=>{s==="custom"?_n(a,dh,{name:t,value:{}}):s==="submit"?ao(a,k2):s==="cancel"?ao(a,Pg):console.error("Unknown button type: ",s)},Yz=(t,s)=>s==="menu",h3=(t,s)=>s==="custom"||s==="cancel"||s==="submit",Xz=(t,s)=>s==="togglebutton",g3=(t,s,a)=>{var c,d;const h=t.icon.map(Ae=>e1(Ae,s.icons)).map(Jo),b=Ae=>{_n(Ae,dh,{name:t.name,value:{setIcon:st=>{h.map(je=>je.getOpt(Ae).each($t=>{Vn.set($t,[e1(st,s.icons)])}))}}})},x=t.buttonType.getOr(t.primary?"primary":"secondary"),T={...t,name:(c=t.name)!==null&&c!==void 0?c:"",primary:x==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},D=T.tooltip.or(t.text).map(Ae=>({"aria-label":s.translate(Ae)})).getOr({}),P=m3(x??"secondary"),$=t.icon.isSome()&&t.text.isSome(),G={tag:"button",classes:[...P.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...$?["tox-button--icon-and-text"]:[]],attributes:{...D,...Ct(a)?{"data-mce-name":a}:{}}},Y=[],se=s.translate(t.text.getOr("")),le=hr(se),ge=[...xb([h.map(Ae=>Ae.asSpec())]),...t.text.isSome()?[le]:[]],ke=Y2(T,N.some(b),Y,G,ge,t.tooltip,s);return Vi.sketch(ke)},Q2=(t,s,a)=>{if(Yz(t,s)){const c=()=>b,d=t,h={...t,type:"menubutton",search:N.none(),onSetup:x=>(x.setEnabled(t.enabled),ce),fetch:Rz(d.items,c,a)},b=Jo(G2(h,"tox-tbtn",a,N.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return b.asSpec()}else if(h3(t,s)){const c=J2(t.name,s),d={...t,borderless:!1};return X2(d,c,a.shared.providers,[])}else{if(Xz(t,s))return g3(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},p3=(t,s)=>{const a=J2(t.name,"custom");return gI(N.none(),fs.parts.field({factory:Vi,...pf(t,N.some(a),s,[rT(""),hf.self()])}))},Jz={type:"separator"},Qz=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ce}),mT=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ce}),eU=t=>tt(t,Qz),tU=(t,s)=>uo(s,a=>a.type===t),hT=(t,s)=>eU(tU(t,s)),nU=t=>hT("header",t.targets),oU=t=>hT("anchor",t.targets),WL=t=>N.from(t.anchorTop).map(s=>mT("<top>",s)).toArray(),ZL=t=>N.from(t.anchorBottom).map(s=>mT("<bottom>",s)).toArray(),sU=t=>tt(t,s=>mT(s,s)),rU=t=>Ho(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(Jz,a),[]),b3=(t,s)=>{const a=t.toLowerCase();return uo(s,c=>{var d;const h=c.meta!==void 0&&c.meta.text!==void 0?c.meta.text:c.text,b=(d=c.value)!==null&&d!==void 0?d:"";return pr(h.toLowerCase(),a)||pr(b.toLowerCase(),a)})},aU=(t,s,a)=>{var c,d;const h=Yt.getValue(s),b=(d=(c=h==null?void 0:h.meta)===null||c===void 0?void 0:c.text)!==null&&d!==void 0?d:h.value;return a.getLinkInformation().fold(()=>[],T=>{const D=b3(b,sU(a.getHistory(t)));return t==="file"?rU([D,b3(b,nU(T)),b3(b,dt([WL(T),oU(T),ZL(T)]))]):D})},v3=tn("aria-invalid"),im=(t,s,a,c)=>{const d=s.shared.providers,h=ke=>{const Ae=Yt.getValue(ke);a.addToHistory(Ae.value,t.filetype)},b={...c.map(ke=>({initialData:ke})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":v3,type:"url"},minChars:0,responseTime:0,fetch:ke=>{const Ae=aU(t.filetype,ke,a),st=cy(Ae,df.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:N.none()});return zi.pure(st)},getHotspot:ke=>se.getOpt(ke),onSetValue:(ke,Ae)=>{ke.hasConfigured(am)&&am.run(ke).get(ce)},typeaheadBehaviours:xt([...a.getValidationHandler().map(ke=>am.config({getRoot:Ae=>Mi(Ae.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Ae,st)=>{P.getOpt(Ae).each(je=>{qt(je.element,"title",d.translate(st))})}},validator:{validate:Ae=>{const st=Yt.getValue(Ae);return Gz.nu(je=>{ke({type:t.filetype,url:st.value},$t=>{if($t.status==="invalid"){const Xt=Yn.error($t.message);je(Xt)}else{const Xt=Yn.value($t.message);je(Xt)}})})},validateOnLoad:!1}})).toArray(),l.config({disabled:()=>!t.enabled||d.isDisabled()}),Vs.config({}),no("urlinput-events",[it(Gd(),ke=>{const Ae=Zf(ke.element),st=Ae.trim();st!==Ae&&jm(ke.element,st),t.filetype==="file"&&_n(ke,Rl,{name:t.name})}),it(np(),ke=>{_n(ke,Rl,{name:t.name}),h(ke)}),it($f(),ke=>{_n(ke,Rl,{name:t.name}),h(ke)})])]),eventOrder:{[Gd()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ke=>ke.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:a2(!1,1,"normal")},onExecute:(ke,Ae,st)=>{_n(Ae,k2,{})},onItemExecute:(ke,Ae,st,je)=>{h(ke),_n(ke,Rl,{name:t.name})}},x=fs.parts.field({...b,factory:zL}),T=t.label.map(ke=>qp(ke,d)),P=Jo(((ke,Ae,st=ke,je=ke)=>Vu(st,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ke],attributes:{title:d.translate(je),"aria-live":"polite",...Ae.fold(()=>({}),$t=>({id:$t}))}},d.icons))("invalid",N.some(v3),"warning")),$=Jo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[P.asSpec()]}),G=a.getUrlPicker(t.filetype),Y=tn("browser.url.event"),se=Jo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[x,$.asSpec()],behaviours:xt([l.config({disabled:()=>!t.enabled||d.isDisabled()})])}),le=Jo(X2({name:t.name,icon:N.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:N.none(),borderless:!0},ke=>ao(ke,Y),d,[],["tox-browse-url"])),Ne=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:dt([[se.asSpec()],G.map(()=>le.asSpec()).toArray()])}),ge=ke=>{Ro.getCurrent(ke).each(Ae=>{const st=Yt.getValue(Ae),je={fieldname:t.name,...st};G.each($t=>{$t(je).get(Xt=>{Yt.setValue(Ae,Xt),_n(ke,Rl,{name:t.name})})})})};return fs.sketch({dom:U9(),components:T.toArray().concat([Ne()]),fieldBehaviours:xt([l.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:ke=>{fs.getField(ke).each(l.disable),le.getOpt(ke).each(l.disable)},onEnabled:ke=>{fs.getField(ke).each(l.enable),le.getOpt(ke).each(l.enable)}}),Ga(),no("url-input-events",[it(Y,ge)])])})},y3=(t,s)=>{const a=JO(t.icon,s.icons);return rm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[Vi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:c=>_n(c,dh,{name:"alert-banner",value:t.url}),buttonBehaviours:xt([g_()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},iU=(t,s)=>{t.dom.checked=s},cU=t=>t.dom.checked,lU=(t,s,a)=>{const c=T=>(T.element.dom.click(),N.some(!0)),d=fs.parts.field({factory:{sketch:Jt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:xt([hf.self(),l.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:T=>{Mi(T.element).each(D=>$s(D,"tox-checkbox--disabled"))},onEnabled:T=>{Mi(T.element).each(D=>mr(D,"tox-checkbox--disabled"))}}),Vs.config({}),Ln.config({}),P4(a,cU,iU),En.config({mode:"special",onEnter:c,onSpace:c,stopSpaceKeyup:!0}),no("checkbox-events",[it(np(),(T,D)=>{_n(T,Rl,{name:t.name})})])])}),h=fs.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[hr(s.translate(t.label))],behaviours:xt([sy.config({})])}),b=T=>Vu(T==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+T]},s.icons),x=Jo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[b("checked"),b("unchecked")]});return fs.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,x.asSpec(),h],fieldBehaviours:xt([l.config({disabled:()=>!t.enabled||s.isDisabled()}),Ga()])})},uU=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],c=no("htmlpanel",[Gs(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?rm.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:xt([Ir.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{tr(d.element,"[data-mce-tooltip]:hover").orThunk(()=>uc(d.element)).each(h=>{Dr(h,"data-mce-tooltip").each(b=>{Ir.setComponents(d,s.tooltips.getComponents({tooltipText:b}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:tr(d.element,"[data-mce-tooltip]:hover").orThunk(()=>uc(d.element).filter(h=>Dr(h,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:ne([Ca,wa,ya,us,Pr,xi]),onRtl:ne([Ca,wa,ya,us,Pr,xi])},bubble:Pu(0,-2,{})})}),c])}):rm.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:xt([Vs.config({}),Ln.config({}),c])})},Ka=t=>(s,a,c,d,h)=>kt(a,"name").fold(()=>t(a,d,N.none(),h),b=>s.field(b,t(a,d,kt(c,b),h))),jL=t=>(s,a,c,d,h)=>{const b=Ds(a,{source:"dynamic"});return Ka(t)(s,b,c,d,h)},qL={bar:Ka((t,s)=>F9(t,s.shared)),collection:Ka((t,s,a)=>oy(t,s.shared.providers,a)),alertbanner:Ka((t,s)=>y3(t,s.shared.providers)),input:Ka((t,s,a)=>Sz(t,s.shared.providers,a)),textarea:Ka((t,s,a)=>xz(t,s.shared.providers,a)),label:Ka((t,s,a,c)=>gL(t,s.shared,c)),iframe:jL((t,s,a)=>oz(t,s.shared.providers,a)),button:Ka((t,s)=>p3(t,s.shared.providers)),checkbox:Ka((t,s,a)=>lU(t,s.shared.providers,a)),colorinput:Ka((t,s,a)=>J9(t,s.shared,s.colorinput,a)),colorpicker:Ka((t,s,a)=>qV(t,s.shared.providers,a)),dropzone:Ka((t,s,a)=>I4(t,s.shared.providers,a)),grid:Ka((t,s)=>YV(t,s.shared)),listbox:Ka((t,s,a)=>CL(t,s,a)),selectbox:Ka((t,s,a)=>pz(t,s.shared.providers,a)),sizeinput:Ka((t,s)=>_L(t,s.shared.providers)),slider:Ka((t,s,a)=>TL(t,s.shared.providers,a)),urlinput:Ka((t,s,a)=>im(t,s,s.urlinput,a)),customeditor:Ka(aL),htmlpanel:Ka((t,s)=>uU(t,s.shared.providers)),imagepreview:Ka((t,s,a)=>W4(t,a)),table:Ka((t,s)=>kL(t,s.shared.providers)),tree:Ka((t,s)=>Lz(t,s)),panel:Ka((t,s)=>mz(t,s))},hY={field:(t,s)=>s,record:ne([])},dU=(t,s,a,c,d)=>{const h=Ds(c,{shared:{interpreter:b=>Ai(t,b,a,h,d)}});return Ai(t,s,a,h,d)},Ai=(t,s,a,c,d)=>kt(qL,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),h=>h(t,s,a,c,d)),gT=(t,s,a,c)=>Ai(hY,t,s,a,c),o1="layout-inset",uy=t=>t.x,GL=(t,s)=>t.x+t.width/2-s.width/2,w3=(t,s)=>t.x+t.width-s.width,C3=t=>t.y,S3=(t,s)=>t.y+t.height-s.height,KL=(t,s)=>t.y+t.height/2-s.height/2,pT=(t,s,a)=>Ua(w3(t,s),S3(t,s),a.insetSouthwest(),nn(),"southwest",ui(t,{right:0,bottom:3}),o1),bT=(t,s,a)=>Ua(uy(t),S3(t,s),a.insetSoutheast(),Dv(),"southeast",ui(t,{left:1,bottom:3}),o1),eS=(t,s,a)=>Ua(w3(t,s),C3(t),a.insetNorthwest(),Fw(),"northwest",ui(t,{right:0,top:2}),o1),dy=(t,s,a)=>Ua(uy(t),C3(t),a.insetNortheast(),Ov(),"northeast",ui(t,{left:1,top:2}),o1),cu=(t,s,a)=>Ua(GL(t,s),C3(t),a.insetNorth(),B1(),"north",ui(t,{top:2}),o1),fy=(t,s,a)=>Ua(GL(t,s),S3(t,s),a.insetSouth(),$w(),"south",ui(t,{bottom:3}),o1),x3=(t,s,a)=>Ua(w3(t,s),KL(t,s),a.insetEast(),Tx(),"east",ui(t,{right:0}),o1),YL=(t,s,a)=>Ua(uy(t),KL(t,s),a.insetWest(),_x(),"west",ui(t,{left:1}),o1),XL=t=>{switch(t){case"north":return cu;case"northeast":return dy;case"northwest":return eS;case"south":return fy;case"southeast":return bT;case"southwest":return pT;case"east":return x3;case"west":return YL}},JL=(t,s,a,c,d)=>Ix(c).map(XL).getOr(cu)(t,s,a,c,d),fU=t=>{switch(t){case"north":return fy;case"northeast":return bT;case"northwest":return pT;case"south":return cu;case"southeast":return dy;case"southwest":return eS;case"east":return YL;case"west":return x3}},QL=(t,s,a,c,d)=>Ix(c).map(fU).getOr(cu)(t,s,a,c,d),vT={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},gY=(t,s,a)=>{const d={maxHeightFunction:bp()},h=()=>({type:"node",root:gi(vr(t())),node:N.from(t()),bubble:Pu(12,12,vT),layouts:{onRtl:()=>[dy],onLtr:()=>[eS]},overrides:d}),b=()=>({type:"hotspot",hotspot:s(),bubble:Pu(-12,12,vT),layouts:{onRtl:()=>[ya,Pr,Ca],onLtr:()=>[Pr,ya,Ca]},overrides:d});return()=>a()?h():b()},mU=(t,s,a,c)=>{const h={maxHeightFunction:bp()},b=()=>({type:"node",root:gi(vr(s())),node:N.from(s()),bubble:Pu(12,12,vT),layouts:{onRtl:()=>[cu],onLtr:()=>[cu]},overrides:h}),x=()=>t?{type:"node",root:gi(vr(s())),node:N.from(s()),bubble:Pu(0,-ml(s()),vT),layouts:{onRtl:()=>[wa],onLtr:()=>[wa]},overrides:h}:{type:"hotspot",hotspot:a(),bubble:Pu(0,0,vT),layouts:{onRtl:()=>[wa],onLtr:()=>[wa]},overrides:h};return()=>c()?b():x()},hU=(t,s,a)=>{const c=()=>({type:"node",root:gi(vr(t())),node:N.from(t()),layouts:{onRtl:()=>[cu],onLtr:()=>[cu]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Ca],onLtr:()=>[Ca]}});return()=>a()?c():d()},gU=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),c=t.model.table.getSelectedCells();if(c.length>1){const d=c[0],h=c[c.length-1],b={firstCell:_e.fromDom(d),lastCell:_e.fromDom(h)};return N.some(b)}return N.some(th.range(_e.fromDom(a.startContainer),a.startOffset,_e.fromDom(a.endContainer),a.endOffset))}}),e5=t=>s=>({type:"node",root:t(),node:s}),E3=(t,s,a,c)=>{const d=H0(t),h=()=>_e.fromDom(t.getBody()),b=()=>_e.fromDom(t.getContentAreaContainer()),x=()=>d||!c();return{inlineDialog:gY(b,s,x),inlineBottomDialog:mU(t.inline,b,a,x),banner:hU(b,s,x),cursor:gU(t,h),node:e5(h)}},pU=t=>(s,a)=>{GB(t)(s,a)},bU=t=>()=>$B(t),t5=t=>s=>V_(t,s),vU=t=>s=>FB(t,s),yU=t=>({colorPicker:pU(t),hasCustomColors:bU(t),getColors:t5(t),getColorCols:vU(t)}),wU=t=>()=>uP(t),CU=t=>({isDraggableModal:wU(t)}),_3=t=>{const s=mn(YC(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},T3=t=>Hr(t,"items"),n5=t=>Hr(t,"format"),o5=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],SU=t=>po(t,"items"),xU=t=>po(t,"block"),s5=t=>po(t,"inline"),EU=t=>po(t,"selector"),tS=t=>Ho(t,(s,a)=>{if(SU(a)){const c=tS(a.items);return{customFormats:s.customFormats.concat(c.customFormats),formats:s.formats.concat([{title:a.title,items:c.formats}])}}else if(s5(a)||xU(a)||EU(a)){const d=`custom-${Z(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),_U=(t,s)=>{const a=tS(s),c=d=>{yt(d,h=>{t.formatter.has(h.name)||t.formatter.register(h.name,h.format)})};return t.formatter?c(a.customFormats):t.on("init",()=>{c(a.customFormats)}),a.formats},nS=t=>QN(t).map(s=>{const a=_U(t,s);return eP(t)?o5.concat(a):a}).getOr(o5),TU=t=>{const s=vs(t);return s.length===1&&eo(s,"title")},yT=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),my=(t,s,a,c)=>{const d=T=>yT(T,a,c),h=T=>{const D=x(T.items);return{...T,type:"submenu",getStyleItems:ne(D)}},b=T=>{const D=Z(T.name)?T.name:tn(T.title),P=`custom-${D}`,$={...T,type:"formatter",format:P,isSelected:a(P),getStylePreview:c(P)};return t.formatter.register(D,$),$},x=T=>tt(T,D=>T3(D)?h(D):n5(D)?d(D):TU(D)?{...D,type:"separator"}:b(D));return x(s)},r5=t=>{const s=x=>()=>t.formatter.match(x),a=x=>()=>{const T=t.formatter.get(x);return T!==void 0?N.some({tag:T.length>0&&(T[0].inline||T[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(x))}):N.none()},c=mn([]),d=mn([]),h=mn(!1);return t.on("PreInit",x=>{const T=nS(t),D=my(t,T,s,a);c.set(D)}),t.on("addStyleModifications",x=>{const T=my(t,x.items,s,a);d.set(T),h.set(x.replace)}),{getData:()=>{const x=h.get()?[]:c.get(),T=d.get();return x.concat(T)}}},kU=t=>{let c=0;const d=()=>c>0,h=x=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[hr(x.tooltipText)]}];return{getConfig:x=>({delayForShow:()=>d()?60:300,delayForHide:ne(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:h(x),onShow:(T,D)=>{c++,x.onShow&&x.onShow(T,D)},onHide:(T,D)=>{c--,x.onHide&&x.onHide(T,D)},onSetup:x.onSetup}),getComponents:h}},a5=t=>Ct(t)&&t.nodeType===1,i5=Fg.trim,k3=t=>s=>!!(a5(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),AU=k3("true"),A3=k3("false"),oS=(t,s,a,c,d)=>({type:t,title:s,url:a,level:c,attach:d}),OU=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return AU(s)}return!1},DU=(t,s)=>tt(di(_e.fromDom(s),t),a=>a.dom),Mb=t=>t.innerText||t.textContent,c5=t=>t.id?t.id:tn("h"),RU=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,l5=t=>RU(t)&&CT(t),wT=t=>t&&/^(H[1-6])$/.test(t.nodeName),CT=t=>OU(t)&&!A3(t),MU=t=>wT(t)&&CT(t),NU=t=>wT(t)?parseInt(t.nodeName.substr(1),10):0,PU=t=>{var s;const a=c5(t),c=()=>{t.id=a};return oS("header",(s=Mb(t))!==null&&s!==void 0?s:"","#"+a,NU(t),c)},O3=t=>{const s=t.id||t.name,a=Mb(t);return oS("anchor",a||"#"+s,"#"+s,0,ce)},BU=t=>tt(uo(t,MU),PU),IU=t=>tt(uo(t,l5),O3),LU=t=>DU("h1,h2,h3,h4,h5,h6,a:not([href])",t),FU=t=>i5(t.title).length>0,$U={find:t=>{const s=LU(t);return uo(BU(s).concat(IU(s)),FU)}},ST="tinymce-url-history",D3=5,u5=t=>Z(t)&&/^https?/.test(t),sS=t=>de(t)&&t.length<=D3&&_o(t,u5),d5=t=>ie(t)&&Go(t,s=>!sS(s)).isNone(),f5=()=>{const t=kb.getItem(ST);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+ST+" was not valid JSON",a),{};throw a}return d5(s)?s:(console.log("Local storage "+ST+" was not valid format",s),{})},R3=t=>{if(!d5(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));kb.setItem(ST,JSON.stringify(t))},m5=t=>{const s=f5();return kt(s,t).getOr([])},HU=(t,s)=>{if(!u5(t))return;const a=f5(),c=kt(a,s).getOr([]),d=uo(c,h=>h!==t);a[s]=[t].concat(d).slice(0,D3),R3(a)},h5=t=>!!t,VU=t=>Vo(Fg.makeMap(t,/[, ]/),h5),M3=t=>N.from(iP(t)),zU=t=>{const s=N.from(EO(t)).filter(h5).map(VU);return M3(t).fold(Me,a=>s.fold(Pe,c=>vs(c).length>0?c:!1))},UU=(t,s)=>{const a=zU(t);return Ut(a)?a?M3(t):N.none():a[s]?M3(t):N.none()},WU=(t,s)=>UU(t,s).map(a=>c=>zi.nu(d=>{const h=(x,T)=>{if(!Z(x))throw new Error("Expected value to be string");if(T!==void 0&&!ie(T))throw new Error("Expected meta to be a object");d({value:x,meta:T})},b={filetype:s,fieldname:c.fieldname,...N.from(c.meta).getOr({})};a.call(t,h,c.value,b)})),g5=t=>N.from(t).filter(Z).getOrUndefined(),ZU=t=>_O(t)?N.some({targets:$U.find(t.getBody()),anchorTop:g5(lP(t)),anchorBottom:g5(o_(t))}):N.none(),bY=t=>N.from(cP(t)),jU=t=>({getHistory:m5,addToHistory:HU,getLinkInformation:()=>ZU(t),getValidationHandler:()=>bY(t),getUrlPicker:s=>WU(t,s)}),p5=(t,s,a,c)=>{const d=mn(!1),h=_3(s),b={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Hu.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get,tooltips:kU(t.dialog)},x=jU(s),T=r5(s),D=yU(s),P=CU(s),$=()=>d.get(),G=ge=>d.set(ge),Y={shared:{providers:b,anchors:E3(s,a,c,h.isPositionedAtTop),header:h},urlinput:x,styles:T,colorinput:D,dialog:P,isContextMenuOpen:$,setContextMenuState:G},se=ge=>N.none(),le={...Y,shared:{...Y.shared,interpreter:ge=>gT(ge,{},le,se),getSink:t.popup}},Ne={...Y,shared:{...Y.shared,interpreter:ge=>gT(ge,{},Ne,se),getSink:t.dialog}};return{popup:le,dialog:Ne}},b5=(t,s,a)=>{const c=(Qe,cn)=>{yt([s,...a],It=>{It.broadcastEvent(Qe,cn)})},d=(Qe,cn)=>{yt([s,...a],It=>{It.broadcastOn([Qe],cn)})},h=Qe=>d(of(),{target:Qe.target}),b=jc(),x=dc(b,"touchstart",h),T=dc(b,"touchmove",Qe=>c(C1(),Qe)),D=dc(b,"touchend",Qe=>c(Zy(),Qe)),P=dc(b,"mousedown",h),$=dc(b,"mouseup",Qe=>{Qe.raw.button===0&&d(h0(),{target:Qe.target})}),G=Qe=>d(of(),{target:_e.fromDom(Qe.target)}),Y=Qe=>{Qe.button===0&&d(h0(),{target:_e.fromDom(Qe.target)})},se=()=>{yt(t.editorManager.get(),Qe=>{t!==Qe&&Qe.dispatch("DismissPopups",{relatedTarget:t})})},le=Qe=>c(Yh(),Zw(Qe)),Ne=Qe=>{d(vg(),{}),c(md(),Zw(Qe))},ge=vr(_e.fromDom(t.getElement())),ke=Ww(ge,"scroll",Qe=>{requestAnimationFrame(()=>{const cn=t.getContainer();if(cn!=null){const fn=Dg(t,s.element).map(bo=>[bo.element,...bo.others]).getOr([]);ms(fn,bo=>Uo(bo,Qe.target))&&(t.dispatch("ElementScroll",{target:Qe.target.dom}),c(US(),Qe))}})}),Ae=()=>d(vg(),{}),st=Qe=>{Qe.state&&d(of(),{target:_e.fromDom(t.getContainer())})},je=Qe=>{d(of(),{target:_e.fromDom(Qe.relatedTarget.getContainer())})},$t=Qe=>t.dispatch("focusin",Qe),Xt=Qe=>t.dispatch("focusout",Qe);t.on("PostRender",()=>{t.on("click",G),t.on("tap",G),t.on("mouseup",Y),t.on("mousedown",se),t.on("ScrollWindow",le),t.on("ResizeWindow",Ne),t.on("ResizeEditor",Ae),t.on("AfterProgressState",st),t.on("DismissPopups",je),yt([s,...a],Qe=>{Qe.element.dom.addEventListener("focusin",$t),Qe.element.dom.addEventListener("focusout",Xt)})}),t.on("remove",()=>{t.off("click",G),t.off("tap",G),t.off("mouseup",Y),t.off("mousedown",se),t.off("ScrollWindow",le),t.off("ResizeWindow",Ne),t.off("ResizeEditor",Ae),t.off("AfterProgressState",st),t.off("DismissPopups",je),yt([s,...a],Qe=>{Qe.element.dom.removeEventListener("focusin",$t),Qe.element.dom.removeEventListener("focusout",Xt)}),P.unbind(),x.unbind(),T.unbind(),D.unbind(),$.unbind(),ke.unbind()}),t.on("detach",()=>{yt([s,...a],dC),yt([s,...a],Qe=>Qe.destroy())})},xa=PE,cm=MM,qU=ne([Be("shell",!1),rt("makeItem"),Be("setupItem",ce),su.field("listBehaviours",[Vn])]),GU=Tl({name:"items",overrides:()=>({behaviours:xt([Vn.config({})])})}),KU=ne([GU]),YU=ne("CustomList"),XU=(t,s,a,c)=>{const d=(x,T)=>{b(x).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},D=>{const P=Vn.contents(D),$=T.length,G=$-P.length,Y=G>0?to(G,()=>t.makeItem()):[],se=P.slice($);yt(se,Ne=>Vn.remove(D,Ne)),yt(Y,Ne=>Vn.append(D,Ne));const le=Vn.contents(D);yt(le,(Ne,ge)=>{t.setupItem(x,Ne,T[ge],ge)})})},h=t.shell?{behaviours:[Vn.config({})],components:[]}:{behaviours:[],components:s},b=x=>t.shell?N.some(x):bt(x,t,"items");return{uid:t.uid,dom:t.dom,components:h.components,behaviours:ja(t.listBehaviours,h.behaviours),apis:{setItems:d}}},v5=Ki({name:YU(),configFields:qU(),partFields:KU(),factory:XU,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),Nb=ne([rt("dom"),Be("shell",!0),Za("toolbarBehaviours",[Vn])]),QU=ne([Tl({name:"groups",overrides:()=>({behaviours:xt([Vn.config({})])})})]),y5=(t,s,a,c)=>{const d=(x,T)=>{h(x).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},D=>{Vn.set(D,T)})},h=x=>t.shell?N.some(x):bt(x,t,"groups"),b=t.shell?{behaviours:[Vn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:b.components,behaviours:ja(t.toolbarBehaviours,b.behaviours),apis:{setGroups:d,refresh:ce},domModification:{attributes:{role:"group"}}}},lm=Ki({name:"Toolbar",configFields:Nb(),partFields:QU(),factory:y5,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),eW=ce,tW=Me,s1=ne([]);var w5=Object.freeze({__proto__:null,setup:eW,isDocked:tW,getBehaviours:s1});const Pb=ne(tn("toolbar-height-change")),Od={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},N3="tox-tinymce--toolbar-sticky-on",P3="tox-tinymce--toolbar-sticky-off",C5=(t,s)=>{const a=ma(s),d=Da(s).dom.innerHeight,h=ai(a),b=_e.fromDom(t.elm),x=tc(b),T=xs(b),D=x.y,P=D+T,$=ga(s),G=xs(s),Y=$.top,se=Y+G,le=Math.abs(Y-h.top)<2,Ne=Math.abs(se-(h.top+d))<2;if(le&&D<se)td(h.left,D-G,a);else if(Ne&&P>Y){const ge=D-d+T+G;td(h.left,ge,a)}},B3=(t,s)=>eo(Hs.getModes(t),s),I3=t=>{const s=c=>ml(c)+(parseInt(rs(c,"margin-top"),10)||0)+(parseInt(rs(c,"margin-bottom"),10)||0),a=t.element;Mi(a).each(c=>{const d="padding-"+Hs.getModes(t)[0];if(Hs.isDocked(t)){const h=La(c);lt(a,"width",h+"px"),lt(c,d,s(a)+"px")}else Xn(a,"width"),Xn(c,d)})},S5=(t,s)=>{s?(mr(t,Od.fadeOutClass),ap(t,[Od.transitionClass,Od.fadeInClass])):(mr(t,Od.fadeInClass),ap(t,[Od.fadeOutClass,Od.transitionClass]))},x5=(t,s)=>{const a=_e.fromDom(t.getContainer());s?($s(a,N3),mr(a,P3)):($s(a,P3),mr(a,N3))},nW=(t,s)=>{const a=ma(s);vd(a).filter(c=>!Uo(s,c)).filter(c=>Uo(c,_e.fromDom(a.dom.body))||Oa(t,c)).each(()=>Sl(s))},oW=(t,s)=>uc(t).orThunk(()=>s().toOptional().bind(a=>uc(a.element))),hy=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Hs.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(I3)}),t.on("SkinLoaded",()=>{a().each(c=>{Hs.isDocked(c)?Hs.reset(c):Hs.refresh(c)})}),t.on("FullscreenStateChanged",()=>{a().each(Hs.reset)})),t.on("AfterScrollIntoView",c=>{a().each(d=>{Hs.refresh(d);const h=d.element;UM(h)&&C5(c,h)})}),t.on("PostRender",()=>{x5(t,!1)})},rS=t=>t().map(Hs.isDocked).getOr(!1),L3=()=>[Nc.config({channels:{[Pb()]:{onReceive:I3}}})],E5=(t,s)=>{const a=ts(),c=s.getSink,d=x=>{c().each(T=>x(T.element))},h=x=>{t.inline||I3(x),x5(t,Hs.isDocked(x)),x.getSystem().broadcastOn([vg()],{}),c().each(T=>T.getSystem().broadcastOn([vg()],{}))},b=t.inline?[]:L3();return[Ln.config({}),Hs.config({contextual:{lazyContext:x=>{const T=ml(x.element),D=t.inline?t.getContentAreaContainer():t.getContainer();return N.from(D).map(P=>{const $=Qs(_e.fromDom(P));return Dg(t,x.element).fold(()=>{const Y=$.height-T,se=$.y+(B3(x,"top")?0:T);return qs($.x,se,$.width,Y)},Y=>{const se=od($,pb(Y)),le=B3(x,"top")?se.y:se.y+T;return qs(se.x,le,se.width,se.height-T)})})},onShow:()=>{d(x=>S5(x,!0))},onShown:x=>{d(T=>Qc(T,[Od.transitionClass,Od.fadeInClass])),a.get().each(T=>{nW(x.element,T),a.clear()})},onHide:x=>{oW(x.element,c).fold(a.clear,a.set),d(T=>S5(T,!1))},onHidden:()=>{d(x=>Qc(x,[Od.transitionClass]))},...Od},lazyViewport:x=>Dg(t,x.element).fold(()=>{const D=Ur(),P=rP(t),$=D.y+(B3(x,"top")?P:0),G=D.height-(B3(x,"bottom")?P:0);return{bounds:qs(D.x,$,D.width,G),optScrollEnv:N.none()}},D=>({bounds:pb(D),optScrollEnv:N.some({currentScrollTop:D.element.dom.scrollTop,scrollElmTop:ga(D.element).top})})),modes:[s.header.getDockingMode()],onDocked:h,onUndocked:h}),...b]};var sW=Object.freeze({__proto__:null,setup:hy,isDocked:rS,getBehaviours:E5});const F3=t=>{const s=t.editor,a=t.sticky?E5:s1;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:xt(a(s,t.sharedBackstage))}},rW=On([Qr,Fo("items",xm([p1([T_,Ac("items",Wt)]),Wt]))].concat(mc)),aS=t=>ar("GroupToolbarButton",rW,t),_5=[ca("text"),ca("tooltip"),ca("icon"),Oc("search",!1,xm([qc,On([ca("placeholder")])],t=>Ut(t)?t?N.some({placeholder:N.none()}):N.none():N.some(t))),kc("fetch"),fr("onSetup",()=>ce)],T5=On([Qr,..._5]),k5=t=>ar("menubutton",T5,t),aW=On([Qr,W0,Ed,Ng,eH,Y8,Cb,Dc("presets","normal",["normal","color","listpreview"]),KP(1),Up,GP]),iW=t=>ar("SplitButton",aW,t);var $3=il({factory:(t,s)=>{const a=(d,h)=>{const b=tt(h,x=>{const T={type:"menubutton",text:x.text,fetch:P=>{P(x.getItems())}},D=k5(T).mapError(P=>Gl(P)).getOrDie();return G2(D,"tox-mbtn",s.backstage,N.some("menuitem"))});Vn.set(d,b)},c={focus:En.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:xt([Vn.config({}),no("menubar-events",[Gs(d=>{t.onSetup(d)}),it(Kc(),(d,h)=>{tr(d.element,".tox-mbtn--active").each(b=>{Nu(h.event.target,".tox-mbtn").each(x=>{Uo(b,x)||d.getSystem().getByDom(b).each(T=>{d.getSystem().getByDom(x).each(D=>{kd.expand(D),kd.close(T),Ln.focus(D)})})})})}),it(Xh(),(d,h)=>{h.event.prevFocus.bind(b=>d.getSystem().getByDom(b).toOptional()).each(b=>{h.event.newFocus.bind(x=>d.getSystem().getByDom(x).toOptional()).each(x=>{kd.isOpen(b)&&(kd.expand(x),kd.close(b))})})})]),En.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),N.some(!0))}),Vs.config({})]),apis:c,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[rt("dom"),rt("uid"),rt("onEscape"),rt("backstage"),Be("onSetup",ce)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const A5="Upgrade",O5="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",H3=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:O5,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:A5}}]}),D5="container",xT=[Za("slotBehaviours",[])],iS=t=>"<alloy.field."+t+">",R5=t=>{const s=(()=>{const h=[];return{slot:(x,T)=>(h.push(x),DE(D5,iS(x),T)),record:ne(h)}})(),a=t(s),c=s.record(),d=tt(c,h=>Ti({name:h,pname:iS(h)}));return ch(D5,xT,d,cW,a)},cW=(t,s)=>{const a=le=>sb(t),c=(le,Ne)=>bt(le,t,Ne),d=(le,Ne)=>(ge,ke)=>bt(ge,t,ke).map(Ae=>le(Ae,ke)).getOr(Ne),h=le=>(Ne,ge)=>{yt(ge,ke=>le(Ne,ke))},b=(le,Ne)=>pn(le.element,"aria-hidden")!=="true",x=(le,Ne)=>{if(!b(le)){const ge=le.element;Xn(ge,"display"),H(ge,"aria-hidden"),_n(le,qy(),{name:Ne,visible:!0})}},T=(le,Ne)=>{if(b(le)){const ge=le.element;lt(ge,"display","none"),qt(ge,"aria-hidden","true"),_n(le,qy(),{name:Ne,visible:!1})}},D=d(b,!1),P=d(T),$=h(P),G=le=>$(le,a()),Y=d(x),se={getSlotNames:a,getSlot:c,isShowing:D,hideSlot:P,hideAllSlots:G,showSlot:Y};return{uid:t.uid,dom:t.dom,components:s,behaviours:Q1(t.slotBehaviours),apis:se}},gc={...Vo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>vv(t)),sketch:R5},lW=On([Ed,W0,fr("onShow",ce),fr("onHide",ce),Cb]),V3=t=>ar("sidebar",lW,t),z3=t=>{const{sidebars:s}=t.ui.registry.getAll();yt(vs(s),a=>{const c=s[a],d=()=>Vr(N.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:c.icon,tooltip:c.tooltip,onAction:h=>{t.execCommand("ToggleSidebar",!1,a),h.setActive(d())},onSetup:h=>{h.setActive(d());const b=()=>h.setActive(d());return t.on("ToggleSidebar",b),()=>{t.off("ToggleSidebar",b)}}})})},uW=t=>({element:()=>t.element.dom}),U3=(t,s)=>{const a=tt(vs(s),c=>{const d=s[c],h=pt(V3(d));return{name:c,getApi:uW,onSetup:h.onSetup,onShow:h.onShow,onHide:h.onHide}});return tt(a,c=>{const d=mn(ce);return t.slot(c.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:q0.unnamedEvents([hc(c,d),Zp(c,d),it(qy(),(h,b)=>{const x=b.event;et(a,D=>D.name===x.name).each(D=>{(x.visible?D.onShow:D.onHide)(D.getApi(h))})})])})})},dW=t=>gc.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:U3(s,t),slotBehaviours:q0.unnamedEvents([Gs(a=>gc.hideAllSlots(a))])})),fW=(t,s,a)=>{Ro.getCurrent(t).each(d=>{Vn.set(d,[dW(s)]);const h=a==null?void 0:a.toLowerCase();Z(h)&&po(s,h)&&Ro.getCurrent(d).each(b=>{gc.showSlot(b,h),Lc.immediateGrow(d),Xn(d.element,"width"),ET(t.element,"region")})})},ET=(t,s)=>{qt(t,"role",s)},mW=(t,s)=>{Ro.getCurrent(t).each(c=>{Ro.getCurrent(c).each(h=>{Lc.hasGrown(c)?gc.isShowing(h,s)?(Lc.shrink(c),ET(t.element,"presentation")):(gc.hideAllSlots(h),gc.showSlot(h,s),ET(t.element,"region")):(gc.hideAllSlots(h),gc.showSlot(h,s),Lc.grow(c),ET(t.element,"region"))})})},hW=t=>Ro.getCurrent(t).bind(a=>Lc.isGrowing(a)||Lc.hasGrown(a)?Ro.getCurrent(a).bind(h=>et(gc.getSlotNames(h),b=>gc.isShowing(h,b))):N.none()),M5=tn("FixSizeEvent"),N5=tn("AutoSizeEvent"),P5=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:xt([Vs.config({}),Ln.config({}),Lc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Ro.getCurrent(s).each(gc.hideAllSlots),ao(s,N5)},onGrown:s=>{ao(s,N5)},onStartGrow:s=>{_n(s,M5,{width:Os(s.element,"width").getOr("")})},onStartShrink:s=>{_n(s,M5,{width:La(s.element)+"px"})}}),Vn.config({}),Ro.config({find:s=>{const a=Vn.contents(s);return Is(a)}})])}],behaviours:xt([hf.childAt(0),no("sidebar-sliding-events",[it(M5,(s,a)=>{lt(s.element,"width",a.event.width)}),it(N5,(s,a)=>{Xn(s.element,"width")})])])});var pW=Object.freeze({__proto__:null,block:(t,s,a,c)=>{qt(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),h=xt([En.config({mode:"special",onTab:()=>N.some(!0),onShiftTab:()=>N.some(!0)}),Ln.config({})]),b=c(d,h),x=d.getSystem().build(b);Vn.append(d,Cl(x)),x.hasConfigured(En)&&s.focus&&En.focusIn(x),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Vn.remove(d,x))},unblock:(t,s,a)=>{H(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),bW=[fr("getRoot",N.none),Mr("focus",!0),ko("onBlock"),ko("onUnblock")],vW=Object.freeze({__proto__:null,init:()=>{const t=wm(),s=a=>{t.set({destroy:a})};return Xc({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const bf=li({fields:bW,name:"blocking",apis:pW,state:vW}),yW=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:tm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),B5=t=>Ro.getCurrent(t).each(s=>Sl(s.element,!0)),wW=(t,s)=>{const a="tabindex",c=`data-mce-${a}`;N.from(t.iframeElement).map(_e.fromDom).each(d=>{s?(Dr(d,a).each(h=>qt(d,c,h)),qt(d,a,-1)):(H(d,a),Dr(d,c).each(h=>{qt(d,a,h),H(d,c)}))})},EY=(t,s,a,c)=>{const d=s.element;if(wW(t,a),a)bf.block(s,yW(c)),Xn(d,"display"),H(d,"aria-hidden"),t.hasFocus()&&B5(s);else{const h=Ro.getCurrent(s).exists(b=>I1(b.element));bf.unblock(s),lt(d,"display","none"),qt(d,"aria-hidden","true"),h&&t.focus()}},_Y=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:xt([Vn.config({}),bf.config({focus:!1}),Ro.config({find:s=>Is(s.components())})]),components:[]}),I5=t=>t.type==="focusin",L5=t=>I5(t)?(t.composed?Is(t.composedPath()):N.from(t.target)).map(_e.fromDom).filter(xo).exists(a=>Jc(a,"mce-pastebin")):!1,CW=(t,s,a)=>{const c=mn(!1),d=ts(),h=x=>{c.get()&&!L5(x)&&(x.preventDefault(),B5(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",h),t.on("BeforeExecCommand",x=>{x.command.toLowerCase()==="mcefocus"&&x.value!==!0&&h(x)})});const b=x=>{x!==c.get()&&(c.set(x),EY(t,s(),x,a.providers),AH(t,x))};t.on("ProgressState",x=>{if(d.on(clearTimeout),dn(x.time)){const T=F0.setEditorTimeout(t,()=>b(x.state),x.time);d.set(T)}else b(x.state),d.clear()})},SW=(t,s)=>Ho(t,(d,h)=>s(h,d.len).fold(ne(d),x=>({len:x.finish,list:d.list.concat([x])})),{len:0,list:[]}).list,Ml=(t,s,a)=>({within:t,extra:s,withinWidth:a}),F5=(t,s,a)=>{const c=SW(t,(x,T)=>{const D=a(x);return N.some({element:x,start:T,finish:T+D,width:D})}),d=uo(c,x=>x.finish<=s),h=qo(d,(x,T)=>x+T.width,0),b=c.slice(d.length);return{within:d,extra:b,withinWidth:h}},cS=t=>tt(t,s=>s.element),$5=(t,s,a)=>{const c=cS(t.concat(s));return Ml(c,[],a)},xW=(t,s,a,c)=>{const d=cS(t).concat([a]);return Ml(d,cS(s),c)},lS=(t,s,a)=>Ml(cS(t),[],a),EW=(t,s,a)=>{const c=F5(s,t,a);return c.extra.length===0?N.some(c):N.none()},_T=(t,s,a,c)=>{const d=EW(t,s,a).getOrThunk(()=>F5(s,t-a(c),a)),h=d.within,b=d.extra,x=d.withinWidth;return b.length===1&&b[0].width<=a(c)?$5(h,b,x):b.length>=1?xW(h,b,c,x):lS(h,b,x)},H5=(t,s)=>{const a=tt(s,c=>Cl(c));lm.setGroups(t,a)},TT=t=>bs(t,s=>uc(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),V5=(t,s,a)=>{const c=s.builtGroups.get();if(c.length===0)return;const d=kl(t,s,"primary"),h=jr.getCoupled(t,"overflowGroup");lt(d.element,"visibility","hidden");const b=c.concat([h]),x=TT(b);a([]),H5(d,b);const T=La(d.element),D=_T(T,s.builtGroups.get(),P=>Math.ceil(P.element.dom.getBoundingClientRect().width),h);D.extra.length===0?(Vn.remove(d,h),a([])):(H5(d,D.within),a(D.extra)),Xn(d.element,"visibility"),oi(d.element),x.each(Ln.focus)},z5=ne([Za("splitToolbarBehaviours",[jr]),Lo("builtGroups",()=>mn([]))]),Dd=ne([ig(["overflowToggledClass"]),ku("getOverflowBounds"),rt("lazySink"),Lo("overflowGroups",()=>mn([])),ko("onOpened"),ko("onClosed")].concat(z5())),_W=ne([Ti({factory:lm,schema:Nb(),name:"primary"}),ru({schema:Nb(),name:"overflow"}),ru({name:"overflow-button"}),ru({name:"overflow-group"})]),gy=ne((t,s)=>{hl(t,Math.floor(s))}),U5=ne([ig(["toggledClass"]),rt("lazySink"),kc("fetch"),ku("getBounds"),Bs("fireDismissalEventInstead",[Be("event",Om())]),Qm(),ko("onToggled")]),W5=ne([ru({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:xt([lo.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),ru({factory:lm,schema:Nb(),name:"toolbar",overrides:t=>({toolbarBehaviours:xt([En.config({mode:"cyclic",onEscape:s=>(bt(s,t,"button").each(Ln.focus),N.none())})])})})]),kT=ts(),Z5=(t,s)=>{kT.set(!0),W3(t,s),kT.clear()},W3=(t,s)=>{const a=jr.getCoupled(t,"toolbarSandbox");Do.isOpen(a)?Do.close(a):Do.open(a,s.toolbar())},Z3=(t,s,a,c)=>{const d=a.getBounds.map(b=>b()),h=a.lazySink(t).getOrDie();Hi.positionWithinBounds(h,s,{anchor:{type:"hotspot",hotspot:t,layouts:c,overrides:{maxWidthFunction:gy()}}},d)},j5=(t,s,a,c,d)=>{lm.setGroups(s,d),Z3(t,s,a,c),lo.on(t)},TW=(t,s,a)=>{const c=Iw(),d=(b,x)=>{const T=kT.get().getOr(!1);a.fetch().get(D=>{j5(t,x,a,s.layouts,D),c.link(t.element),T||En.focusIn(x)})},h=()=>{lo.off(t),kT.get().getOr(!1)||Ln.focus(t),c.unlink(t.element)};return{dom:{tag:"div",attributes:{id:c.id}},behaviours:xt([En.config({mode:"special",onEscape:b=>(Do.close(b),N.some(!0))}),Do.config({onOpen:d,onClose:h,isPartOf:(b,x,T)=>ug(x,T)||ug(t,T),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Nc.config({channels:{...ih({isExtraPart:Me,...a.fireDismissalEventInstead.map(b=>({fireEventInstead:{event:b.event}})).getOr({})}),...pC({doReposition:()=>{Do.getState(jr.getCoupled(t,"toolbarSandbox")).each(b=>{Z3(t,b,a,s.layouts)})}})}})])}},r1=Ki({name:"FloatingToolbarButton",factory:(t,s,a,c)=>({...Vi.sketch({...c.button(),action:d=>{W3(d,c)},buttonBehaviours:su.augment({dump:c.button().buttonBehaviours},[jr.config({others:{toolbarSandbox:d=>TW(d,a,t)}})])}),apis:{setGroups:(d,h)=>{Do.getState(jr.getCoupled(d,"toolbarSandbox")).each(b=>{j5(d,b,t,a.layouts,h)})},reposition:d=>{Do.getState(jr.getCoupled(d,"toolbarSandbox")).each(h=>{Z3(d,h,t,a.layouts)})},toggle:d=>{W3(d,c)},toggleWithoutFocusing:d=>{Z5(d,c)},getToolbar:d=>Do.getState(jr.getCoupled(d,"toolbarSandbox")),isOpen:d=>Do.isOpen(jr.getCoupled(d,"toolbarSandbox"))}}),configFields:U5(),partFields:W5(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),kW=ne([rt("items"),ig(["itemSelector"]),Za("tgroupBehaviours",[En])]),q5=ne([k0({name:"items",unit:"item"})]),G5=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ja(t.tgroupBehaviours,[En.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),uS=Ki({name:"ToolbarGroup",configFields:kW(),partFields:q5(),factory:G5}),K5=t=>tt(t,s=>Cl(s)),Y5=(t,s,a)=>{V5(t,a,c=>{a.overflowGroups.set(c),s.getOpt(t).each(d=>{r1.setGroups(d,K5(c))})})},X5=(t,s,a,c)=>{const d=Jo(r1.sketch({fetch:()=>zi.nu(h=>{h(K5(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Pr,ya],onRtl:()=>[ya,Pr],onBottomLtr:()=>[xi,us],onBottomRtl:()=>[us,xi]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:c["overflow-button"](),toolbar:c.overflow()},onToggled:(h,b)=>t[b?"onOpened":"onClosed"](h)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:ja(t.splitToolbarBehaviours,[jr.config({others:{overflowGroup:()=>uS.sketch({...c["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(h,b)=>{t.builtGroups.set(tt(b,h.getSystem().build)),Y5(h,d,t)},refresh:h=>Y5(h,d,t),toggle:h=>{d.getOpt(h).each(b=>{r1.toggle(b)})},toggleWithoutFocusing:h=>{d.getOpt(h).each(r1.toggleWithoutFocusing)},isOpen:h=>d.getOpt(h).map(r1.isOpen).getOr(!1),reposition:h=>{d.getOpt(h).each(b=>{r1.reposition(b)})},getOverflow:h=>d.getOpt(h).bind(r1.getToolbar)},domModification:{attributes:{role:"group"}}}},j3=Ki({name:"SplitFloatingToolbar",configFields:Dd(),partFields:_W(),factory:X5,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),J5=ne([ig(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),ko("onOpened"),ko("onClosed")].concat(z5())),AW=ne([Ti({factory:lm,schema:Nb(),name:"primary"}),Ti({factory:lm,schema:Nb(),name:"overflow",overrides:t=>({toolbarBehaviours:xt([Lc.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{bt(s,t,"overflow-button").each(a=>{lo.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{bt(s,t,"overflow-button").each(lo.on)}}),En.config({mode:"acyclic",onEscape:s=>(bt(s,t,"overflow-button").each(Ln.focus),N.some(!0))})])})}),ru({name:"overflow-button",overrides:t=>({buttonBehaviours:xt([lo.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),ru({name:"overflow-group"})]),OW=(t,s)=>bt(t,s,"overflow").map(Lc.hasGrown).getOr(!1),q3=(t,s,a)=>{bt(t,s,"overflow-button").each(c=>{bt(t,s,"overflow").each(d=>{if(AT(t,s),Lc.hasShrunk(d)){const h=s.onOpened;s.onOpened=b=>{a||En.focusIn(d),h(b),s.onOpened=h}}else{const h=s.onClosed;s.onClosed=b=>{a||Ln.focus(c),h(b),s.onClosed=h}}Lc.toggleGrow(d)})})},AT=(t,s)=>{bt(t,s,"overflow").each(a=>{V5(t,s,c=>{const d=tt(c,h=>Cl(h));lm.setGroups(a,d)}),bt(t,s,"overflow-button").each(c=>{Lc.hasGrown(a)&&lo.on(c)}),Lc.refresh(a)})},DW=(t,s,a,c)=>{const d="alloy.toolbar.toggle",h=(b,x)=>{const T=tt(x,b.getSystem().build);t.builtGroups.set(T)};return{uid:t.uid,dom:t.dom,components:s,behaviours:ja(t.splitToolbarBehaviours,[jr.config({others:{overflowGroup:b=>uS.sketch({...c["overflow-group"](),items:[Vi.sketch({...c["overflow-button"](),action:x=>{ao(b,d)}})]})}}),no("toolbar-toggle-events",[it(d,b=>{q3(b,t,!1)})])]),apis:{setGroups:(b,x)=>{h(b,x),AT(b,t)},refresh:b=>AT(b,t),toggle:b=>{q3(b,t,!1)},toggleWithoutFocusing:b=>{q3(b,t,!0)},isOpen:b=>OW(b,t)},domModification:{attributes:{role:"group"}}}},G3=Ki({name:"SplitSlidingToolbar",configFields:J5(),partFields:AW(),factory:DW,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),Q5=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[uS.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:xt([Vs.config({}),Ln.config({})])}},OT=t=>uS.sketch(Q5(t)),eF=(t,s)=>{const a=Gs(c=>{const d=tt(t.initGroups,OT);lm.setGroups(c,d)});return xt([mf.toolbarButton(t.providers.isDisabled),Ga(),En.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),no("toolbar-events",[a])])},tF=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":Q5({title:N.none(),items:[]}),"overflow-button":Kz({name:"more",icon:N.some("more-drawer"),enabled:!0,tooltip:N.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:N.none(),borderless:!1},N.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:eF(t,s)}},RW=t=>{const s=tF(t),a=4,c=j3.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return j3.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,h=tc(d),b=$l(d),x=tc(b),T=Math.max(b.dom.scrollHeight,x.height);return qs(h.x+a,x.y,h.width-a*2,T)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[c],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},MW=t=>{const s=G3.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=G3.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),c=tF(t);return G3.sketch({...c,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([Pb()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([Pb()],{type:"closed"}),t.onToggled(d,!1)}})},DT=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return lm.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Cd.scrolling?["tox-toolbar--scrolling"]:[])},components:[lm.parts.groups({})],toolbarBehaviours:eF(t,s)})},nF=[Ng,Ed,ca("tooltip"),Dc("buttonType","secondary",["primary","secondary"]),Mr("borderless",!1),kc("onAction")],oF=[...nF,Mg,wi("type",["button"])],NW=[...nF,Mr("active",!1),wi("type",["togglebutton"])],sF={button:oF,togglebutton:NW},K3=[wi("type",["group"]),_("buttons",[],ba("type",sF))],PW=ba("type",{...sF,group:K3}),RT=On([_("buttons",[],PW),kc("onShow"),kc("onHide")]),BW=t=>ar("view",RT,t),rF=(t,s)=>{var a,c;const d=t.type==="togglebutton",h=t.icon.map(Ae=>e1(Ae,s.icons)).map(Jo),x=Ae=>{const st=Xt=>{h.map(Qe=>Qe.getOpt(Ae).each(cn=>{Vn.set(cn,[e1(Xt,s.icons)])}))},je=Xt=>{const Qe=Ae.element;Xt?($s(Qe,"tox-button--enabled"),qt(Qe,"aria-pressed",!0)):(mr(Qe,"tox-button--enabled"),H(Qe,"aria-pressed"))},$t=()=>Jc(Ae.element,"tox-button--enabled");if(d)return t.onAction({setIcon:st,setActive:je,isActive:$t});if(t.type==="button")return t.onAction({setIcon:st})},T={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:N.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},D=m3((c=t.buttonType)!==null&&c!==void 0?c:"secondary"),P=d?t.text.map(s.translate):N.some(s.translate(t.text)),$=P.map(hr),G=T.tooltip.or(P).map(Ae=>({"aria-label":s.translate(Ae)})).getOr({}),Y=h.map(Ae=>Ae.asSpec()),se=xb([Y,$]),le=t.icon.isSome()&&$.isSome(),Ne={tag:"button",classes:D.concat(...t.icon.isSome()&&!le?["tox-button--icon"]:[]).concat(...le?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:G},ge=[],ke=Y2(T,N.some(x),ge,Ne,se,t.tooltip,s);return Vi.sketch(ke)},aF=(t,s)=>rF(t,s),IW=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:tt(t.buttons,a=>aF(a,s))}),LW=ro().deviceType,FW=LW.isPhone(),$W=LW.isTablet(),Y3=t=>{let s=!1;const a=tt(t.buttons,c=>c.type==="group"?(s=!0,IW(c,t.providers)):aF(c,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...FW||$W?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:xt([Ln.config({}),En.config({mode:"flow",selector:"button, .tox-button",focusInside:em.OnEnterOrSpaceMode})]),components:s?a:[rm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),rm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},HW=t=>({uid:t.uid,behaviours:xt([Ln.config({}),Vs.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),MT=(t,s,a,c)=>{const d={getPane:h=>xa.getPart(h,t,"pane"),getOnShow:h=>t.viewConfig.onShow,getOnHide:h=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:xt([Ln.config({}),En.config({mode:"cyclic",focusInside:em.OnEnterOrSpaceMode})]),apis:d}};var Bb=Ki({name:"silver.View",configFields:[rt("viewConfig")],partFields:[Tl({factory:{sketch:Y3},schema:[rt("buttons"),rt("providers")],name:"header"}),Tl({factory:{sketch:HW},schema:[],name:"pane"})],factory:MT,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const iF=(t,s,a)=>Zi(s,(c,d)=>{const h=pt(BW(c));return t.slot(d,Bb.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:h,components:[...h.buttons.length>0?[Bb.parts.header({buttons:h.buttons,providers:a})]:[],Bb.parts.pane({})]}))}),X3=(t,s)=>gc.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:iF(a,t,s),slotBehaviours:q0.unnamedEvents([Gs(c=>gc.hideAllSlots(c))])})),cF=t=>et(gc.getSlotNames(t),s=>gc.isShowing(t,s)),lF=t=>{const s=t.element;lt(s,"display","none"),qt(s,"aria-hidden","true")},py=t=>{const s=t.element;Xn(s,"display"),H(s,"aria-hidden")},uF=t=>({getContainer:ne(t)}),dF=(t,s,a)=>{gc.getSlot(t,s).each(c=>{Bb.getPane(c).each(d=>{a(c)(uF(d.element.dom))})})},VW=(t,s)=>dF(t,s,Bb.getOnShow),zW=(t,s)=>dF(t,s,Bb.getOnHide);var NT=il({factory:(t,s)=>{const h={setViews:(b,x)=>{Vn.set(b,[X3(x,s.backstage.shared.providers)])},whichView:b=>Ro.getCurrent(b).bind(cF),toggleView:(b,x,T,D)=>Ro.getCurrent(b).exists(P=>{const $=cF(P),G=$.exists(se=>D===se),Y=gc.getSlot(P,D).isSome();return Y&&(gc.hideAllSlots(P),G?(lF(b),x()):(T(),py(b),gc.showSlot(P,D),VW(P,D)),$.each(se=>zW(P,se))),Y})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:xt([Vn.config({}),Ro.config({find:b=>{const x=Vn.contents(b);return Is(x)}})]),apis:h}},name:"silver.ViewWrapper",configFields:[rt("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,c,d)=>t.toggleView(s,a,c,d),whichView:(t,s)=>t.whichView(s)}});const UW=(t,s,a)=>{let c=!1;const d=b=>{bd(b,".tox-statusbar").each(x=>{rs(x,"display")==="none"&&pn(x,"aria-hidden")==="true"?(Xn(x,"display"),H(x,"aria-hidden")):(lt(x,"display","none"),qt(x,"aria-hidden","true"))})},h={getSocket:b=>xa.getPart(b,t,"socket"),setSidebar:(b,x,T)=>{xa.getPart(b,t,"sidebar").each(D=>fW(D,x,T))},toggleSidebar:(b,x)=>{xa.getPart(b,t,"sidebar").each(T=>mW(T,x))},whichSidebar:b=>xa.getPart(b,t,"sidebar").bind(hW).getOrNull(),getHeader:b=>xa.getPart(b,t,"header"),getToolbar:b=>xa.getPart(b,t,"toolbar"),setToolbar:(b,x)=>{xa.getPart(b,t,"toolbar").each(T=>{const D=tt(x,OT);T.getApis().setGroups(T,D)})},setToolbars:(b,x)=>{xa.getPart(b,t,"multiple-toolbar").each(T=>{const D=tt(x,P=>tt(P,OT));v5.setItems(T,D)})},refreshToolbar:b=>{xa.getPart(b,t,"toolbar").each(T=>T.getApis().refresh(T))},toggleToolbarDrawer:b=>{xa.getPart(b,t,"toolbar").each(x=>{zo(x.getApis().toggle,T=>T(x))})},toggleToolbarDrawerWithoutFocusing:b=>{xa.getPart(b,t,"toolbar").each(x=>{zo(x.getApis().toggleWithoutFocusing,T=>T(x))})},isToolbarDrawerToggled:b=>xa.getPart(b,t,"toolbar").bind(x=>N.from(x.getApis().isOpen).map(T=>T(x))).getOr(!1),getThrobber:b=>xa.getPart(b,t,"throbber"),focusToolbar:b=>{xa.getPart(b,t,"toolbar").orThunk(()=>xa.getPart(b,t,"multiple-toolbar")).each(T=>{En.focusIn(T)})},setMenubar:(b,x)=>{xa.getPart(b,t,"menubar").each(T=>{$3.setMenus(T,x)})},focusMenubar:b=>{xa.getPart(b,t,"menubar").each(x=>{$3.focus(x)})},setViews:(b,x)=>{xa.getPart(b,t,"viewWrapper").each(T=>{NT.setViews(T,x)})},toggleView:(b,x)=>xa.getPart(b,t,"viewWrapper").exists(T=>NT.toggleView(T,()=>h.showMainView(b),()=>h.hideMainView(b),x)),whichView:b=>xa.getPart(b,t,"viewWrapper").bind(NT.whichView).getOrNull(),hideMainView:b=>{c=h.isToolbarDrawerToggled(b),c&&h.toggleToolbarDrawer(b),xa.getPart(b,t,"editorContainer").each(x=>{const T=x.element;d(T),lt(T,"display","none"),qt(T,"aria-hidden","true")})},showMainView:b=>{c&&h.toggleToolbarDrawer(b),xa.getPart(b,t,"editorContainer").each(x=>{const T=x.element;d(T),Xn(T,"display"),H(T,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:h,behaviours:t.behaviours}},mF=cm.optional({factory:$3,name:"menubar",schema:[rt("backstage")]}),hF=t=>t.type===Cd.sliding?MW:t.type===Cd.floating?RW:DT,PT=cm.optional({factory:{sketch:t=>v5.sketch({uid:t.uid,dom:t.dom,listBehaviours:xt([En.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>DT({type:t.type,uid:tn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),N.some(!0))}),setupItem:(s,a,c,d)=>{lm.setGroups(a,c)},shell:!0})},name:"multiple-toolbar",schema:[rt("dom"),rt("onEscape")]}),J3=cm.optional({factory:{sketch:t=>{const s=hF(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),N.some(!0)),onToggled:(c,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[rt("dom"),rt("onEscape"),rt("getSink")]}),WW=cm.optional({factory:{sketch:F3},name:"header",schema:[rt("dom")]}),ZW=cm.optional({factory:{sketch:H3},name:"promotion",schema:[rt("dom")]}),gF=cm.optional({name:"socket",schema:[rt("dom")]}),jW=cm.optional({factory:{sketch:P5},name:"sidebar",schema:[rt("dom")]}),qW=cm.optional({factory:{sketch:_Y},name:"throbber",schema:[rt("dom")]}),GW=cm.optional({factory:NT,name:"viewWrapper",schema:[rt("backstage")]}),pF=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),KW=cm.optional({factory:{sketch:pF},name:"editorContainer",schema:[]});var zs=Ki({name:"OuterContainer",factory:UW,configFields:[rt("dom"),rt("behaviours")],partFields:[WW,mF,J3,PT,gF,jW,ZW,qW,GW,KW],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,c)=>{t.setSidebar(s,a,c)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const Q3="file edit view insert format tools table help",bF={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},YW=(t,s,a)=>{const c=t_(a).split(/[ ,]/);return{text:t.title,getItems:()=>Se(t.items,d=>{const h=d.toLowerCase();return h.trim().length===0?[]:ms(c,b=>b===h)?[]:h==="separator"||h==="|"?[{type:"separator"}]:s.menuItems[h]?[s.menuItems[h]]:[]})}},BT=t=>t.split(" "),vF=(t,s)=>{const a={...bF,...s.menus},c=vs(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?BT(Q3):BT(s.menubar===!1?"":s.menubar),h=uo(d,x=>{const T=po(bF,x);return c?T||kt(s.menus,x).exists(D=>po(D,"items")):T}),b=tt(h,x=>{const T=a[x];return YW({title:T.title,items:BT(T.items)},s,t)});return uo(b,x=>{const T=D=>Z(D)||D.type!=="separator";return x.getItems().length>0&&ms(x.getItems(),T)})},yF=t=>{const s=()=>{t._skinLoaded=!0,_H(t)};return()=>{t.initialized?s():t.on("init",s)}},XW=(t,s)=>()=>TH(t,{message:s}),eR=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),tR=(t,s,a,c)=>(t.on("remove",()=>c.unloadRawCss(s)),c.loadRawCss(s,a)),JW=async(t,s)=>{const c="ui/"+a_(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(c);if(Z(d))tR(t,c,d,t.ui.styleSheetLoader);else{const h=t.editorManager.suffix,b=s+`/skin${h}.css`;return eR(t,b,t.ui.styleSheetLoader)}},QW=async(t,s)=>{if(X(_e.fromDom(t.getElement()))){const d="ui/"+a_(t).getOr("default")+"/skin.shadowdom.css",h=tinymce.Resource.get(d);if(Z(h))tR(t,d,h,ub.DOM.styleSheetLoader);else{const b=t.editorManager.suffix,x=s+`/skin.shadowdom${b}.css`;return eR(t,x,ub.DOM.styleSheetLoader)}}},wF=async(t,s)=>{const a=()=>{const d=OO(s),h=s.editorManager.suffix;d&&s.contentCSS.push(d+(t?"/content.inline":"/content")+`${h}.css`)};a_(s).fold(a,d=>{const h="ui/"+d+(t?"/content.inline":"/content")+".css",b=tinymce.Resource.get(h);Z(b)?tR(s,h,b,s.ui.styleSheetLoader):a()});const c=OO(s);if(!AO(s)&&Z(c))return Promise.all([JW(s,c),QW(s,c)]).then()},CF=(t,s)=>wF(t,s).then(yF(s),XW(s,"Skin could not be loaded")),eZ=Qt(CF,!1),tZ=Qt(CF,!0),a1=(t,s,a)=>fe(a)?t.translate(s):t.translate([s,t.translate(a)]),nR=(t,s)=>{const a=(b,x,T,D)=>{const P=t.shared.providers.translate(b.title);if(b.type==="separator")return N.some({type:"separator",text:P});if(b.type==="submenu"){const $=Se(b.getStyleItems(),G=>c(G,x,D));return x===0&&$.length<=0?N.none():N.some({type:"nestedmenuitem",text:P,enabled:$.length>0,getSubmenuItems:()=>Se(b.getStyleItems(),G=>c(G,x,D))})}else return N.some({type:"togglemenuitem",text:P,icon:b.icon,active:b.isSelected(D),enabled:!T,onAction:s.onAction(b),...b.getStylePreview().fold(()=>({}),$=>({meta:{style:$}}))})},c=(b,x,T)=>{const D=b.type==="formatter"&&s.isInvalid(b);return x===0?D?[]:a(b,x,!1,T).toArray():a(b,x,D,T).toArray()},d=b=>{const x=s.getCurrentValue(),T=s.shouldHide?0:1;return Se(b,D=>c(D,T,x))};return{validateItems:d,getFetch:(b,x)=>(T,D)=>{const P=x(),$=d(P),G=cy($,df.CLOSE_ON_EXECUTE,b,{isHorizontalMenu:!1,search:N.none()});D(G)}}},by=(t,s)=>{const a=s.dataset,c=a.type==="basic"?()=>tt(a.data,d=>yT(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:nR(t,s),getStyleItems:c}},dS=(t,s,a,c,d,h)=>{const{items:b,getStyleItems:x}=by(s,a),T=mn(a.tooltip),D=$=>({getComponent:ne($),setTooltip:G=>{const Y=s.shared.providers.translate(G);qt($.element,"aria-label",Y),T.set(G)}}),P=$=>{const G=Y=>$.setTooltip(a1(t,c(Y.value),Y.value));return t.on(d,G),F_(Tb(t,"NodeChange",Y=>{const se=Y.getComponent();a.updateText(se),l.set(Y.getComponent(),!t.selection.isEditable())})($),()=>t.off(d,G))};return K4({text:a.icon.isSome()?N.none():a.text,icon:a.icon,ariaLabel:N.some(a.tooltip),tooltip:N.none(),role:N.none(),fetch:b.getFetch(s,x),onSetup:P,getApi:D,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Ir.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:$=>{if(a.tooltip!==T.get()){const G=s.shared.providers.translate(T.get());Ir.setComponents($,s.shared.providers.tooltips.getComponents({tooltipText:G}))}}})})]},"tox-tbtn",s.shared,h)},nZ=t=>tt(t,s=>{let a=s,c=s;const d=s.split("=");return d.length>1&&(a=d[0],c=d[1]),{title:a,format:c}}),oZ=t=>({type:"basic",data:t});var vy;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(vy||(vy={}));const sZ=(t,s)=>s===vy.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),oR=(t,s,a)=>{const c=t.options.get(s);return{type:"basic",data:nZ(sZ(c,a))}},rZ="Align",SF=ne("Alignment {0}"),sR="left",yy=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],IT=t=>{const s=()=>et(yy,x=>t.formatter.match(x.format)),a=x=>()=>t.formatter.match(x),c=x=>N.none,d=x=>{const D=s().fold(ne(sR),P=>P.title.toLowerCase());_n(x,t1,{icon:`align-${D}`}),LD(t,{value:D})},h=oZ(yy),b=x=>()=>et(yy,T=>T.format===x.format).each(T=>t.execCommand(T.command));return{tooltip:a1(t,SF(),sR),text:N.none(),icon:N.some("align-left"),isSelectedFor:a,getCurrentValue:N.none,getPreviewFor:c,onAction:b,updateText:d,dataset:h,shouldHide:!1,isInvalid:x=>!t.formatter.canApply(x.format)}},xF=(t,s)=>dS(t,s,IT(t),SF,"AlignTextUpdate","align"),i1=(t,s)=>{const a=by(s,IT(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(rZ),onSetup:Ic(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},rR=(t,s)=>{const a=s(),c=tt(a,d=>d.format);return N.from(t.formatter.closest(c)).bind(d=>et(a,h=>h.format===d))},aZ="Blocks",EF=ne("Block {0}"),aR="Paragraph",_F=t=>{const s=h=>()=>t.formatter.match(h),a=h=>()=>{const b=t.formatter.get(h);return b?N.some({tag:b.length>0&&(b[0].inline||b[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):N.none()},c=h=>{const x=rR(t,()=>d.data).fold(ne(aR),T=>T.title);_n(h,qu,{text:x}),MH(t,{value:x})},d=oR(t,"block_formats",vy.SemiColon);return{tooltip:a1(t,EF(),aR),text:N.some(aR),icon:N.none(),isSelectedFor:s,getCurrentValue:N.none,getPreviewFor:a,onAction:NB(t),updateText:c,dataset:d,shouldHide:!1,isInvalid:h=>!t.formatter.canApply(h.format)}},iZ=(t,s)=>dS(t,s,_F(t),EF,"BlocksTextUpdate","blocks"),cZ=(t,s)=>{const a=by(s,_F(t));t.ui.registry.addNestedMenuItem("blocks",{text:aZ,onSetup:Ic(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},lZ="Fonts",iR=ne("Font {0}"),cR="System Font",uZ=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],LT=t=>{const s=t.split(/\s*,\s*/);return tt(s,a=>a.replace(/^['"]+|['"]+$/g,""))},TF=(t,s)=>s.length>0&&_o(s,a=>t.indexOf(a.toLowerCase())>-1),dZ=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=LT(t.toLowerCase());return TF(a,uZ)||TF(a,s)}else return!1},kF=t=>{const s=()=>{const T=se=>se?LT(se)[0]:"",D=t.queryCommandValue("FontName"),P=x.data,$=D?D.toLowerCase():"",G=gP(t);return{matchOpt:et(P,se=>{const le=se.format;return le.toLowerCase()===$||T(le).toLowerCase()===T($).toLowerCase()}).orThunk(()=>Sn(dZ($,G),{title:cR,format:$})),font:D}},a=T=>D=>D.exists(P=>P.format===T),c=()=>{const{matchOpt:T}=s();return T},d=T=>()=>N.some({tag:"div",styles:T.indexOf("dings")===-1?{"font-family":T}:{}}),h=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,T.format)})},b=T=>{const{matchOpt:D,font:P}=s(),$=D.fold(ne(P),G=>G.title);_n(T,qu,{text:$}),MB(t,{value:$})},x=oR(t,"font_family_formats",vy.SemiColon);return{tooltip:a1(t,iR(),cR),text:N.some(cR),icon:N.none(),isSelectedFor:a,getCurrentValue:c,getPreviewFor:d,onAction:h,updateText:b,dataset:x,shouldHide:!1,isInvalid:Me}},fZ=(t,s)=>dS(t,s,kF(t),iR,"FontFamilyTextUpdate","fontfamily"),mZ=(t,s)=>{const a=by(s,kF(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(lZ),onSetup:Ic(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},hZ={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},AF=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),c="\\.",d=x=>`(?:${x})?`,b=`[+-]?(?:${["Infinity",t+c+d(t)+d(a),c+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${b})(.*)$`)})(),OF=(t,s)=>ms(s,a=>ms(hZ[a],c=>t===c)),fS=(t,s)=>N.from(AF.exec(t)).bind(c=>{const d=Number(c[1]),h=c[2];return OF(h,s)?N.some({value:d,unit:h}):N.none()}),gZ=(t,s)=>fS(t,s).map(({value:a,unit:c})=>a+c),lR={tab:ne(9),escape:ne(27),enter:ne(13),backspace:ne(8),delete:ne(46),left:ne(37),up:ne(38),right:ne(39),down:ne(40),space:ne(32),home:ne(36),end:ne(35),pageUp:ne(33),pageDown:ne(34)},pZ=(t,s,a,c)=>{let d=N.none();const h=Ae=>Ae.map(st=>Yt.getValue(st)).getOr(""),b=Tb(t,"NodeChange SwitchMode",Ae=>{const st=Ae.getComponent();d=N.some(st),a.updateInputValue(st),l.set(st,!t.selection.isEditable())}),x=Ae=>({getComponent:ne(Ae)}),T=mn(ce),D=tn("custom-number-input-events"),P=(Ae,st,je)=>{const $t=h(d),Xt=a.getNewValue($t,Ae),Qe=$t.length-`${Xt}`.length,cn=d.map(fn=>fn.element.dom.selectionStart-Qe),It=d.map(fn=>fn.element.dom.selectionEnd-Qe);a.onAction(Xt,je),d.each(fn=>{Yt.setValue(fn,Xt),st&&(cn.each(bo=>fn.element.dom.selectionStart=bo),It.each(bo=>fn.element.dom.selectionEnd=bo))})},$=(Ae,st)=>P((je,$t)=>je-$t,Ae,st),G=(Ae,st)=>P((je,$t)=>je+$t,Ae,st),Y=Ae=>Mi(Ae.element).fold(N.none,st=>(Sl(st),N.some(!0))),se=Ae=>I1(Ae.element)?(du(Ae.element).each(st=>Sl(st)),N.some(!0)):N.none(),le=(Ae,st,je,$t)=>{const Xt=mn(ce),Qe=s.shared.providers.translate(je),cn=tn("altExecuting"),It=Tb(t,"NodeChange SwitchMode",bo=>{l.set(bo.getComponent(),!t.selection.isEditable())}),fn=bo=>{l.isDisabled(bo)||Ae(!0)};return Vi.sketch({dom:{tag:"button",attributes:{"aria-label":Qe,"data-mce-name":st},classes:$t.concat(st)},components:[uT(st,s.shared.providers.icons)],buttonBehaviours:xt([l.config({}),Ir.config(s.shared.providers.tooltips.getConfig({tooltipText:Qe})),no(cn,[hc({onSetup:It,getApi:x},Xt),Zp({getApi:x},Xt),it(Du(),(bo,Us)=>{(Us.event.raw.keyCode===lR.space()||Us.event.raw.keyCode===lR.enter())&&(l.isDisabled(bo)||Ae(!1))}),it(Kh(),fn),it(Ms(),fn)])]),eventOrder:{[Du()]:[cn,"keying"],[Kh()]:[cn,"alloy.base.behaviour"],[Ms()]:[cn,"alloy.base.behaviour"],[sc()]:["alloy.base.behaviour",cn,"tooltipping"],[Ql()]:[cn,"tooltipping"]}})},Ne=Jo(le(Ae=>$(!1,Ae),"minus","Decrease font size",[])),ge=Jo(le(Ae=>G(!1,Ae),"plus","Increase font size",[])),ke=Jo({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[yb.sketch({inputBehaviours:xt([l.config({}),no(D,[hc({onSetup:b,getApi:x},T),Zp({getApi:x},T)]),no("input-update-display-text",[it(qu,(Ae,st)=>{Yt.setValue(Ae,st.event.text)}),it(qd(),Ae=>{a.onAction(Yt.getValue(Ae))}),it(np(),Ae=>{a.onAction(Yt.getValue(Ae))})]),En.config({mode:"special",onEnter:Ae=>(P(Jt,!0,!0),N.some(!0)),onEscape:Y,onUp:Ae=>(G(!0,!1),N.some(!0)),onDown:Ae=>($(!0,!1),N.some(!0)),onLeft:(Ae,st)=>(st.cut(),N.none()),onRight:(Ae,st)=>(st.cut(),N.none())})])})],behaviours:xt([Ln.config({}),En.config({mode:"special",onEnter:se,onSpace:se,onEscape:Y}),no("input-wrapper-events",[it(Kc(),Ae=>{yt([Ne,ge],st=>{const je=_e.fromDom(st.get(Ae).element.dom);I1(je)&&Bv(je)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Ct(c)?{"data-mce-name":c}:{}}},components:[Ne.asSpec(),ke.asSpec(),ge.asSpec()],behaviours:xt([Ln.config({}),En.config({mode:"flow",focusInside:em.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Ae=>I1(Ae.element)?N.none():(Sl(Ae.element),N.some(!0))})])}},bZ="Font sizes",DF=ne("Font size {0}"),uR="12pt",vZ={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},RF={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},yZ=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},wZ=(t,s)=>/[0-9.]+px$/.test(t)?yZ(parseInt(t,10)*72/96,s||0)+"pt":kt(RF,t).getOr(t),CZ=t=>kt(vZ,t).getOr(""),MF=t=>{const s=()=>{let T=N.none();const D=x.data,P=t.queryCommandValue("FontSize");if(P)for(let $=3;T.isNone()&&$>=0;$--){const G=wZ(P,$),Y=CZ(G);T=et(D,se=>se.format===P||se.format===G||se.format===Y)}return{matchOpt:T,size:P}},a=T=>D=>D.exists(P=>P.format===T),c=()=>{const{matchOpt:T}=s();return T},d=ne(N.none),h=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,T.format)})},b=T=>{const{matchOpt:D,size:P}=s(),$=D.fold(ne(P),G=>G.title);_n(T,qu,{text:$}),DB(t,{value:$})},x=oR(t,"font_size_formats",vy.Space);return{tooltip:a1(t,DF(),uR),text:N.some(uR),icon:N.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:c,onAction:h,updateText:b,dataset:x,shouldHide:!1,isInvalid:Me}},SZ=(t,s)=>dS(t,s,MF(t),DF,"FontSizeTextUpdate","fontsize"),xZ=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},EZ=16,NF=t=>t>=0,_Z=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:c=>_n(c,qu,{text:s()}),onAction:(c,d)=>t.execCommand("FontSize",!1,c,{skip_focus:!d}),getNewValue:(c,d)=>{fS(c,["unsupportedLength","empty"]);const h=s(),b=fS(c,["unsupportedLength","empty"]).or(fS(h,["unsupportedLength","empty"])),x=b.map(G=>G.value).getOr(EZ),T=n_(t),D=b.map(G=>G.unit).filter(G=>G!=="").getOr(T),P=d(x,xZ(D).step),$=`${NF(P)?P:x}${D}`;return $!==h&&RB(t,{value:$}),$}}},TZ=(t,s)=>pZ(t,s,_Z(t),"fontsizeinput"),kZ=(t,s)=>{const a=by(s,MF(t));t.ui.registry.addNestedMenuItem("fontsize",{text:bZ,onSetup:Ic(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},AZ="Formats",PF=t=>fe(t)?"Formats":"Format {0}",BF=(t,s)=>{const a="Formats",c=b=>()=>t.formatter.match(b),d=b=>()=>{const x=t.formatter.get(b);return x!==void 0?N.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(b))}):N.none()},h=b=>{const x=$=>T3($)?Se($.items,x):n5($)?[{title:$.title,format:$.format}]:[],T=Se(nS(t),x),P=rR(t,ne(T)).fold(ne({title:a,tooltipLabel:""}),$=>({title:$.title,tooltipLabel:$.title}));_n(b,qu,{text:P.title}),RH(t,{value:P.tooltipLabel})};return{tooltip:a1(t,PF(""),""),text:N.some(a),icon:N.none(),isSelectedFor:c,getCurrentValue:N.none,getPreviewFor:d,onAction:NB(t),updateText:h,shouldHide:tP(t),isInvalid:b=>!t.formatter.canApply(b.format),dataset:s}},OZ=(t,s)=>{const a={type:"advanced",...s.styles};return dS(t,s,BF(t,a),PF,"StylesTextUpdate","styles")},IF=(t,s)=>{const a={type:"advanced",...s.styles},c=by(s,BF(t,a));t.ui.registry.addNestedMenuItem("styles",{text:AZ,onSetup:Ic(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},DZ=ne([rt("toggleClass"),rt("fetch"),Qd("onExecute"),Be("getHotspot",N.some),Be("getAnchorOverrides",ne({})),Qm(),Qd("onItemExecute"),Bo("lazySink"),rt("dom"),ko("onOpen"),Za("splitDropdownBehaviours",[jr,En,Ln]),Be("matchWidth",!1),Be("useMinWidth",!1),Be("eventOrder",{}),Bo("role"),Bo("listRole")].concat(U_())),RZ=Ti({factory:Vi,schema:[rt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:xt([Ln.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Rm)},buttonBehaviours:xt([lo.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),LF=Ti({factory:Vi,schema:[rt("dom")],name:"button",defaults:()=>({buttonBehaviours:xt([Ln.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),MZ=ne([RZ,LF,Tl({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[rt("text")],name:"aria-descriptor"}),ru({schema:[dp()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(c=>{t.onItemExecute(c,s,a)})}})}),oI()]),FF=(t,s,a,c)=>{const d=P=>{Ro.getCurrent(P).each($=>{bn.highlightFirst($),En.focusIn($)})},h=P=>{JD(t,Jt,P,c,d,Zr.HighlightMenuAndItem).get(ce)},b=P=>(h(P),N.some(!0)),x=P=>{const $=kl(P,t,"button");return Rm($),N.some(!0)},T={...Fs([Gs((P,$)=>{bt(P,t,"aria-descriptor").each(Y=>{const se=tn("aria");qt(Y.element,"id",se),qt(P.element,"aria-describedby",se)})})]),...YE(N.some(h))},D={repositionMenus:P=>{lo.isOn(P)&&rI(P)}};return{uid:t.uid,dom:t.dom,components:s,apis:D,eventOrder:{...t.eventOrder,[Jl()]:["disabling","toggling","alloy.base.behaviour"]},events:T,behaviours:ja(t.splitDropdownBehaviours,[jr.config({others:{sandbox:P=>{const $=kl(P,t,"arrow");return t4(t,P,{onOpen:()=>{lo.on($),lo.on(P)},onClose:()=>{lo.off($),lo.off(P)}})}}}),En.config({mode:"special",onSpace:x,onEnter:x,onDown:b}),Ln.config({}),lo.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},mS=Ki({name:"SplitDropdown",configFields:DZ(),partFields:MZ(),factory:FF,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),$F=t=>({isEnabled:()=>!l.isDisabled(t),setEnabled:s=>l.set(t,!s),setText:s=>_n(t,qu,{text:s}),setIcon:s=>_n(t,t1,{icon:s})}),NZ=t=>({setActive:s=>{lo.set(t,s)},isActive:()=>lo.isOn(t),isEnabled:()=>!l.isDisabled(t),setEnabled:s=>l.set(t,!s),setText:s=>_n(t,qu,{text:s}),setIcon:s=>_n(t,t1,{icon:s})}),HF=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),Ib=tn("focus-button"),dR=(t,s,a,c,d,h)=>{const b=s.map(T=>Jo(G4(T,"tox-tbtn",d))),x=t.map(T=>Jo(e1(T,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...HF(a,d),...Ct(h)?{"data-mce-name":h}:{}}},components:xb([x.map(T=>T.asSpec()),b.map(T=>T.asSpec())]),eventOrder:{[Er()]:["focusing","alloy.base.behaviour",Qp],[sc()]:[Qp,"toolbar-group-button-events"]},buttonBehaviours:xt([mf.toolbarButton(d.isDisabled),Ga(),no(Qp,[Gs((T,D)=>j4(T)),it(qu,(T,D)=>{b.bind(P=>P.getOpt(T)).each(P=>{Vn.set(P,[hr(d.translate(D.event.text))])})}),it(t1,(T,D)=>{x.bind(P=>P.getOpt(T)).each(P=>{Vn.set(P,[e1(D.event.icon,d.icons)])})}),it(Er(),(T,D)=>{D.event.prevent(),ao(T,Ib)})])].concat(c.getOr([])))}},PZ=(t,s,a,c,d)=>{const h=s.shared,b=mn(ce),x={toolbarButtonBehaviours:[],getApi:$F,onSetup:t.onSetup},T=[no("toolbar-group-button-events",[hc(x,b),Zp(x,b)])];return r1.sketch({lazySink:h.getSink,fetch:()=>zi.nu(D=>{D(tt(a(t.items),OT))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:dR(t.icon,t.text,t.tooltip,N.some(T),h.providers,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:c}}}})},VF=(t,s,a,c)=>{var d;const h=mn(ce),b=dR(t.icon,t.text,t.tooltip,N.none(),a,c);return Vi.sketch({dom:b.dom,components:b.components,eventOrder:Z4,buttonBehaviours:{...xt([no("toolbar-button-events",[az({onAction:t.onAction,getApi:s.getApi}),hc(s,h),Zp(s,h)]),...t.tooltip.map(x=>Ir.config(a.tooltips.getConfig({tooltipText:a.translate(x)+t.shortcut.map(T=>` (${M_(T)})`).getOr("")}))).toArray(),mf.toolbarButton(()=>!t.enabled||a.isDisabled()),Ga()].concat(s.toolbarButtonBehaviours)),[Qp]:(d=b.buttonBehaviours)===null||d===void 0?void 0:d[Qp]}})},BZ=(t,s,a)=>zF(t,s,[],a),zF=(t,s,a,c)=>VF(t,{toolbarButtonBehaviours:a.length>0?[no("toolbarButtonWith",a)]:[],getApi:$F,onSetup:t.onSetup},s,c),IZ=(t,s,a)=>UF(t,s,[],a),UF=(t,s,a,c)=>VF(t,{toolbarButtonBehaviours:[Vn.config({}),lo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[no("toolbarToggleButtonWith",a)]:[]),getApi:NZ,onSetup:t.onSetup},s,c),LZ=(t,s,a)=>c=>zi.nu(d=>s.fetch(d)).map(d=>N.from(q_(Ds(KD(tn("menu-value"),d,h=>{s.onItemAction(t(c),h)},s.columns,s.presets,df.CLOSE_ON_EXECUTE,s.select.getOr(Me),a),{movement:z_(s.columns,s.presets),menuBehaviours:q0.unnamedEvents(s.columns!=="auto"?[]:[Gs((h,b)=>{ED(h,4,rD(s.presets)).each(({numRows:x,numColumns:T})=>{En.setGridSize(h,x,T)})})])})))),fR=(t,s,a)=>{const c=mn(t.tooltip.getOr("")),d=x=>({isEnabled:()=>!l.isDisabled(x),setEnabled:T=>l.set(x,!T),setIconFill:(T,D)=>{tr(x.element,`svg path[class="${T}"], rect[class="${T}"]`).each(P=>{qt(P,"fill",D)})},setActive:T=>{qt(x.element,"aria-pressed",T),tr(x.element,"span").each(D=>{x.getSystem().getByDom(D).each(P=>lo.set(P,T))})},isActive:()=>tr(x.element,"span").exists(T=>x.getSystem().getByDom(T).exists(lo.isOn)),setText:T=>tr(x.element,"span").each(D=>x.getSystem().getByDom(D).each(P=>_n(P,qu,{text:T}))),setIcon:T=>tr(x.element,"span").each(D=>x.getSystem().getByDom(D).each(P=>_n(P,t1,{icon:T}))),setTooltip:T=>{const D=s.providers.translate(T);qt(x.element,"aria-label",D),c.set(T)}}),h=mn(ce),b={getApi:d,onSetup:t.onSetup};return mS.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...HF(t.tooltip,s.providers),...Ct(a)?{"data-mce-name":a}:{}}},onExecute:x=>{const T=d(x);T.isEnabled()&&t.onAction(T)},onItemExecute:(x,T,D)=>{},splitDropdownBehaviours:xt([mf.splitButton(s.providers.isDisabled),Ga(),no("split-dropdown-events",[Gs((x,T)=>j4(x)),it(Ib,Ln.focus),hc(b,h),Zp(b,h)]),sy.config({}),...t.tooltip.map(x=>Ir.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(x),onShow:T=>{if(c.get()!==x){const D=s.providers.translate(c.get());Ir.setComponents(T,s.providers.tooltips.getComponents({tooltipText:D}))}}})})).toArray()]),eventOrder:{[sc()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Ql()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:LZ(d,t,s.providers),parts:{menu:a2(!1,t.columns,t.presets)},components:[mS.parts.button(dR(t.icon,t.text,N.none(),N.some([lo.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),mS.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:JO("chevron-down",s.providers.icons)},buttonBehaviours:xt([mf.splitButton(s.providers.isDisabled),Ga(),g_()])}),mS.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},FZ=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],hS=(t,s)=>(a,c,d,h)=>{const b=t(a).mapError(x=>Gl(x)).getOrDie();return s(b,c,d,h)},WF={button:hS(XP,(t,s,a,c)=>BZ(t,s.shared.providers,c)),togglebutton:hS(JP,(t,s,a,c)=>IZ(t,s.shared.providers,c)),menubutton:hS(k5,(t,s,a,c)=>G2(t,"tox-tbtn",s,N.none(),!1,c)),splitbutton:hS(iW,(t,s,a,c)=>fR(t,s.shared,c)),grouptoolbarbutton:hS(aS,(t,s,a,c)=>{const d=a.ui.registry.getAll().buttons,h=x=>gS(a,{buttons:d,toolbar:x,allowToolbarGroups:!1},s,N.none()),b={[Yw]:s.shared.header.isPositionedAtTop()?xl.TopToBottom:xl.BottomToTop};switch(hb(a)){case Cd.floating:return PZ(t,s,h,b,c);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},ZF=(t,s,a,c)=>kt(WF,t.type).fold(()=>(console.error("skipping button defined by",t),N.none()),d=>N.some(d(t,s,a,c))),jF={styles:OZ,fontsize:SZ,fontsizeinput:TZ,fontfamily:fZ,blocks:iZ,align:xF},$Z=t=>{const s=tt(FZ,a=>{const c=uo(a.items,d=>po(t,d)||po(jF,d));return{name:a.name,items:c}});return uo(s,a=>a.items.length>0)},HZ=t=>{const s=t.split("|");return tt(s,a=>({items:a.trim().split(" ")}))},VZ=t=>Nt(t,s=>po(s,"name")&&po(s,"items")),zZ=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?$Z(a):Z(s)?HZ(s):VZ(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},UZ=(t,s,a,c,d,h)=>kt(s,a.toLowerCase()).orThunk(()=>h.bind(b=>bs(b,x=>kt(s,x+a.toLowerCase())))).fold(()=>kt(jF,a.toLowerCase()).map(b=>b(t,d)),b=>b.type==="grouptoolbarbutton"&&!c?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),N.none()):ZF(b,d,t,a.toLowerCase())),gS=(t,s,a,c)=>{const d=zZ(s),h=tt(d,b=>{const x=Se(b.items,T=>T.trim().length===0?[]:UZ(t,s.buttons,T,s.allowToolbarGroups,a,c).toArray());return{title:N.from(t.translate(b.name)),items:x}});return uo(h,b=>b.items.length>0)},qF=(t,s,a,c)=>{const d=s.mainUi.outerContainer,h=a.toolbar,b=a.buttons;if(Nt(h,Z)){const x=h.map(T=>{const D={toolbar:T,buttons:b,allowToolbarGroups:a.allowToolbarGroups};return gS(t,D,c,N.none())});zs.setToolbars(d,x)}else zs.setToolbar(d,gS(t,a,c,N.none()))},GF=ro(),WZ=GF.os.isiOS()&&GF.os.version.major<=12,ZZ=(t,s)=>{const{uiMotherships:a}=s,c=t.dom;let d=t.getWin();const h=t.getDoc().documentElement,b=mn(Js(d.innerWidth,d.innerHeight)),x=mn(Js(h.offsetWidth,h.offsetHeight)),T=()=>{const G=b.get();(G.left!==d.innerWidth||G.top!==d.innerHeight)&&(b.set(Js(d.innerWidth,d.innerHeight)),L_(t))},D=()=>{const G=t.getDoc().documentElement,Y=x.get();(Y.left!==G.offsetWidth||Y.top!==G.offsetHeight)&&(x.set(Js(G.offsetWidth,G.offsetHeight)),L_(t))},P=G=>{kH(t,G)};c.bind(d,"resize",T),c.bind(d,"scroll",P);const $=Ww(_e.fromDom(t.getBody()),"load",D);t.on("hide",()=>{yt(a,G=>{lt(G.element,"display","none")})}),t.on("show",()=>{yt(a,G=>{Xn(G.element,"display")})}),t.on("NodeChange",D),t.on("remove",()=>{$.unbind(),c.unbind(d,"resize",T),c.unbind(d,"scroll",P),d=null})},FT=(t,s,a)=>{Hp(t)&&pg(a.mainUi.mothership.element,a.popupUi.mothership),Y1(s,a.dialogUi.mothership)};var $T=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:h,uiMotherships:b}=s,x=mn(0),T=h.outerContainer;eZ(t);const D=_e.fromDom(d.targetNode),P=gi(vr(D));pg(D,h.mothership),FT(t,P,s),t.on("SkinLoaded",()=>{zs.setSidebar(T,a.sidebar,s_(t)),qF(t,s,a,c),x.set(t.getWin().innerWidth),zs.setMenubar(T,vF(t,a)),zs.setViews(T,a.views),ZZ(t,s)});const $=zs.getSocket(T).getOrDie("Could not find expected socket element");if(WZ){qn($.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const le=XV(()=>{t.dispatch("ScrollContent")},20),Ne=dc($.element,"scroll",le.throttle);t.on("remove",Ne.unbind)}_D(t,s),t.addCommand("ToggleSidebar",(le,Ne)=>{zs.toggleSidebar(T,Ne),NH(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var le;return(le=zs.whichSidebar(T))!==null&&le!==void 0?le:""}),t.addCommand("ToggleView",(le,Ne)=>{if(zs.toggleView(T,Ne)){const ge=T.element;h.mothership.broadcastOn([of()],{target:ge}),yt(b,ke=>{ke.broadcastOn([of()],{target:ge})}),Ye(zs.whichView(T))&&(t.focus(),t.nodeChanged(),zs.refreshToolbar(T)),PH(t)}}),t.addQueryValueHandler("ToggleView",()=>{var le;return(le=zs.whichView(T))!==null&&le!==void 0?le:""});const G=hb(t),Y=()=>{zs.refreshToolbar(s.mainUi.outerContainer)};(G===Cd.sliding||G===Cd.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const le=t.getWin().innerWidth;le!==x.get()&&(Y(),x.set(le))});const se={setEnabled:le=>{G0(s,!le)},isEnabled:()=>!l.isDisabled(T)};return{iframeContainer:$.element.dom,editorContainer:T.element.dom,api:se}}});const pS=t=>/^[0-9\.]+(|px)$/i.test(""+t)?N.some(parseInt(""+t,10)):N.none(),HT=t=>dn(t)?t+"px":t,VT=(t,s,a)=>{const c=s.filter(h=>t<h),d=a.filter(h=>t>h);return c.or(d).getOr(t)},jZ=t=>{const s=UC(t),a=$0(t),c=e_(t);return pS(s).map(d=>VT(d,a,c))},qZ=t=>jZ(t).getOr(UC(t)),KF=t=>{const s=SO(t),a=mb(t),c=WC(t);return pS(s).map(d=>VT(d,a,c))},GZ=t=>KF(t).getOr(SO(t)),{ToolbarLocation:wy,ToolbarMode:mR}=vP,YF=40,XF=(t,s,a,c,d)=>{const{mainUi:h,uiMotherships:b}=a,x=ub.DOM,T=H0(t),D=gb(t),P=WC(t).or(KF(t)),$=c.shared.header,G=$.isPositionedAtTop,Y=150,se=hb(t),le=se===mR.sliding||se===mR.floating,Ne=mn(!1),ge=()=>Ne.get()&&!t.removed,ke=un=>le?un.fold(ne(0),gt=>gt.components().length>1?xs(gt.components()[1].element):0):0,Ae=un=>{switch(ZC(t)){case wy.auto:const gt=zs.getToolbar(h.outerContainer),Ht=ke(gt),Fn=xs(un.element)-Ht,Rn=Qs(s);if(Rn.y>Fn)return"top";{const Gn=$l(s),ks=Math.max(Gn.dom.scrollHeight,xs(Gn));return Rn.bottom<ks-Fn||Ur().bottom<Rn.bottom-Fn?"bottom":"top"}case wy.bottom:return"bottom";case wy.top:default:return"top"}},st=un=>{d.on(gt=>{Hs.setModes(gt,[un]),$.setDockingMode(un);const Ht=G()?xl.TopToBottom:xl.BottomToTop;qt(gt.element,Yw,Ht)})},je=()=>{d.on(un=>{const gt=P.getOrThunk(()=>Vd().width-Wc(s).left-10);lt(un.element,"max-width",gt+"px")})},$t=(un,gt)=>{d.on(Ht=>{const Fn=zs.getToolbar(h.outerContainer),Rn=ke(Fn),xn=Qs(s),Gn=Xt(t,h.outerContainer.element),ks=()=>Gn.fold(()=>xn.x,Xi=>{const Qu=Qs(Xi);return Uo(Xi,io())?xn.x:xn.x-Qu.x}),Qo=()=>Gn.fold(()=>G()?Math.max(xn.y-xs(Ht.element)+Rn,0):xn.bottom,Xi=>{var Qu;const Id=Qs(Xi),Il=(Qu=Xi.dom.scrollTop)!==null&&Qu!==void 0?Qu:0,Zb=Uo(Xi,io())?Math.max(xn.y-xs(Ht.element)+Rn,0):xn.y-Id.y+Il-xs(Ht.element)+Rn;return G()?Zb:xn.bottom}),bc=ks(),Ju=Sn(un,Math.ceil(h.outerContainer.element.dom.getBoundingClientRect().width)).filter(Xi=>Xi>Y).map(Xi=>{const Qu=gt.getOr(ai()),Id=window.innerWidth-(bc-Qu.left),Il=Math.max(Math.min(Xi,Id),Y);return Id<Xi&&lt(h.outerContainer.element,"width",Il+"px"),{width:Il+"px"}}).getOr({width:"max-content"}),fm={position:"absolute",left:Math.round(bc)+"px",top:Qo()+"px"};qn(h.outerContainer.element,{...fm,...Ju})})},Xt=(un,gt)=>Hp(un)?Pm(gt):N.none(),Qe=()=>{yt(b,un=>{un.broadcastOn([vg()],{})})},cn=()=>!T&&(ga(h.outerContainer.element).left+yo(h.outerContainer.element)>=window.innerWidth-YF||Os(h.outerContainer.element,"width").isSome())?(lt(h.outerContainer.element,"position","absolute"),lt(h.outerContainer.element,"left","0px"),Xn(h.outerContainer.element,"width"),!0):!1,It=un=>{if(!ge())return;T||je();const gt=ai(),Ht=T?!1:cn();if(le&&zs.refreshToolbar(h.outerContainer),!T){const Fn=ai(),Rn=Sn(gt.left!==Fn.left,gt);$t(Ht,Rn),Rn.each(xn=>{td(xn.left,Fn.top)})}D&&d.on(un),Qe()},fn=()=>T||!D||!ge()?!1:d.get().exists(un=>{const gt=$.getDockingMode(),Ht=Ae(un);return Ht!==gt?(st(Ht),!0):!1});return{isVisible:ge,isPositionedAtTop:G,show:()=>{Ne.set(!0),lt(h.outerContainer.element,"display","flex"),x.addClass(t.getBody(),"mce-edit-focus"),yt(b,un=>{Xn(un.element,"display")}),fn(),Hp(t)?It(un=>Hs.isDocked(un)?Hs.reset(un):Hs.refresh(un)):It(Hs.refresh)},hide:()=>{Ne.set(!1),lt(h.outerContainer.element,"display","none"),x.removeClass(t.getBody(),"mce-edit-focus"),yt(b,un=>{lt(un.element,"display","none")})},update:It,updateMode:()=>{fn()&&It(Hs.reset)},repositionPopups:Qe}},hR=(t,s)=>{const a=Qs(t);return{pos:s?a.y:a.bottom,bounds:a}},KZ=(t,s,a,c)=>{const d=mn(hR(s,a.isPositionedAtTop())),h=D=>{const{pos:P,bounds:$}=hR(s,a.isPositionedAtTop()),{pos:G,bounds:Y}=d.get(),se=$.height!==Y.height||$.width!==Y.width;d.set({pos:P,bounds:$}),se&&L_(t,D),a.isVisible()&&(G!==P?a.update(Hs.reset):se&&(a.updateMode(),a.repositionPopups()))};c||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Hs.reset)),t.on("NodeChange keydown",D=>{requestAnimationFrame(()=>h(D))});let b=0;const x=L4(()=>a.update(Hs.refresh),33);t.on("ScrollWindow",()=>{const D=ai().left;D!==b&&(b=D,x.throttle()),a.updateMode()}),Hp(t)&&t.on("ElementScroll",D=>{a.update(Hs.refresh)});const T=pa();T.set(Ww(_e.fromDom(t.getBody()),"load",D=>h(D.raw))),t.on("remove",()=>{T.clear()})};var XZ=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:h}=s,b=ts(),x=_e.fromDom(d.targetNode),T=XF(t,x,s,c,b),D=sP(t);tZ(t);const P=()=>{if(b.isSet()){T.show();return}b.set(zs.getHeader(h.outerContainer).getOrDie());const G=RO(t);Hp(t)?(pg(x,h.mothership),pg(x,s.popupUi.mothership)):Y1(G,h.mothership),Y1(G,s.dialogUi.mothership);const Y=()=>{qF(t,s,a,c),zs.setMenubar(h.outerContainer,vF(t,a)),T.show(),KZ(t,x,T,D),t.nodeChanged()};D?t.once("SkinLoaded",Y):Y()};t.on("show",P),t.on("hide",T.hide),D||(t.on("focus",P),t.on("blur",T.hide)),t.on("init",()=>{(t.hasFocus()||D)&&P()}),_D(t,s);const $={show:P,hide:T.hide,setEnabled:G=>{G0(s,!G)},isEnabled:()=>!l.isDisabled(h.outerContainer)};return{editorContainer:h.outerContainer.element.dom,api:$}}});const JZ=()=>{const t=ts(),s=ts(),a=ts();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const h=t.get().map(x=>x.mothership),b=s.get().map(x=>x.mothership);return h.fold(()=>b.toArray(),x=>b.fold(()=>[x],T=>Uo(x.element,T.element)?[x]:[x,T]))},lazyGetInOuterOrDie:(h,b)=>()=>a.get().bind(x=>b(x.outerContainer)).getOrDie(`Could not find ${h} element in OuterContainer`)}},QZ="contexttoolbar-show",JF="contexttoolbar-hide",ej=t=>({hide:()=>ao(t,y1()),getValue:()=>Yt.getValue(t)}),Cy=(t,s)=>it(pL,(a,c)=>{const d=t.get(a),h=ej(d);s.onAction(h,c.event.buttonApi)}),tj=(t,s,a)=>{const{primary:c,...d}=s.original,h=pt(XP({...d,type:"button",onAction:ce}));return zF(h,a,[Cy(t,s)])},nj=(t,s,a)=>{const{primary:c,...d}=s.original,h=pt(JP({...d,type:"togglebutton",onAction:ce}));return UF(h,a,[Cy(t,s)])},oj=t=>t.type==="contextformtogglebutton",QF=(t,s,a)=>oj(s)?nj(t,s,a):tj(t,s,a),sj=(t,s,a)=>{const c=tt(s,b=>Jo(QF(t,b,a)));return{asSpecs:()=>tt(c,b=>b.asSpec()),findPrimary:b=>bs(s,(x,T)=>x.primary?N.from(c[T]).bind(D=>D.getOpt(b)).filter(Fe(l.isDisabled)):N.none())}},gR=(t,s)=>{const a=t.label.fold(()=>({}),h=>({"aria-label":h})),c=Jo(yb.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:xt([En.config({mode:"special",onEnter:h=>d.findPrimary(h).map(b=>(Rm(b),!0)),onLeft:(h,b)=>(b.cut(),N.none()),onRight:(h,b)=>(b.cut(),N.none())})])})),d=sj(c,t.commands,s);return[{title:N.none(),items:[c.asSpec()]},{title:N.none(),items:d.asSpecs()}]},rj={renderContextForm:(t,s,a)=>DT({type:t,uid:tn("context-toolbar"),initGroups:gR(s,a),onEscape:N.none,cyclicKeying:!0,providers:a}),buildInitGroups:gR},e$=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,aj=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=mu(_e.fromDom(t.startContainer),t.startOffset).element;return(sa(a)?Ia(a):N.some(a)).filter(xo).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},pR=t=>{const s=t.selection.getRng(),a=aj(s);if(t.inline){const c=ai();return qs(c.left+a.left,c.top+a.top,a.width,a.height)}else{const c=tc(_e.fromDom(t.getBody()));return qs(c.x+a.left,c.y+a.top,a.width,a.height)}},bS=(t,s)=>s.filter(a=>en(a)&&Ri(a)).map(tc).getOrThunk(()=>pR(t)),t$=(t,s,a)=>{const c=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:c,width:d-c}},ij=(t,s,a,c,d,h)=>{const b=_e.fromDom(t.getContainer()),x=tr(b,".tox-editor-header").getOr(b),T=Qs(x),D=T.y>=s.bottom,P=c&&!D;if(t.inline&&P)return{y:Math.max(T.bottom+h,a.y),bottom:a.bottom};if(t.inline&&!P)return{y:a.y,bottom:Math.min(T.y-h,a.bottom)};const $=d==="line"?Qs(b):s;return P?{y:Math.max(T.bottom+h,a.y),bottom:Math.min($.bottom-h,a.bottom)}:{y:Math.max($.y+h,a.y),bottom:Math.min(T.y-h,a.bottom)}},n$=(t,s,a,c=0)=>{const d=Vd(window),h=Qs(_e.fromDom(t.getContentAreaContainer())),b=r_(t)||GC(t)||KC(t),{x,width:T}=t$(h,d,c);if(t.inline&&!b)return qs(x,d.y,T,d.height);{const D=s.header.isPositionedAtTop(),{y:P,bottom:$}=ij(t,h,d,D,a,c);return qs(x,P,T,$-P)}},vS=12,zT={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},bR={maxHeightFunction:bp(),maxWidthFunction:gy()},o$=(t,s)=>{const a=t.selection.getRng(),c=mu(_e.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Uo(c.element,s)},cj=(t,s,a)=>{const c=Os(t,"position");lt(t,"position",s);const d=a(t);return c.each(h=>lt(t,"position",h)),d},Lb=t=>t==="node",UT=(t,s,a,c,d)=>{const h=pR(t),b=c.lastElement().exists(x=>Uo(a,x));if(o$(t,a))return b?JL:cu;if(b)return cj(s,c.getMode(),()=>e$(h,Qs(s),-20)&&!c.isReposition()?QL:JL);{const x=c.getMode()==="fixed"?d.y+ai().top:d.y,T=xs(s)+vS;return x+T<=h.y?cu:fy}},WT=(t,s,a,c)=>{const d=T=>(D,P,$,G,Y)=>{const se=UT(t,G,T,a,Y),le={...D,y:Y.y,height:Y.height};return{...se(le,P,$,G,Y),alwaysFit:!0}},h=T=>Lb(c)?[d(T)]:[];return s?{onLtr:T=>[Ca,ya,Pr,us,xi,wa].concat(h(T)),onRtl:T=>[Ca,Pr,ya,xi,us,wa].concat(h(T))}:{onLtr:T=>[wa,Ca,us,ya,xi,Pr].concat(h(T)),onRtl:T=>[wa,Ca,xi,Pr,us,ya].concat(h(T))}},vR=(t,s,a,c)=>s==="line"?{bubble:Pu(vS,0,zT),layouts:{onLtr:()=>[Rv],onRtl:()=>[Mv]},overrides:bR}:{bubble:Pu(0,vS,zT,1/vS),layouts:WT(t,a,c,s),overrides:bR},yS=(t,s)=>{const a=uo(s,h=>h.predicate(t.dom)),{pass:c,fail:d}=ta(a,h=>h.type==="contexttoolbar");return{contextToolbars:c,contextForms:d}},s$=t=>{if(t.length<=1)return t;{const s=h=>ms(t,b=>b.position===h),a=h=>uo(t,b=>b.position===h),c=s("selection"),d=s("node");if(c||d)if(d&&c){const h=a("node"),b=tt(a("selection"),x=>({...x,position:"node"}));return h.concat(b)}else return a(c?"selection":"node");else return a("line")}},ZT=t=>{if(t.length<=1)return t;{const s=c=>et(t,d=>d.position===c);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(c=>c.position).fold(()=>[],c=>uo(t,d=>d.position===c))}},r$=(t,s,a)=>{const c=yS(t,s);if(c.contextForms.length>0)return N.some({elem:t,toolbars:[c.contextForms[0]]});{const d=yS(t,a);if(d.contextForms.length>0)return N.some({elem:t,toolbars:[d.contextForms[0]]});if(c.contextToolbars.length>0||d.contextToolbars.length>0){const h=s$(c.contextToolbars.concat(d.contextToolbars));return N.some({elem:t,toolbars:h})}else return N.none()}},a$=(t,s,a)=>t(s)?N.none():Kl(s,c=>{if(xo(c)){const{contextToolbars:d,contextForms:h}=yS(c,a.inNodeScope),b=h.length>0?h:ZT(d);return b.length>0?N.some({elem:c,toolbars:b}):N.none()}else return N.none()},t),yR=(t,s)=>{const a=_e.fromDom(s.getBody()),c=b=>Uo(b,a),d=b=>!c(b)&&!Oa(a,b),h=_e.fromDom(s.selection.getNode());return d(h)?N.none():r$(h,t.inNodeScope,t.inEditorScope).orThunk(()=>a$(c,h,t))},lj=(t,s)=>{const a={},c=[],d=[],h={},b={},x=(P,$)=>{const G=pt(cH($));a[P]=G,G.launch.map(Y=>{h["form:"+P]={...$.launch,type:Y.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(G)}}}),G.scope==="editor"?d.push(G):c.push(G),b[P]=G},T=(P,$)=>{d2($).each(G=>{$.scope==="editor"?d.push(G):c.push(G),b[P]=G})},D=vs(t);return yt(D,P=>{const $=t[P];$.type==="contextform"?x(P,$):$.type==="contexttoolbar"&&T(P,$)}),{forms:a,inNodeScope:c,inEditorScope:d,lookupTable:b,formNavigators:h}},wR=tn("forward-slide"),i$=tn("backward-slide"),CR=tn("change-slide-event"),Sy="tox-pop--resizing",c$=t=>{const s=mn([]);return nr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),nr.getContent(a).each(c=>{Xn(c.element,"visibility")}),mr(a.element,Sy),Xn(a.element,"width")},inlineBehaviours:xt([no("context-toolbar-events",[op(ud(),(a,c)=>{c.event.raw.propertyName==="width"&&(mr(a.element,Sy),Xn(a.element,"width"))}),it(CR,(a,c)=>{const d=a.element;Xn(d,"width");const h=La(d);nr.setContent(a,c.event.contents),$s(d,Sy);const b=La(d);lt(d,"width",h+"px"),nr.getContent(a).each(x=>{c.event.focus.bind(T=>(Sl(T),uc(d))).orThunk(()=>(En.focusIn(x),vd(vr(d))))}),setTimeout(()=>{lt(a.element,"width",b+"px")},0)}),it(wR,(a,c)=>{nr.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:vd(vr(a.element))}]))}),_n(a,CR,{contents:c.event.forwardContents,focus:N.none()})}),it(i$,(a,c)=>{Xa(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),_n(a,CR,{contents:Cl(d.bar),focus:d.focus})})})]),En.config({mode:"special",onEscape:a=>Xa(s.get()).fold(()=>t.onEscape(),c=>(ao(a,i$),N.some(!0)))})]),lazySink:()=>Yn.value(t.sink)})},SR="tox-pop--transition",uj=(t,s,a,c)=>{const d=c.backstage,h=d.shared,b=ro().deviceType.isTouch,x=ts(),T=ts(),D=ts(),P=$i(c$({sink:a,onEscape:()=>(t.focus(),N.some(!0))})),$=()=>{const It=D.get().getOr("node"),fn=Lb(It)?1:0;return n$(t,h,It,fn)},G=()=>!t.removed&&!(b()&&d.isContextMenuOpen()),Y=It=>Vr(hi(It,x.get(),Uo),!0),se=()=>{if(G()){const It=$(),fn=Vr(D.get(),"node")?bS(t,x.get()):pR(t);return It.height<=0||!e$(fn,It,.01)}else return!0},le=()=>{x.clear(),T.clear(),D.clear(),nr.hide(P)},Ne=()=>{if(nr.isOpen(P)){const It=P.element;Xn(It,"display"),se()?lt(It,"display","none"):(T.set(0),nr.reposition(P))}},ge=It=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[It],behaviours:xt([En.config({mode:"acyclic"}),no("pop-dialog-wrap-events",[Gs(fn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>En.focusIn(fn))}),Yd(fn=>{t.shortcuts.remove("ctrl+F9")})])])}),ke=Sc(()=>lj(s,It=>{const fn=je([It]);_n(P,wR,{forwardContents:ge(fn)})})),Ae=(It,fn)=>gS(t,{buttons:It,toolbar:fn.items,allowToolbarGroups:!1},c.backstage,N.some(["form:"])),st=(It,fn)=>rj.buildInitGroups(It,fn),je=It=>{const{buttons:fn}=t.ui.registry.getAll(),bo=ke(),Us={...fn,...bo.formNavigators},jo=hb(t)===Cd.scrolling?Cd.scrolling:Cd.default,un=dt(tt(It,gt=>gt.type==="contexttoolbar"?Ae(Us,gt):st(gt,h.providers)));return DT({type:jo,uid:tn("context-toolbar"),initGroups:un,onEscape:N.none,cyclicKeying:!0,providers:h.providers})},$t=(It,fn)=>{const bo=It==="node"?h.anchors.node(fn):h.anchors.cursor(),Us=vR(t,It,b(),{lastElement:x.get,isReposition:()=>Vr(T.get(),0),getMode:()=>Hi.getMode(a)});return Ds(bo,Us)},Xt=(It,fn)=>{if(cn.cancel(),!G())return;const bo=je(It),Us=It[0].position,jo=$t(Us,fn);D.set(Us),T.set(1);const un=P.element;Xn(un,"display"),Y(fn)||(mr(un,SR),Hi.reset(a,P)),nr.showWithinBounds(P,ge(bo),{anchor:jo,transition:{classes:[SR],mode:"placement"}},()=>N.some($())),fn.fold(x.clear,x.set),se()&&lt(un,"display","none")};let Qe=!1;const cn=L4(()=>{if(!(!t.hasFocus()||t.removed||Qe))if(Jc(P.element,SR))cn.throttle();else{const It=ke();yR(It,t).fold(le,fn=>{Xt(fn.toolbars,N.some(fn.elem))})}},17);t.on("init",()=>{t.on("remove",le),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Ne),t.on("click keyup focus SetContent",cn.throttle),t.on(JF,le),t.on(QZ,It=>{const fn=ke();kt(fn.lookupTable,It.toolbarKey).each(bo=>{Xt([bo],Sn(It.target!==t,It.target)),nr.getContent(P).each(En.focusIn)})}),t.on("focusout",It=>{F0.setEditorTimeout(t,()=>{uc(a.element).isNone()&&uc(P.element).isNone()&&le()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&le()}),t.on("ExecCommand",({command:It})=>{It.toLowerCase()==="toggleview"&&le()}),t.on("AfterProgressState",It=>{It.state?le():t.hasFocus()&&cn.throttle()}),t.on("dragstart",()=>{Qe=!0}),t.on("dragend drop",()=>{Qe=!1}),t.on("NodeChange",It=>{uc(P.element).fold(cn.throttle,ce)})})},dj=t=>{yt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:iu(t,a.cmd),onSetup:$_(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Ic(t),onAction:iu(t,"JustifyNone")})},l$=(t,s)=>{const a=()=>{const c=s.getOptions(t),d=s.getCurrent(t).map(s.hash),h=ts();return tt(c,b=>({type:"togglemenuitem",text:s.display(b),onSetup:x=>{const T=P=>{P&&(h.on($=>$.setActive(!1)),h.set(x)),x.setActive(P)};T(Vr(d,s.hash(b)));const D=s.watcher(t,b,T);return()=>{h.clear(),D()}},onAction:()=>s.setCurrent(t,b)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:c=>c(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},fj=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:pP,hash:s=>gZ(s,["fixed","relative","empty"]).getOr(s),display:Jt,watcher:(s,a,c)=>s.formatter.formatChanged("lineheight",c,!1,{value:a}).unbind,getCurrent:s=>N.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Ic(t),onMenuSetup:Ic(t)}),u$=t=>N.from(nP(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ne(a),hash:c=>Lt(c.customCode)?c.code:`${c.code}/${c.customCode}`,display:c=>c.title,watcher:(c,d,h)=>{var b;return c.formatter.formatChanged("lang",h,!1,{value:d.code,customValue:(b=d.customCode)!==null&&b!==void 0?b:null}).unbind},getCurrent:c=>{const d=_e.fromDom(c.selection.getNode());return yl(d,h=>N.some(h).filter(xo).bind(b=>Dr(b,"lang").map(T=>{const D=Dr(b,"data-mce-lang").getOrUndefined();return{code:T,customCode:D,title:""}})))},setCurrent:(c,d)=>c.execCommand("Lang",!1,d),onToolbarSetup:c=>{const d=pa();return c.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",c.setActive,!0)),F_(d.clear,Ic(t)(c))},onMenuSetup:Ic(t)})),d$=t=>{l$(t,fj(t)),u$(t).each(s=>l$(t,s))},f$=(t,s)=>{i1(t,s),mZ(t,s),IF(t,s),cZ(t,s),kZ(t,s)},m$=t=>Tb(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),mj=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:m$(t),onAction:iu(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Ic(t),onAction:iu(t,"indent")})},h$=t=>{mj(t)},xR=(t,s)=>a=>{a.setActive(s.get());const c=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",c),F_(()=>t.off("PastePlainTextToggle",c),Ic(t)(a))},hj=t=>{const s=mn(kO(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:xR(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:xR(t,s)})},g$=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},gj=t=>{Fg.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:$_(t,s.name),onAction:g$(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,c=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:$_(t,a),onAction:g$(t,a),shortcut:c})}},pj=t=>{Fg.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:iu(t,s.action),shortcut:s.shortcut})}),Fg.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Ic(t),onAction:iu(t,s.action)})})},bj=t=>{Fg.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:iu(t,s.action),onSetup:$_(t,s.name)})})},vj=t=>{gj(t),pj(t),bj(t)},yj=t=>{Fg.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:iu(t,s.action)})}),Fg.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Ic(t),onAction:iu(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Ic(t),onAction:g$(t,"code")})},wj=t=>{vj(t),yj(t)},jT=(t,s)=>Tb(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),Cj=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:jT(t,"hasUndo"),onAction:iu(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:jT(t,"hasRedo"),onAction:iu(t,"redo")})},Sj=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:jT(t,"hasUndo"),onAction:iu(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:jT(t,"hasRedo"),onAction:iu(t,"redo"),shortcut:"Meta+Y"})},xj=t=>{Cj(t),Sj(t)},Ej=t=>Tb(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),_j=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:Ej(t),onAction:iu(t,"mceToggleVisualAid")})},Tj=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:iu(t,"mceToggleVisualAid")})},p$=t=>{Tj(t),_j(t)},kj=(t,s)=>{dj(t),wj(t),f$(t,s),xj(t),UH(t),p$(t),h$(t),d$(t),hj(t)},Aj=t=>Z(t)?t.split(/[ ,]/):t,b$=t=>s=>s.options.get(t),Oj=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:Z(a)||Nt(a,Z)?{value:Aj(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},v$=b$("contextmenu_never_use_native"),Dj=b$("contextmenu_avoid_overlap"),Rj=t=>y$(t).length===0,y$=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:uo(a,c=>po(s,c))},wS=(t,s)=>({type:"makeshift",x:t,y:s}),ER=(t,s,a)=>wS(t.x+s,t.y+a),w$=t=>t.type==="longpress"||t.type.indexOf("touch")===0,Mj=t=>{if(w$(t)){const s=t.touches[0];return wS(s.pageX,s.pageY)}else return wS(t.pageX,t.pageY)},_R=t=>{if(w$(t)){const s=t.touches[0];return wS(s.clientX,s.clientY)}else return wS(t.clientX,t.clientY)},C$=(t,s)=>{const a=ub.DOM.getPos(t);return ER(s,a.x,a.y)},S$=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?Mj(s):C$(t.getContentAreaContainer(),_R(s)):x$(t),x$=t=>({type:"selection",root:_e.fromDom(t.selection.getNode())}),Nj=t=>({type:"node",node:N.some(_e.fromDom(t.selection.getNode())),root:_e.fromDom(t.getBody())}),E$=(t,s,a)=>{switch(a){case"node":return Nj(t);case"point":return S$(t,s);case"selection":return x$(t)}},Pj=(t,s,a,c,d,h)=>{const b=a(),x=E$(t,s,h);cy(b,df.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:N.none()}).map(T=>{s.preventDefault(),nr.showMenuAt(d,{anchor:x},{menu:{markers:vb("normal")},data:T})})},Bj={onLtr:()=>[Ca,ya,Pr,us,xi,wa,cu,fy,dy,bT,eS,pT],onRtl:()=>[Ca,Pr,ya,xi,us,wa,cu,fy,eS,pT,dy,bT]},TR=12,Ij={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},_$=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const c=s.touches[0],d=a.getRng();return la(t.getWin(),th.domRange(d)).exists(b=>b.left<=c.clientX&&b.right>=c.clientX&&b.top<=c.clientY&&b.bottom>=c.clientY)}},Lj=t=>{const s=t.selection.getRng(),a=()=>{F0.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),h()};t.once("touchend",a);const c=b=>{b.preventDefault(),b.stopImmediatePropagation()};t.on("mousedown",c,!0);const d=()=>h();t.once("longpresscancel",d);const h=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",c)}},Fj=(t,s,a)=>{const c=E$(t,s,a);return{bubble:Pu(0,a==="point"?TR:0,Ij),layouts:Bj,overrides:{maxWidthFunction:gy(),maxHeightFunction:bp()},...c}},kR=(t,s,a,c,d,h,b)=>{const x=Fj(t,s,h);cy(a,df.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!0,search:N.none()}).map(T=>{s.preventDefault();const D=b?Zr.HighlightMenuAndItem:Zr.HighlightNone;nr.showMenuWithinBounds(d,{anchor:x},{menu:{markers:vb("normal"),highlightOnOpen:D},data:T,type:"horizontal"},()=>N.some(n$(t,c.shared,h==="node"?"node":"selection"))),t.dispatch(JF)})},$j=(t,s,a,c,d,h)=>{const b=ro(),x=b.os.isiOS(),T=b.os.isMacOS(),D=b.os.isAndroid(),P=b.deviceType.isTouch(),$=()=>!(D||x||T&&P),G=()=>{const Y=a();kR(t,s,Y,c,d,h,$())};if((T||x)&&h!=="node"){const Y=()=>{Lj(t),G()};_$(t,s)?Y():(t.once("selectionchange",Y),t.once("touchend",()=>t.off("selectionchange",Y)))}else G()},AR=t=>Z(t)?t==="|":t.type==="separator",OR={type:"separator"},T$=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Z(t))return t;switch(t.type){case"separator":return OR;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const c=t.getSubmenuItems();return Z(c)?c:tt(c,T$)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Ke(a.onAction)}}},qT=(t,s)=>{if(s.length===0)return t;const c=Xa(t).filter(d=>!AR(d)).fold(()=>[],d=>[OR]);return t.concat(c).concat(s).concat([OR])},Hj=(t,s,a)=>{const c=Ho(s,(d,h)=>kt(t,h.toLowerCase()).map(b=>{const x=b.update(a);if(Z(x)&&pe(Tr(x)))return qT(d,x.split(" "));if(de(x)&&x.length>0){const T=tt(x,T$);return qT(d,T)}else return d}).getOrThunk(()=>d.concat([h])),[]);return c.length>0&&AR(c[c.length-1])&&c.pop(),c},Vj=(t,s)=>s.ctrlKey&&!v$(t),zj=t=>t.type==="longpress"||po(t,"touches"),k$=(t,s)=>!zj(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),A$=(t,s)=>k$(t,s)?t.selection.getStart(!0):s.target,O$=(t,s)=>{const a=Dj(t),c=k$(t,s)?"selection":"point";if(pe(a)){const d=A$(t,s);return C2(_e.fromDom(d),a)?"node":c}else return c},Uj=(t,s,a)=>{const d=ro().deviceType.isTouch,h=$i(nr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:xt([no("dismissContextMenu",[it(Om(),(T,D)=>{Do.close(T),t.focus()})])])})),b=()=>nr.hide(h),x=T=>{if(v$(t)&&T.preventDefault(),Vj(t,T)||Rj(t))return;const D=O$(t,T),P=()=>{const G=A$(t,T),Y=t.ui.registry.getAll(),se=y$(t);return Hj(Y.contextMenus,se,G)};(d()?$j:Pj)(t,T,P,a,h,D)};t.on("init",()=>{const T="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(T,b),t.on("longpress contextmenu",x)})},DR=te.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),GT=t=>s=>s.translate(-t.left,-t.top),KT=t=>s=>s.translate(t.left,t.top),Hg=t=>(s,a)=>Ho(t,(c,d)=>d(c),Js(s,a)),YT=(t,s,a)=>t.fold(Hg([KT(a),GT(s)]),Hg([GT(s)]),Hg([])),xy=(t,s,a)=>t.fold(Hg([KT(a)]),Hg([]),Hg([KT(s)])),D$=(t,s,a)=>t.fold(Hg([]),Hg([GT(a)]),Hg([KT(s),GT(a)])),R$=(t,s,a,c,d,h)=>{const b=xy(t,d,h),x=xy(s,d,h);return Math.abs(b.left-x.left)<=a&&Math.abs(b.top-x.top)<=c},Wj=(t,s,a,c,d,h)=>{const b=xy(t,d,h),x=xy(s,d,h),T=Math.abs(b.left-x.left),D=Math.abs(b.top-x.top);return Js(T,D)},RR=(t,s,a)=>{const c=t.fold((d,h)=>({position:N.some("absolute"),left:N.some(d+"px"),top:N.some(h+"px")}),(d,h)=>({position:N.some("absolute"),left:N.some(d-a.left+"px"),top:N.some(h-a.top+"px")}),(d,h)=>({position:N.some("fixed"),left:N.some(d+"px"),top:N.some(h+"px")}));return{right:N.none(),bottom:N.none(),...c}},Zj=(t,s,a)=>t.fold((c,d)=>XT(c+s,d+a),(c,d)=>Ku(c+s,d+a),(c,d)=>c1(c+s,d+a)),MR=(t,s,a,c)=>{const d=(h,b)=>(x,T)=>{const D=h(s,a,c);return b(x.getOr(D.left),T.getOr(D.top))};return t.fold(d(D$,XT),d(xy,Ku),d(YT,c1))},XT=DR.offset,Ku=DR.absolute,c1=DR.fixed,M$=(t,s)=>{const a=pn(t,s);return Lt(a)?NaN:parseInt(a,10)},jj=(t,s)=>{const a=t.element,c=M$(a,s.leftAttr),d=M$(a,s.topAttr);return isNaN(c)||isNaN(d)?N.none():N.some(Js(c,d))},qj=(t,s,a)=>{const c=t.element;qt(c,s.leftAttr,a.left+"px"),qt(c,s.topAttr,a.top+"px")},Gj=(t,s)=>{const a=t.element;H(a,s.leftAttr),H(a,s.topAttr)},N$=(t,s,a,c)=>jj(t,s).fold(()=>a,d=>c1(d.left+c.left,d.top+c.top)),Kj=(t,s,a,c,d,h)=>{const b=N$(t,s,a,c),x=s.mustSnap?Xj(t,s,b,d,h):Jj(t,s,b,d,h),T=YT(b,d,h);return qj(t,s,T),x.fold(()=>({coord:c1(T.left,T.top),extra:N.none()}),D=>({coord:D.output,extra:D.extra}))},Yj=(t,s)=>{Gj(t,s)},P$=(t,s,a,c)=>bs(t,d=>{const h=d.sensor;return R$(s,h,d.range.left,d.range.top,a,c)?N.some({output:MR(d.output,s,a,c),extra:d.extra}):N.none()}),Xj=(t,s,a,c,d)=>{const h=s.getSnapPoints(t);return P$(h,a,c,d).orThunk(()=>Ho(h,(T,D)=>{const P=D.sensor,$=Wj(a,P,D.range.left,D.range.top,c,d);return T.deltas.fold(()=>({deltas:N.some($),snap:N.some(D)}),G=>{const Y=($.left+$.top)/2,se=(G.left+G.top)/2;return Y<=se?{deltas:N.some($),snap:N.some(D)}:T})},{deltas:N.none(),snap:N.none()}).snap.map(T=>({output:MR(T.output,a,c,d),extra:T.extra})))},Jj=(t,s,a,c,d)=>{const h=s.getSnapPoints(t);return P$(h,a,c,d)},Qj=(t,s,a)=>({coord:MR(t.output,t.output,s,a),extra:t.extra});var eq=Object.freeze({__proto__:null,snapTo:(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=ma(t.element),b=ai(h),x=rw(d),T=Qj(c,b,x),D=RR(T.coord,b,x);Ss(d,D)}}});const NR="data-initial-z-index",tq=t=>{Ia(t.element).filter(xo).each(s=>{Dr(s,NR).fold(()=>Xn(s,"z-index"),a=>lt(s,"z-index",a)),H(s,NR)})},B$=t=>{Ia(t.element).filter(xo).each(s=>{Os(s,"z-index").each(a=>{qt(s,NR,a)}),lt(s,"z-index",rs(t.element,"z-index"))})},PR=(t,s)=>{t.getSystem().addToGui(s),B$(s)},nq=t=>{tq(t),t.getSystem().removeFromGui(t)},Ey=(t,s,a)=>t.getSystem().build(rm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var oq=Bs("snaps",[rt("getSnapPoints"),ko("onSensor"),rt("leftAttr"),rt("topAttr"),Be("lazyViewport",Ur),Be("mustSnap",!1)]);const BR=[Be("useFixed",Me),rt("blockerClass"),Be("getTarget",Jt),Be("onDrag",ce),Be("repositionTarget",!0),Be("onDrop",ce),fr("getBounds",Ur),oq],IR=t=>Di(Os(t,"left"),Os(t,"top"),Os(t,"position"),(s,a,c)=>(c==="fixed"?c1:XT)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=ga(t);return Ku(s.left,s.top)}),sq=(t,s,a,c,d)=>{const h=d.bounds,b=xy(s,a,c),x=nl(b.left,h.x,h.x+h.width-d.width),T=nl(b.top,h.y,h.y+h.height-d.height),D=Ku(x,T);return s.fold(()=>{const P=D$(D,a,c);return XT(P.left,P.top)},ne(D),()=>{const P=YT(D,a,c);return c1(P.left,P.top)})},rq=(t,s,a,c,d,h,b)=>{const x=s.fold(()=>{const T=Zj(a,h.left,h.top),D=YT(T,c,d);return c1(D.left,D.top)},T=>{const D=Kj(t,T,a,h,c,d);return D.extra.each(P=>{T.onSensor(t,P)}),D.coord});return sq(t,x,c,d,b)},aq=(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=ma(t.element),b=ai(h),x=rw(d),T=IR(d),D=rq(t,s.snaps,T,b,x,c,a),P=RR(D,b,x);Ss(d,P)}s.onDrag(t,d,c)},I$=(t,s)=>({bounds:t.getBounds(),height:ml(s.element),width:yo(s.element)}),LR=(t,s,a,c,d)=>{const h=a.update(c,d),b=a.getStartData().getOrThunk(()=>I$(s,t));h.each(x=>{aq(t,s,b,x)})},L$=(t,s,a,c)=>{s.each(nq),a.snaps.each(h=>{Yj(t,h)});const d=a.getTarget(t.element);c.reset(),a.onDrop(t,d)},FR=t=>(s,a)=>{const c=d=>{a.setStartData(I$(s,d))};return Fs([it(Yh(),d=>{a.getStartData().each(()=>c(d))}),...t(s,a,c)])},iq=t=>Fs([it(Er(),t.forceDrop),it(Ff(),t.drop),it(tp(),(s,a)=>{t.move(a.event)}),it(Lf(),t.delayDrop)]);var cq=Object.freeze({__proto__:null,getData:t=>N.from(Js(t.x,t.y)),getDelta:(t,s)=>Js(s.left-t.left,s.top-t.top)});const F$=(t,s,a)=>[it(Er(),(c,d)=>{if(d.event.raw.button!==0)return;d.stop();const b=()=>L$(c,N.some(D),t,s),x=iI(b,200),T={drop:b,delayDrop:x.schedule,forceDrop:b,move:$=>{x.cancel(),LR(c,t,s,cq,$)}},D=Ey(c,t.blockerClass,iq(T));(()=>{a(c),PR(c,D)})()})],lq=[...BR,ys("dragger",{handlers:FR(F$)})],uq=t=>Fs([it(Yl(),t.forceDrop),it(Ms(),t.drop),it(Ii(),t.drop),it(No(),(s,a)=>{t.move(a.event)})]),dq=t=>{const s=t[0];return N.some(Js(s.clientX,s.clientY))};var CS=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?dq(a):N.none()},getDelta:(t,s)=>Js(s.left-t.left,s.top-t.top)});const $$=(t,s,a)=>{const c=ts(),d=h=>{L$(h,c.get(),t,s),c.clear()};return[it(Yl(),(h,b)=>{b.stop();const x=()=>d(h),T={drop:x,delayDrop:ce,forceDrop:x,move:$=>{LR(h,t,s,CS,$)}},D=Ey(h,t.blockerClass,uq(T));c.set(D),(()=>{a(h),PR(h,D)})()}),it(No(),(h,b)=>{b.stop(),LR(h,t,s,CS,b.event)}),it(Ms(),(h,b)=>{b.stop(),d(h)}),it(Ii(),d)]},fq=[...BR,ys("dragger",{handlers:FR($$)})],mq=(t,s,a)=>[...F$(t,s,a),...$$(t,s,a)],hq=[...BR,ys("dragger",{handlers:FR(mq)})];var pq=Object.freeze({__proto__:null,mouse:lq,touch:fq,mouseOrTouch:hq}),bq=Object.freeze({__proto__:null,init:()=>{let t=N.none(),s=N.none();const a=()=>{t=N.none(),s=N.none()},c=(T,D)=>{const P=t.map($=>T.getDelta($,D));return t=N.some(D),P},d=(T,D)=>T.getData(D).bind(P=>c(T,P)),h=T=>{s=N.some(T)},b=()=>s,x=ne({});return Xc({readState:x,reset:a,update:d,getStartData:b,setStartData:h})}});const Fb=YS({branchKey:"mode",branches:pq,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:N.from(t.extra)})},state:bq,apis:eq}),$R=40,_y=$R/2,HR=(t,s,a,c,d,h)=>t.fold(()=>Fb.snap({sensor:Ku(a-_y,c-_y),range:Js(d,h),output:Ku(N.some(a),N.some(c)),extra:{td:s}}),b=>{const x=a-_y,T=c-_y,D=$R,P=$R,$=b.element.dom.getBoundingClientRect();return Fb.snap({sensor:Ku(x,T),range:Js(D,P),output:Ku(N.some(a-$.width/2),N.some(c-$.height/2)),extra:{td:s}})}),H$=(t,s,a)=>{const c=(d,h)=>d.exists(b=>Uo(b,h));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,h)=>{const b=h.td;c(s.get(),b)||(s.set(b),a(b))},mustSnap:!0}},V$=t=>Jo(Vi.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:xt([Fb.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),sy.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),vq=(t,s)=>{const a=mn([]),c=mn([]),d=mn(!1),h=ts(),b=ts(),x=Xt=>{const Qe=tc(Xt);return HR(Y.getOpt(s),Xt,Qe.x,Qe.y,Qe.width,Qe.height)},T=()=>tt(a.get(),Xt=>x(Xt)),D=Xt=>{const Qe=tc(Xt);return HR(se.getOpt(s),Xt,Qe.right,Qe.bottom,Qe.width,Qe.height)},P=()=>tt(c.get(),Xt=>D(Xt)),$=H$(T,h,Xt=>{b.get().each(Qe=>{t.dispatch("TableSelectorChange",{start:Xt,finish:Qe})})}),G=H$(P,b,Xt=>{h.get().each(Qe=>{t.dispatch("TableSelectorChange",{start:Qe,finish:Xt})})}),Y=V$($),se=V$(G),le=$i(Y.asSpec()),Ne=$i(se.asSpec()),ge=(Xt,Qe,cn,It)=>{const fn=Qe.dom.getBoundingClientRect();Xn(Xt.element,"display");const bo=Da(_e.fromDom(t.getBody())).dom.innerHeight,Us=cn(fn),jo=It(fn,bo);(Us||jo)&&lt(Xt.element,"display","none")},ke=(Xt,Qe,cn,It)=>{const fn=cn(Qe);Fb.snapTo(Xt,fn),ge(Xt,Qe,jo=>jo[It]<0,(jo,un)=>jo[It]>un)},Ae=Xt=>ke(le,Xt,x,"top"),st=()=>h.get().each(Ae),je=Xt=>ke(Ne,Xt,D,"bottom"),$t=()=>b.get().each(je);if(ro().deviceType.isTouch()){const Xt=Qe=>tt(Qe,_e.fromDom);t.on("TableSelectionChange",Qe=>{d.get()||(Bu(s,le),Bu(s,Ne),d.set(!0));const cn=_e.fromDom(Qe.start),It=_e.fromDom(Qe.finish);h.set(cn),b.set(It),N.from(Qe.otherCells).each(fn=>{a.set(Xt(fn.upOrLeftCells)),c.set(Xt(fn.downOrRightCells)),Ae(cn),je(It)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{st(),$t()}),t.on("TableSelectionClear",()=>{d.get()&&(Yf(le),Yf(Ne),d.set(!1)),h.clear(),b.clear()})}};var yq=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const wq=(t,s)=>{const a=N.from(pn(t,"id")).getOrThunk(()=>{const c=tn("aria");return qt(s,"id",c),c});qt(t,"aria-describedby",a)},Cq=t=>{H(t,"aria-describedby")},Sq=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",xq=(t,s,a)=>{var c;const d=(c=s.delimiter)!==null&&c!==void 0?c:"",h=(D,P,$)=>Vi.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":$}},components:[hr(D)],action:G=>{t.focus(),t.selection.select(P),t.nodeChanged()},buttonBehaviours:xt([Ir.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",P.nodeName.toLowerCase()]),onShow:(G,Y)=>{wq(G.element,Y.element)},onHide:G=>{Cq(G.element)}})}),mf.button(a.isDisabled),Ga()])}),b=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[hr(` ${d} `)]}),x=D=>Ho(D,(P,$,G)=>{const Y=h($.name,$.element,G);return G===0?P.concat([Y]):P.concat([b(),Y])},[]),T=D=>{const P=[];let $=D.length;for(;$-- >0;){const G=D[$];if(G.nodeType===1&&!Sq(G)){const Y=OH(t,G);if(Y.isDefaultPrevented()||P.push({name:Y.name,element:G}),Y.isPropagationStopped())break}}return P};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:xt([En.config({mode:"flow",selector:"div[role=button]"}),l.config({disabled:a.isDisabled}),Ga(),Vs.config({}),Vn.config({}),no("elementPathEvents",[Gs((D,P)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>En.focusIn(D)),t.on("NodeChange",$=>{const G=T($.parents),Y=G.length>0?x(G):[];Vn.set(D,Y)})})])]),components:[]}};var l1;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(l1||(l1={}));const Eq=(t,s,a,c,d)=>{const h={height:VT(c+s.top,$0(t),e_(t))};return a===l1.Both&&(h.width=VT(d+s.left,mb(t),WC(t))),h},z$=(t,s,a)=>{const c=_e.fromDom(t.getContainer()),d=Eq(t,s,a,xs(c),La(c));Cs(d,(h,b)=>{dn(h)&&lt(c,b,HT(h))}),I_(t)},_q=t=>{const s=mP(t);return s===!1?l1.None:s==="both"?l1.Both:l1.Vertical},JT=(t,s,a,c)=>{const h=Js(a*20,c*20);return z$(t,h,s),N.some(!0)},Tq=(t,s)=>{const a=_q(t);if(a===l1.None)return N.none();const c=a===l1.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return N.some(Vu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(c),"data-mce-name":"resize-handle"},behaviours:[Fb.config({mode:"mouse",repositionTarget:!1,onDrag:(d,h,b)=>z$(t,b,a),blockerClass:"tox-blocker"}),En.config({mode:"special",onLeft:()=>JT(t,a,-1,0),onRight:()=>JT(t,a,1,0),onUp:()=>JT(t,a,0,-1),onDown:()=>JT(t,a,0,1)}),Vs.config({}),Ln.config({}),Ir.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},U$=(t,s)=>{const a=(c,d,h)=>Vn.set(c,[hr(s.translate(["{0} "+h,d[h]]))]);return Vi.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:xt([mf.button(s.isDisabled),Ga(),Vs.config({}),Vn.config({}),Yt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),no("wordcount-events",[Ru(c=>{const d=Yt.getValue(c),h=d.mode==="words"?"characters":"words";Yt.setValue(c,{mode:h,count:d.count}),a(c,d.count,h)}),Gs(c=>{t.on("wordCountUpdate",d=>{const{mode:h}=Yt.getValue(c);Yt.setValue(c,{mode:h,count:d.wordCount}),a(c,d.wordCount,h)})})])]),eventOrder:{[Jl()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},kq=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",yq.trim()])},behaviours:xt([Ln.config({})])}]}),c=()=>{const x=M_("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[hr(Hu.translate(["Press {0} for help",x]))]}},d=()=>{const x=[];return t.hasPlugin("wordcount")&&x.push(U$(t,s)),TO(t)&&x.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:x}},h=()=>{const x=[],T=qC(t),D=fP(t),P=TO(t)||t.hasPlugin("wordcount"),$=()=>{const G="tox-statusbar__text-container--flex-start",Y="tox-statusbar__text-container--flex-end",se="tox-statusbar__text-container--space-around";if(T){const le="tox-statusbar__text-container-3-cols";return!P&&!D?[le,se]:P&&!D?[le,Y]:[le,G]}return[P&&!D?Y:G]};return D&&x.push(xq(t,{},s)),T&&x.push(c()),P&&x.push(d()),x.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...$()]},components:x}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const x=h(),T=Tq(t,s);return x.concat(T.toArray())})()}},W$=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),Aq=(t,s)=>{const a=t.inline,c=a?XZ:$T,d=gb(t)?sW:w5,h=JZ(),b=ts(),x=ts(),T=ts(),G=ro().deviceType.isTouch()?["tox-platform-touch"]:[],Y=YC(t),se=hb(t),le=Jo({dom:{tag:"div",classes:["tox-anchorbar"]}}),Ne=Jo({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),ge=()=>h.mainUi.get().map(xn=>xn.outerContainer).bind(zs.getHeader),ke=()=>Yn.fromOption(h.dialogUi.get().map(xn=>xn.sink),"UI has not been rendered"),Ae=()=>Yn.fromOption(h.popupUi.get().map(xn=>xn.sink),"(popup) UI has not been rendered"),st=h.lazyGetInOuterOrDie("anchor bar",le.getOpt),je=h.lazyGetInOuterOrDie("bottom anchor bar",Ne.getOpt),$t=h.lazyGetInOuterOrDie("toolbar",zs.getToolbar),Xt=h.lazyGetInOuterOrDie("throbber",zs.getThrobber),Qe=p5({popup:Ae,dialog:ke},t,st,je),cn=()=>{const xn={attributes:{[Yw]:Y?xl.BottomToTop:xl.TopToBottom}},Gn=zs.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Qe.popup,onEscape:()=>{t.focus()}}),ks=zs.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Qe.popup.shared.getSink,providers:Qe.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Zb=>{DH(t,Zb)},type:se,lazyToolbar:$t,lazyHeader:()=>ge().getOrDie("Could not find header element"),...xn}),Qo=zs.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Qe.popup.shared.providers,onEscape:()=>{t.focus()},type:se}),bc=KC(t),Ju=GC(t),fm=r_(t),Xi=hP(t),Qu=It(),Id=bc||Ju||fm,Il=()=>bc?[Qo]:Ju?[ks]:[],Ch=Xi?[Qu,Gn]:[Gn];return zs.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Id?[]:["tox-editor-header--empty"]),...xn},components:dt([fm?Ch:[],Il(),H0(t)?[]:[le.asSpec()]]),sticky:gb(t),editor:t,sharedBackstage:Qe.popup.shared})},It=()=>zs.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),fn=()=>{const xn=zs.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Gn=zs.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[xn,Gn]}},bo=()=>{const xn=RO(t),Gn=Uo(io(),xn)&&rs(xn,"display")==="grid",ks={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(G),attributes:{...Hu.isRtl()?{dir:"rtl"}:{}}},behaviours:xt([Hi.config({useFixed:()=>d.isDocked(ge)})])},Qo={dom:{styles:{width:document.body.clientWidth+"px"}},events:Fs([it(md(),fm=>{lt(fm.element,"width",document.body.clientWidth+"px")})])},bc=$i(Ds(ks,Gn?Qo:{})),Ju=_2(bc);return x.set(Ju),{sink:bc,mothership:Ju}},Us=()=>{const xn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(G),attributes:{...Hu.isRtl()?{dir:"rtl"}:{}}},behaviours:xt([Hi.config({useFixed:()=>d.isDocked(ge),getBounds:()=>s.getPopupSinkBounds()})])},Gn=$i(xn),ks=_2(Gn);return T.set(ks),{sink:Gn,mothership:ks}},jo=()=>{const xn=cn(),Gn=fn(),ks=zs.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Qe.popup}),Qo=zs.parts.viewWrapper({backstage:Qe.popup}),bc=dP(t)&&!a?N.some(kq(t,Qe.popup.shared.providers)):N.none(),Ju=dt([Y?[]:[xn],a?[]:[Gn],Y?[xn]:[]]),fm=zs.parts.editorContainer({components:dt([Ju,a?[]:[Ne.asSpec()]])}),Xi=XC(t),Qu={role:"application",...Hu.isRtl()?{dir:"rtl"}:{},...Xi?{"aria-hidden":"true"}:{}},Id=$i(zs.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(Y?["tox-tinymce--toolbar-bottom"]:[]).concat(G),styles:{visibility:"hidden",...Xi?{opacity:"0",border:"0"}:{}},attributes:Qu},components:[fm,...a?[]:[Qo,...bc.toArray()],ks],behaviours:xt([Ga(),l.config({disableClass:"tox-tinymce--disabled"}),En.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Il=_2(Id);return b.set(Il),{mothership:Il,outerContainer:Id}},un=xn=>{const Gn=HT(qZ(t)),ks=HT(GZ(t));return t.inline||(ni("div","width",ks)&&lt(xn.element,"width",ks),ni("div","height",Gn)?lt(xn.element,"height",Gn):lt(xn.element,"height","400px")),Gn},gt=xn=>{t.addShortcut("alt+F9","focus menubar",()=>{zs.focusMenubar(xn)}),t.addShortcut("alt+F10","focus toolbar",()=>{zs.focusToolbar(xn)}),t.addCommand("ToggleToolbarDrawer",(Gn,ks)=>{ks!=null&&ks.skipFocus?zs.toggleToolbarDrawerWithoutFocusing(xn):zs.toggleToolbarDrawer(xn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>zs.isToolbarDrawerToggled(xn))},Ht=xn=>{const{mainUi:Gn,popupUi:ks,uiMotherships:Qo}=xn;Vo(xO(t),(My,ak)=>{t.ui.registry.addGroupToolbarButton(ak,My)});const{buttons:bc,menuItems:Ju,contextToolbars:fm,sidebars:Xi,views:Qu}=t.ui.registry.getAll(),Id=DO(t),Il={menuItems:Ju,menus:bP(t),menubar:aP(t),toolbar:Id.getOrThunk(()=>jC(t)),allowToolbarGroups:se===Cd.floating,buttons:bc,sidebar:Xi,views:Qu};gt(Gn.outerContainer),b5(t,Gn.mothership,Qo),d.setup(t,Qe.popup.shared,ge),kj(t,Qe.popup),Uj(t,Qe.popup.shared.getSink,Qe.popup),z3(t),CW(t,Xt,Qe.popup.shared),uj(t,fm,ks.sink,{backstage:Qe.popup}),vq(t,ks.sink);const Ch=t.getElement(),Zb=un(Gn.outerContainer),nM={targetNode:Ch,height:Zb};return c.render(t,xn,Il,Qe.popup,nM)},Fn=xn=>(T.set(xn.mothership),xn),Rn=()=>{const xn=jo(),Gn=bo(),ks=Hp(t)?Us():Fn(Gn);h.dialogUi.set(Gn),h.popupUi.set(ks),h.mainUi.set(xn);const Qo={popupUi:ks,dialogUi:Gn,mainUi:xn,uiMotherships:h.getUiMotherships()};return Ht(Qo)};return{popups:{backstage:Qe.popup,getMothership:()=>W$("popups",T)},dialogs:{backstage:Qe.dialog,getMothership:()=>W$("dialogs",x)},renderUI:Rn}},Oq=t=>t.dom.textContent,Dq=(t,s)=>{const a=Dr(t,"id").fold(()=>{const c=tn("dialog-label");return qt(s,"id",c),c},Jt);qt(t,"aria-labelledby",a)},Rq=ne([rt("lazySink"),Bo("dragBlockClass"),fr("getBounds",Ur),Be("useTabstopAt",Pe),Be("firstTabstop",0),Be("eventOrder",{}),Za("modalBehaviours",[En]),Mc("onExecute"),gv("onEscape")]),VR={sketch:Jt},Mq=ne([Tl({name:"draghandle",overrides:(t,s)=>({behaviours:xt([Fb.config({mode:"mouse",getTarget:a=>qm(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Ti({schema:[rt("dom")],name:"title"}),Ti({factory:VR,schema:[rt("dom")],name:"close"}),Ti({factory:VR,schema:[rt("dom")],name:"body"}),Tl({factory:VR,schema:[rt("dom")],name:"footer"}),ru({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Be("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Be("components",[])],name:"blocker"})]),Z$=(t,s,a,c)=>{const d=ts(),h=se=>{d.set(se);const le=t.lazySink(se).getOrDie(),Ne=c.blocker(),ge=le.getSystem().build({...Ne,components:Ne.components.concat([Cl(se)]),behaviours:xt([Ln.config({}),no("dialog-blocker-events",[op(ld(),()=>{bf.isBlocked(se)?ce():En.focusIn(se)})])])});Bu(le,ge),En.focusIn(se)},b=se=>{d.clear(),Ia(se.element).each(le=>{se.getSystem().getByDom(le).each(Ne=>{Yf(Ne)})})},x=se=>kl(se,t,"body"),T=se=>bt(se,t,"footer"),D=(se,le)=>{bf.block(se,le)},P=se=>{bf.unblock(se)},$=tn("modal-events"),G={...t.eventOrder,[sc()]:[$].concat(t.eventOrder["alloy.system.attached"]||[])},Y=ro();return{uid:t.uid,dom:t.dom,components:s,apis:{show:h,hide:b,getBody:x,getFooter:T,setIdle:P,setBusy:D},eventOrder:G,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:ja(t.modalBehaviours,[Vn.config({}),En.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),bf.config({getRoot:d.get}),no($,[Gs(se=>{const le=kl(se,t,"title").element,Ne=Oq(le);Y.os.isMacOS()&&Ct(Ne)?qt(se.element,"aria-label",Ne):Dq(se.element,le)})])])}},Na=Ki({name:"ModalDialog",configFields:Rq(),partFields:Mq(),factory:Z$,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),$b=On([Qr,T_].concat(Wp)),Nq=qc,SS=[pD("button"),Ed,Dc("align","end",["start","end"]),Z0,_d,Jg("buttonType",["primary","secondary"])],xS=[...SS,Mg],zR=[wi("type",["submit","cancel","custom"]),...xS],Pq=[wi("type",["menu"]),Ng,W0,Ed,Ac("items",$b),...SS],Bq=[...SS,wi("type",["togglebutton"]),W0,Ed,Ng,Mr("active",!1)],Iq=ba("type",{submit:zR,cancel:zR,custom:zR,menu:Pq,togglebutton:Bq}),Lq=[Qr,Mg,wi("level",["info","warn","error","success"]),qP,Be("url","")],Hb=On(Lq),j$=t=>[Qr,t],Fq=[Qr,Mg,_d,pD("button"),Ed,tH,Jg("buttonType",["primary","secondary","toolbar"]),Z0],$q=On(Fq),Ty=[Qr,T_],um=Ty.concat([k_]),Hq=Ty.concat([mD,_d]),Vq=On(Hq),zq=qc,Uq=um.concat([KP("auto")]),UR=On(Uq),ES=p1([c2,Mg,qP]),WR=um.concat([Ci("storageKey","default")]),QT=On(WR),Vb=Wt,Wq=On(um),q$=Wt,G$=Ty.concat([Ci("tag","textarea"),Jr("scriptId"),Jr("scriptUrl"),ku("onFocus"),zy("settings",void 0)]),K$=Ty.concat([Ci("tag","textarea"),kc("init")]),Zq=jh(t=>ar("customeditor.old",Bi(K$),t).orThunk(()=>ar("customeditor.new",Bi(G$),t))),jq=Wt,Y$=On(um),X$=Pf(),jR=t=>[Qr,qh("columns"),t],qq=[Qr,Jr("html"),Dc("presets","presentation",["presentation","document"]),fr("onInit",ce),Mr("stretched",!1)],Gq=On(qq),Kq=um.concat([Mr("border",!1),Mr("sandboxed",!0),Mr("streamContent",!1),Mr("transparent",!0)]),J$=On(Kq),Yq=Wt,Xq=On(Ty.concat([ca("height")])),Jq=On([Jr("url"),Bf("zoom"),Bf("cachedWidth"),Bf("cachedHeight")]),qR=um.concat([ca("inputMode"),ca("placeholder"),Mr("maximized",!1),_d]),GR=On(qR),Qq=Wt,Q$=t=>[Qr,mD,t,Dc("align","start",["start","center","end"]),ca("for")],eG=[Mg,c2],tG=[Mg,Ac("items",Em("items",()=>KR))],KR=xm([On(eG),On(tG)]),nG=um.concat([Ac("items",KR),_d]),oG=On(nG),zb=Wt,e6=um.concat([nv("items",[Mg,c2]),Tm("size",1),_d]),sG=On(e6),ek=Wt,ky=um.concat([Mr("constrain",!0),_d]),tk=On(ky),YR=On([Jr("width"),Jr("height")]),nk=Ty.concat([mD,Tm("min",0),Tm("max",0)]),Nl=On(nk),ok=Zd,t6=[Qr,Ac("header",Wt),Ac("cells",Tc(Wt))],n6=On(t6),rG=um.concat([ca("placeholder"),Mr("maximized",!1),_d]),aG=On(rG),u1=Wt,iG=[wi("type",["directory","leaf"]),jP,Jr("id"),Tu("menu",T5)],XR=On(iG),Ay=iG.concat([Ac("children",Em("children",()=>jd("type",{directory:_S,leaf:XR})))]),_S=On(Ay),o6=jd("type",{directory:_S,leaf:XR}),cG=[Qr,Ac("items",o6),ku("onLeafAction"),ku("onToggleExpand"),_("defaultExpandedIds",[],Wt),ca("defaultSelectedId")],lG=On(cG),uG=um.concat([Dc("filetype","file",["image","media","file"]),_d,ca("picker_text")]),dG=On(uG),Oy=On([c2,hD]),s6=t=>ia("items","items",Pi(),Tc(jh(s=>ar(`Checking item of ${t}`,JR,s).fold(a=>Yn.error(Gl(a)),a=>Yn.value(a))))),JR=Xr(()=>jd("type",{alertbanner:Hb,bar:On(j$(s6("bar"))),button:$q,checkbox:Vq,colorinput:QT,colorpicker:Wq,dropzone:Y$,grid:On(jR(s6("grid"))),iframe:J$,input:GR,listbox:oG,selectbox:sG,sizeinput:tk,slider:Nl,textarea:aG,urlinput:dG,customeditor:Zq,htmlpanel:Gq,imagepreview:Xq,collection:UR,label:On(Q$(s6("label"))),table:n6,tree:lG,panel:mG})),fG=[Qr,Be("classes",[]),Ac("items",JR)],mG=On(fG),hG=[pD("tab"),jP,Ac("items",JR)],gG=[Qr,nv("tabs",hG)],TS=On(gG),pG=xS,bG=Iq,r6=On([Jr("title"),Fo("body",jd("type",{panel:mG,tabpanel:TS})),Ci("size","normal"),_("buttons",[],bG),Be("initialData",{}),fr("onAction",ce),fr("onChange",ce),fr("onSubmit",ce),fr("onClose",ce),fr("onCancel",ce),fr("onTabChange",ce)]),vG=t=>ar("dialog",r6,t),$Y=On([wi("type",["cancel","custom"]),...pG]),e=On([Jr("title"),Jr("url"),Bf("height"),Bf("width"),Au("buttons",$Y),fr("onAction",ce),fr("onCancel",ce),fr("onClose",ce),fr("onMessage",ce)]),n=t=>ar("dialog",e,t),o=t=>ie(t)?[t].concat(Se(Vc(t),o)):de(t)?Se(t,o):[],r=t=>Z(t.type)&&Z(t.name),i={checkbox:zq,colorinput:Vb,colorpicker:q$,dropzone:X$,input:Qq,iframe:Yq,imagepreview:Jq,selectbox:ek,sizeinput:YR,slider:ok,listbox:zb,size:YR,textarea:u1,urlinput:Oy,customeditor:jq,collection:ES,togglemenuitem:Nq},u=t=>N.from(i[t.type]),m=t=>uo(o(t),r),y=t=>{const s=m(t),a=Se(s,c=>u(c).fold(()=>[],d=>[Fo(c.name,d)]));return On(a)},S=t=>{var s;const a=pt(vG(t)),c=y(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:c,initialData:d}},O={open:(t,s)=>{const a=S(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=pt(n(s));return t(a)},redial:t=>S(t)};var F=Object.freeze({__proto__:null,events:(t,s)=>{const a=(c,d)=>{t.updateState.each(h=>{const b=h(c,d);s.set(b)}),t.renderComponents.each(h=>{const b=h(d,s.get());(t.reuseDom?B0:P0)(c,b)})};return Fs([it(Xl(),(c,d)=>{const h=d;if(!h.universal){const b=t.channel;eo(h.channels,b)&&a(c,h.data)}}),Gs((c,d)=>{t.initialData.each(h=>{a(c,h)})})])}}),Q=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),re=[rt("channel"),Bo("renderComponents"),Bo("updateState"),Bo("initialData"),Mr("reuseDom",!0)],ue=Object.freeze({__proto__:null,init:()=>{const t=mn(N.none()),s=()=>t.set(N.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const we=li({fields:re,name:"reflecting",active:F,apis:Q,state:ue}),De=t=>{const s=[],a={};return Cs(t,(c,d)=>{c.fold(()=>{s.push(d)},h=>{a[d]=h})}),s.length>0?Yn.error(s):Yn.value(a)},Oe=(t,s,a,c)=>{const d=Jo(Xp.sketch(h=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:tt(t.items,b=>dU(h,b,s,a,c))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:xt([En.config({mode:"acyclic",useTabstopAt:Fe(H2)}),hf.memento(d),WV(d,{postprocess:h=>De(h).fold(b=>(console.error(b),{}),Jt)}),no("dialog-body-panel",[it(ld(),(h,b)=>{h.getSystem().broadcastOn([cT],{newFocus:N.some(b.event.target)})})])])}},$e=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:YE(t.action),behaviours:ja(t.tabButtonBehaviours,[Ln.config({}),En.config({mode:"execution",useSpace:!0,useEnter:!0}),Yt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),ft=il({name:"TabButton",configFields:[Be("uid",void 0),rt("value"),ia("dom","dom",Sm(()=>({attributes:{role:"tab",id:tn("aria"),"aria-selected":"false"}})),bl()),Bo("action"),Be("domModification",{}),Za("tabButtonBehaviours",[Ln,En,Yt]),rt("view")],factory:$e}),Ot=ne([rt("tabs"),rt("dom"),Be("clickToDismiss",!1),Za("tabbarBehaviours",[bn,En]),ig(["tabClass","selectedClass"])]),Kt=k0({factory:ft,name:"tabs",unit:"tab",overrides:t=>{const s=(c,d)=>{bn.dehighlight(c,d),_n(c,ZS(),{tabbar:c,button:d})},a=(c,d)=>{bn.highlight(c,d),_n(c,WS(),{tabbar:c,button:d})};return{action:c=>{const d=c.getSystem().getByUid(t.uid).getOrDie(),h=bn.isHighlighted(d,c);(h&&t.clickToDismiss?s:h?ce:a)(d,c)},domModification:{classes:[t.markers.tabClass]}}}}),Je=ne([Kt]),ze=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:ja(t.tabbarBehaviours,[bn.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,h)=>{qt(h.element,"aria-selected","true")},onDehighlight:(d,h)=>{qt(h.element,"aria-selected","false")}}),En.config({mode:"flow",getInitial:d=>bn.getHighlighted(d).map(h=>h.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),ut=Ki({name:"Tabbar",configFields:Ot(),partFields:Je(),factory:ze}),rn=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:ja(t.tabviewBehaviours,[Vn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),wn=il({name:"Tabview",configFields:[Za("tabviewBehaviours",[Vn])],factory:rn}),go=ne([Be("selectFirst",!0),ko("onChangeTab"),ko("onDismissTab"),Be("tabs",[]),Za("tabSectionBehaviours",[])]),wo=Ti({factory:ut,schema:[rt("dom"),cd("markers",[rt("tabClass"),rt("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),ns=Ti({factory:wn,name:"tabview"}),ps=ne([wo,ns]),Lr=(t,s,a,c)=>{const d=b=>{const x=Yt.getValue(b);bt(b,t,"tabview").each(T=>{et(t.tabs,P=>P.value===x).each(P=>{const $=P.view();Dr(b.element,"id").each(G=>{qt(T.element,"aria-labelledby",G)}),Vn.set(T,$),t.onChangeTab(T,b,$)})})},h=(b,x)=>{bt(b,t,"tabbar").each(T=>{x(T).each(Rm)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:Q1(t.tabSectionBehaviours),events:Fs(dt([t.selectFirst?[Gs((b,x)=>{h(b,bn.getFirst)})]:[],[it(WS(),(b,x)=>{const T=x.event.button;d(T)}),it(ZS(),(b,x)=>{const T=x.event.button;t.onDismissTab(b,T)})]])),apis:{getViewItems:b=>bt(b,t,"tabview").map(x=>Vn.contents(x)).getOr([]),showTab:(b,x)=>{h(b,D=>{const P=bn.getCandidates(D);return et(P,G=>Yt.getValue(G)===x).filter(G=>!bn.isHighlighted(D,G))})}}}},Ea=Ki({name:"TabSection",configFields:go(),partFields:ps(),factory:Lr,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),Ts=(t,s,a)=>tt(t,(c,d)=>{Vn.set(a,t[d].view());const h=s.dom.getBoundingClientRect();return Vn.set(a,[]),h.height}),Bt=t=>Is($r(t,(s,a)=>s>a?-1:s<a?1:0)),vn=(t,s,a)=>{const c=$l(t).dom,d=qm(t,".tox-dialog-wrap").getOr(t),h=rs(d,"position")==="fixed";let b;h?b=Math.max(c.clientHeight,window.innerHeight):b=Math.max(c.offsetHeight,c.scrollHeight);const x=xs(s),D=s.dom.offsetLeft>=a.dom.offsetLeft+La(a)?Math.max(xs(a),x):x,P=parseInt(rs(t,"margin-top"),10)||0,$=parseInt(rs(t,"margin-bottom"),10)||0,Y=xs(t)+P+$-D;return b-Y},$o=(t,s)=>{Is(t).each(a=>Ea.showTab(s,a.value))},zt=(t,s)=>{lt(t,"height",s+"px"),lt(t,"flex-basis",s+"px")},Tn=(t,s,a)=>{qm(t,'[role="dialog"]').each(c=>{tr(c,'[role="tablist"]').each(d=>{a.get().map(h=>(lt(s,"height","0"),lt(s,"flex-basis","0"),Math.min(h,vn(c,s,d)))).each(h=>{zt(s,h)})})})},mo=t=>tr(t,'[role="tabpanel"]'),Gt=t=>{const s=ts();return{extraEvents:[Gs(d=>{const h=d.element;mo(h).each(b=>{lt(b,"visibility","hidden"),d.getSystem().getByDom(b).toOptional().each(x=>{const T=Ts(t,b,x);Bt(T).fold(s.clear,s.set)}),Tn(h,b,s),Xn(b,"visibility"),$o(t,d),requestAnimationFrame(()=>{Tn(h,b,s)})})}),it(md(),d=>{const h=d.element;mo(h).each(b=>{Tn(h,b,s)})}),it(i4,(d,h)=>{const b=d.element;mo(b).each(x=>{const T=vd(vr(x));lt(x,"visibility","hidden");const D=Os(x,"height").map(G=>parseInt(G,10));Xn(x,"height"),Xn(x,"flex-basis");const P=x.dom.getBoundingClientRect().height;D.forall(G=>P>G)?(s.set(P),Tn(b,x,s)):D.each(G=>{zt(x,G)}),Xn(x,"visibility"),T.each(Sl)})})],selectFirst:!1}},ho="send-data-to-section",Co="send-data-to-view",Ya=(t,s,a,c)=>{const d=mn({}),h=P=>{const $=Yt.getValue(P),G=De($).getOr({}),Y=d.get(),se=Ds(Y,G);d.set(se)},b=P=>{const $=d.get();Yt.setValue(P,$)},x=mn(null),T=tt(t.tabs,P=>({value:P.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[hr(a.shared.providers.translate(P.title))],view:()=>[Xp.sketch($=>({dom:{tag:"div",classes:["tox-form"]},components:tt(P.items,G=>dU($,G,s,a,c)),formBehaviours:xt([En.config({mode:"acyclic",useTabstopAt:Fe(H2)}),no("TabView.form.events",[Gs(b),Yd(h)]),Nc.config({channels:Yo([{key:ho,value:{onReceive:h}},{key:Co,value:{onReceive:b}}])})])}))]})),D=Gt(T);return Ea.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(P,$,G)=>{const Y=Yt.getValue($);_n(P,bI,{name:Y,oldName:x.get()}),x.set(Y)},tabs:T,components:[Ea.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[ut.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:xt([Vs.config({})])}),Ea.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:D.selectFirst,tabSectionBehaviours:xt([no("tabpanel",D.extraEvents),En.config({mode:"acyclic"}),Ro.config({find:P=>Is(Ea.getViewItems(P))}),Jp(N.none(),P=>(P.getSystem().broadcastOn([ho],{}),d.get()),(P,$)=>{d.set($),P.getSystem().broadcastOn([Co],{})})])})},is=(t,s,a,c,d,h)=>{const b=D=>{const P=D.body;switch(P.type){case"tabpanel":return[Ya(P,D.initialData,c,h)];default:return[Oe(P,D.initialData,c,h)]}},x=(D,P)=>N.some({isTabPanel:()=>P.body.type==="tabpanel"}),T={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(D=>({id:D})).getOr({}),...d?T:{}}},components:[],behaviours:xt([hf.childAt(0),we.config({channel:`${H4}-${s}`,updateState:x,renderComponents:b,initialData:t})])}},Pa=(t,s,a,c,d,h)=>is(t,s,N.some(a),c,d,h),Rd=(t,s,a,c)=>{const d=is(t,s,N.none(),a,!1,c);return Na.parts.body(d)},dm=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[cL(N.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:xt([Vs.config({}),Ln.config({})])})]}],behaviours:xt([En.config({mode:"acyclic",useTabstopAt:Fe(H2)})])};return Na.parts.body(s)},Fc=db.deviceType.isTouch(),Pl=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),Yu=(t,s)=>Na.parts.close(Vi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:xt([Vs.config({})])})),Bl=()=>Na.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Xu=(t,s)=>Na.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:tm(`<p>${KO(s.translate(t))}</p>`)}]}]}),Cn=t=>Na.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Oo=(t,s)=>[rm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),rm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],cr=t=>{const s="tox-dialog",a=s+"-wrap",c=a+"__backdrop",d=s+"__disable-scroll";return Na.sketch({lazySink:t.lazySink,onEscape:h=>(t.onEscape(h),N.some(!0)),useTabstopAt:h=>!H2(h),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:tm(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:Fc?[c,c+"--opaque"]:[c]}}]}},dragBlockClass:a,modalBehaviours:xt([Ln.config({}),no("dialog-events",t.dialogEvents.concat([op(ld(),(h,b)=>{bf.isBlocked(h)?ce():En.focusIn(h)}),it(Xh(),(h,b)=>{h.getSystem().broadcastOn([cT],{newFocus:b.event.newFocus})})])),no("scroll-lock",[Gs(()=>{$s(io(),d)}),Yd(()=>{mr(io(),d)})]),...t.extraBehaviours]),eventOrder:{[Jl()]:["dialog-events"],[sc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Ql()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},Fr=t=>Vi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:xt([Vs.config({}),Ir.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Vu("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{ao(s,Pg)}}),ua=(t,s,a,c)=>{const d=h=>[hr(c.translate(h.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(h=>({id:h})).getOr({})}},components:[],behaviours:xt([we.config({channel:`${uL}-${s}`,initialData:t,renderComponents:d})])}},mi=()=>({dom:tm('<div class="tox-dialog__draghandle"></div>')}),da=(t,s,a,c)=>rm.sketch({dom:tm('<div class="tox-dialog__header"></div>'),components:[ua(t,s,N.some(a),c),mi(),Fr(c)],containerBehaviours:xt([Fb.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Nu(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),fa=(t,s,a)=>{const c=Na.parts.title(ua(t,s,N.none(),a)),d=Na.parts.draghandle(mi()),h=Na.parts.close(Fr(a)),b=[c].concat(t.draggable?[d]:[]).concat([h]);return rm.sketch({dom:tm('<div class="tox-dialog__header"></div>'),components:b})},pc=(t,s,a)=>fa({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),Md=(t,s,a,c)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${c.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:tm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Nd=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:c=>{const d=tr(t().element,".tox-dialog__header").map(h=>xs(h));Na.setBusy(t(),(h,b)=>Md(c.message,b,s,d))},onUnblock:()=>{Na.setIdle(t())}}),Pd="tox-dialog--fullscreen",lu="tox-dialog--width-lg",bh="tox-dialog--width-md",Vg=t=>{switch(t){case"large":return N.some(lu);case"medium":return N.some(bh);default:return N.none()}},Ub=(t,s)=>{const a=_e.fromDom(s.element.dom);Jc(a,Pd)||(Qc(a,[lu,bh]),Vg(t).each(c=>$s(a,c)))},sk=(t,s)=>{const a=_e.fromDom(t.element.dom),c=kk(a),d=et(c,h=>h===lu||h===bh).or(Vg(s));Ek(a,[Pd,...d.toArray()])},vh=(t,s,a)=>$i(cr({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[rT({}),...t.extraBehaviours],onEscape:c=>{ao(c,Pg)},dialogEvents:s,eventOrder:{[Xl()]:[we.name(),Nc.name()],[sc()]:["scroll-lock",we.name(),"messages","dialog-events","alloy.base.behaviour"],[Ql()]:["alloy.base.behaviour","dialog-events","messages",we.name(),"scroll-lock"]}})),Dy=(t,s={})=>{const a=c=>{const d=tt(c.items,h=>{const b=kt(s,h.name).getOr(mn(!1));return{...h,storage:b}});return{...c,items:d}};return tt(t,c=>c.type==="menu"?a(c):c)},QR=t=>Ho(t,(s,a)=>a.type==="menu"?Ho(a.items,(d,h)=>(d[h.name]=h.storage,d),s):s,{}),Yi=(t,s)=>[Xy(ld(),JV),t(ny,(a,c,d,h)=>{vd(vr(h.element)).fold(ce,Bv),s.onClose(),c.onClose()}),t(Pg,(a,c,d,h)=>{c.onCancel(a),ao(h,ny)}),it(a4,(a,c)=>s.onUnblock()),it(r4,(a,c)=>s.onBlock(c.event))],Wb=(t,s)=>{const a=(d,h)=>it(d,(b,x)=>{c(b,(T,D)=>{h(t(),T,x.event,b)})}),c=(d,h)=>{we.getState(d).get().each(b=>{h(b,d)})};return[...Yi(a,s),a(dh,(d,h,b)=>{h.onAction(d,{name:b.name})})]},eM=(t,s,a)=>{const c=(h,b)=>it(h,(x,T)=>{d(x,(D,P)=>{b(t(),D,T.event,x)})}),d=(h,b)=>{we.getState(h).get().each(x=>{b(x.internalDialog,h)})};return[...Yi(c,s),c(k2,(h,b)=>b.onSubmit(h)),c(Rl,(h,b,x)=>{b.onChange(h,{name:x.name})}),c(dh,(h,b,x,T)=>{const D=()=>T.getSystem().isConnected()?En.focusIn(T):void 0,P=Y=>wc(Y,"disabled")||Dr(Y,"aria-disabled").exists(se=>se==="true"),$=vr(T.element),G=vd($);b.onAction(h,{name:x.name,value:x.value}),vd($).fold(D,Y=>{P(Y)||G.exists(se=>Oa(Y,se)&&P(se))?D():a().toOptional().filter(se=>!Oa(se.element,Y)).each(D)})}),c(bI,(h,b,x)=>{b.onTabChange(h,{newTabName:x.name,oldTabName:x.oldName})}),Yd(h=>{const b=t();Yt.setValue(h,b.getData())})]},tM=(t,s)=>Q2(t,t.type,s),yh=(t,s,a)=>et(s,c=>c.name===a).bind(c=>c.memento.getOpt(t)),kS=(t,s)=>{const a=s.map(x=>x.footerButtons).getOr([]),c=ta(a,x=>x.align==="start"),d=(x,T)=>rm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${x}`]},components:tt(T,D=>D.memento.asSpec())}),h=d("start",c.pass),b=d("end",c.fail);return[h,b]},Ve=(t,s,a)=>{const c=(d,h)=>{const b=tt(h.buttons,T=>{const D=Jo(tM(T,a));return{name:T.name,align:T.align,memento:D}}),x=T=>yh(d,b,T);return N.some({lookupByName:x,footerButtons:b})};return{dom:tm('<div class="tox-dialog__footer"></div>'),components:[],behaviours:xt([we.config({channel:`${dL}-${s}`,initialData:t,updateState:c,renderComponents:kS})])}},Ue=(t,s,a)=>Ve(t,s,a),Pt=(t,s,a)=>Na.parts.footer(Ve(t,s,a)),Et=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const c=Ro.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Xp.getField(c,s).orThunk(()=>t.getFooter().bind(b=>we.getState(b).get()).bind(b=>b.lookupByName(s)))}else return N.none()},Pn=(t,s)=>{const a=t.getRoot();return we.getState(a).get().map(c=>pt(ar("data",c.dataValidator,s))).getOr(s)},Eo=(t,s,a)=>{const c=se=>{const le=t.getRoot();le.getSystem().isConnected()&&se(le)},Y={getData:()=>{const se=t.getRoot(),le=se.getSystem().isConnected()?t.getFormWrapper():se,Ne=Yt.getValue(le),ge=Vo(a,ke=>ke.get());return{...Ne,...ge}},setData:se=>{c(le=>{const Ne=Y.getData(),ge=Ds(Ne,se),ke=Pn(t,ge),Ae=t.getFormWrapper();Yt.setValue(Ae,ke),Cs(a,(st,je)=>{po(ge,je)&&st.set(ge[je])})})},setEnabled:(se,le)=>{Et(t,se).each(le?l.enable:l.disable)},focus:se=>{Et(t,se).each(Ln.focus)},block:se=>{if(!Z(se))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c(le=>{_n(le,r4,{message:se})})},unblock:()=>{c(se=>{ao(se,a4)})},showTab:se=>{c(le=>{const Ne=t.getBody();we.getState(Ne).get().exists(ke=>ke.isTabPanel())&&Ro.getCurrent(Ne).each(ke=>{Ea.showTab(ke,se)})})},redial:se=>{c(le=>{const Ne=t.getId(),ge=s(se),ke=Dy(ge.internalDialog.buttons,a);le.getSystem().broadcastOn([`${V2}-${Ne}`],ge),le.getSystem().broadcastOn([`${uL}-${Ne}`],ge.internalDialog),le.getSystem().broadcastOn([`${H4}-${Ne}`],ge.internalDialog),le.getSystem().broadcastOn([`${dL}-${Ne}`],{...ge.internalDialog,buttons:ke}),Y.setData(ge.initialData)})},close:()=>{c(se=>{ao(se,ny)})},toggleFullscreen:t.toggleFullscreen};return Y},gr=(t,s,a)=>{const c=tn("dialog"),d=t.internalDialog,h=pc(d.title,c,a),b=mn(d.size),x=Ae=>Et(ge,Ae),T=Vg(b.get()).toArray(),D=(Ae,st)=>(b.set(st.internalDialog.size),Ub(st.internalDialog.size,Ae),N.some(st)),P=Rd({body:d.body,initialData:d.initialData},c,a,x),$=Dy(d.buttons),G=QR($),Y=Sn($.length!==0,Pt({buttons:$},c,a)),se=eM(()=>ke,Nd(()=>Ne,a.shared.providers,s),a.shared.getSink),le={id:c,header:h,body:P,footer:Y,extraClasses:T,extraBehaviours:[we.config({channel:`${V2}-${c}`,updateState:D,initialData:t})],extraStyles:{}},Ne=vh(le,se,a),ge=(()=>{const Ae=()=>{const je=Na.getBody(Ne);return Ro.getCurrent(je).getOr(je)},st=()=>{sk(Ne,b.get())};return{getId:ne(c),getRoot:ne(Ne),getBody:()=>Na.getBody(Ne),getFooter:()=>Na.getFooter(Ne),getFormWrapper:Ae,toggleFullscreen:st}})(),ke=Eo(ge,s.redial,G);return{dialog:Ne,instanceApi:ke}},Bd=(t,s,a,c=!1,d)=>{const h=tn("dialog"),b=tn("dialog-label"),x=tn("dialog-content"),T=t.internalDialog,D=cn=>Et(Xt,cn),P=mn(T.size),$=Vg(P.get()).toArray(),G=(cn,It)=>(P.set(It.internalDialog.size),Ub(It.internalDialog.size,cn),d(),N.some(It)),Y=Jo(da({title:T.title,draggable:!0},h,b,a.shared.providers)),se=Jo(Pa({body:T.body,initialData:T.initialData},h,x,a,c,D)),le=Dy(T.buttons),Ne=QR(le),ge=Sn(le.length!==0,Jo(Ue({buttons:le},h,a))),ke=eM(()=>Qe,{onBlock:cn=>{bf.block(je,(It,fn)=>{const bo=Y.getOpt(je).map(Us=>xs(Us.element));return Md(cn.message,fn,a.shared.providers,bo)})},onUnblock:()=>{bf.unblock(je)},onClose:()=>s.closeWindow()},a.shared.getSink),Ae="tox-dialog-inline",st=ro().os,je=$i({dom:{tag:"div",classes:["tox-dialog",Ae,...$],attributes:{role:"dialog",...st.isMacOS()?{"aria-label":T.title}:{"aria-labelledby":b}}},eventOrder:{[Xl()]:[we.name(),Nc.name()],[Jl()]:["execute-on-form"],[sc()]:["reflecting","execute-on-form"]},behaviours:xt([En.config({mode:"cyclic",onEscape:cn=>(ao(cn,ny),N.some(!0)),useTabstopAt:cn=>!H2(cn)&&(oa(cn)!=="button"||pn(cn,"disabled")!=="disabled"),firstTabstop:1}),we.config({channel:`${V2}-${h}`,updateState:G,initialData:t}),Ln.config({}),no("execute-on-form",ke.concat([op(ld(),(cn,It)=>{En.focusIn(cn)}),it(Xh(),(cn,It)=>{cn.getSystem().broadcastOn([cT],{newFocus:It.event.newFocus})})])),bf.config({getRoot:()=>N.some(je)}),Vn.config({}),rT({})]),components:[Y.asSpec(),se.asSpec(),...ge.map(cn=>cn.asSpec()).toArray()]}),$t=()=>{sk(je,P.get())},Xt={getId:ne(h),getRoot:ne(je),getFooter:()=>ge.map(cn=>cn.get(je)),getBody:()=>se.get(je),getFormWrapper:()=>{const cn=se.get(je);return Ro.getCurrent(cn).getOr(cn)},toggleFullscreen:$t},Qe=Eo(Xt,s.redial,Ne);return{dialog:je,instanceApi:Qe}};var Ry=tinymce.util.Tools.resolve("tinymce.util.URI");const yG=t=>{const s=b=>{t.getSystem().isConnected()&&b(t)};return{block:b=>{if(!Z(b))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(x=>{_n(x,r4,{message:b})})},unblock:()=>{s(b=>{ao(b,a4)})},close:()=>{s(b=>{ao(b,ny)})},sendMessage:b=>{s(x=>{x.getSystem().broadcastOn([fL],b)})}}},rk=["insertContent","setContent","execCommand","close","block","unblock"],wh=t=>ie(t)&&rk.indexOf(t.mceAction)!==-1,a6=t=>!wh(t)&&ie(t)&&po(t,"mceAction"),i6=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const c=Ut(a.ui)?a.ui:!1;t.execCommand(a.cmd,c,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},c6=(t,s,a,c)=>{const d=tn("dialog"),h=pc(t.title,d,c),b=dm(t),x=t.buttons.bind(Ae=>Ae.length===0?N.none():N.some(Pt({buttons:Ae},d,c))),T=Wb(()=>ke,Nd(()=>ge,c.shared.providers,s)),D={...t.height.fold(()=>({}),Ae=>({height:Ae+"px","max-height":Ae+"px"})),...t.width.fold(()=>({}),Ae=>({width:Ae+"px","max-width":Ae+"px"}))},P=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],$=new Ry(t.url,{base_uri:new Ry(window.location.href)}),G=`${$.protocol}://${$.host}${$.port?":"+$.port:""}`,Y=pa(),se=(Ae,st)=>N.some(st),le=[we.config({channel:`${V2}-${d}`,updateState:se,initialData:t}),no("messages",[Gs(()=>{const Ae=dc(_e.fromDom(window),"message",st=>{if($.isSameOrigin(new Ry(st.raw.origin))){const je=st.raw.data;wh(je)?i6(a,ke,je):a6(je)&&t.onMessage(ke,je)}});Y.set(Ae)}),Yd(Y.clear)]),Nc.config({channels:{[fL]:{onReceive:(Ae,st)=>{tr(Ae.element,"iframe").each(je=>{const $t=je.dom.contentWindow;Ct($t)&&$t.postMessage(st,G)})}}}})],ge=vh({id:d,header:h,body:b,footer:x,extraClasses:P,extraBehaviours:le,extraStyles:D},T,c),ke=yG(ge);return{dialog:ge,instanceApi:ke}},l6=t=>{const s=t.shared;return{open:(c,d)=>{const h=()=>{Na.hide(D),d()},b=Jo(Q2({name:"close-alert",text:"OK",primary:!0,buttonType:N.some("primary"),align:"end",enabled:!0,icon:N.none()},"cancel",t)),x=Bl(),T=Yu(h,s.providers),D=$i(cr({lazySink:()=>s.getSink(),header:Pl(x,T),body:Xu(c,s.providers),footer:N.some(Cn(Oo([],[b.asSpec()]))),onEscape:h,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[it(Pg,h)],eventOrder:{}}));Na.show(D);const P=b.get(D);Ln.focus(P)}}},wG=t=>{const s=t.shared;return{open:(c,d)=>{const h=G=>{Na.hide(P),d(G)},b=Jo(Q2({name:"yes",text:"Yes",primary:!0,buttonType:N.some("primary"),align:"end",enabled:!0,icon:N.none()},"submit",t)),x=Q2({name:"no",text:"No",primary:!1,buttonType:N.some("secondary"),align:"end",enabled:!0,icon:N.none()},"cancel",t),T=Bl(),D=Yu(()=>h(!1),s.providers),P=$i(cr({lazySink:()=>s.getSink(),header:Pl(T,D),body:Xu(c,s.providers),footer:N.some(Cn(Oo([],[x,b.asSpec()]))),onEscape:()=>h(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[it(Pg,()=>h(!1)),it(k2,()=>h(!0))],eventOrder:{}}));Na.show(P);const $=b.get(P);Ln.focus($)}}},So=(t,s)=>pt(ar("data",s,t)),We=t=>C2(t,".tox-alert-dialog")||C2(t,".tox-confirm-dialog"),hn=(t,s,a)=>s&&a?[]:[Hs.config({contextual:{lazyContext:()=>N.some(Qs(_e.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:c=>Dg(t,c.element).map(h=>({bounds:pb(h),optScrollEnv:N.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:ga(h.element).top})})).getOrThunk(()=>({bounds:Ur(),optScrollEnv:N.none()}))})],Hn=t=>{const s=t.editor,a=gb(s),c=l6(t.backstages.dialog),d=wG(t.backstages.dialog),h=(se,le,Ne)=>{if(!Lt(le)){if(le.inline==="toolbar")return D(se,t.backstages.popup.shared.anchors.inlineDialog(),Ne,le);if(le.inline==="bottom")return P(se,t.backstages.popup.shared.anchors.inlineBottomDialog(),Ne,le);if(le.inline==="cursor")return D(se,t.backstages.popup.shared.anchors.cursor(),Ne,le)}return T(se,Ne)},b=(se,le)=>x(se,le),x=(se,le)=>{const Ne=ge=>{const ke=c6(ge,{closeWindow:()=>{Na.hide(ke.dialog),le(ke.instanceApi)}},s,t.backstages.dialog);return Na.show(ke.dialog),ke.instanceApi};return O.openUrl(Ne,se)},T=(se,le)=>{const Ne=(ge,ke,Ae)=>{const st=ke,$t=gr({dataValidator:Ae,initialData:st,internalDialog:ge},{redial:O.redial,closeWindow:()=>{Na.hide($t.dialog),le($t.instanceApi)}},t.backstages.dialog);return Na.show($t.dialog),$t.instanceApi.setData(st),$t.instanceApi};return O.open(Ne,se)},D=(se,le,Ne,ge)=>{const ke=(Ae,st,je)=>{const $t=So(st,je),Xt=ts(),Qe=t.backstages.popup.shared.header.isPositionedAtTop(),cn={dataValidator:je,initialData:$t,internalDialog:Ae},It=()=>Xt.on(jo=>{nr.reposition(jo),(!a||!Qe)&&Hs.refresh(jo)}),fn=Bd(cn,{redial:O.redial,closeWindow:()=>{Xt.on(nr.hide),s.off("ResizeEditor",It),Xt.clear(),Ne(fn.instanceApi)}},t.backstages.popup,ge.ariaAttrs,It),bo=$i(nr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ge.persistent?{event:"doNotDismissYet"}:{},...Qe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:xt([no("window-manager-inline-events",[it(Om(),(jo,un)=>{ao(fn.dialog,Pg)})]),...hn(s,a,Qe)]),isExtraPart:(jo,un)=>We(un)}));Xt.set(bo);const Us=()=>{const jo=s.inline?io():_e.fromDom(s.getContainer()),un=Qs(jo);return N.some(un)};return nr.showWithinBounds(bo,Cl(fn.dialog),{anchor:le},Us),(!a||!Qe)&&(Hs.refresh(bo),s.on("ResizeEditor",It)),fn.instanceApi.setData($t),En.focusIn(fn.dialog),fn.instanceApi};return O.open(ke,se)},P=(se,le,Ne,ge)=>{const ke=(Ae,st,je)=>{const $t=So(st,je),Xt=ts(),Qe=t.backstages.popup.shared.header.isPositionedAtTop(),cn={dataValidator:je,initialData:$t,internalDialog:Ae},It=()=>Xt.on(jo=>{nr.reposition(jo),Hs.refresh(jo)}),fn=Bd(cn,{redial:O.redial,closeWindow:()=>{Xt.on(nr.hide),s.off("ResizeEditor ScrollWindow ElementScroll",It),Xt.clear(),Ne(fn.instanceApi)}},t.backstages.popup,ge.ariaAttrs,It),bo=$i(nr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ge.persistent?{event:"doNotDismissYet"}:{},...Qe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:xt([no("window-manager-inline-events",[it(Om(),(jo,un)=>{ao(fn.dialog,Pg)})]),Hs.config({contextual:{lazyContext:()=>N.some(Qs(_e.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:jo=>Dg(s,jo.element).map(gt=>({bounds:pb(gt),optScrollEnv:N.some({currentScrollTop:gt.element.dom.scrollTop,scrollElmTop:ga(gt.element).top})})).getOrThunk(()=>({bounds:Ur(),optScrollEnv:N.none()}))})]),isExtraPart:(jo,un)=>We(un)}));Xt.set(bo);const Us=()=>t.backstages.popup.shared.getSink().toOptional().bind(jo=>{const un=Dg(s,jo.element),gt=15,Ht=un.map(xn=>pb(xn)).getOr(Ur()),Fn=Qs(_e.fromDom(s.getContentAreaContainer())),Rn=od(Fn,Ht);return N.some(qs(Rn.x,Rn.y,Rn.width,Rn.height-gt))});return nr.showWithinBounds(bo,Cl(fn.dialog),{anchor:le},Us),Hs.refresh(bo),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",It),fn.instanceApi.setData($t),En.focusIn(fn.dialog),fn.instanceApi};return O.open(ke,se)};return{open:h,openUrl:b,alert:(se,le)=>{c.open(se,le)},close:se=>{se.close()},confirm:(se,le)=>{d.open(se,le)}}},ea=t=>{XN(t),FH(t),Oj(t)};var $c=()=>{Su.add("silver",t=>{ea(t);let s=()=>Ur();const{dialogs:a,popups:c,renderUI:d}=Aq(t,{getPopupSinkBounds:()=>s()}),h=()=>{const D=d();return Dg(t,c.getMothership().element).each($=>{s=()=>pb($)}),D};A9.register(t,c.backstage.shared);const b=Hn({editor:t,backstages:{popup:c.backstage,dialog:a.backstage}}),x=ts(),T=()=>$8(t,{backstage:c.backstage},c.getMothership(),x);return{renderUI:h,getWindowManagerImpl:ne(b),getNotificationManagerImpl:T}})};$c()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.ModelManager");const g=(l,f,v)=>{var C;return v(l,f.prototype)?!0:((C=l.constructor)===null||C===void 0?void 0:C.name)===f.name},w=l=>{const f=typeof l;return l===null?"null":f==="object"&&Array.isArray(l)?"array":f==="object"&&g(l,String,(v,C)=>C.isPrototypeOf(v))?"string":f},E=l=>f=>w(f)===l,M=l=>f=>typeof f===l,z=l=>f=>l===f,K=E("string"),Z=E("object"),ie=E("array"),Ee=z(null),de=M("boolean"),Ye=z(void 0),Ut=l=>l==null,Lt=l=>!Ut(l),Mt=M("function"),Ct=M("number"),Xe=()=>{},dn=(l,f)=>(...v)=>l(f.apply(null,v)),Nt=(l,f)=>v=>l(f(v)),ce=l=>()=>l,Ke=l=>l,Kn=(l,f)=>l===f;function jt(l,...f){return(...v)=>{const C=f.concat(v);return l.apply(null,C)}}const ne=l=>f=>!l(f),Jt=l=>()=>{throw new Error(l)},Bn=l=>l(),Qt=ce(!1),Fe=ce(!0);class ve{constructor(f,v){this.tag=f,this.value=v}static some(f){return new ve(!0,f)}static none(){return ve.singletonNone}fold(f,v){return this.tag?v(this.value):f()}isSome(){return this.tag}isNone(){return!this.tag}map(f){return this.tag?ve.some(f(this.value)):ve.none()}bind(f){return this.tag?f(this.value):ve.none()}exists(f){return this.tag&&f(this.value)}forall(f){return!this.tag||f(this.value)}filter(f){return!this.tag||f(this.value)?this:ve.none()}getOr(f){return this.tag?this.value:f}or(f){return this.tag?this:f}getOrThunk(f){return this.tag?this.value:f()}orThunk(f){return this.tag?this:f()}getOrDie(f){if(this.tag)return this.value;throw new Error(f??"Called getOrDie on None")}static from(f){return Lt(f)?ve.some(f):ve.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(f){this.tag&&f(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ve.singletonNone=new ve(!1);const so=Array.prototype.slice,Me=Array.prototype.indexOf,Pe=Array.prototype.push,N=(l,f)=>Me.call(l,f),an=(l,f)=>N(l,f)>-1,ct=(l,f)=>{for(let v=0,C=l.length;v<C;v++){const A=l[v];if(f(A,v))return!0}return!1},$n=(l,f)=>{const v=[];for(let C=0;C<l;C++)v.push(f(C));return v},sn=(l,f)=>{const v=l.length,C=new Array(v);for(let A=0;A<v;A++){const B=l[A];C[A]=f(B,A)}return C},nt=(l,f)=>{for(let v=0,C=l.length;v<C;v++){const A=l[v];f(A,v)}},eo=(l,f)=>{for(let v=l.length-1;v>=0;v--){const C=l[v];f(C,v)}},ms=(l,f)=>{const v=[],C=[];for(let A=0,B=l.length;A<B;A++){const U=l[A];(f(U,A)?v:C).push(U)}return{pass:v,fail:C}},to=(l,f)=>{const v=[];for(let C=0,A=l.length;C<A;C++){const B=l[C];f(B,C)&&v.push(B)}return v},os=(l,f,v)=>(eo(l,(C,A)=>{v=f(v,C,A)}),v),tt=(l,f,v)=>(nt(l,(C,A)=>{v=f(v,C,A)}),v),yt=(l,f,v)=>{for(let C=0,A=l.length;C<A;C++){const B=l[C];if(f(B,C))return ve.some(B);if(v(B,C))break}return ve.none()},W=(l,f)=>yt(l,f,Qt),ta=(l,f)=>{for(let v=0,C=l.length;v<C;v++){const A=l[v];if(f(A,v))return ve.some(v)}return ve.none()},uo=l=>{const f=[];for(let v=0,C=l.length;v<C;++v){if(!ie(l[v]))throw new Error("Arr.flatten item "+v+" was not an array, input: "+l);Pe.apply(f,l[v])}return f},qo=(l,f)=>uo(sn(l,f)),Ho=(l,f)=>{for(let v=0,C=l.length;v<C;++v){const A=l[v];if(f(A,v)!==!0)return!1}return!0},Wi=l=>{const f=so.call(l,0);return f.reverse(),f},et=(l,f)=>{const v={};for(let C=0,A=l.length;C<A;C++){const B=l[C];v[String(B)]=f(B,C)}return v},Tt=(l,f)=>{const v=so.call(l,0);return v.sort(f),v},dt=(l,f)=>f>=0&&f<l.length?ve.some(l[f]):ve.none(),Se=l=>dt(l,0),_o=l=>dt(l,l.length-1),To=(l,f)=>{for(let v=0;v<l.length;v++){const C=f(l[v],v);if(C.isSome())return C}return ve.none()},Zt=Object.keys,ss=Object.hasOwnProperty,Mo=(l,f)=>{const v=Zt(l);for(let C=0,A=v.length;C<A;C++){const B=v[C],U=l[B];f(U,B)}},$r=(l,f)=>Po(l,(v,C)=>({k:C,v:f(v,C)})),Po=(l,f)=>{const v={};return Mo(l,(C,A)=>{const B=f(C,A);v[B.k]=B.v}),v},Is=l=>(f,v)=>{l[v]=f},Xa=(l,f,v,C)=>{Mo(l,(A,B)=>{(f(A,B)?v:C)(A,B)})},ws=(l,f)=>{const v={};return Xa(l,f,Is(v),Xe),v},bs=(l,f)=>{const v=[];return Mo(l,(C,A)=>{v.push(f(C,A))}),v},vs=l=>bs(l,Ke),qr=(l,f)=>Cs(l,f)?ve.from(l[f]):ve.none(),Cs=(l,f)=>ss.call(l,f),Vo=(l,f)=>Cs(l,f)&&l[f]!==void 0&&l[f]!==null,vc=l=>{for(const f in l)if(ss.call(l,f))return!1;return!0},fo=typeof window<"u"?window:Function("return this;")(),cs=(l,f)=>{let v=f??fo;for(let C=0;C<l.length&&v!==void 0&&v!==null;++C)v=v[l[C]];return v},_r=(l,f)=>{const v=l.split(".");return cs(v,f)},Oi=(l,f)=>_r(l,f),Zi=(l,f)=>{const v=Oi(l,f);if(v==null)throw new Error(l+" not available on this browser");return v},Go=Object.getPrototypeOf,Vc=l=>Zi("HTMLElement",l),kt=l=>{const f=_r("ownerDocument.defaultView",l);return Z(l)&&(Vc(f).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Go(l).constructor.name))},po=8,Hr=9,Vr=11,Ba=1,Ja=3,Wo=l=>l.dom.nodeName.toLowerCase(),hi=l=>l.dom.nodeType,Di=l=>f=>hi(f)===l,zo=l=>hi(l)===po||Wo(l)==="#comment",Sn=l=>Ys(l)&&kt(l.dom),Ys=Di(Ba),Qa=Di(Ja),ul=Di(Hr),dl=Di(Vr),hs=l=>f=>Ys(f)&&Wo(f)===l,pr=(l,f,v)=>{if(K(v)||de(v)||Ct(v))l.setAttribute(f,v+"");else throw console.error("Invalid call to Attribute.set. Key ",f,":: Value ",v,":: Element ",l),new Error("Attribute value was not simple")},Zs=(l,f,v)=>{pr(l.dom,f,v)},Ta=(l,f)=>{const v=l.dom;Mo(f,(C,A)=>{pr(v,A,C)})},yc=(l,f)=>{Mo(f,(v,C)=>{v.fold(()=>{fe(l,C)},A=>{pr(l.dom,C,A)})})},Tr=(l,f)=>{const v=l.dom.getAttribute(f);return v===null?void 0:v},pe=(l,f)=>ve.from(Tr(l,f)),fe=(l,f)=>{l.dom.removeAttribute(f)},He=l=>tt(l.dom.attributes,(f,v)=>(f[v.name]=v.value,f),{}),qe=(l,f)=>{const C=(f||document).createElement("div");if(C.innerHTML=l,!C.hasChildNodes()||C.childNodes.length>1){const A="HTML does not have a single root node";throw console.error(A,l),new Error(A)}return Un(C.childNodes[0])},gn=(l,f)=>{const C=(f||document).createElement(l);return Un(C)},Nn=(l,f)=>{const C=(f||document).createTextNode(l);return Un(C)},Un=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},_e={fromHtml:qe,fromTag:gn,fromText:Nn,fromDom:Un,fromPoint:(l,f,v)=>ve.from(l.dom.elementFromPoint(f,v)).map(Un)},Wn=(l,f)=>{const v=l.dom;if(v.nodeType!==Ba)return!1;{const C=v;if(C.matches!==void 0)return C.matches(f);if(C.msMatchesSelector!==void 0)return C.msMatchesSelector(f);if(C.webkitMatchesSelector!==void 0)return C.webkitMatchesSelector(f);if(C.mozMatchesSelector!==void 0)return C.mozMatchesSelector(f);throw new Error("Browser lacks native selectors")}},Xs=l=>l.nodeType!==Ba&&l.nodeType!==Hr&&l.nodeType!==Vr||l.childElementCount===0,ur=(l,f)=>{const v=f===void 0?document:f.dom;return Xs(v)?[]:sn(v.querySelectorAll(l),_e.fromDom)},ka=(l,f)=>{const v=f===void 0?document:f.dom;return Xs(v)?ve.none():ve.from(v.querySelector(l)).map(_e.fromDom)},Zo=(l,f)=>l.dom===f.dom,zc=(l,f)=>{const v=l.dom,C=f.dom;return v===C?!1:v.contains(C)},Gr=Wn,Aa=l=>_e.fromDom(l.dom.ownerDocument),Ps=l=>ul(l)?l:Aa(l),Ko=l=>_e.fromDom(Ps(l).dom.documentElement),es=l=>_e.fromDom(Ps(l).dom.defaultView),na=l=>ve.from(l.dom.parentNode).map(_e.fromDom),oa=l=>ve.from(l.dom.parentElement).map(_e.fromDom),kr=(l,f)=>{const v=Mt(f)?f:Qt;let C=l.dom;const A=[];for(;C.parentNode!==null&&C.parentNode!==void 0;){const B=C.parentNode,U=_e.fromDom(B);if(A.push(U),v(U)===!0)break;C=B}return A},Ji=l=>ve.from(l.dom.previousSibling).map(_e.fromDom),Ri=l=>ve.from(l.dom.nextSibling).map(_e.fromDom),xo=l=>sn(l.dom.childNodes,_e.fromDom),sa=(l,f)=>{const v=l.dom.childNodes;return ve.from(v[f]).map(_e.fromDom)},zr=l=>sa(l,0),Qi=(l,f)=>{na(l).each(C=>{C.dom.insertBefore(f.dom,l.dom)})},ei=(l,f)=>{Ri(l).fold(()=>{na(l).each(A=>{Ls(A,f)})},C=>{Qi(C,f)})},Ar=(l,f)=>{zr(l).fold(()=>{Ls(l,f)},C=>{l.dom.insertBefore(f.dom,C.dom)})},Ls=(l,f)=>{l.dom.appendChild(f.dom)},Cf=(l,f,v)=>{sa(l,v).fold(()=>{Ls(l,f)},C=>{Qi(C,f)})},ji=(l,f)=>{Qi(l,f),Ls(f,l)},Uo=(l,f)=>{nt(f,(v,C)=>{const A=C===0?l:f[C-1];ei(A,v)})},Oa=(l,f)=>{nt(f,v=>{Ls(l,v)})},ma=l=>{l.dom.textContent="",nt(xo(l),f=>{br(f)})},br=l=>{const f=l.dom;f.parentNode!==null&&f.parentNode.removeChild(f)},$l=l=>{const f=xo(l);f.length>0&&Uo(l,f),br(l)},Da=(l,f)=>_e.fromDom(l.dom.cloneNode(f)),Ia=l=>Da(l,!1),ec=l=>Da(l,!0),Mi=(l,f)=>{const v=_e.fromTag(f),C=He(l);return Ta(v,C),v},uu=(l,f)=>{const v=Mi(l,f),C=xo(ec(l));return Oa(v,C),v},fl=(l,f)=>{const v=Mi(l,f);ei(l,v);const C=xo(l);return Oa(v,C),br(l),v},Uc=["tfoot","thead","tbody","colgroup"],ti=l=>an(Uc,l),Or=(l,f)=>({rows:l,columns:f}),du=(l,f)=>({row:l,column:f}),fu=(l,f,v)=>({element:l,rowspan:f,colspan:v}),mu=(l,f,v,C)=>({element:l,rowspan:f,colspan:v,isNew:C}),hu=(l,f,v,C,A,B)=>({element:l,rowspan:f,colspan:v,row:C,column:A,isLocked:B}),vr=(l,f,v)=>({element:l,cells:f,section:v}),gi=(l,f,v,C)=>({element:l,cells:f,section:v,isNew:C}),X=(l,f,v)=>({element:l,isNew:f,isLocked:v}),he=(l,f,v,C)=>({element:l,cells:f,section:v,isNew:C}),Re=(l,f,v,C)=>({startRow:l,startCol:f,finishRow:v,finishCol:C}),at=(l,f,v)=>({element:l,colspan:f,column:v}),St=(l,f)=>({element:l,columns:f}),en=l=>dl(l)&&Lt(l.dom.host),io=l=>_e.fromDom(l.dom.getRootNode()),ls=l=>{const f=io(l);return en(f)?ve.some(f):ve.none()},vo=l=>_e.fromDom(l.dom.host),qt=l=>{if(Lt(l.target)){const f=_e.fromDom(l.target);if(Ys(f)&&sr(f)&&l.composed&&l.composedPath){const v=l.composedPath();if(v)return Se(v)}}return ve.from(l.target)},sr=l=>Lt(l.dom.shadowRoot),pn=l=>{const f=Qa(l)?l.dom.parentNode:l.dom;if(f==null||f.ownerDocument===null)return!1;const v=f.ownerDocument;return ls(_e.fromDom(f)).fold(()=>v.body.contains(f),Nt(pn,vo))},Dr=()=>wc(_e.fromDom(document)),wc=l=>{const f=l.dom.body;if(f==null)throw new Error("Body is not available yet");return _e.fromDom(f)},H=(l,f,v)=>to(kr(l,v),f),oe=(l,f)=>to(xo(l),f),ye=(l,f)=>{let v=[];return nt(xo(l),C=>{f(C)&&(v=v.concat([C])),v=v.concat(ye(C,f))}),v},Ie=(l,f,v)=>H(l,C=>Wn(C,f),v),lt=(l,f)=>oe(l,v=>Wn(v,f)),qn=(l,f)=>ur(f,l);var Ss=(l,f,v,C,A)=>l(v,C)?ve.some(v):Mt(A)&&A(v)?ve.none():f(v,C,A);const rs=(l,f,v)=>{let C=l.dom;const A=Mt(v)?v:Qt;for(;C.parentNode;){C=C.parentNode;const B=_e.fromDom(C);if(f(B))return ve.some(B);if(A(B))break}return ve.none()},vt=(l,f,v)=>Ss((A,B)=>B(A),rs,l,f,v),Os=(l,f)=>{const v=A=>f(_e.fromDom(A));return W(l.dom.childNodes,v).map(_e.fromDom)},ha=(l,f)=>{const v=C=>{for(let A=0;A<C.childNodes.length;A++){const B=_e.fromDom(C.childNodes[A]);if(f(B))return ve.some(B);const U=v(C.childNodes[A]);if(U.isSome())return U}return ve.none()};return v(l.dom)},ni=(l,f,v)=>rs(l,C=>Wn(C,f),v),Xn=(l,f)=>Os(l,v=>Wn(v,f)),oi=(l,f)=>ka(f,l),lr=(l,f,v)=>Ss((A,B)=>Wn(A,B),ni,l,f,v),ed=(l,f,v=Kn)=>l.exists(C=>v(C,f)),xs=l=>{const f=[],v=C=>{f.push(C)};for(let C=0;C<l.length;C++)l[C].each(v);return f},ml=(l,f)=>l!=null?f(l):ve.none(),gm=(l,f)=>l?ve.some(f):ve.none(),m1=(l,f)=>l.substring(f),Js=(l,f,v)=>f===""||l.length>=f.length&&l.substr(v,v+f.length)===f,pm=(l,f)=>ga(l,f)?m1(l,f.length):l,yr=(l,f,v=0,C)=>{const A=l.indexOf(f,v);return A!==-1?Ye(C)?!0:A+f.length<=C:!1},ga=(l,f)=>Js(l,f,0),Wc=(l,f)=>Js(l,f,l.length-f.length),Ld=(l=>f=>f.replace(l,""))(/^\s+|\s+$/g),La=l=>l.length>0,yo=l=>{const f=parseFloat(l);return isNaN(f)?ve.none():ve.some(f)},hl=l=>l.style!==void 0&&Mt(l.style.getPropertyValue),Sc=(l,f,v)=>{if(!K(v))throw console.error("Invalid call to CSS.set. Property ",f,":: Value ",v,":: Element ",l),new Error("CSS value must be a string: "+v);hl(l)&&l.style.setProperty(f,v)},h1=(l,f)=>{hl(l)&&l.style.removeProperty(f)},Kr=(l,f,v)=>{const C=l.dom;Sc(C,f,v)},Fa=(l,f)=>{const v=l.dom;Mo(f,(C,A)=>{Sc(v,A,C)})},Yr=(l,f)=>{const v=l.dom,A=window.getComputedStyle(v).getPropertyValue(f);return A===""&&!pn(l)?Oh(v,f):A},Oh=(l,f)=>hl(l)?l.style.getPropertyValue(f):"",Sf=(l,f)=>{const v=l.dom,C=Oh(v,f);return ve.from(C).filter(A=>A.length>0)},si=(l,f)=>{const v=l.dom;h1(v,f),ed(pe(l,"style").map(Ld),"")&&fe(l,"style")},Dh=(l,f)=>{const v=l.dom,C=f.dom;hl(v)&&hl(C)&&(C.style.cssText=v.style.cssText)},js=(l,f,v=0)=>pe(l,f).map(C=>parseInt(C,10)).getOr(v),Zc=(l,f)=>js(l,f,1),ri=l=>hs("col")(l)?js(l,"span",1)>1:Zc(l,"colspan")>1,wr=l=>Zc(l,"rowspan")>1,pi=(l,f)=>parseInt(Yr(l,f),10),Cr=ce(10),Rh=ce(10),gu=(l,f)=>pu(l,f,Fe),pu=(l,f,v)=>qo(xo(l),C=>Wn(C,f)?v(C)?[C]:[]:pu(C,f,v)),xf=(l,f,v=Qt)=>{if(v(f))return ve.none();if(an(l,Wo(f)))return ve.some(f);const C=A=>Wn(A,"table")||v(A);return ni(f,l.join(","),C)},bu=(l,f)=>xf(["td","th"],l,f),xc=l=>gu(l,"th,td"),Ef=l=>Wn(l,"colgroup")?lt(l,"col"):qo(Mh(l),f=>lt(f,"col")),Sr=(l,f)=>lr(l,"table",f),_f=l=>gu(l,"tr"),Mh=l=>Sr(l).fold(ce([]),f=>lt(f,"colgroup")),gl=(l,f)=>sn(l,v=>{if(Wo(v)==="colgroup"){const C=sn(Ef(v),A=>{const B=js(A,"span",1);return fu(A,1,B)});return vr(v,C,"colgroup")}else{const C=sn(xc(v),A=>{const B=js(A,"rowspan",1),U=js(A,"colspan",1);return fu(A,B,U)});return vr(v,C,f(v))}}),Nh=l=>na(l).map(f=>{const v=Wo(f);return ti(v)?v:"tbody"}).getOr("tbody"),vu=l=>{const f=_f(l),C=[...Mh(l),...f];return gl(C,Nh)},Ph=(l,f)=>gl(l,()=>f),Hl=l=>{let f=!1,v;return(...C)=>(f||(f=!0,v=l.apply(null,C)),v)},Bh=(l,f,v,C)=>{const A=l.isiOS()&&/ipad/i.test(v)===!0,B=l.isiOS()&&!A,U=l.isiOS()||l.isAndroid(),J=U||C("(pointer:coarse)"),ae=A||!B&&U&&C("(min-device-width:768px)"),Ce=B||U&&!ae,Le=f.isSafari()&&l.isiOS()&&/safari/i.test(v)===!1,wt=!Ce&&!ae&&!Le;return{isiPad:ce(A),isiPhone:ce(B),isTablet:ce(ae),isPhone:ce(Ce),isTouch:ce(J),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ce(Le),isDesktop:ce(wt)}},Tf=(l,f)=>{for(let v=0;v<l.length;v++){const C=l[v];if(C.test(f))return C}},bm=(l,f)=>{const v=Tf(l,f);if(!v)return{major:0,minor:0};const C=A=>Number(f.replace(v,"$"+A));return be(C(1),C(2))},yu=(l,f)=>{const v=String(f).toLowerCase();return l.length===0?vm():bm(l,v)},vm=()=>be(0,0),be=(l,f)=>({major:l,minor:f}),Vl={nu:be,detect:yu,unknown:vm},pl=(l,f)=>To(f.brands,v=>{const C=v.brand.toLowerCase();return W(l,A=>{var B;return C===((B=A.brand)===null||B===void 0?void 0:B.toLowerCase())}).map(A=>({current:A.name,version:Vl.nu(parseInt(v.version,10),0)}))}),Ih=(l,f)=>{const v=String(f).toLowerCase();return W(l,C=>C.search(v))},g1=(l,f)=>Ih(l,f).map(v=>{const C=Vl.detect(v.versionRegexes,f);return{current:v.name,version:C}}),wu=(l,f)=>Ih(l,f).map(v=>{const C=Vl.detect(v.versionRegexes,f);return{current:v.name,version:C}}),ro=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Rr=l=>f=>yr(f,l),Ec=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>yr(l,"edge/")&&yr(l,"chrome")&&yr(l,"safari")&&yr(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ro],search:l=>yr(l,"chrome")&&!yr(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>yr(l,"msie")||yr(l,"trident")},{name:"Opera",versionRegexes:[ro,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Rr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Rr("firefox")},{name:"Safari",versionRegexes:[ro,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(yr(l,"safari")||yr(l,"mobile/"))&&yr(l,"applewebkit")}],Cu=[{name:"Windows",search:Rr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>yr(l,"iphone")||yr(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Rr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Rr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Rr("linux"),versionRegexes:[]},{name:"Solaris",search:Rr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Rr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Rr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],kf={browsers:ce(Ec),oses:ce(Cu)},Fd="Edge",$a="Chromium",Af="IE",zl="Opera",Of="Firefox",Ul="Safari",bi=()=>Lh({current:void 0,version:Vl.unknown()}),Lh=l=>{const f=l.current,v=l.version,C=A=>()=>f===A;return{current:f,version:v,isEdge:C(Fd),isChromium:C($a),isIE:C(Af),isOpera:C(zl),isFirefox:C(Of),isSafari:C(Ul)}},$d={unknown:bi,nu:Lh,edge:ce(Fd),chromium:ce($a),ie:ce(Af),opera:ce(zl),firefox:ce(Of),safari:ce(Ul)},ra="Windows",Ni="iOS",ai="Android",td="Linux",Hd="macOS",Fh="Solaris",Vd="FreeBSD",jc="ChromeOS",Df=()=>Wg({current:void 0,version:Vl.unknown()}),Wg=l=>{const f=l.current,v=l.version,C=A=>()=>f===A;return{current:f,version:v,isWindows:C(ra),isiOS:C(Ni),isAndroid:C(ai),isMacOS:C(Hd),isLinux:C(td),isSolaris:C(Fh),isFreeBSD:C(Vd),isChromeOS:C(jc)}},$h={unknown:Df,nu:Wg,windows:ce(ra),ios:ce(Ni),android:ce(ai),linux:ce(td),macos:ce(Hd),solaris:ce(Fh),freebsd:ce(Vd),chromeos:ce(jc)},ym={detect:(l,f,v)=>{const C=kf.browsers(),A=kf.oses(),B=f.bind(ae=>pl(C,ae)).orThunk(()=>g1(C,l)).fold($d.unknown,$d.nu),U=wu(A,l).fold($h.unknown,$h.nu),J=Bh(U,B,l,v);return{browser:B,os:U,deviceType:J}}},zd=l=>window.matchMedia(l).matches;let nd=Hl(()=>ym.detect(window.navigator.userAgent,ve.from(window.navigator.userAgentData),zd));const Ud=()=>nd(),qs=(l,f)=>{const v=(J,ae)=>{if(!Ct(ae)&&!ae.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+ae);const Ce=J.dom;hl(Ce)&&(Ce.style[l]=ae+"px")},C=J=>{const ae=f(J);if(ae<=0||ae===null){const Ce=Yr(J,l);return parseFloat(Ce)||0}return ae},A=C,B=(J,ae)=>tt(ae,(Ce,Le)=>{const wt=Yr(J,Le),Vt=wt===void 0?0:parseInt(wt,10);return isNaN(Vt)?Ce:Ce+Vt},0);return{set:v,get:C,getOuter:A,aggregate:B,max:(J,ae,Ce)=>{const Le=B(J,Ce);return ae>Le?ae-Le:0}}},Qs=(l,f)=>yo(l).getOr(f),tc=(l,f,v)=>Qs(Yr(l,f),v),od=(l,f,v,C)=>{const A=tc(l,`padding-${v}`,0),B=tc(l,`padding-${C}`,0),U=tc(l,`border-${v}-width`,0),J=tc(l,`border-${C}-width`,0);return f-A-B-U-J},Hh=(l,f)=>{const v=l.dom,C=v.getBoundingClientRect().width||v.offsetWidth;return f==="border-box"?C:od(l,C,"left","right")},Ur=l=>tc(l,"height",l.dom.offsetHeight),mn=l=>tc(l,"width",l.dom.offsetWidth),Wl=l=>Hh(l,"content-box"),wm=qs("width",l=>l.dom.offsetWidth),pa=l=>wm.get(l),ts=l=>wm.getOuter(l),Su=Wl,Vh=mn,Wd=(l,f,v)=>{const C=l.cells,A=C.slice(0,f),B=C.slice(f),U=A.concat(v).concat(B);return Wr(l,U)},Zg=(l,f,v)=>Wd(l,f,[v]),Yn=(l,f,v)=>{const C=l.cells;C[f]=v},Wr=(l,f)=>he(l.element,f,l.section,l.isNew),sd=(l,f)=>{const v=l.cells,C=sn(v,f);return he(l.element,C,l.section,l.isNew)},Ra=(l,f)=>l.cells[f],vi=(l,f)=>Ra(l,f).element,nc=l=>l.cells.length,aa=l=>{const f=ms(l,v=>v.section==="colgroup");return{rows:f.fail,cols:f.pass}},ii=(l,f,v)=>{const C=sn(l.cells,v);return he(f(l.element),C,l.section,!0)},qi="data-snooker-locked-cols",Cm=l=>pe(l,qi).bind(f=>ve.from(f.match(/\d+/g))).map(f=>et(f,Fe)),rr=l=>{const f=tt(aa(l).rows,(C,A)=>(nt(A.cells,(B,U)=>{B.isLocked&&(C[U]=!0)}),C),{}),v=bs(f,(C,A)=>parseInt(A,10));return Tt(v)},rd=(l,f)=>l+","+f,dr=(l,f,v)=>ve.from(l.access[rd(f,v)]),xu=(l,f,v)=>{const C=ad(l,A=>v(f,A.element));return C.length>0?ve.some(C[0]):ve.none()},ad=(l,f)=>{const v=qo(l.all,C=>C.cells);return to(v,f)},gs=l=>{const f={};let v=0;return nt(l.cells,C=>{const A=C.colspan;$n(A,B=>{const U=v+B;f[U]=at(C.element,A,U)}),v+=A}),f},_c=l=>{const f={},v=[],A=Se(l).map(Ft=>Ft.element).bind(Sr).bind(Cm).getOr({});let B=0,U=0,J=0;const{pass:ae,fail:Ce}=ms(l,Ft=>Ft.section==="colgroup");nt(Ce,Ft=>{const Dt=[];nt(Ft.cells,ln=>{let ht=0;for(;f[rd(J,ht)]!==void 0;)ht++;const _t=Vo(A,ht.toString()),Mn=hu(ln.element,ln.rowspan,ln.colspan,J,ht,_t);for(let In=0;In<ln.colspan;In++)for(let bn=0;bn<ln.rowspan;bn++){const ir=J+bn,ds=ht+In,Br=rd(ir,ds);f[Br]=Mn,U=Math.max(U,ds+1)}Dt.push(Mn)}),B++,v.push(vr(Ft.element,Dt,Ft.section)),J++});const{columns:Le,colgroups:wt}=_o(ae).map(Ft=>{const Dt=gs(Ft);return{colgroups:[St(Ft.element,vs(Dt))],columns:Dt}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Or(B,U),access:f,all:v,columns:Le,colgroups:wt}},co={fromTable:l=>{const f=vu(l);return _c(f)},generate:_c,getAt:dr,findItem:xu,filterItems:ad,justCells:l=>qo(l.all,f=>f.cells),justColumns:l=>vs(l.columns),hasColumns:l=>Zt(l.columns).length>0,getColumnAt:(l,f)=>ve.from(l.columns[f])},id=(l,f=Fe)=>{const v=l.grid,C=$n(v.columns,Ke),A=$n(v.rows,Ke);return sn(C,B=>Rf(()=>qo(A,Ce=>co.getAt(l,Ce,B).filter(Le=>Le.column===B).toArray()),Ce=>Ce.colspan===1&&f(Ce.element),()=>co.getAt(l,0,B)))},Rf=(l,f,v)=>{const C=l();return W(C,f).orThunk(()=>ve.from(C[0]).orThunk(v)).map(U=>U.element)},Sm=l=>{const f=l.grid,v=$n(f.rows,Ke),C=$n(f.columns,Ke);return sn(v,A=>Rf(()=>qo(C,ae=>co.getAt(l,A,ae).filter(Ce=>Ce.row===A).fold(ce([]),Ce=>[Ce])),ae=>ae.rowspan===1,()=>co.getAt(l,A,0)))},k=(l,f)=>{if(f<0||f>=l.length-1)return ve.none();const v=l[f].fold(()=>{const A=Wi(l.slice(0,f));return To(A,(B,U)=>B.map(J=>({value:J,delta:U+1})))},A=>ve.some({value:A,delta:0})),C=l[f+1].fold(()=>{const A=l.slice(f+1);return To(A,(B,U)=>B.map(J=>({value:J,delta:U+1})))},A=>ve.some({value:A,delta:1}));return v.bind(A=>C.map(B=>{const U=B.delta+A.delta;return Math.abs(B.value-A.value)/U}))},I=(l,f)=>v=>q(v)==="rtl"?f:l,q=l=>Yr(l,"direction")==="rtl"?"rtl":"ltr",me=qs("height",l=>{const f=l.dom;return pn(l)?f.getBoundingClientRect().height:f.offsetHeight}),xe=l=>me.get(l),mt=l=>me.getOuter(l),kn=Ur,Jn=(l,f)=>({left:l,top:f,translate:(C,A)=>Jn(l+C,f+A)}),Dn=Jn,An=l=>{const f=l.getBoundingClientRect();return Dn(f.left,f.top)},Rs=(l,f)=>l!==void 0?l:f!==void 0?f:0,xr=l=>{const f=l.dom.ownerDocument,v=f.body,C=f.defaultView,A=f.documentElement;if(v===l.dom)return Dn(v.offsetLeft,v.offsetTop);const B=Rs(C==null?void 0:C.pageYOffset,A.scrollTop),U=Rs(C==null?void 0:C.pageXOffset,A.scrollLeft),J=Rs(A.clientTop,v.clientTop),ae=Rs(A.clientLeft,v.clientLeft);return oc(l).translate(U-ae,B-J)},oc=l=>{const f=l.dom,C=f.ownerDocument.body;return C===f?Dn(C.offsetLeft,C.offsetTop):pn(l)?An(f):Dn(0,0)},jl=(l,f)=>({row:l,y:f}),Mf=(l,f)=>({col:l,x:f}),zh=l=>xr(l).left+ts(l),ci=l=>xr(l).left,Uh=(l,f)=>Mf(l,ci(f)),Jb=(l,f)=>Mf(l,zh(f)),qg=l=>xr(l).top,Ha=(l,f)=>jl(l,qg(f)),Gg=(l,f)=>jl(l,qg(f)+mt(f)),Xr=(l,f,v)=>{if(v.length===0)return[];const C=sn(v.slice(1),(B,U)=>B.map(J=>l(U,J))),A=v[v.length-1].map(B=>f(v.length-1,B));return C.concat([A])},Qb=l=>-l,Bi={delta:Ke,positions:l=>Xr(Ha,Gg,l),edge:qg},xm=I({delta:Ke,edge:ci,positions:l=>Xr(Uh,Jb,l)},{delta:Qb,edge:zh,positions:l=>Xr(Jb,Uh,l)}),Wh={delta:(l,f)=>xm(f).delta(l,f),positions:(l,f)=>xm(f).positions(l,f),edge:l=>xm(l).edge(l)},Kg={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},p1=(()=>{const l="[0-9]+",v="[eE]"+("[+-]?"+l),C="\\.",A=J=>`(?:${J})?`,U=`[+-]?(?:${["Infinity",l+C+A(l)+A(v),C+l+A(v),l+A(v)].join("|")})`;return new RegExp(`^(${U})(.*)$`)})(),bl=(l,f)=>ct(f,v=>ct(Kg[v],C=>l===C)),_u=(l,f)=>ve.from(p1.exec(l)).bind(C=>{const A=Number(C[1]),B=C[2];return bl(B,f)?ve.some({value:A,unit:B}):ve.none()}),Zd=/(\d+(\.\d+)?)%/,Wt=/(\d+(\.\d+)?)px|em/,qc=hs("col"),Yg=hs("tr"),Nf=(l,f,v)=>{const C=oa(l).getOrThunk(()=>wc(Aa(l)));return f(l)/v(C)*100},vl=(l,f)=>{Kr(l,"width",f+"px")},Zh=(l,f)=>{Kr(l,"width",f+"%")},jd=(l,f)=>{Kr(l,"height",f+"px")},Pf=l=>{si(l,"height")},jh=l=>kn(l)+"px",ql=(l,f,v,C)=>{const A=Sr(l).map(B=>{const U=v(B);return Math.floor(f/100*U)}).getOr(f);return C(l,A),A},ev=(l,f,v,C)=>{const A=parseFloat(l);return Wc(l,"%")&&Wo(f)!=="table"?ql(f,A,v,C):A},ar=l=>{const f=jh(l);return f?ev(f,l,xe,jd):xe(l)},pt=(l,f,v)=>{const C=v(l),A=Zc(l,f);return C/A},yi=(l,f)=>Sf(l,f).orThunk(()=>pe(l,f).map(v=>v+"px")),Gl=l=>yi(l,"width"),ba=l=>yi(l,"height"),Em=l=>Nf(l,pa,Su),ia=l=>qc(l)?pa(l):Vh(l),Lo=l=>Yg(l)?xe(l):pt(l,"rowspan",ar),Xg=l=>Gl(l).bind(v=>_u(v,["fixed","relative","empty"])),rt=(l,f,v)=>{Kr(l,"width",f+v)},Fo=l=>pa(l)+"px",qh=l=>xe(l)+"px",Jr=l=>Nf(l,pa,Su)+"%",wi=l=>Gl(l).exists(f=>Zd.test(f)),tv=l=>Gl(l).exists(f=>Wt.test(f)),kc=l=>Gl(l).isNone(),Vy=ce(Zd),cd=hs("col"),nv=l=>Gl(l).getOrThunk(()=>ia(l)+"px"),Ac=l=>ba(l).getOrThunk(()=>Lo(l)+"px"),Bo=l=>sn(co.justColumns(l),f=>ve.from(f.element)),Tu=l=>{const f=Ud().browser,v=f.isChromium()||f.isFirefox();return cd(l)?v:!0},Bf=(l,f,v,C,A,B)=>l.filter(C).fold(()=>B(k(v,f)),U=>A(U)),ca=(l,f,v,C)=>{const A=id(l),B=co.hasColumns(l)?Bo(l):A,U=[ve.some(Wh.edge(f))].concat(sn(Wh.positions(A,f),ae=>ae.map(Ce=>Ce.x))),J=ne(ri);return sn(B,(ae,Ce)=>Bf(ae,Ce,U,J,Le=>{if(Tu(Le))return v(Le);{const wt=ml(A[Ce],Ke);return Bf(wt,Ce,U,J,Vt=>C(ve.some(pa(Vt))),C)}},C))},Jg=l=>l.map(f=>f+"px").getOr(""),ku=(l,f)=>ca(l,f,nv,Jg),Au=(l,f,v)=>ca(l,f,Em,C=>C.fold(()=>v.minCellWidth(),A=>A/v.pixelWidth()*100)),Bs=(l,f,v)=>ca(l,f,ia,C=>C.getOrThunk(v.minCellWidth)),_m=(l,f,v,C)=>{const A=Sm(l),B=sn(l.all,J=>ve.some(J.element)),U=[ve.some(Bi.edge(f))].concat(sn(Bi.positions(A,f),J=>J.map(ae=>ae.y)));return sn(B,(J,ae)=>Bf(J,ae,U,Fe,v,C))},Be=(l,f)=>_m(l,f,Lo,v=>v.getOrThunk(Rh)),Oc=(l,f)=>_m(l,f,Ac,Jg),Tm=(l,f)=>()=>pn(l)?f(l):parseFloat(Sf(l,"width").getOr("0")),Ci=l=>{const f=Tm(l,pa),v=ce(0);return{width:f,pixelWidth:f,getWidths:(A,B)=>Bs(A,l,B),getCellDelta:v,singleColumnWidth:ce([0]),minCellWidth:v,setElementWidth:Xe,adjustTableWidth:Xe,isRelative:!0,label:"none"}},Dc=l=>{const f=Tm(l,ae=>parseFloat(Jr(ae))),v=Tm(l,pa);return{width:f,pixelWidth:v,getWidths:(ae,Ce)=>Au(ae,l,Ce),getCellDelta:ae=>ae/v()*100,singleColumnWidth:(ae,Ce)=>[100-ae],minCellWidth:()=>Cr()/v()*100,setElementWidth:Zh,adjustTableWidth:ae=>{const Ce=f(),Le=ae/100*Ce,wt=Ce+Le;Zh(l,wt)},isRelative:!0,label:"percent"}},Mr=l=>{const f=Tm(l,pa);return{width:f,pixelWidth:f,getWidths:(U,J)=>Bs(U,l,J),getCellDelta:Ke,singleColumnWidth:(U,J)=>[Math.max(Cr(),U+J)-U],minCellWidth:Cr,setElementWidth:vl,adjustTableWidth:U=>{const J=f()+U;vl(l,J)},isRelative:!1,label:"pixel"}},fr=(l,f)=>Vy().exec(f)!==null?Dc(l):Mr(l),_={getTableSize:l=>Gl(l).fold(()=>Ci(l),v=>fr(l,v)),pixelSize:Mr,percentageSize:Dc,noneSize:Ci},R=(l,f,v,C,A,B)=>({minRow:l,minCol:f,maxRow:v,maxCol:C,allCells:A,selectedCells:B}),j=(l,f)=>{const v=l.grid.columns;let A=l.grid.rows,B=v,U=0,J=0;const ae=[],Ce=[];return Mo(l.access,Le=>{if(ae.push(Le),f(Le)){Ce.push(Le);const wt=Le.row,Vt=wt+Le.rowspan-1,Ft=Le.column,Dt=Ft+Le.colspan-1;wt<A?A=wt:Vt>U&&(U=Vt),Ft<B?B=Ft:Dt>J&&(J=Dt)}}),R(A,B,U,J,ae,Ce)},te=(l,f,v)=>{const C=l[v].element,A=_e.fromTag("td");Ls(A,_e.fromTag("br")),(f?Ls:Ar)(C,A)},Te=(l,f,v,C)=>{const A=to(l,J=>J.section!=="colgroup"),B=f.grid.columns,U=f.grid.rows;for(let J=0;J<U;J++){let ae=!1;for(let Ce=0;Ce<B;Ce++)J<v.minRow||J>v.maxRow||Ce<v.minCol||Ce>v.maxCol||(co.getAt(f,J,Ce).filter(C).isNone()?te(A,ae,J):ae=!0)}},ot=(l,f,v,C)=>{Mo(v.columns,U=>{(U.column<f.minCol||U.column>f.maxCol)&&br(U.element)});const A=to(gu(l,"tr"),U=>U.dom.childElementCount===0);nt(A,br),(f.minCol===f.maxCol||f.minRow===f.maxRow)&&nt(gu(l,"th,td"),U=>{fe(U,"rowspan"),fe(U,"colspan")}),fe(l,qi),fe(l,"data-snooker-col-series"),_.getTableSize(l).adjustTableWidth(C)},At=(l,f,v,C)=>{if(C.minCol===0&&f.grid.columns===C.maxCol+1)return 0;const A=Bs(f,l,v),B=tt(A,(Ce,Le)=>Ce+Le,0),ae=tt(A.slice(C.minCol,C.maxCol+1),(Ce,Le)=>Ce+Le,0)/B*v.pixelWidth()-v.pixelWidth();return v.getCellDelta(ae)},on=(l,f)=>{const v=Vt=>Wn(Vt.element,f),C=ec(l),A=vu(C),B=_.getTableSize(l),U=co.generate(A),J=j(U,v),ae="th:not("+f+"),td:not("+f+")",Ce=pu(C,"th,td",Vt=>Wn(Vt,ae));nt(Ce,br),Te(A,U,J,v);const Le=co.fromTable(l),wt=At(l,Le,B,J);return ot(C,J,U,wt),C},Zn="",Yo=((l,f)=>{const v=B=>{if(!l(B))throw new Error("Can only get "+f+" value of a "+f+" node");return C(B).getOr("")},C=B=>l(B)?ve.from(B.dom.nodeValue):ve.none();return{get:v,getOption:C,set:(B,U)=>{if(!l(B))throw new Error("Can only set raw "+f+" value of a "+f+" node");B.dom.nodeValue=U}}})(Qa,"text"),Xo=l=>Yo.get(l),er=l=>Yo.getOption(l),Rc=(l,f)=>Yo.set(l,f),Va=l=>Wo(l)==="img"?1:er(l).fold(()=>xo(l).length,f=>f.length),Kl=l=>er(l).filter(f=>f.trim().length!==0||f.indexOf(Zn)>-1).isSome(),yl=l=>Sn(l)&&Tr(l,"contenteditable")==="false",Ou=["img","br"],Gh=l=>Kl(l)||an(Ou,Wo(l))||yl(l),Gc=l=>ha(l,Gh),km=l=>Qg(l,Gh),Qg=(l,f)=>{const v=C=>{const A=xo(C);for(let B=A.length-1;B>=0;B--){const U=A[B];if(f(U))return ve.some(U);const J=v(U);if(J.isSome())return J}return ve.none()};return v(l)},ep={scope:["row","col"]},If=l=>()=>{const f=_e.fromTag("td",l.dom);return Ls(f,_e.fromTag("br",l.dom)),f},va=l=>()=>_e.fromTag("col",l.dom),Yl=l=>()=>_e.fromTag("colgroup",l.dom),No=l=>()=>_e.fromTag("tr",l.dom),Ms=(l,f,v)=>{const C=uu(l,f);return Mo(v,(A,B)=>{A===null?fe(C,B):Zs(C,B,A)}),C},Ii=l=>l,Er=(l,f,v)=>Gc(l).map(A=>{const B=v.join(","),U=Ie(A,B,J=>Zo(J,l));return os(U,(J,ae)=>{const Ce=Ia(ae);return Ls(J,Ce),Ce},f)}).getOr(f),tp=(l,f)=>{Mo(ep,(v,C)=>pe(l,C).filter(A=>an(v,A)).each(A=>Zs(f,C,A)))},Lf=(l,f,v)=>{const C=(U,J)=>{Dh(U.element,J),si(J,"height"),U.colspan!==1&&si(J,"width")},A=U=>{const J=_e.fromTag(Wo(U.element),f.dom),ae=v.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Ce=ae.length>0?Er(U.element,J,ae):J;return Ls(Ce,_e.fromTag("br")),C(U,J),tp(U.element,J),l(U.element,J),J};return{col:U=>{const J=_e.fromTag(Wo(U.element),f.dom);return C(U,J),l(U.element,J),J},colgroup:Yl(f),row:No(f),cell:A,replace:Ms,colGap:va(f),gap:If(f)}},Ff=l=>({col:va(l),colgroup:Yl(l),row:No(l),cell:If(l),replace:Ii,colGap:va(l),gap:If(l)}),Kc=(l,f)=>{const C=document.createElement("div");return C.innerHTML=l,xo(_e.fromDom(C))},ld=l=>sn(l,_e.fromDom),qd=l=>f=>f.options.get(l),Du="100%",b1=l=>{var f;const v=l.dom,C=(f=v.getParent(l.selection.getStart(),v.isBlock))!==null&&f!==void 0?f:l.getBody();return Su(_e.fromDom(C))+"px"},Gd=(l,f)=>Xl(l)||!v1(l)?f:$f(l)?{...f,width:b1(l)}:{...f,width:Du},np=(l,f)=>Xl(l)||v1(l)?f:$f(l)?{...f,width:b1(l)}:{...f,width:Du},Kh=l=>{const f=l.options.register;f("table_clone_elements",{processor:"string[]"}),f("table_use_colgroups",{processor:"boolean",default:!0}),f("table_header_type",{processor:v=>{const C=an(["section","cells","sectionCells","auto"],v);return C?{value:v,valid:C}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),f("table_sizing_mode",{processor:"string",default:"auto"}),f("table_default_attributes",{processor:"object",default:{border:"1"}}),f("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),f("table_column_resizing",{processor:v=>{const C=an(["preservetable","resizetable"],v);return C?{value:v,valid:C}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),f("table_resize_bars",{processor:"boolean",default:!0}),f("table_style_by_css",{processor:"boolean",default:!0}),f("table_merge_content_on_paste",{processor:"boolean",default:!0})},VS=l=>ve.from(l.options.get("table_clone_elements")),ud=l=>{const f=l.options.get("object_resizing");return an(f.split(","),"table")},zS=qd("table_header_type"),Uy=qd("table_column_resizing"),Nr=l=>Uy(l)==="preservetable",ov=l=>Uy(l)==="resizetable",dd=qd("table_sizing_mode"),Am=l=>dd(l)==="relative",$f=l=>dd(l)==="fixed",Xl=l=>dd(l)==="responsive",Jl=qd("table_resize_bars"),v1=qd("table_style_by_css"),fd=qd("table_merge_content_on_paste"),Li=l=>{const f=l.options,v=f.get("table_default_attributes");return f.isSet("table_default_attributes")?v:np(l,v)},y1=l=>{const f=l.options,v=f.get("table_default_styles");return f.isSet("table_default_styles")?v:Gd(l,v)},Wy=qd("table_use_colgroups"),w1=l=>lr(l,"[contenteditable]"),C1=(l,f=!1)=>pn(l)?l.dom.isContentEditable:w1(l).fold(ce(f),v=>Zy(v)==="true"),Zy=l=>l.dom.contentEditable,Yh=l=>_e.fromDom(l.getBody()),md=l=>f=>Zo(f,Yh(l)),sc=l=>{fe(l,"data-mce-style");const f=v=>fe(v,"data-mce-style");nt(xc(l),f),nt(Ef(l),f),nt(_f(l),f)},Ql=l=>_e.fromDom(l.selection.getStart()),Om=l=>l.getBoundingClientRect().width,jy=l=>l.getBoundingClientRect().height,Xh=l=>(f,v)=>{const C=f.dom.getStyle(v,l)||f.dom.getAttrib(v,l);return ve.from(C).filter(La)},qy=Xh("width"),US=Xh("height"),WS=l=>/^(\d+(\.\d+)?)%$/.test(l),ZS=l=>/^(\d+(\.\d+)?)px$/.test(l),Dm=l=>vt(l,hs("table")).exists(C1),Jh=(l,f)=>{const v=f.column,C=f.column+f.colspan-1,A=f.row,B=f.row+f.rowspan-1;return v<=l.finishCol&&C>=l.startCol&&A<=l.finishRow&&B>=l.startRow},ao=(l,f)=>f.column>=l.startCol&&f.column+f.colspan-1<=l.finishCol&&f.row>=l.startRow&&f.row+f.rowspan-1<=l.finishRow,_n=(l,f)=>{let v=!0;const C=jt(ao,f);for(let A=f.startRow;A<=f.finishRow;A++)for(let B=f.startCol;B<=f.finishCol;B++)v=v&&co.getAt(l,A,B).exists(C);return v?ve.some(f):ve.none()},Rm=(l,f)=>Re(Math.min(l.row,f.row),Math.min(l.column,f.column),Math.max(l.row+l.rowspan-1,f.row+f.rowspan-1),Math.max(l.column+l.colspan-1,f.column+f.colspan-1)),S1=(l,f,v)=>{const C=co.findItem(l,f,Zo),A=co.findItem(l,v,Zo);return C.bind(B=>A.map(U=>Rm(B,U)))},sv=(l,f,v)=>S1(l,f,v).bind(C=>_n(l,C)),Gy=(l,f,v,C)=>co.findItem(l,f,Zo).bind(A=>{const B=v>0?A.row+A.rowspan-1:A.row,U=C>0?A.column+A.colspan-1:A.column;return co.getAt(l,B+v,U+C).map(ae=>ae.element)}),Kd=(l,f,v)=>S1(l,f,v).map(C=>{const A=co.filterItems(l,jt(Jh,C));return sn(A,B=>B.element)}),Fs=(l,f)=>{const v=(C,A)=>zc(A,C);return co.findItem(l,f,v).map(C=>C.element)},jS=(l,f,v)=>Sr(l).bind(C=>{const A=Qh(C);return Gy(A,l,f,v)}),Ky=(l,f,v)=>{const C=Qh(l);return Kd(C,f,v)},Yy=(l,f,v,C,A)=>{const B=Qh(l),U=Zo(l,v)?ve.some(f):Fs(B,f),J=Zo(l,A)?ve.some(C):Fs(B,C);return U.bind(ae=>J.bind(Ce=>Kd(B,ae,Ce)))},it=(l,f,v)=>{const C=Qh(l);return sv(C,f,v)},Qh=co.fromTable;var Ck=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Mm=()=>{const l=Ce=>_e.fromDom(Ce.dom.cloneNode(!1)),f=Ce=>Ps(Ce).dom,v=Ce=>Ys(Ce)?Wo(Ce)==="body"?!0:an(Ck,Wo(Ce)):!1,C=Ce=>Ys(Ce)?an(["br","img","hr","input"],Wo(Ce)):!1,A=Ce=>Ys(Ce)&&Tr(Ce,"contenteditable")==="false",B=(Ce,Le)=>Ce.dom.compareDocumentPosition(Le.dom),U=(Ce,Le)=>{const wt=He(Ce);Ta(Le,wt)},J=Ce=>{const Le=Wo(Ce);return an(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Le)},ae=Ce=>Ys(Ce)?pe(Ce,"lang"):ve.none();return{up:ce({selector:ni,closest:lr,predicate:rs,all:kr}),down:ce({selector:qn,predicate:ye}),styles:ce({get:Yr,getRaw:Sf,set:Kr,remove:si}),attrs:ce({get:Tr,set:Zs,remove:fe,copyTo:U}),insert:ce({before:Qi,after:ei,afterAll:Uo,append:Ls,appendAll:Oa,prepend:Ar,wrap:ji}),remove:ce({unwrap:$l,remove:br}),create:ce({nu:_e.fromTag,clone:l,text:_e.fromText}),query:ce({comparePosition:B,prevSibling:Ji,nextSibling:Ri}),property:ce({children:xo,name:Wo,parent:na,document:f,isText:Qa,isComment:zo,isElement:Ys,isSpecial:J,getLanguage:ae,getText:Xo,setText:Rc,isBoundary:v,isEmptyTag:C,isNonEditable:A}),eq:Zo,is:Gr}};const Sk=(l,f,v,C)=>{const A=v[0],B=v.slice(1);return C(l,f,A,B)},eg=(l,f,v)=>v.length>0?Sk(l,f,v,Xy):ve.none(),Xy=(l,f,v,C)=>{const A=f(l,v);return os(C,(B,U)=>{const J=f(l,U);return hd(l,B,J)},A)},hd=(l,f,v)=>f.bind(C=>v.filter(jt(l.eq,C))),Jy=(l,f)=>jt(l.eq,f),op=(l,f,v,C=Qt)=>{const A=[f].concat(l.up().all(f)),B=[v].concat(l.up().all(v)),U=Le=>ta(Le,C).fold(()=>Le,Vt=>Le.slice(0,Vt+1)),J=U(A),ae=U(B),Ce=W(J,Le=>ct(ae,Jy(l,Le)));return{firstpath:J,secondpath:ae,shared:Ce}},Gs=eg,Yd=op,Qy=Mm(),Ru=(l,f)=>Gs(Qy,(v,C)=>l(C),f),ew=(l,f,v)=>Yd(Qy,l,f,v),x1=l=>ni(l,"table"),sp=(l,f,v)=>{const C=A=>B=>v!==void 0&&v(B)||Zo(B,A);return Zo(l,f)?ve.some({boxes:ve.some([l]),start:l,finish:f}):x1(l).bind(A=>x1(f).bind(B=>{if(Zo(A,B))return ve.some({boxes:Ky(A,l,f),start:l,finish:f});if(zc(A,B)){const U=Ie(f,"td,th",C(A)),J=U.length>0?U[U.length-1]:f;return ve.some({boxes:Yy(A,l,A,f,B),start:l,finish:J})}else if(zc(B,A)){const U=Ie(l,"td,th",C(B)),J=U.length>0?U[U.length-1]:l;return ve.some({boxes:Yy(B,l,A,f,B),start:l,finish:J})}else return ew(l,f).shared.bind(U=>lr(U,"table",v).bind(J=>{const ae=Ie(f,"td,th",C(J)),Ce=ae.length>0?ae[ae.length-1]:f,Le=Ie(l,"td,th",C(J)),wt=Le.length>0?Le[Le.length-1]:l;return ve.some({boxes:Yy(J,l,A,f,B),start:wt,finish:Ce})}))}))},E1=(l,f)=>{const v=qn(l,f);return v.length>0?ve.some(v):ve.none()},Yc=(l,f)=>W(l,v=>Wn(v,f)),qS=(l,f,v)=>oi(l,f).bind(C=>oi(l,v).bind(A=>Ru(x1,[C,A]).map(B=>({first:C,last:A,table:B})))),_1=(l,f)=>ni(l,"table").bind(v=>oi(v,f).bind(C=>sp(C,l).bind(A=>A.boxes.map(B=>({boxes:B,start:A.start,finish:A.finish}))))),tw=(l,f,v,C,A)=>Yc(l,A).bind(B=>jS(B,f,v).bind(U=>_1(U,C))),Nm=(l,f)=>E1(l,f),nw=(l,f,v)=>qS(l,f,v).bind(C=>{const A=ae=>Zo(l,ae),B="thead,tfoot,tbody,table",U=ni(C.first,B,A),J=ni(C.last,B,A);return U.bind(ae=>J.bind(Ce=>Zo(ae,Ce)?it(C.table,C.first,C.last):ve.none()))}),GS=Ke,ow=l=>{const f=(C,A)=>pe(C,A).exists(B=>parseInt(B,10)>1),v=C=>f(C,"rowspan")||f(C,"colspan");return l.length>0&&Ho(l,v)?ve.some(l):ve.none()},KS=(l,f,v)=>f.length<=1?ve.none():nw(l,v.firstSelectedSelector,v.lastSelectedSelector).map(C=>({bounds:C,cells:f})),Gi="data-mce-selected",Xc="td["+Gi+"],th["+Gi+"]",xt="["+Gi+"]",rv="data-mce-first-selected",li="td["+rv+"],th["+rv+"]",av="data-mce-last-selected",YS="td["+av+"],th["+av+"]",Ks=xt,Hf={selected:Gi,selectedSelector:Xc,firstSelected:rv,firstSelectedSelector:li,lastSelected:av,lastSelectedSelector:YS},iv=(l,f,v)=>({element:v,mergable:KS(f,l,Hf),unmergable:ow(l),selection:GS(l)}),xk=(l,f,v)=>({element:l,clipboard:f,generators:v}),Vf=(l,f,v,C)=>({selection:GS(l),clipboard:v,generators:C}),cv=l=>Sr(l).bind(f=>Nm(f,Hf.firstSelectedSelector)).fold(ce(l),f=>f[0]),gd=l=>(f,v)=>{const C=Wo(f),A=C==="col"||C==="colgroup"?cv(f):f;return lr(A,l,v)},XS=gd("th,td,caption"),sw=gd("th,td"),$s=l=>ld(l.model.table.getSelectedCells()),rp=l=>to($s(l),f=>Wn(f,Hf.selectedSelector)),mr=l=>Sr(l[0]).map(f=>{const v=on(f,Ks);return sc(v),[v]}),JS=(l,f)=>sn(f,v=>l.selection.serializer.serialize(v.dom,{})).join(""),Jc=l=>sn(l,f=>f.dom.innerText).join(""),ap=(l,f)=>{l.on("BeforeGetContent",v=>{const C=A=>{v.preventDefault(),mr(A).each(B=>{v.content=v.format==="text"?Jc(B):JS(l,B)})};if(v.selection===!0){const A=rp(l);A.length>=1&&C(A)}}),l.on("BeforeSetContent",v=>{if(v.selection===!0&&v.paste===!0){const C=$s(l);Se(C).each(A=>{Sr(A).each(B=>{const U=to(Kc(v.content),ae=>Wo(ae)!=="meta"),J=hs("table");if(fd(l)&&U.length===1&&J(U[0])){v.preventDefault();const ae=_e.fromDom(l.getDoc()),Ce=Ff(ae),Le=xk(A,U[0],Ce);f.pasteCells(B,Le).each(()=>{l.focus()})}})})}})},Qc=(l,f)=>({element:l,offset:f}),Ek=(l,f,v)=>l.property().isText(f)&&l.property().getText(f).trim().length===0||l.property().isComment(f)?v(f).bind(C=>Ek(l,C,v).orThunk(()=>ve.some(C))):ve.none(),_k=(l,f)=>l.property().isText(f)?l.property().getText(f).length:l.property().children(f).length,Tk=(l,f)=>{const v=Ek(l,f,l.query().prevSibling).getOr(f);if(l.property().isText(v))return Qc(v,_k(l,v));const C=l.property().children(v);return C.length>0?Tk(l,C[C.length-1]):Qc(v,_k(l,v))},kk=Tk,za=Mm(),rc=l=>kk(za,l),T1=(l,f)=>{ri(l)||Xg(l).each(C=>{const A=C.value/2;rt(l,A,C.unit),rt(f,A,C.unit)})},Pm=l=>sn(l,ce(0)),rw=(l,f,v,C,A)=>A(l.slice(0,f)).concat(C).concat(A(l.slice(v))),ip=l=>(f,v,C,A)=>{if(l(C)){const B=Math.max(A,f[v]-Math.abs(C)),U=Math.abs(B-f[v]);return C>=0?U:-U}else return C},Xd=ip(l=>l<0),cp=ip(Fe),tg=()=>{const l=(J,ae,Ce,Le,wt)=>{const Vt=Xd(J,ae,Le,wt);return rw(J,ae,Ce+1,[Vt,0],Pm)},f=(J,ae,Ce,Le)=>{const wt=(100+Ce)/100,Vt=Math.max(Le,(J[ae]+Ce)/wt);return sn(J,(Ft,Dt)=>(Dt===ae?Vt:Ft/wt)-Ft)},v=(J,ae,Ce,Le,wt,Vt)=>Vt?f(J,ae,Le,wt):l(J,ae,Ce,Le,wt);return{resizeTable:(J,ae)=>J(ae),clampTableDelta:Xd,calcLeftEdgeDeltas:v,calcMiddleDeltas:(J,ae,Ce,Le,wt,Vt,Ft)=>v(J,Ce,Le,wt,Vt,Ft),calcRightEdgeDeltas:(J,ae,Ce,Le,wt,Vt)=>{if(Vt)return f(J,Ce,Le,wt);{const Ft=Xd(J,Ce,Le,wt);return Pm(J.slice(0,Ce)).concat([Ft])}},calcRedestributedWidths:(J,ae,Ce,Le)=>{if(Le){const Vt=(ae+Ce)/ae,Ft=sn(J,Dt=>Dt/Vt);return{delta:Vt*100-100,newSizes:Ft}}else return{delta:Ce,newSizes:J}}}},Bm=()=>{const l=(U,J,ae,Ce,Le)=>{const wt=Ce>=0?ae:J,Vt=cp(U,wt,Ce,Le);return rw(U,J,ae+1,[Vt,-Vt],Pm)};return{resizeTable:(U,J,ae)=>{ae&&U(J)},clampTableDelta:(U,J,ae,Ce,Le)=>{if(Le){if(ae>=0)return ae;{const wt=tt(U,(Vt,Ft)=>Vt+Ft-Ce,0);return Math.max(-wt,ae)}}else return Xd(U,J,ae,Ce)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(U,J,ae,Ce,Le,wt)=>l(U,ae,Ce,Le,wt),calcRightEdgeDeltas:(U,J,ae,Ce,Le,wt)=>{if(wt)return Pm(U);{const Vt=Ce/U.length;return sn(U,ce(Vt))}},calcRedestributedWidths:(U,J,ae,Ce)=>({delta:0,newSizes:U})}},Jd=l=>co.fromTable(l).grid,ng=hs("th"),og=l=>Ho(l,f=>ng(f.element)),Ak=(l,f)=>l&&f?"sectionCells":l?"section":"cells",aw=l=>{const f=l.section==="thead",v=ed(lv(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:f||v?{type:"header",subType:Ak(f,v)}:{type:"body"}},lv=l=>{const f=to(l,v=>ng(v.element));return f.length===0?ve.some("td"):f.length===l.length?ve.some("th"):ve.none()},QS=l=>{const f=sn(l,A=>aw(A).type),v=an(f,"header"),C=an(f,"footer");if(!v&&!C)return ve.some("body");{const A=an(f,"body");return v&&!A&&!C?ve.some("header"):!v&&!A&&C?ve.some("footer"):ve.none()}},iw=l=>To(l.all,f=>{const v=aw(f);return v.type==="header"?ve.from(v.subType):ve.none()}),uv=(l,f,v)=>X(v(l.element,f),!0,l.isLocked),cw=(l,f)=>l.section!==f?he(l.element,l.cells,f,l.isNew):l,lw=()=>({transformRow:cw,transformCell:(l,f,v)=>{const C=v(l.element,f),A=Wo(C)!=="td"?fl(C,"td"):C;return X(A,l.isNew,l.isLocked)}}),uw=()=>({transformRow:cw,transformCell:uv}),k1=()=>({transformRow:(l,f)=>cw(l,f==="thead"?"tbody":f),transformCell:uv}),A1={getTableSectionType:(l,f)=>{const v=co.fromTable(l);switch(iw(v).getOr(f)){case"section":return lw();case"sectionCells":return uw();case"cells":return k1()}},section:lw,sectionCells:uw,cells:k1,fallback:()=>({transformRow:Ke,transformCell:uv})},lp=(l,f,v,C)=>{v===C?fe(l,f):Zs(l,f,v)},Im=(l,f,v)=>{_o(lt(l,f)).fold(()=>Ar(l,v),C=>ei(C,v))},dw=(l,f)=>{const v=Xn(l,f).getOrThunk(()=>{const C=_e.fromTag(f,Aa(l).dom);return f==="thead"?Im(l,"caption,colgroup",C):f==="colgroup"?Im(l,"caption",C):Ls(l,C),C});return ma(v),v},fw=(l,f)=>{const v=[],C=[],A=Ft=>sn(Ft,Dt=>{Dt.isNew&&v.push(Dt.element);const ln=Dt.element;return ma(ln),nt(Dt.cells,ht=>{ht.isNew&&C.push(ht.element),lp(ht.element,"colspan",ht.colspan,1),lp(ht.element,"rowspan",ht.rowspan,1),Ls(ln,ht.element)}),ln}),B=Ft=>qo(Ft,Dt=>sn(Dt.cells,ln=>(lp(ln.element,"span",ln.colspan,1),ln.element))),U=(Ft,Dt)=>{const ln=dw(l,Dt),_t=(Dt==="colgroup"?B:A)(Ft);Oa(ln,_t)},J=Ft=>{Xn(l,Ft).each(br)},ae=(Ft,Dt)=>{Ft.length>0?U(Ft,Dt):J(Dt)},Ce=[],Le=[],wt=[],Vt=[];return nt(f,Ft=>{switch(Ft.section){case"thead":Ce.push(Ft);break;case"tbody":Le.push(Ft);break;case"tfoot":wt.push(Ft);break;case"colgroup":Vt.push(Ft);break}}),ae(Vt,"colgroup"),ae(Ce,"thead"),ae(Le,"tbody"),ae(wt,"tfoot"),{newRows:v,newCells:C}},ex=l=>sn(l,f=>{const v=Ia(f.element);return nt(f.cells,C=>{const A=ec(C.element);lp(A,"colspan",C.colspan,1),lp(A,"rowspan",C.rowspan,1),Ls(v,A)}),v}),mw=(l,f)=>sn(l,v=>Ra(v,f)),sg=(l,f)=>l[f],Ok=(l,f)=>{if(l.length===0)return 0;const v=l[0];return ta(l,A=>!f(v.element,A.element)).getOr(l.length)},hw=(l,f,v,C)=>{const A=sg(l,f),B=A.section==="colgroup",U=Ok(A.cells.slice(v),C),J=B?1:Ok(mw(l.slice(f),v),C);return{colspan:U,rowspan:J}},Lm=(l,f)=>{const v=sn(l,A=>sn(A.cells,Qt)),C=(A,B,U,J)=>{for(let ae=A;ae<A+U;ae++)for(let Ce=B;Ce<B+J;Ce++)v[ae][Ce]=!0};return sn(l,(A,B)=>{const U=qo(A.cells,(J,ae)=>{if(v[B][ae]===!1){const Ce=hw(l,B,ae,f);return C(B,ae,Ce.rowspan,Ce.colspan),[mu(J.element,Ce.rowspan,Ce.colspan,J.isNew)]}else return[]});return gi(A.element,U,A.section,A.isNew)})},up=(l,f,v)=>{const C=[];nt(l.colgroups,A=>{const B=[];for(let U=0;U<l.grid.columns;U++){const J=co.getColumnAt(l,U).map(ae=>X(ae.element,v,!1)).getOrThunk(()=>X(f.colGap(),!0,!1));B.push(J)}C.push(he(A.element,B,"colgroup",v))});for(let A=0;A<l.grid.rows;A++){const B=[];for(let ae=0;ae<l.grid.columns;ae++){const Ce=co.getAt(l,A,ae).map(Le=>X(Le.element,v,Le.isLocked)).getOrThunk(()=>X(f.gap(),!0,!1));B.push(Ce)}const U=l.all[A],J=he(U.element,B,U.section,v);C.push(J)}return C},gw=(l,f)=>up(l,f,!1),fv=l=>Lm(l,Zo),pw=(l,f)=>To(l.all,v=>W(v.cells,C=>Zo(f,C.element))),tx=(l,f,v)=>{const C=sn(f.selection,B=>bu(B).bind(U=>pw(l,U)).filter(v)),A=xs(C);return gm(A.length>0,A)},Fi=(l,f,v,C,A)=>(B,U,J,ae)=>{const Ce=co.fromTable(B),Le=ve.from(ae==null?void 0:ae.section).getOrThunk(A1.fallback);return f(Ce,U).map(Vt=>{const Ft=gw(Ce,J),Dt=l(Ft,Vt,Zo,A(J),Le),ln=rr(Dt.grid),ht=fv(Dt.grid);return{info:Vt,grid:ht,cursor:Dt.cursor,lockedColumns:ln}}).bind(Vt=>{const Ft=fw(B,Vt.grid),Dt=ve.from(ae==null?void 0:ae.sizing).getOrThunk(()=>_.getTableSize(B)),ln=ve.from(ae==null?void 0:ae.resize).getOrThunk(Bm);return v(B,Vt.grid,Vt.info,{sizing:Dt,resize:ln,section:Le}),C(B),fe(B,qi),Vt.lockedColumns.length>0&&Zs(B,qi,Vt.lockedColumns.join(",")),ve.some({cursor:Vt.cursor,newRows:Ft.newRows,newCells:Ft.newCells})})},kM=(l,f)=>bu(f.element).bind(v=>pw(l,v).map(C=>({...C,generators:f.generators,clipboard:f.clipboard}))),bw=(l,f)=>tx(l,f,Fe).map(v=>({cells:v,generators:f.generators,clipboard:f.clipboard})),O1=(l,f)=>f.mergable,Dk=(l,f)=>f.unmergable,el=(l,f)=>tx(l,f,Fe),Mu=(l,f)=>tx(l,f,v=>!v.isLocked),Fm=(l,f)=>pw(l,f).exists(v=>!v.isLocked),rg=(l,f)=>Ho(f,v=>Fm(l,v)),nx=(l,f)=>O1(l,f).filter(v=>rg(l,v.cells)),D1=(l,f)=>Dk(l,f).filter(v=>rg(l,v)),mv=(l,f,v,C)=>{const A=aa(l).rows;if(A.length===0)return l;for(let B=f.startRow;B<=f.finishRow;B++)for(let U=f.startCol;U<=f.finishCol;U++){const J=A[B],ae=Ra(J,U).isLocked;Yn(J,U,X(C(),!1,ae))}return l},ox=(l,f,v,C)=>{const A=aa(l).rows;let B=!0;for(let U=0;U<A.length;U++)for(let J=0;J<nc(A[0]);J++){const ae=A[U],Ce=Ra(ae,J),Le=Ce.element,wt=v(Le,f);wt&&!B?Yn(ae,J,X(C(),!0,Ce.isLocked)):wt&&(B=!1)}return l},$m=(l,f)=>tt(l,(v,C)=>ct(v,A=>f(A.element,C.element))?v:v.concat([C]),[]),ag=(l,f,v,C)=>(f>0&&f<l[0].cells.length&&nt(l,A=>{const B=A.cells[f-1];let U=0;const J=C();for(;A.cells.length>f+U&&v(B.element,A.cells[f+U].element);)Yn(A,f+U,X(J,!0,A.cells[f+U].isLocked)),U++}),l),eu=(l,f,v,C)=>{const A=aa(l).rows;if(f>0&&f<A.length){const B=A[f-1].cells,U=$m(B,v);nt(U,J=>{let ae=ve.none();for(let Ce=f;Ce<A.length;Ce++)for(let Le=0;Le<nc(A[0]);Le++){const wt=A[Ce],Vt=Ra(wt,Le);v(Vt.element,J.element)&&(ae.isNone()&&(ae=ve.some(C())),ae.each(Dt=>{Yn(wt,Le,X(Dt,!0,Vt.isLocked))}))}})}return l},hv=l=>{const f=B=>B(l),v=ce(l),C=()=>A,A={tag:!0,inner:l,fold:(B,U)=>U(l),isValue:Fe,isError:Qt,map:B=>ac.value(B(l)),mapError:C,bind:f,exists:f,forall:f,getOr:v,or:C,getOrThunk:v,orThunk:C,getOrDie:v,each:B=>{B(l)},toOptional:()=>ve.some(l)};return A},Ma=l=>{const f=()=>v,v={tag:!1,inner:l,fold:(C,A)=>C(l),isValue:Qt,isError:Fe,map:f,mapError:C=>ac.error(C(l)),bind:f,exists:Qt,forall:Fe,getOr:Ke,or:Ke,getOrThunk:Bn,orThunk:Bn,getOrDie:Jt(String(l)),each:Xe,toOptional:ve.none};return v},ac={value:hv,error:Ma,fromOption:(l,f)=>l.fold(()=>Ma(f),hv)},Rk=(l,f,v)=>{if(l.row>=f.length||l.column>nc(f[0]))return ac.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const C=f.slice(l.row),A=C[0].cells.slice(l.column),B=nc(v[0]),U=v.length;return ac.value({rowDelta:C.length-U,colDelta:A.length-B})},sx=(l,f)=>{const v=nc(l[0]),C=nc(f[0]);return{rowDelta:0,colDelta:v-C}},zf=(l,f)=>{const v=l.length,C=f.length;return{rowDelta:v-C,colDelta:0}},Hm=(l,f,v,C)=>{const A=f.section==="colgroup"?v.col:v.cell;return $n(l,B=>X(A(),!0,C(B)))},Uf=(l,f,v,C)=>{const A=l[l.length-1];return l.concat($n(f,()=>{const B=A.section==="colgroup"?v.colgroup:v.row,U=ii(A,B,Ke),J=Hm(U.cells.length,U,v,ae=>Cs(C,ae.toString()));return Wr(U,J)}))},tl=(l,f,v,C)=>sn(l,A=>{const B=Hm(f,A,v,Qt);return Wd(A,C,B)}),rx=(l,f,v)=>sn(l,C=>tt(v,(A,B)=>{const U=Hm(1,C,f,Fe)[0];return Zg(A,B,U)},C)),R1=(l,f,v)=>{const C=f.colDelta<0?tl:Ke,A=f.rowDelta<0?Uf:Ke,B=rr(l),U=nc(l[0]),J=ct(B,Le=>Le===U-1),ae=C(l,Math.abs(f.colDelta),v,J?U-1:U),Ce=rr(ae);return A(ae,Math.abs(f.rowDelta),v,et(Ce,Fe))},yw=(l,f,v,C)=>{const A=Ra(l[f],v),B=jt(C,A.element),U=l[f];return l.length>1&&nc(U)>1&&(v>0&&B(vi(U,v-1))||v<U.cells.length-1&&B(vi(U,v+1))||f>0&&B(vi(l[f-1],v))||f<l.length-1&&B(vi(l[f+1],v)))},dp=(l,f,v,C,A,B)=>{const U=l.row,J=l.column,ae=v.length,Ce=nc(v[0]),Le=U+ae,wt=J+Ce+B.length,Vt=et(B,Fe);for(let Ft=U;Ft<Le;Ft++){let Dt=0;for(let ln=J;ln<wt;ln++){if(Vt[ln]){Dt++;continue}yw(f,Ft,ln,A)&&ox(f,vi(f[Ft],ln),A,C.cell);const ht=ln-J-Dt,_t=Ra(v[Ft-U],ht),Mn=_t.element,In=C.replace(Mn);Yn(f[Ft],ln,X(In,!0,_t.isLocked))}}return f},ig=(l,f,v)=>{const C=nc(f[0]),A=aa(f).cols.length+l.row,B=$n(C-l.column,J=>J+l.column),U=W(B,J=>Ho(v,ae=>ae!==J)).getOr(C-1);return{row:A,column:U}},Vm=(l,f,v)=>to(v,C=>C>=l.column&&C<=nc(f[0])+l.column),ko=(l,f,v,C,A)=>{const B=rr(f),U=ig(l,f,B),J=aa(v).rows,ae=Vm(U,J,B);return Rk(U,f,J).map(Le=>{const wt={...Le,colDelta:Le.colDelta-ae.length},Vt=R1(f,wt,C),Ft=rr(Vt),Dt=Vm(U,J,Ft);return dp(U,Vt,J,C,A,Dt)})},Mc=(l,f,v,C,A)=>{ag(f,l,A,C.cell);const B=zf(v,f),U=R1(v,B,C),J=zf(f,U),ae=R1(f,J,C);return sn(ae,(Ce,Le)=>Wd(Ce,l,U[Le].cells))},Qd=(l,f,v,C,A)=>{eu(f,l,A,C.cell);const B=rr(f),U=sx(f,v),J={...U,colDelta:U.colDelta-B.length},ae=R1(f,J,C),{cols:Ce,rows:Le}=aa(ae),wt=rr(ae),Vt=sx(v,f),Ft={...Vt,colDelta:Vt.colDelta+wt.length},Dt=rx(v,C,wt),ln=R1(Dt,Ft,C);return[...Ce,...Le.slice(0,l),...ln,...Le.slice(l,Le.length)]},gv=(l,f,v,C)=>ii(l,A=>C(A,v),f),ys=(l,f,v,C,A)=>{const{rows:B,cols:U}=aa(l),J=B.slice(0,f),ae=B.slice(f),Ce=gv(B[v],(Le,wt)=>f>0&&f<B.length&&C(vi(B[f-1],wt),vi(B[f],wt))?Ra(B[f],wt):X(A(Le.element,C),!0,Le.isLocked),C,A);return[...U,...J,Ce,...ae]},zm=(l,f,v,C,A,B,U)=>{if(v==="colgroup"||!C){const J=Ra(l,A);return X(U(J.element,B),!0,!1)}else return Ra(l,f)},pv=(l,f,v,C,A)=>sn(l,B=>{const U=f>0&&f<nc(B)&&C(vi(B,f-1),vi(B,f)),J=zm(B,f,B.section,U,v,C,A);return Zg(B,f,J)}),Mk=(l,f)=>qo(l,v=>{const C=v.cells,A=os(f,(B,U)=>U>=0&&U<B.length?B.slice(0,U).concat(B.slice(U+1)):B,C);return A.length>0?[he(v.element,A,v.section,v.isNew)]:[]}),Nk=(l,f,v)=>{const{rows:C,cols:A}=aa(l);return[...A,...C.slice(0,f),...C.slice(v+1)]},M1=(l,f,v,C)=>vi(l[f],v)!==void 0&&f>0&&C(vi(l[f-1],v),vi(l[f],v)),Hs=(l,f,v)=>f>0&&v(vi(l,f-1),vi(l,f)),ax=(l,f,v,C)=>M1(l,f,v,C)||Hs(l[f],v,C),Pk=(l,f)=>Ho(f,Ke)&&og(l.cells)?Fe:(C,A,B)=>!(Wo(C.element)==="th"&&f[B]),ix=(l,f)=>Ho(f,Ke)&&og(l)?Fe:(C,A,B)=>!(Wo(C.element)==="th"&&f[A]),cg=(l,f,v,C)=>{const A=U=>U==="row"?wr(f):ri(f),B=U=>A(U)?`${U}group`:U;return l?ng(f)?B(v):null:C&&ng(f)?B(v==="row"?"col":"row"):null},nl=(l,f)=>(v,C,A)=>ve.some(cg(l,v.element,"col",f[A])),Um=(l,f)=>(v,C)=>ve.some(cg(l,v.element,"row",f[C])),ww=(l,f,v)=>X(v(l.element,f),!0,l.isLocked),tn=(l,f,v,C,A,B,U)=>{const J=ae=>ct(f,Ce=>v(ae.element,Ce.element));return sn(l,(ae,Ce)=>sd(ae,(Le,wt)=>{if(J(Le)){const Vt=U(Le,Ce,wt)?A(Le,v,C):Le;return B(Vt,Ce,wt).each(Ft=>{yc(Vt.element,{scope:ve.from(Ft)})}),Vt}else return Le}))},Cw=(l,f,v)=>qo(l,(C,A)=>ax(l,A,f,v)?[]:[Ra(C,f)]),Bk=(l,f,v)=>{const C=l[f];return qo(C.cells,(A,B)=>ax(l,f,B,v)?[]:[A])},cx=(l,f,v,C,A)=>{const B=aa(l).rows,U=qo(f,Le=>Cw(B,Le,C)),J=sn(B,Le=>og(Le.cells)),ae=ix(U,J),Ce=Um(v,J);return tn(l,U,C,A,ww,Ce,ae)},Sw=(l,f,v,C,A,B,U)=>{const{cols:J,rows:ae}=aa(l),Ce=ae[f[0]],Le=qo(f,ht=>Bk(ae,ht,A)),wt=sn(Ce.cells,(ht,_t)=>og(Cw(ae,_t,A))),Vt=[...ae];nt(f,ht=>{Vt[ht]=U.transformRow(ae[ht],v)});const Ft=[...J,...Vt],Dt=Pk(Ce,wt),ln=nl(C,wt);return tn(Ft,Le,A,B,U.transformCell,ln,Dt)},lx=(l,f,v,C)=>{const A=aa(l).rows,B=sn(f,U=>Ra(A[U.row],U.column));return tn(l,B,v,C,ww,ve.none,Fe)},pd={generate:l=>{if(!ie(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const f=[],v={};return nt(l,(C,A)=>{const B=Zt(C);if(B.length!==1)throw new Error("one and only one name per case");const U=B[0],J=C[U];if(v[U]!==void 0)throw new Error("duplicate key detected:"+U);if(U==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ie(J))throw new Error("case arguments must be an array");f.push(U),v[U]=(...ae)=>{const Ce=ae.length;if(Ce!==J.length)throw new Error("Wrong number of arguments to case "+U+". Expected "+J.length+" ("+J+"), got "+Ce);return{fold:(...wt)=>{if(wt.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+wt.length);return wt[A].apply(null,ae)},match:wt=>{const Vt=Zt(wt);if(f.length!==Vt.length)throw new Error("Wrong number of arguments to match. Expected: "+f.join(",")+`
Actual: `+Vt.join(","));if(!Ho(f,Dt=>an(Vt,Dt)))throw new Error("Not all branches were specified when using match. Specified: "+Vt.join(", ")+`
Required: `+f.join(", "));return wt[U].apply(null,ae)},log:wt=>{console.log(wt,{constructors:f,constructor:U,params:ae})}}}}),v}},lg={...pd.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},bv=(l,f)=>l.length===0?lg.none():l.length===1?lg.only(0):f===0?lg.left(0,1):f===l.length-1?lg.right(f-1,f):f>0&&f<l.length-1?lg.middle(f-1,f,f+1):lg.none(),Ik=(l,f,v,C,A)=>{const B=l.slice(0),U=bv(l,f),J=ce(sn(B,ce(0))),ae=Vt=>C.singleColumnWidth(B[Vt],v),Ce=(Vt,Ft)=>A.calcLeftEdgeDeltas(B,Vt,Ft,v,C.minCellWidth(),C.isRelative),Le=(Vt,Ft,Dt)=>A.calcMiddleDeltas(B,Vt,Ft,Dt,v,C.minCellWidth(),C.isRelative),wt=(Vt,Ft)=>A.calcRightEdgeDeltas(B,Vt,Ft,v,C.minCellWidth(),C.isRelative);return U.fold(J,ae,Ce,Le,wt)},wl=(l,f,v)=>{let C=0;for(let A=l;A<f;A++)C+=v[A]!==void 0?v[A]:0;return C},dx=(l,f)=>{const v=co.justCells(l);return sn(v,C=>{const A=wl(C.column,C.column+C.colspan,f);return{element:C.element,width:A,colspan:C.colspan}})},xw=(l,f)=>{const v=co.justColumns(l);return sn(v,(C,A)=>({element:C.element,width:f[A],colspan:C.colspan}))},fx=(l,f)=>sn(l.all,(v,C)=>({element:v.element,height:f[C]})),vv=l=>os(l,(f,v)=>f+v,0),Lk=(l,f)=>co.hasColumns(l)?xw(l,f):dx(l,f),yv=(l,f,v)=>{const C=Lk(l,f);nt(C,A=>{v.setElementWidth(A.element,A.width)})},Ew=(l,f,v,C,A)=>{const B=co.fromTable(l),U=A.getCellDelta(f),J=A.getWidths(B,A),ae=v===B.grid.columns-1,Ce=C.clampTableDelta(J,v,U,A.minCellWidth(),ae),Le=Ik(J,v,Ce,A,C),wt=sn(Le,(Vt,Ft)=>Vt+J[Ft]);yv(B,wt,A),C.resizeTable(A.adjustTableWidth,Ce,ae)},_w=(l,f,v)=>{const C=co.fromTable(l),A=Be(C,l),B=sn(A,(ae,Ce)=>v===Ce?Math.max(f+ae,Rh()):ae),U=fx(C,B);nt(U,ae=>{jd(ae.element,ae.height)}),nt(co.justCells(C),ae=>{Pf(ae.element)});const J=vv(B);jd(l,J)},mx=(l,f,v,C,A)=>{const B=co.generate(f),U=C.getWidths(B,C),J=C.pixelWidth(),{newSizes:ae,delta:Ce}=A.calcRedestributedWidths(U,J,v.pixelDelta,C.isRelative);yv(B,ae,C),C.adjustTableWidth(Ce)},Fk=(l,f,v,C)=>{const A=co.generate(f),B=C.getWidths(A,C);yv(A,B,C)},ef=l=>tt(l,(v,C)=>ct(v,B=>B.column===C.column)?v:v.concat([C]),[]).sort((v,C)=>v.column-C.column),hx=hs("col"),fp=hs("colgroup"),mp=l=>Wo(l)==="tr"||fp(l),gx=l=>{const f=js(l,"colspan",1),v=js(l,"rowspan",1);return{element:l,colspan:f,rowspan:v}},wv=(l,f=gx)=>{const v=J=>hx(J.element)?l.col(J):l.cell(J),C=J=>fp(J.element)?l.colgroup(J):l.row(J),A=J=>{if(mp(J))return C({element:J});{const ae=J,Ce=v(f(ae));return B=ve.some({item:ae,replacement:Ce}),Ce}};let B=ve.none();return{getOrInit:(J,ae)=>B.fold(()=>A(J),Ce=>ae(J,Ce.item)?Ce.replacement:A(J))}},Tw=l=>f=>{const v=[],C=(U,J)=>W(v,ae=>J(ae.item,U)),A=U=>{const J=l==="td"?{scope:null}:{},ae=f.replace(U,l,J);return v.push({item:U,sub:ae}),ae};return{replaceOrInit:(U,J)=>{if(mp(U)||hx(U))return U;{const ae=U;return C(ae,J).fold(()=>A(ae),Ce=>J(U,Ce.item)?Ce.sub:A(ae))}}}},Cv=l=>pe(l,"scope").map(f=>f.substr(0,3)),ic={modification:wv,transform:Tw,merging:l=>({unmerge:C=>{const A=Cv(C);return A.each(B=>Zs(C,"scope",B)),()=>{const B=l.cell({element:C,colspan:1,rowspan:1});return si(B,"width"),si(C,"width"),A.each(U=>Zs(B,"scope",U)),B}},merge:C=>{const A=()=>{const B=xs(sn(C,Cv));if(B.length===0)return ve.none();{const U=B[0],J=["row","col"];return ct(B,Ce=>Ce!==U&&an(J,Ce))?ve.none():ve.from(U)}};return si(C[0],"width"),A().fold(()=>fe(C[0],"scope"),B=>Zs(C[0],"scope",B+"group")),ce(C[0])}})},Hk=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Vk=(l,f)=>{const v=l.property().name(f);return an(["ol","ul"],v)},Wm=(l,f)=>{const v=l.property().name(f);return an(Hk,v)},Zm=(l,f)=>an(["br","img","hr","input"],l.property().name(f)),Wf=Mm(),kw=l=>Wm(Wf,l),Ge=l=>Vk(Wf,l),Sv=l=>Zm(Wf,l),Zf=l=>{const f=hs("br"),v=ae=>Ho(ae,Ce=>f(Ce)||Qa(Ce)&&Xo(Ce).trim().length===0),C=ae=>Wo(ae)==="li"||rs(ae,Ge).isSome(),A=ae=>Ri(ae).map(Ce=>kw(Ce)?!0:Sv(Ce)?Wo(Ce)!=="img":!1).getOr(!1),B=ae=>km(ae).bind(Ce=>{const Le=A(Ce);return na(Ce).map(wt=>Le===!0||C(wt)||f(Ce)||kw(wt)&&!Zo(ae,wt)?[]:[_e.fromTag("br")])}).getOr([]),J=(()=>{const ae=qo(l,Ce=>{const Le=xo(Ce);return v(Le)?[]:Le.concat(B(Ce))});return ae.length===0?[_e.fromTag("br")]:ae})();ma(l[0]),Oa(l[0],J)},jm=l=>C1(l,!0),xv=l=>{xc(l).length===0&&br(l)},ol=(l,f)=>({grid:l,cursor:f}),Aw=l=>To(l,f=>To(f.cells,v=>{const C=v.element;return gm(jm(C),C)})),Ow=(l,f,v)=>{var C,A;const B=aa(l).rows;return ve.from((A=(C=B[f])===null||C===void 0?void 0:C.cells[v])===null||A===void 0?void 0:A.element).filter(jm).orThunk(()=>Aw(B))},cc=(l,f,v)=>{const C=Ow(l,f,v);return ol(l,C)},hp=l=>tt(l,(v,C)=>ct(v,B=>B.row===C.row)?v:v.concat([C]),[]).sort((v,C)=>v.row-C.row),px=(l,f,v,C)=>{const A=f[0].row,B=hp(f),U=os(B,(J,ae)=>({grid:ys(J.grid,A,ae.row+J.delta,v,C.getOrInit),delta:J.delta+1}),{grid:l,delta:0}).grid;return cc(U,A,f[0].column)},bx=(l,f,v,C)=>{const A=hp(f),B=A[A.length-1],U=B.row+B.rowspan,J=os(A,(ae,Ce)=>ys(ae,U,Ce.row,v,C.getOrInit),l);return cc(J,U,f[0].column)},zk=(l,f,v,C)=>{const A=f.details,B=ef(A),U=B[0].column,J=os(B,(ae,Ce)=>({grid:pv(ae.grid,U,Ce.column+ae.delta,v,C.getOrInit),delta:ae.delta+1}),{grid:l,delta:0}).grid;return cc(J,A[0].row,U)},vx=(l,f,v,C)=>{const A=f.details,B=A[A.length-1],U=B.column+B.colspan,J=ef(A),ae=os(J,(Ce,Le)=>pv(Ce,U,Le.column,v,C.getOrInit),l);return cc(ae,A[0].row,U)},Uk=(l,f,v,C)=>{const A=ef(f),B=sn(A,J=>J.column),U=cx(l,B,!0,v,C.replaceOrInit);return cc(U,f[0].row,f[0].column)},yx=(l,f,v,C)=>{const A=lx(l,f,v,C.replaceOrInit);return cc(A,f[0].row,f[0].column)},Wk=(l,f,v,C)=>{const A=ef(f),B=sn(A,J=>J.column),U=cx(l,B,!1,v,C.replaceOrInit);return cc(U,f[0].row,f[0].column)},Zk=(l,f,v,C)=>{const A=lx(l,f,v,C.replaceOrInit);return cc(A,f[0].row,f[0].column)},Ev=(l,f)=>(v,C,A,B,U)=>{const J=hp(C),ae=sn(J,Le=>Le.row),Ce=Sw(v,ae,l,f,A,B.replaceOrInit,U);return cc(Ce,C[0].row,C[0].column)},_v=Ev("thead",!0),jk=Ev("tbody",!1),wx=Ev("tfoot",!1),qk=(l,f,v,C)=>{const A=ef(f.details),B=Mk(l,sn(A,J=>J.column)),U=B.length>0?B[0].cells.length-1:0;return cc(B,A[0].row,Math.min(A[0].column,U))},Dw=(l,f,v,C)=>{const A=hp(f),B=Nk(l,A[0].row,A[A.length-1].row),U=Math.max(aa(B).rows.length-1,0);return cc(B,Math.min(f[0].row,U),f[0].column)},hr=(l,f,v,C)=>{const A=f.cells;Zf(A);const B=mv(l,f.bounds,v,C.merge(A));return ol(B,ve.from(A[0]))},Rw=(l,f,v,C)=>{const B=os(f,(U,J)=>ox(U,J,v,C.unmerge(J)),l);return ol(B,ve.from(f[0]))},Cx=(l,f,v,C)=>{const B=((ae,Ce)=>{const Le=co.fromTable(ae);return up(Le,Ce,!0)})(f.clipboard,f.generators),U=du(f.row,f.column);return ko(U,l,B,f.generators,v).fold(()=>ol(l,ve.some(f.element)),ae=>cc(ae,f.row,f.column))},Tv=(l,f,v)=>{const C=Ph(l,v.section),A=co.generate(C);return up(A,f,!0)},kv=(l,f,v,C)=>{const A=aa(l).rows,B=f.cells[0].column,U=A[f.cells[0].row],J=Tv(f.clipboard,f.generators,U),ae=Mc(B,l,J,f.generators,v);return cc(ae,f.cells[0].row,f.cells[0].column)},$i=(l,f,v,C)=>{const A=aa(l).rows,B=f.cells[f.cells.length-1].column+f.cells[f.cells.length-1].colspan,U=A[f.cells[0].row],J=Tv(f.clipboard,f.generators,U),ae=Mc(B,l,J,f.generators,v);return cc(ae,f.cells[0].row,B)},Cl=(l,f,v,C)=>{const A=aa(l).rows,B=f.cells[0].row,U=A[B],J=Tv(f.clipboard,f.generators,U),ae=Qd(B,l,J,f.generators,v);return cc(ae,f.cells[0].row,f.cells[0].column)},Mw=(l,f,v,C)=>{const A=aa(l).rows,B=f.cells[f.cells.length-1].row+f.cells[f.cells.length-1].rowspan,U=A[f.cells[0].row],J=Tv(f.clipboard,f.generators,U),ae=Qd(B,l,J,f.generators,v);return cc(ae,B,f.cells[0].column)},Nw=(l,f)=>{const v=co.fromTable(l);return el(v,f).bind(A=>{const B=A[A.length-1],U=A[0].column,J=B.column+B.colspan,ae=uo(sn(v.all,Ce=>to(Ce.cells,Le=>Le.column>=U&&Le.column<J)));return lv(ae)}).getOr("")},Sx=(l,f)=>{const v=co.fromTable(l);return el(v,f).bind(lv).getOr("")},Pw=(l,f)=>{const v=co.fromTable(l);return el(v,f).bind(A=>{const B=A[A.length-1],U=A[0].row,J=B.row+B.rowspan,ae=v.all.slice(U,J);return QS(ae)}).getOr("")},P1=(l,f,v,C)=>Fk(l,f,v,C.sizing),Av=(l,f,v,C)=>mx(l,f,v,C.sizing,C.resize),xx=(l,f)=>ct(f,v=>v.column===0&&v.isLocked),lc=(l,f)=>ct(f,v=>v.column+v.colspan>=l.grid.columns&&v.isLocked),qm=(l,f)=>{const v=id(l),C=ef(f);return tt(C,(A,B)=>{const J=v[B.column].map(ts).getOr(0);return A+J},0)},bd=l=>(f,v)=>el(f,v).filter(C=>!(l?xx:lc)(f,C)).map(C=>({details:C,pixelDelta:qm(f,C)})),Bw=(l,f)=>Mu(l,f).map(v=>({details:v,pixelDelta:-qm(l,v)})),tr=l=>(f,v)=>bw(f,v).filter(C=>!(l?xx:lc)(f,C.cells)),Nu=ic.transform("th"),Gm=ic.transform("td"),Gk=Fi(px,el,Xe,Xe,ic.modification),Iw=Fi(bx,el,Xe,Xe,ic.modification),Ex=Fi(zk,bd(!0),Av,Xe,ic.modification),ug=Fi(vx,bd(!1),Av,Xe,ic.modification),Ua=Fi(qk,Bw,Av,xv,ic.modification),jf=Fi(Dw,el,Xe,xv,ic.modification),Kk=Fi(Uk,Mu,Xe,Xe,Nu),Lw=Fi(Wk,Mu,Xe,Xe,Gm),Yk=Fi(_v,Mu,Xe,Xe,Nu),Ov=Fi(jk,Mu,Xe,Xe,Gm),Fw=Fi(wx,Mu,Xe,Xe,Gm),Dv=Fi(yx,Mu,Xe,Xe,Nu),nn=Fi(Zk,Mu,Xe,Xe,Gm),B1=Fi(hr,nx,P1,Xe,ic.merging),$w=Fi(Rw,D1,P1,Xe,ic.merging),_x=Fi(Cx,kM,P1,Xe,ic.modification),Tx=Fi(kv,tr(!0),Xe,Xe,ic.modification),Xk=Fi($i,tr(!1),Xe,Xe,ic.modification),ui=Fi(Cl,bw,Xe,Xe,ic.modification),Jk=Fi(Mw,bw,Xe,Xe,ic.modification),Km=Nw,Hw=Sx,kx=Pw,Si=(l,f)=>l.dispatch("NewRow",{node:f}),Ym=(l,f)=>l.dispatch("NewCell",{node:f}),qf=(l,f,v)=>{l.dispatch("TableModified",{...v,table:f})},Ax=(l,f,v,C,A)=>{l.dispatch("TableSelectionChange",{cells:f,start:v,finish:C,otherCells:A})},Qk=l=>{l.dispatch("TableSelectionClear")},eA=(l,f,v,C,A)=>{l.dispatch("ObjectResizeStart",{target:f,width:v,height:C,origin:A})},ya=(l,f,v,C,A)=>{l.dispatch("ObjectResized",{target:f,width:v,height:C,origin:A})},Pr={structure:!1,style:!0},us={structure:!0,style:!1},xi={structure:!0,style:!0},wa=(l,f)=>Am(l)?_.percentageSize(f):$f(l)?_.pixelSize(f):_.getTableSize(f),Ca=(l,f,v)=>{const C=Qn=>Wo(Yh(Qn))==="table",A=Qn=>!C(l)||Jd(Qn).rows>1,B=Qn=>!C(l)||Jd(Qn).columns>1,U=VS(l),J=ov(l)?Xe:T1,ae=Qn=>{switch(zS(l)){case"section":return A1.section();case"sectionCells":return A1.sectionCells();case"cells":return A1.cells();default:return A1.getTableSectionType(Qn,"section")}},Ce=(Qn,Dl)=>Dl.cursor.fold(()=>{const Fu=xc(Qn);return Se(Fu).filter(pn).map(af=>{v.clearSelectedCells(Qn.dom);const Sa=l.dom.createRng();return Sa.selectNode(af.dom),l.selection.setRng(Sa),Zs(af,"data-mce-selected","1"),Sa})},Fu=>{const af=rc(Fu),Sa=l.dom.createRng();return Sa.setStart(af.element.dom,af.offset),Sa.setEnd(af.element.dom,af.offset),l.selection.setRng(Sa),v.clearSelectedCells(Qn.dom),ve.some(Sa)}),Le=(Qn,Dl,Fu,af)=>(Sa,Io,NC=!1)=>{sc(Sa);const PC=_e.fromDom(l.getDoc()),D0=Lf(Fu,PC,U),VE={sizing:wa(l,Sa),resize:ov(l)?tg():Bm(),section:ae(Sa)};return Dl(Sa)?Qn(Sa,Io,D0,VE).bind(em=>{f.refresh(Sa.dom),nt(em.newRows,Pp=>{Si(l,Pp.dom)}),nt(em.newCells,Pp=>{Ym(l,Pp.dom)});const Tg=Ce(Sa,em);return pn(Sa)&&(sc(Sa),NC||qf(l,Sa.dom,af)),Tg.map(Pp=>({rng:Pp,effect:af}))}):ve.none()},wt=Le(jf,A,Xe,us),Vt=Le(Ua,B,Xe,us),Ft=Le(Gk,Fe,Xe,us),Dt=Le(Iw,Fe,Xe,us),ln=Le(Ex,Fe,J,us),ht=Le(ug,Fe,J,us),_t=Le(B1,Fe,Xe,us),Mn=Le($w,Fe,Xe,us),In=Le(Tx,Fe,Xe,us),bn=Le(Xk,Fe,Xe,us),ir=Le(ui,Fe,Xe,us),ds=Le(Jk,Fe,Xe,us),Br=Le(_x,Fe,Xe,xi),Al=Le(Dv,Fe,Xe,us),ki=Le(nn,Fe,Xe,us),Eg=Le(Kk,Fe,Xe,us),_g=Le(Lw,Fe,Xe,us),as=Le(Yk,Fe,Xe,us),qa=Le(Ov,Fe,Xe,us),fc=Le(Fw,Fe,Xe,us);return{deleteRow:wt,deleteColumn:Vt,insertRowsBefore:Ft,insertRowsAfter:Dt,insertColumnsBefore:ln,insertColumnsAfter:ht,mergeCells:_t,unmergeCells:Mn,pasteColsBefore:In,pasteColsAfter:bn,pasteRowsBefore:ir,pasteRowsAfter:ds,pasteCells:Br,makeCellsHeader:Al,unmakeCellsHeader:ki,makeColumnsHeader:Eg,unmakeColumnsHeader:_g,makeRowsHeader:as,makeRowsBody:qa,makeRowsFooter:fc,getTableRowType:kx,getTableCellType:Hw,getTableColType:Km}},Rv=(l,f,v)=>{const C=js(l,f,1);v===1||C<=1?fe(l,f):Zs(l,f,Math.min(v,C))},Mv=(l,f)=>v=>{const C=v.column+v.colspan-1,A=v.column;return C>=l&&A<f},Ox=(l,f,v)=>{if(co.hasColumns(l)){const C=to(co.justColumns(l),Mv(f,v)),A=sn(C,U=>{const J=ec(U.element);return Rv(J,"span",v-f),J}),B=_e.fromTag("colgroup");return Oa(B,A),[B]}else return[]},Dx=(l,f,v)=>sn(l.all,C=>{const A=to(C.cells,Mv(f,v)),B=sn(A,J=>{const ae=ec(J.element);return Rv(ae,"colspan",v-f),ae}),U=_e.fromTag("tr");return Oa(U,B),U}),Rx=(l,f)=>{const v=co.fromTable(l);return Mu(v,f).map(A=>{const B=A[A.length-1],U=A[0].column,J=B.column+B.colspan,ae=Ox(v,U,J),Ce=Dx(v,U,J);return[...ae,...Ce]})},Nv=(l,f,v)=>{const C=co.fromTable(l);return el(C,f).bind(B=>{const U=up(C,v,!1),ae=aa(U).rows.slice(B[0].row,B[B.length-1].row+B[B.length-1].rowspan),Ce=qo(ae,wt=>{const Vt=to(wt.cells,Ft=>!Ft.isLocked);return Vt.length>0?[{...wt,cells:Vt}]:[]}),Le=fv(Ce);return gm(Le.length>0,Le)}).map(B=>ex(B))},Xm=pd.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Pv=(l,f,v)=>{const C=v.substring(0,v.length-l.length),A=parseFloat(C);return C===A.toString()?f(A):Xm.invalid(v)},gp={...Xm,from:l=>Wc(l,"%")?Pv("%",Xm.percent,l):Wc(l,"px")?Pv("px",Xm.pixels,l):Xm.invalid(l)},nA=(l,f)=>sn(l,v=>gp.from(v).fold(()=>v,A=>A/f*100+"%",A=>A+"%")),oA=(l,f,v)=>{const C=v/f;return sn(l,A=>gp.from(A).fold(()=>A,U=>U*C+"px",U=>U/100*v+"px"))},Nc=(l,f)=>{const v=l.fold(()=>ce(""),C=>{const A=C/f;return ce(A+"px")},()=>{const C=100/f;return ce(C+"%")});return $n(f,v)},AM=(l,f,v)=>l.fold(()=>f,C=>oA(f,v,C),C=>nA(f,v)),Mx=(l,f,v)=>{const C=gp.from(v),A=Ho(l,B=>B==="0px")?Nc(C,l.length):AM(C,l,f);return vd(A)},Sl=(l,f)=>l.length===0?f:os(l,(v,C)=>gp.from(C).fold(ce(0),Ke,Ke)+v,0),Bv=(l,f)=>{const v=Math.floor(l);return{value:v+f,remainder:l-v}},I1=(l,f)=>gp.from(l).fold(ce(l),v=>v+f+"px",v=>v+f+"%"),vd=l=>{if(l.length===0)return l;const f=os(l,(C,A)=>{const B=gp.from(A).fold(()=>({value:A,remainder:0}),U=>Bv(U,"px"),U=>({value:U+"%",remainder:0}));return{output:[B.value].concat(C.output),remainder:C.remainder+B.remainder}},{output:[],remainder:0}),v=f.output;return v.slice(0,v.length-1).concat([I1(v[v.length-1],Math.round(f.remainder))])},uc=gp.from,Jm=(l,f,v)=>{nt(f,C=>{const A=l.slice(C.column,C.colspan+C.column),B=Sl(A,Cr());Kr(C.element,"width",B+v)})},Vw=(l,f,v)=>{nt(f,(C,A)=>{const B=Sl([l[A]],Cr());Kr(C.element,"width",B+v)})},Iv=(l,f,v)=>{nt(v,C=>{si(C.element,"height")}),nt(f,(C,A)=>{Kr(C.element,"height",l[A])})},Nx=l=>uc(l).fold(ce("px"),ce("px"),ce("%")),Gf=(l,f,v)=>{const C=co.fromTable(l),A=C.all,B=co.justCells(C),U=co.justColumns(C);f.each(J=>{const ae=Nx(J),Ce=pa(l),Le=ku(C,l),wt=Mx(Le,Ce,J);co.hasColumns(C)?Vw(wt,U,ae):Jm(wt,B,ae),Kr(l,"width",J)}),v.each(J=>{const ae=xe(l),Ce=Oc(C,l),Le=Mx(Ce,ae,J);Iv(Le,A,B),Kr(l,"height",J)})},Px=wi,zw=tv,Bx=kc,L1=l=>{fe(l,"width"),fe(l,"height")},F1=l=>{const f=Jr(l);Gf(l,ve.some(f),ve.none()),L1(l)},$1=l=>{const f=Fo(l);Gf(l,ve.some(f),ve.none()),L1(l)},sA=l=>{const f=qh(l);Gf(l,ve.none(),ve.some(f)),L1(l)},Lv=l=>{si(l,"width");const f=Ef(l),v=f.length>0?f:xc(l);nt(v,C=>{si(C,"width"),L1(C)}),L1(l)},rA={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Ix=()=>_e.fromTag("th"),aA=()=>_e.fromTag("td"),Fv=()=>_e.fromTag("col"),Lx=(l,f,v,C)=>{const A=_e.fromTag("tr");for(let B=0;B<l;B++){const U=C<f||B<v?Ix():aA();B<v&&Zs(U,"scope","row"),C<f&&Zs(U,"scope","col"),Ls(U,_e.fromTag("br")),Ls(A,U)}return A},iA=l=>{const f=_e.fromTag("colgroup");return $n(l,()=>Ls(f,Fv())),f},Uw=(l,f,v,C)=>$n(l,A=>Lx(f,v,C,A)),$v=(l,f,v,C,A,B=rA)=>{const U=_e.fromTag("table"),J=A!=="cells";Fa(U,B.styles),Ta(U,B.attributes),B.colGroups&&Ls(U,iA(f));const ae=Math.min(l,v);if(J&&v>0){const Ft=_e.fromTag("thead");Ls(U,Ft);const ln=Uw(v,f,A==="sectionCells"?ae:0,C);Oa(Ft,ln)}const Ce=_e.fromTag("tbody");Ls(U,Ce);const Le=J?l-ae:l,Vt=Uw(Le,f,J?0:v,C);return Oa(Ce,Vt),U},cA=l=>l.dom.innerHTML,Fx=l=>{const f=_e.fromTag("div"),v=_e.fromDom(l.dom.cloneNode(!0));return Ls(f,v),cA(f)},dc=(l,f)=>{l.selection.select(f.dom,!0),l.selection.collapse(!0)},Ww=(l,f)=>{oi(f,"td,th").each(jt(dc,l))},Zw=(l,f)=>{nt(qn(f,"tr"),v=>{Si(l,v.dom),nt(qn(v,"th,td"),C=>{Ym(l,C.dom)})})},jw=l=>K(l)&&l.indexOf("%")!==-1,Hv=(l,f,v,C,A)=>{const B=y1(l),U={styles:B,attributes:Li(l),colGroups:Wy(l)};return l.undoManager.ignore(()=>{const J=$v(v,f,A,C,zS(l),U);Zs(J,"data-mce-id","__mce");const ae=Fx(J);l.insertContent(ae),l.addVisual()}),oi(Yh(l),'table[data-mce-id="__mce"]').map(J=>($f(l)?$1(J):Xl(l)?Lv(J):(Am(l)||jw(B.width))&&F1(J),sc(J),fe(J,"data-mce-id"),Zw(l,J),Ww(l,J),J.dom)).getOrNull()},lA=(l,f,v,C={})=>{const A=B=>Ct(B)&&B>0;if(A(f)&&A(v)){const B=C.headerRows||0,U=C.headerColumns||0;return Hv(l,v,f,U,B)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Vv=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const $x="x-tinymce/dom-table-",qw=$x+"rows",Gw=$x+"columns",Hx=l=>{const f=Vv.FakeClipboardItem(l);Vv.write([f])},pp=l=>{var f;const v=(f=Vv.read())!==null&&f!==void 0?f:[];return To(v,C=>ve.from(C.getType(l)))},Vx=l=>{pp(l).isSome()&&Vv.clear()},zx=l=>{l.fold(uA,f=>Hx({[qw]:f}))},Ux=()=>pp(qw),uA=()=>Vx(qw),Wx=l=>{l.fold(dA,f=>Hx({[Gw]:f}))},Zx=()=>pp(Gw),dA=()=>Vx(Gw),zv=l=>XS(Ql(l),md(l)).filter(Dm),jx=l=>sw(Ql(l),md(l)).filter(Dm),bp=(l,f)=>{const v=md(l),C=()=>zv(l).each(ht=>{Sr(ht,v).filter(ne(v)).each(_t=>{const Mn=_e.fromText("");if(ei(_t,Mn),br(_t),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const In=l.dom.createRng();In.setStart(Mn.dom,0),In.setEnd(Mn.dom,0),l.selection.setRng(In),l.nodeChanged()}})}),A=ht=>zv(l).each(_t=>{Xl(l)||$f(l)||Am(l)||Sr(_t,v).each(In=>{ht==="relative"&&!Px(In)?F1(In):ht==="fixed"&&!zw(In)?$1(In):ht==="responsive"&&!Bx(In)&&Lv(In),sc(In),qf(l,In.dom,us)})}),B=ht=>Sr(ht,v),U=ht=>jx(l).bind(_t=>B(_t).map(Mn=>ht(Mn,_t))),J=(ht,_t)=>{U(Mn=>{l.formatter.toggle("tableclass",{value:_t},Mn.dom),qf(l,Mn.dom,Pr)})},ae=(ht,_t)=>{U(Mn=>{const In=$s(l),ir=Ho(In,ds=>l.formatter.match("tablecellclass",{value:_t},ds.dom))?l.formatter.remove:l.formatter.apply;nt(In,ds=>ir("tablecellclass",{value:_t},ds.dom)),qf(l,Mn.dom,Pr)})},Ce=()=>{zv(l).each(ht=>{Sr(ht,v).each(_t=>{Xn(_t,"caption").fold(()=>{const Mn=_e.fromTag("caption");Ls(Mn,_e.fromText("Caption")),Cf(_t,Mn,0),l.selection.setCursorLocation(Mn.dom,0)},Mn=>{hs("caption")(ht)&&ka("td",_t).each(In=>l.selection.setCursorLocation(In.dom,0)),br(Mn)}),qf(l,_t.dom,us)})})},Le=ht=>{l.focus()},wt=(ht,_t=!1)=>U((Mn,In)=>{const bn=iv($s(l),Mn,In);ht(Mn,bn,_t).each(Le)}),Vt=()=>U((ht,_t)=>{const Mn=iv($s(l),ht,_t),In=Lf(Xe,_e.fromDom(l.getDoc()),ve.none());return Nv(ht,Mn,In)}),Ft=()=>U((ht,_t)=>{const Mn=iv($s(l),ht,_t);return Rx(ht,Mn)}),Dt=(ht,_t)=>_t().each(Mn=>{const In=sn(Mn,bn=>ec(bn));U((bn,ir)=>{const ds=Ff(_e.fromDom(l.getDoc())),Br=Vf($s(l),ir,In,ds);ht(bn,Br).each(Le)})}),ln=ht=>(_t,Mn)=>qr(Mn,"type").each(In=>{wt(ht(In),Mn.no_events)});Mo({mceTableSplitCells:()=>wt(f.unmergeCells),mceTableMergeCells:()=>wt(f.mergeCells),mceTableInsertRowBefore:()=>wt(f.insertRowsBefore),mceTableInsertRowAfter:()=>wt(f.insertRowsAfter),mceTableInsertColBefore:()=>wt(f.insertColumnsBefore),mceTableInsertColAfter:()=>wt(f.insertColumnsAfter),mceTableDeleteCol:()=>wt(f.deleteColumn),mceTableDeleteRow:()=>wt(f.deleteRow),mceTableCutCol:()=>Ft().each(ht=>{Wx(ht),wt(f.deleteColumn)}),mceTableCutRow:()=>Vt().each(ht=>{zx(ht),wt(f.deleteRow)}),mceTableCopyCol:()=>Ft().each(ht=>Wx(ht)),mceTableCopyRow:()=>Vt().each(ht=>zx(ht)),mceTablePasteColBefore:()=>Dt(f.pasteColsBefore,Zx),mceTablePasteColAfter:()=>Dt(f.pasteColsAfter,Zx),mceTablePasteRowBefore:()=>Dt(f.pasteRowsBefore,Ux),mceTablePasteRowAfter:()=>Dt(f.pasteRowsAfter,Ux),mceTableDelete:C,mceTableCellToggleClass:ae,mceTableToggleClass:J,mceTableToggleCaption:Ce,mceTableSizingMode:(ht,_t)=>A(_t),mceTableCellType:ln(ht=>ht==="th"?f.makeCellsHeader:f.unmakeCellsHeader),mceTableColType:ln(ht=>ht==="th"?f.makeColumnsHeader:f.unmakeColumnsHeader),mceTableRowType:ln(ht=>{switch(ht){case"header":return f.makeRowsHeader;case"footer":return f.makeRowsFooter;default:return f.makeRowsBody}})},(ht,_t)=>l.addCommand(_t,ht)),l.addCommand("mceInsertTable",(ht,_t)=>{lA(l,_t.rows,_t.columns,_t.options)}),l.addCommand("mceTableApplyCellStyle",(ht,_t)=>{const Mn=ir=>"tablecell"+ir.toLowerCase().replace("-","");if(!Z(_t))return;const In=to($s(l),Dm);if(In.length===0)return;const bn=ws(_t,(ir,ds)=>l.formatter.has(Mn(ds))&&K(ir));vc(bn)||(Mo(bn,(ir,ds)=>{const Br=Mn(ds);nt(In,Al=>{ir===""?l.formatter.remove(Br,{value:null},Al.dom,!0):l.formatter.apply(Br,{value:ir},Al.dom)})}),B(In[0]).each(ir=>qf(l,ir.dom,Pr)))})},qx=(l,f)=>{const v=md(l),C=A=>sw(Ql(l)).bind(B=>Sr(B,v).map(U=>{const J=iv($s(l),U,B);return A(U,J)})).getOr("");Mo({mceTableRowType:()=>C(f.getTableRowType),mceTableCellType:()=>C(f.getTableCellType),mceTableColType:()=>C(f.getTableColType)},(A,B)=>l.addQueryValueHandler(B,A))},Kw=pd.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Gx=(l,f,v,C)=>l.fold(f,v,C),fA=l=>l.fold(Ke,Ke,Ke),Pu=Kw.before,Uv=Kw.on,Wv=Kw.after,Ei={before:Pu,on:Uv,after:Wv,cata:Gx,getStart:fA},xl={create:(l,f)=>({selection:l,kill:f})},Yw=(l,f)=>{const v=l.document.createRange();return v.selectNode(f.dom),v},mA=(l,f)=>{const v=l.document.createRange();return Qm(v,f),v},Qm=(l,f)=>l.selectNodeContents(f.dom),H1=(l,f)=>{f.fold(v=>{l.setStartBefore(v.dom)},(v,C)=>{l.setStart(v.dom,C)},v=>{l.setStartAfter(v.dom)})},hA=(l,f)=>{f.fold(v=>{l.setEndBefore(v.dom)},(v,C)=>{l.setEnd(v.dom,C)},v=>{l.setEndAfter(v.dom)})},Kx=(l,f,v)=>{const C=l.document.createRange();return H1(C,f),hA(C,v),C},Xw=(l,f,v,C,A)=>{const B=l.document.createRange();return B.setStart(f.dom,v),B.setEnd(C.dom,A),B},Yx=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),Zv=l=>{const f=l.getClientRects(),v=f.length>0?f[0]:l.getBoundingClientRect();return v.width>0||v.height>0?ve.some(v).map(Yx):ve.none()},V1=pd.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Xx=(l,f,v)=>f(_e.fromDom(v.startContainer),v.startOffset,_e.fromDom(v.endContainer),v.endOffset),Jx=(l,f)=>f.match({domRange:v=>({ltr:ce(v),rtl:ve.none}),relative:(v,C)=>({ltr:Hl(()=>Kx(l,v,C)),rtl:Hl(()=>ve.some(Kx(l,C,v)))}),exact:(v,C,A,B)=>({ltr:Hl(()=>Xw(l,v,C,A,B)),rtl:Hl(()=>ve.some(Xw(l,A,B,v,C)))})}),gA=(l,f)=>{const v=f.ltr();return v.collapsed?f.rtl().filter(A=>A.collapsed===!1).map(A=>V1.rtl(_e.fromDom(A.endContainer),A.endOffset,_e.fromDom(A.startContainer),A.startOffset)).getOrThunk(()=>Xx(l,V1.ltr,v)):Xx(l,V1.ltr,v)},jv=(l,f)=>{const v=Jx(l,f);return gA(l,v)},qv=(l,f)=>jv(l,f).match({ltr:(C,A,B,U)=>{const J=l.document.createRange();return J.setStart(C.dom,A),J.setEnd(B.dom,U),J},rtl:(C,A,B,U)=>{const J=l.document.createRange();return J.setStart(B.dom,U),J.setEnd(C.dom,A),J}});V1.ltr,V1.rtl;const vp={create:(l,f,v,C)=>({start:l,soffset:f,finish:v,foffset:C})},Gv={create:(l,f,v,C)=>({start:Ei.on(l,f),finish:Ei.on(v,C)})},Jw=(l,f)=>{const v=qv(l,f);return vp.create(_e.fromDom(v.startContainer),v.startOffset,_e.fromDom(v.endContainer),v.endOffset)},Kv=Gv.create,bA=(l,f,v,C,A,B,U)=>Zo(v,A)&&C===B?ve.none():lr(v,"td,th",f).bind(J=>lr(A,"td,th",f).bind(ae=>eE(l,f,J,ae,U))),eE=(l,f,v,C,A)=>Zo(v,C)?ve.none():sp(v,C,f).bind(B=>{const U=B.boxes.getOr([]);return U.length>1?(A(l,U,B.start,B.finish),ve.some(xl.create(ve.some(Kv(v,0,v,Va(v))),!0))):ve.none()}),dg=(l,f,v,C,A)=>{const B=U=>(A.clearBeforeUpdate(v),A.selectRange(v,U.boxes,U.start,U.finish),U.boxes);return tw(C,l,f,A.firstSelectedSelector,A.lastSelectedSelector).map(B)},tE=(l,f)=>({item:l,mode:f}),z1=(l,f,v,C=eh)=>l.property().parent(f).map(A=>tE(A,C)),eh=(l,f,v,C=U1)=>v.sibling(l,f).map(A=>tE(A,C)),U1=(l,f,v,C=U1)=>{const A=l.property().children(f);return v.first(A).map(U=>tE(U,C))},nE=[{current:z1,next:eh,fallback:ve.none()},{current:eh,next:U1,fallback:ve.some(z1)},{current:U1,next:U1,fallback:ve.some(eh)}],oE=(l,f,v,C,A=nE)=>W(A,U=>U.current===v).bind(U=>U.current(l,f,C,U.next).orThunk(()=>U.fallback.bind(J=>oE(l,f,J,C)))),yp={left:()=>({sibling:(v,C)=>v.query().prevSibling(C),first:v=>v.length>0?ve.some(v[v.length-1]):ve.none()}),right:()=>({sibling:(v,C)=>v.query().nextSibling(C),first:v=>v.length>0?ve.some(v[0]):ve.none()})},tf=(l,f,v,C,A,B)=>oE(l,f,C,A).bind(J=>B(J.item)?ve.none():v(J.item)?ve.some(J.item):tf(l,J.item,v,J.mode,A,B)),yA=(l,f,v,C)=>tf(l,f,v,eh,yp.left(),C),Qw=(l,f,v,C)=>tf(l,f,v,eh,yp.right(),C),sE=l=>f=>l.property().children(f).length===0,rE=(l,f,v)=>eC(l,f,sE(l),v),aE=(l,f,v)=>iE(l,f,sE(l),v),eC=yA,iE=Qw,th=Mm(),cE=(l,f)=>rE(th,l,f),fg=(l,f)=>aE(th,l,f),nh=(l,f,v)=>eC(th,l,f,v),W1=(l,f,v)=>iE(th,l,f,v),wp=(l,f,v)=>rs(l,f,v).isSome(),Yv=pd.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),oh=(l,f,v)=>{const C=l.getRect(f),A=l.getRect(v);return A.right>C.left&&A.left<C.right},El=l=>lr(l,"tr"),Cp={...Yv,verify:(l,f,v,C,A,B,U)=>lr(C,"td,th",U).bind(J=>lr(f,"td,th",U).map(ae=>Zo(J,ae)?Zo(C,J)&&Va(J)===A?B(ae):Yv.none("in same cell"):Ru(El,[J,ae]).fold(()=>oh(l,ae,J)?Yv.success():B(ae),Ce=>B(ae)))).getOr(Yv.none("default")),cata:(l,f,v,C,A)=>l.fold(f,v,C,A)},lE=(l,f,v,C)=>({parent:l,children:f,element:v,index:C}),Sp=l=>na(l).bind(f=>{const v=xo(f);return xp(v,l).map(C=>lE(f,v,l,C))}),xp=(l,f)=>ta(l,jt(Zo,f)),di=hs("br"),Xv=(l,f,v)=>f(l,v).bind(C=>Qa(C)&&Xo(C).trim().length===0?Xv(C,f,v):ve.some(C)),Z1=(l,f,v)=>v.traverse(f).orThunk(()=>Xv(f,v.gather,l)).map(v.relative),Jv=(l,f)=>sa(l,f).filter(di).orThunk(()=>sa(l,f-1).filter(di)),uE=(l,f,v,C)=>Jv(f,v).bind(A=>C.traverse(A).fold(()=>Xv(A,C.gather,l).map(C.relative),B=>Sp(B).map(U=>Ei.on(U.parent,U.index)))),nC=(l,f,v,C)=>(di(f)?Z1(l,f,C):uE(l,f,v,C)).map(B=>({start:B,finish:B})),Qv=l=>Cp.cata(l,f=>ve.none(),()=>ve.none(),f=>ve.some(Qc(f,0)),f=>ve.some(Qc(f,Va(f)))),la=(l,f)=>({left:l.left,top:l.top+f,right:l.right,bottom:l.bottom+f}),e0=(l,f)=>({left:l.left,top:l.top-f,right:l.right,bottom:l.bottom-f}),nf=(l,f,v)=>({left:l.left+f,top:l.top+v,right:l.right+f,bottom:l.bottom+v}),dE=l=>l.top,oC=l=>l.bottom,Kf=(l,f,v)=>v>=0&&v<Va(f)?l.getRangedRect(f,v,f,v+1):v>0?l.getRangedRect(f,v-1,f,v):ve.none(),j1=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Ep=(l,f)=>ve.some(l.getRect(f)),t0=(l,f,v)=>Ys(f)?Ep(l,f).map(j1):Qa(f)?Kf(l,f,v).map(j1):ve.none(),n0=(l,f)=>Ys(f)?Ep(l,f).map(j1):Qa(f)?l.getRangedRect(f,0,f,Va(f)).map(j1):ve.none(),sh=5,CA=100,sl=pd.generate([{none:[]},{retry:["caret"]}]),yd=(l,f)=>l.left<f.left||Math.abs(f.right-l.left)<1||l.left>f.right,sC=(l,f,v)=>vt(f,kw).fold(Qt,C=>n0(l,C).exists(A=>yd(v,A))),fE=(l,f,v,C,A)=>{const B=la(A,sh);return Math.abs(v.bottom-C.bottom)<1||v.top>A.bottom?sl.retry(B):v.top===A.bottom?sl.retry(la(A,1)):sC(l,f,A)?sl.retry(nf(B,sh,0)):sl.none()},rC={point:dE,adjuster:(l,f,v,C,A)=>{const B=e0(A,sh);return Math.abs(v.top-C.top)<1||v.bottom<A.top?sl.retry(B):v.bottom===A.top?sl.retry(e0(A,1)):sC(l,f,A)?sl.retry(nf(B,sh,0)):sl.none()},move:e0,gather:cE},aC={point:oC,adjuster:fE,move:la,gather:fg},hE=(l,f,v)=>l.elementFromPoint(f,v).filter(C=>Wo(C)==="table").isSome(),gE=(l,f,v,C,A)=>Pc(l,f,v,f.move(C,sh),A),Pc=(l,f,v,C,A)=>A===0?ve.some(C):hE(l,C.left,f.point(C))?gE(l,f,v,C,A-1):l.situsFromPoint(C.left,f.point(C)).bind(B=>B.start.fold(ve.none,U=>n0(l,U).bind(J=>f.adjuster(l,U,J,v,C).fold(ve.none,ae=>Pc(l,f,v,ae,A-1))).orThunk(()=>ve.some(C)),ve.none)),mg=(l,f,v)=>l.point(f)>v.getInnerHeight()?ve.some(l.point(f)-v.getInnerHeight()):l.point(f)<0?ve.some(-l.point(f)):ve.none(),iC=(l,f,v)=>{const C=l.move(v,sh),A=Pc(f,l,v,C,CA).getOr(C);return mg(l,A,f).fold(()=>f.situsFromPoint(A.left,l.point(A)),B=>(f.scrollBy(0,B),f.situsFromPoint(A.left,l.point(A)-B)))},rh={tryUp:jt(iC,rC),tryDown:jt(iC,aC),getJumpSize:ce(sh)},Bc=20,rl=(l,f,v)=>l.getSelection().bind(C=>nC(f,C.finish,C.foffset,v).fold(()=>ve.some(Qc(C.finish,C.foffset)),A=>{const B=l.fromSitus(A),U=Cp.verify(l,C.finish,C.foffset,B.finish,B.foffset,v.failure,f);return Qv(U)})),_i=(l,f,v,C,A,B)=>B===0?ve.none():nu(l,f,v,C,A).bind(U=>{const J=l.fromSitus(U),ae=Cp.verify(l,v,C,J.finish,J.foffset,A.failure,f);return Cp.cata(ae,()=>ve.none(),()=>ve.some(U),Ce=>Zo(v,Ce)&&C===0?tu(l,v,C,e0,A):_i(l,f,Ce,0,A,B-1),Ce=>Zo(v,Ce)&&C===Va(Ce)?tu(l,v,C,la,A):_i(l,f,Ce,Va(Ce),A,B-1))}),tu=(l,f,v,C,A)=>t0(l,f,v).bind(B=>o0(l,A,C(B,rh.getJumpSize()))),o0=(l,f,v)=>{const C=Ud().browser;return C.isChromium()||C.isSafari()||C.isFirefox()?f.retry(l,v):ve.none()},nu=(l,f,v,C,A)=>t0(l,v,C).bind(B=>o0(l,A,B)),hg=(l,f,v)=>rl(l,f,v).bind(C=>_i(l,f,C.element,C.offset,v,Bc).map(l.fromSitus)),SA=(l,f)=>wp(l,v=>na(v).exists(C=>Zo(C,f))),cC=(l,f,v,C,A)=>lr(C,"td,th",f).bind(B=>lr(B,"table",f).bind(U=>SA(A,U)?hg(l,f,v).bind(J=>lr(J.finish,"td,th",f).map(ae=>({start:B,finish:ae,range:J}))):ve.none())),xA=(l,f,v,C,A,B)=>B(C,f).orThunk(()=>cC(l,f,v,C,A).map(U=>{const J=U.range;return xl.create(ve.some(Kv(J.start,J.soffset,J.finish,J.foffset)),!0)})),EA=(l,f)=>lr(l,"tr",f).bind(v=>lr(v,"table",f).bind(C=>{const A=qn(C,"tr");return Zo(v,A[0])?nh(C,B=>km(B).isSome(),f).map(B=>{const U=Va(B);return xl.create(ve.some(Kv(B,U,B,U)),!0)}):ve.none()})),pE=(l,f)=>lr(l,"tr",f).bind(v=>lr(v,"table",f).bind(C=>{const A=qn(C,"tr");return Zo(v,A[A.length-1])?W1(C,B=>Gc(B).isSome(),f).map(B=>xl.create(ve.some(Kv(B,0,B,0)),!0)):ve.none()})),s0=(l,f,v,C,A,B,U)=>cC(l,v,C,A,B).bind(J=>eE(f,v,J.start,J.finish,U)),r0=l=>{let f=l;return{get:()=>f,set:A=>{f=A}}},Hi=l=>{const f=r0(ve.none()),v=()=>f.get().each(l);return{clear:()=>{v(),f.set(ve.none())},isSet:()=>f.get().isSome(),get:()=>f.get(),set:J=>{v(),f.set(ve.some(J))}}},_p=()=>{const l=Hi(Xe);return{...l,on:v=>l.get().each(v)}},Tp=(l,f)=>lr(l,"td,th",f),q1=l=>oa(l).exists(C1),lC=(l,f,v,C)=>{const A=_p(),B=A.clear,U=Le=>{A.on(wt=>{C.clearBeforeUpdate(f),Tp(Le.target,v).each(Vt=>{sp(wt,Vt,v).each(Ft=>{const Dt=Ft.boxes.getOr([]);if(Dt.length===1){const ln=Dt[0],ht=Zy(ln)==="false",_t=ed(w1(Le.target),ln,Zo);ht&&_t&&C.selectRange(f,Dt,ln,ln)}else Dt.length>1&&(C.selectRange(f,Dt,Ft.start,Ft.finish),l.selectContents(Vt))})})})};return{clearstate:B,mousedown:Le=>{C.clear(f),Tp(Le.target,v).filter(q1).each(A.set)},mouseover:Le=>{U(Le)},mouseup:Le=>{U(Le),B()}}},G1={traverse:Ri,gather:fg,relative:Ei.before,retry:rh.tryDown,failure:Cp.failedDown},K1={traverse:Ji,gather:cE,relative:Ei.before,retry:rh.tryUp,failure:Cp.failedUp},gg=l=>f=>f===l,uC=gg(38),a0=gg(40),Bu=l=>l>=37&&l<=40,bE={isBackward:gg(37),isForward:gg(39)},vE={isBackward:gg(39),isForward:gg(37)},Yf=l=>{const f=l!==void 0?l.dom:document,v=f.body.scrollLeft||f.documentElement.scrollLeft,C=f.body.scrollTop||f.documentElement.scrollTop;return Dn(v,C)},_l=(l,f,v)=>{const A=(v!==void 0?v.dom:document).defaultView;A&&A.scrollBy(l,f)},Y1=pd.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),pg=l=>Y1.exact(l.start,l.soffset,l.finish,l.foffset),ah=l=>l.match({domRange:f=>_e.fromDom(f.startContainer),relative:(f,v)=>Ei.getStart(f),exact:(f,v,C,A)=>f}),dC=Y1.domRange,i0=Y1.relative,yE=Y1.exact,_A=l=>{const f=ah(l);return es(f)},TA=vp.create,bg={domRange:dC,relative:i0,exact:yE,exactFromRange:pg,getWin:_A,range:TA},fC=(l,f,v)=>{var C;return ve.from((C=l.caretPositionFromPoint)===null||C===void 0?void 0:C.call(l,f,v)).bind(A=>{if(A.offsetNode===null)return ve.none();const B=l.createRange();return B.setStart(A.offsetNode,A.offset),B.collapse(),ve.some(B)})},kp=(l,f,v)=>{var C;return ve.from((C=l.caretRangeFromPoint)===null||C===void 0?void 0:C.call(l,f,v))},X1=(l,f,v)=>l.caretPositionFromPoint?fC(l,f,v):l.caretRangeFromPoint?kp(l,f,v):ve.none(),kA=(l,f,v)=>{const C=l.document;return X1(C,f,v).map(A=>vp.create(_e.fromDom(A.startContainer),A.startOffset,_e.fromDom(A.endContainer),A.endOffset))},c0=(l,f)=>{const v=Wo(l);return v==="input"?Ei.after(l):an(["br","img"],v)?f===0?Ei.before(l):Ei.after(l):Ei.on(l,f)},mC=(l,f)=>{const v=l.fold(Ei.before,c0,Ei.after),C=f.fold(Ei.before,c0,Ei.after);return bg.relative(v,C)},hC=(l,f,v,C)=>{const A=c0(l,f),B=c0(v,C);return bg.relative(A,B)},l0=(l,f,v,C)=>{const B=Aa(l).dom.createRange();return B.setStart(l.dom,f),B.setEnd(v.dom,C),B},gC=(l,f,v,C)=>{const A=l0(l,f,v,C),B=Zo(l,v)&&f===C;return A.collapsed&&!B},Ap=l=>ve.from(l.getSelection()),u0=(l,f)=>{Ap(l).each(v=>{v.removeAllRanges(),v.addRange(f)})},d0=(l,f,v,C,A)=>{const B=Xw(l,f,v,C,A);u0(l,B)},f0=(l,f,v,C,A,B)=>{f.collapse(v.dom,C),f.extend(A.dom,B)},m0=(l,f)=>jv(l,f).match({ltr:(v,C,A,B)=>{d0(l,v,C,A,B)},rtl:(v,C,A,B)=>{Ap(l).each(U=>{if(U.setBaseAndExtent)U.setBaseAndExtent(v.dom,C,A.dom,B);else if(U.extend)try{f0(l,U,v,C,A,B)}catch{d0(l,A,B,v,C)}else d0(l,A,B,v,C)})}}),Do=(l,f,v,C,A)=>{const B=hC(f,v,C,A);m0(l,B)},of=(l,f,v)=>{const C=mC(f,v);m0(l,C)},vg=l=>{if(l.rangeCount>0){const f=l.getRangeAt(0),v=l.getRangeAt(l.rangeCount-1);return ve.some(vp.create(_e.fromDom(f.startContainer),f.startOffset,_e.fromDom(v.endContainer),v.endOffset))}else return ve.none()},h0=l=>{if(l.anchorNode===null||l.focusNode===null)return vg(l);{const f=_e.fromDom(l.anchorNode),v=_e.fromDom(l.focusNode);return gC(f,l.anchorOffset,v,l.focusOffset)?ve.some(vp.create(f,l.anchorOffset,v,l.focusOffset)):vg(l)}},g0=(l,f,v=!0)=>{const A=(v?mA:Yw)(l,f);u0(l,A)},ih=l=>Ap(l).filter(f=>f.rangeCount>0).bind(h0),p0=l=>ih(l).map(f=>bg.exact(f.start,f.soffset,f.finish,f.foffset)),pC=(l,f)=>{const v=qv(l,f);return Zv(v)},bC=(l,f,v)=>kA(l,f,v),vC=l=>{Ap(l).each(f=>f.removeAllRanges())},Xf=l=>({elementFromPoint:(ht,_t)=>_e.fromPoint(_e.fromDom(l.document),ht,_t),getRect:ht=>ht.dom.getBoundingClientRect(),getRangedRect:(ht,_t,Mn,In)=>{const bn=bg.exact(ht,_t,Mn,In);return pC(l,bn)},getSelection:()=>p0(l).map(ht=>Jw(l,ht)),fromSitus:ht=>{const _t=bg.relative(ht.start,ht.finish);return Jw(l,_t)},situsFromPoint:(ht,_t)=>bC(l,ht,_t).map(Mn=>Gv.create(Mn.start,Mn.soffset,Mn.finish,Mn.foffset)),clearSelection:()=>{vC(l)},collapseSelection:(ht=!1)=>{p0(l).each(_t=>_t.fold(Mn=>Mn.collapse(ht),(Mn,In)=>{const bn=ht?Mn:In;of(l,bn,bn)},(Mn,In,bn,ir)=>{const ds=ht?Mn:bn,Br=ht?In:ir;Do(l,ds,Br,ds,Br)}))},setSelection:ht=>{Do(l,ht.start,ht.soffset,ht.finish,ht.foffset)},setRelativeSelection:(ht,_t)=>{of(l,ht,_t)},selectNode:ht=>{g0(l,ht,!1)},selectContents:ht=>{g0(l,ht)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>Yf(_e.fromDom(l.document)).top,scrollBy:(ht,_t)=>{_l(ht,_t,_e.fromDom(l.document))}}),yg=(l,f)=>({rows:l,cols:f}),wE=(l,f,v,C)=>{const A=Xf(l),B=lC(A,f,v,C);return{clearstate:B.clearstate,mousedown:B.mousedown,mouseover:B.mouseover,mouseup:B.mouseup}},J1=l=>vt(l,Sn).exists(C1),yC=(l,f)=>J1(l)||J1(f),b0=(l,f,v,C)=>{const A=Xf(l),B=()=>(C.clear(f),ve.none());return{keydown:(ae,Ce,Le,wt,Vt,Ft)=>{const Dt=ae.raw,ln=Dt.which,ht=Dt.shiftKey===!0;return E1(f,C.selectedSelector).fold(()=>(Bu(ln)&&!ht&&C.clearBeforeUpdate(f),Bu(ln)&&ht&&!yC(Ce,wt)?ve.none:a0(ln)&&ht?jt(s0,A,f,v,G1,wt,Ce,C.selectRange):uC(ln)&&ht?jt(s0,A,f,v,K1,wt,Ce,C.selectRange):a0(ln)?jt(xA,A,v,G1,wt,Ce,pE):uC(ln)?jt(xA,A,v,K1,wt,Ce,EA):ve.none),Mn=>{const In=bn=>()=>To(bn,ds=>dg(ds.rows,ds.cols,f,Mn,C)).fold(()=>qS(f,C.firstSelectedSelector,C.lastSelectedSelector).map(ds=>{const Br=a0(ln)||Ft.isForward(ln)?Ei.after:Ei.before;return A.setRelativeSelection(Ei.on(ds.first,0),Br(ds.table)),C.clear(f),xl.create(ve.none(),!0)}),ds=>ve.some(xl.create(ve.none(),!0)));return Bu(ln)&&ht&&!yC(Ce,wt)?ve.none:a0(ln)&&ht?In([yg(1,0)]):uC(ln)&&ht?In([yg(-1,0)]):Ft.isBackward(ln)&&ht?In([yg(0,-1),yg(-1,0)]):Ft.isForward(ln)&&ht?In([yg(0,1),yg(1,0)]):Bu(ln)&&!ht?B:ve.none})()},keyup:(ae,Ce,Le,wt,Vt)=>E1(f,C.selectedSelector).fold(()=>{const Ft=ae.raw,Dt=Ft.which;return Ft.shiftKey===!0&&Bu(Dt)&&yC(Ce,wt)?bA(f,v,Ce,Le,wt,Vt,C.selectRange):ve.none()},ve.none)}},v0=(l,f,v,C)=>{const A=Xf(l);return(B,U)=>{C.clearBeforeUpdate(f),sp(B,U,v).each(J=>{const ae=J.boxes.getOr([]);C.selectRange(f,ae,J.start,J.finish),A.selectContents(U),A.collapseSelection()})}},wC=(l,f)=>{const v=Tr(l,f);return v===void 0||v===""?[]:v.split(" ")},CE=(l,f,v)=>{const A=wC(l,f).concat([v]);return Zs(l,f,A.join(" ")),!0},Jf=(l,f,v)=>{const C=to(wC(l,f),A=>A!==v);return C.length>0?Zs(l,f,C.join(" ")):fe(l,f),!1},y0=l=>l.dom.classList!==void 0,SE=l=>wC(l,"class"),ou=(l,f)=>CE(l,"class",f),Wa=(l,f)=>Jf(l,"class",f),Qf=(l,f)=>{y0(l)?l.dom.classList.add(f):ou(l,f)},CC=l=>{(y0(l)?l.dom.classList:SE(l)).length===0&&fe(l,"class")},AA=(l,f)=>{y0(l)?l.dom.classList.remove(f):Wa(l,f),CC(l)},w0=(l,f)=>y0(l)&&l.dom.classList.contains(f),SC=(l,f)=>{nt(f,v=>{AA(l,v)})},Op=l=>f=>{Qf(f,l)},xE=l=>f=>{SC(f,l)},DA={byClass:l=>{const f=Op(l.selected),v=xE([l.selected,l.lastSelected,l.firstSelected]),C=B=>{const U=qn(B,l.selectedSelector);nt(U,v)};return{clearBeforeUpdate:C,clear:C,selectRange:(B,U,J,ae)=>{C(B),nt(U,f),Qf(J,l.firstSelected),Qf(ae,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,f,v)=>{const C=ae=>{fe(ae,l.selected),fe(ae,l.firstSelected),fe(ae,l.lastSelected)},A=ae=>{Zs(ae,l.selected,"1")},B=ae=>{U(ae),v()},U=ae=>{const Ce=qn(ae,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);nt(Ce,C)};return{clearBeforeUpdate:U,clear:B,selectRange:(ae,Ce,Le,wt)=>{B(ae),nt(Ce,A),Zs(Le,l.firstSelected,"1"),Zs(wt,l.lastSelected,"1"),f(Ce,Le,wt)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},EE=(l,f,v,C)=>{switch(l.tag){case"none":return f();case"single":return C(l.element);case"multiple":return v(l.elements)}},_E=()=>({tag:"none"}),Yt=l=>({tag:"multiple",elements:l}),Za=l=>({tag:"single",element:l}),Q1=(l,f,v)=>({get:()=>Nm(l(),v).fold(()=>f().fold(_E,Za),Yt)}),ja=(l,f)=>{const v=l.slice(0,f[f.length-1].row+1),C=fv(v);return qo(C,A=>{const B=A.cells.slice(0,f[f.length-1].column+1);return sn(B,U=>U.element)})},su=(l,f)=>{const v=l.slice(f[0].row+f[0].rowspan-1,l.length),C=fv(v);return qo(C,A=>{const B=A.cells.slice(f[0].column+f[0].colspan-1,A.cells.length);return sn(B,U=>U.element)})},xC=(l,f,v)=>{const C=co.fromTable(l);return el(C,f).map(B=>{const U=up(C,v,!1),{rows:J}=aa(U),ae=ja(J,B),Ce=su(J,B);return{upOrLeftCells:ae,downOrRightCells:Ce}})},wg=(l,f,v,C,A,B,U)=>({target:l,x:f,y:v,stop:C,prevent:A,kill:B,raw:U}),eb=l=>{const f=_e.fromDom(qt(l).getOr(l.target)),v=()=>l.stopPropagation(),C=()=>l.preventDefault(),A=dn(C,v);return wg(f,l.clientX,l.clientY,v,C,A,l)},Cg=(l,f)=>v=>{l(v)&&f(eb(v))},tb=(l,f,v,C,A)=>{const B=Cg(v,C);return l.dom.addEventListener(f,B,A),{unbind:jt(RA,l,f,B,A)}},TE=(l,f,v,C)=>tb(l,f,v,C,!1),RA=(l,f,v,C)=>{l.dom.removeEventListener(f,v,C)},MA=Fe,Dp=(l,f,v)=>TE(l,f,MA,v),Sg=eb,EC=l=>!w0(_e.fromDom(l.target),"ephox-snooker-resizer-bar"),_C=(l,f)=>{const v=Q1(()=>_e.fromDom(l.getBody()),()=>sw(Ql(l),md(l)),Hf.selectedSelector),C=(ae,Ce,Le)=>{Sr(Ce).each(Vt=>{const Ft=sn(ae,Mn=>Mn.dom),Dt=VS(l),ln=Lf(Xe,_e.fromDom(l.getDoc()),Dt),ht=$s(l),_t=xC(Vt,{selection:ht},ln).map(Mn=>$r(Mn,In=>sn(In,bn=>bn.dom))).getOrUndefined();Ax(l,Ft,Ce.dom,Le.dom,_t)})},A=()=>Qk(l),B=DA.byAttr(Hf,C,A);return l.on("init",ae=>{const Ce=l.getWin(),Le=Yh(l),wt=md(l),Vt=()=>{const as=l.selection,qa=_e.fromDom(as.getStart()),fc=_e.fromDom(as.getEnd());Ru(Sr,[qa,fc]).fold(()=>B.clear(Le),Xe)},Ft=wE(Ce,Le,wt,B),Dt=b0(Ce,Le,wt,B),ln=v0(Ce,Le,wt,B),ht=as=>as.raw.shiftKey===!0;l.on("TableSelectorChange",as=>ln(as.start,as.finish));const _t=(as,qa)=>{ht(as)&&(qa.kill&&as.kill(),qa.selection.each(fc=>{const Lu=bg.relative(fc.start,fc.finish),Ol=qv(Ce,Lu);l.selection.setRng(Ol)}))},Mn=as=>{const qa=Sg(as);if(qa.raw.shiftKey&&Bu(qa.raw.which)){const fc=l.selection.getRng(),Lu=_e.fromDom(fc.startContainer),Ol=_e.fromDom(fc.endContainer);Dt.keyup(qa,Lu,fc.startOffset,Ol,fc.endOffset).each(Np=>{_t(qa,Np)})}},In=as=>{const qa=Sg(as);f.hide();const fc=l.selection.getRng(),Lu=_e.fromDom(fc.startContainer),Ol=_e.fromDom(fc.endContainer),Np=I(bE,vE)(_e.fromDom(l.selection.getStart()));Dt.keydown(qa,Lu,fc.startOffset,Ol,fc.endOffset,Np).each(Qn=>{_t(qa,Qn)}),f.show()},bn=as=>as.button===0,ir=as=>as.buttons===void 0?!0:(as.buttons&1)!==0,ds=as=>{Ft.clearstate()},Br=as=>{bn(as)&&EC(as)&&Ft.mousedown(Sg(as))},Al=as=>{ir(as)&&EC(as)&&Ft.mouseover(Sg(as))},ki=as=>{bn(as)&&EC(as)&&Ft.mouseup(Sg(as))},_g=(()=>{const as=r0(_e.fromDom(Le)),qa=r0(0);return{touchEnd:Lu=>{const Ol=_e.fromDom(Lu.target);if(hs("td")(Ol)||hs("th")(Ol)){const Np=as.get(),Qn=qa.get();Zo(Np,Ol)&&Lu.timeStamp-Qn<300&&(Lu.preventDefault(),ln(Ol,Ol))}as.set(Ol),qa.set(Lu.timeStamp)}}})();l.on("dragstart",ds),l.on("mousedown",Br),l.on("mouseover",Al),l.on("mouseup",ki),l.on("touchend",_g.touchEnd),l.on("keyup",Mn),l.on("keydown",In),l.on("NodeChange",Vt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Hf.firstSelected),l.serializer.addTempAttr(Hf.lastSelected)}),{getSelectedCells:()=>EE(v.get(),ce([]),ae=>sn(ae,Ce=>Ce.dom),ae=>[ae.dom]),clearSelectedCells:ae=>B.clear(_e.fromDom(ae))}},al=l=>{let f=[];return{bind:B=>{if(B===void 0)throw new Error("Event bind error: undefined handler");f.push(B)},unbind:B=>{f=to(f,U=>U!==B)},trigger:(...B)=>{const U={};nt(l,(J,ae)=>{U[J]=B[ae]}),nt(f,J=>{J(U)})}}},sf=l=>{const f=$r(l,C=>({bind:C.bind,unbind:C.unbind})),v=$r(l,C=>C.trigger);return{registry:f,trigger:v}},C0=(l,f)=>{let v=null;const C=()=>{Ee(v)||(clearTimeout(v),v=null)};return{cancel:C,throttle:(...B)=>{C(),v=setTimeout(()=>{v=null,l.apply(null,B)},f)}}},Iu=l=>l.slice(0).sort(),S0=(l,f)=>{throw new Error("All required keys ("+Iu(l).join(", ")+") were not specified. Specified keys were: "+Iu(f).join(", ")+".")},NA=l=>{throw new Error("Unsupported keys for object: "+Iu(l).join(", "))},x0=(l,f)=>{if(!ie(f))throw new Error("The "+l+" fields must be an array. Was: "+f+".");nt(f,v=>{if(!K(v))throw new Error("The value "+v+" in the "+l+" fields was not a string.")})},E0=(l,f)=>{throw new Error("All values need to be of type: "+f+". Keys ("+Iu(l).join(", ")+") were not.")},PA=l=>{const f=Iu(l);W(f,(C,A)=>A<f.length-1&&C===f[A+1]).each(C=>{throw new Error("The field: "+C+" occurs more than once in the combined fields: ["+f.join(", ")+"].")})},BA=(l,f)=>IA(l,f,{validate:Mt,label:"function"}),IA=(l,f,v)=>{if(f.length===0)throw new Error("You must specify at least one required field.");return x0("required",f),PA(f),C=>{const A=Zt(C);Ho(f,J=>an(A,J))||S0(f,A),l(f,A);const U=to(f,J=>!v.validate(C[J],J));return U.length>0&&E0(U,v.label),C}},LA=(l,f)=>{const v=to(f,C=>!an(l,C));v.length>0&&NA(v)},_0=l=>BA(LA,l),kE=_0(["compare","extract","mutate","sink"]),FA=_0(["element","start","stop","destroy"]),T0=_0(["forceDrop","drop","move","delayDrop"]),Ti=()=>{let l=ve.none();const f=()=>{l=ve.none()},v=(B,U)=>{const J=l.map(ae=>B.compare(ae,U));return l=ve.some(U),J},C=(B,U)=>{U.extract(B).each(ae=>{v(U,ae).each(Le=>{A.trigger.move(Le)})})},A=sf({move:al(["info"])});return{onEvent:C,reset:f,events:A.registry}},ru=()=>{const l=sf({move:al(["info"])});return{onEvent:Xe,reset:Xe,events:l.registry}},Tl=()=>{const l=ru(),f=Ti();let v=l;return{on:()=>{v.reset(),v=f},off:()=>{v.reset(),v=l},isOn:()=>v===f,onEvent:(J,ae)=>{v.onEvent(J,ae)},events:f.events}},k0=(l,f,v)=>{let C=!1;const A=sf({start:al([]),stop:al([])}),B=Tl(),U=()=>{Dt.stop(),B.isOn()&&(B.off(),A.trigger.stop())},J=C0(U,200),ae=ht=>{Dt.start(ht),B.on(),A.trigger.start()},Ce=ht=>{J.cancel(),B.onEvent(ht,f)};B.events.move.bind(ht=>{f.mutate(l,ht.info)});const Le=()=>{C=!0},wt=()=>{C=!1},Vt=()=>C,Ft=ht=>(..._t)=>{C&&ht.apply(null,_t)},Dt=f.sink(T0({forceDrop:U,drop:Ft(U),move:Ft(Ce),delayDrop:Ft(J.throttle)}),v),ln=()=>{Dt.destroy()};return{element:Dt.element,go:ae,on:Le,off:wt,isActive:Vt,destroy:ln,events:A.registry}},nb=l=>{const f=l.replace(/\./g,"-");return{resolve:C=>f+"-"+C}},ob=nb("ephox-dragster").resolve,$A=l=>{const f={layerClass:ob("blocker"),...l},v=_e.fromTag("div");return Zs(v,"role","presentation"),Fa(v,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Qf(v,ob("blocker")),Qf(v,f.layerClass),{element:ce(v),destroy:()=>{br(v)}}};var RE=kE({compare:(l,f)=>Dn(f.left-l.left,f.top-l.top),extract:l=>ve.some(Dn(l.x,l.y)),sink:(l,f)=>{const v=$A(f),C=Dp(v.element(),"mousedown",l.forceDrop),A=Dp(v.element(),"mouseup",l.drop),B=Dp(v.element(),"mousemove",l.move),U=Dp(v.element(),"mouseout",l.delayDrop),J=()=>{v.destroy(),A.unbind(),B.unbind(),U.unbind(),C.unbind()},ae=Le=>{Ls(Le,v.element())},Ce=()=>{br(v.element())};return FA({element:v.element,start:ae,stop:Ce,destroy:J})},mutate:(l,f)=>{l.mutate(f.left,f.top)}});const A0=(l,f={})=>{var v;const C=(v=f.mode)!==null&&v!==void 0?v:RE;return k0(l,C,f)},bt=nb("ephox-snooker").resolve,kl=()=>{const l=sf({drag:al(["xDelta","yDelta"])});return{mutate:(v,C)=>{l.trigger.drag(v,C)},events:l.registry}},NE=()=>{const l=sf({drag:al(["xDelta","yDelta","target"])});let f=ve.none();const v=kl();return v.events.drag.bind(B=>{f.each(U=>{l.trigger.drag(B.xDelta,B.yDelta,U)})}),{assign:B=>{f=ve.some(B)},get:()=>f,mutate:v.mutate,events:l.registry}},TC=(l,f,v,C,A)=>{const B=_e.fromTag("div");return Fa(B,{position:"absolute",left:f-C/2+"px",top:v+"px",height:A+"px",width:C+"px"}),Ta(B,{"data-column":l,role:"presentation"}),B},sb=(l,f,v,C,A)=>{const B=_e.fromTag("div");return Fa(B,{position:"absolute",left:f+"px",top:v-A/2+"px",height:A+"px",width:C+"px"}),Ta(B,{"data-row":l,role:"presentation"}),B},xg=bt("resizer-bar"),kC=bt("resizer-rows"),rb=bt("resizer-cols"),PE=7,VA=(l,f)=>qo(l.all,(v,C)=>f(v.element)?[C]:[]),AC=(l,f)=>{const v=[];return $n(l.grid.columns,C=>{co.getColumnAt(l,C).map(B=>B.element).forall(f)&&v.push(C)}),to(v,C=>{const A=co.filterItems(l,B=>B.column===C);return Ho(A,B=>f(B.element))})},ab=l=>{const f=qn(l.parent(),"."+xg);nt(f,br)},ch=(l,f,v)=>{const C=l.origin();nt(f,A=>{A.each(B=>{const U=v(C,B);Qf(U,xg),Ls(l.parent(),U)})})},BE=(l,f,v,C)=>{ch(l,f,(A,B)=>{const U=TC(B.col,B.x-A.left,v.top-A.top,PE,C);return Qf(U,rb),U})},IE=(l,f,v,C)=>{ch(l,f,(A,B)=>{const U=sb(B.row,v.left-A.left,B.y-A.top,C,PE);return Qf(U,kC),U})},zA=(l,f,v,C,A)=>{const B=xr(v),U=f.isResizable,J=C.length>0?Bi.positions(C,v):[],ae=J.length>0?VA(l,U):[],Ce=to(J,(Ft,Dt)=>ct(ae,ln=>Dt===ln));IE(f,Ce,B,ts(v));const Le=A.length>0?Wh.positions(A,v):[],wt=Le.length>0?AC(l,U):[],Vt=to(Le,(Ft,Dt)=>ct(wt,ln=>Dt===ln));BE(f,Vt,B,mt(v))},OC=(l,f)=>{if(ab(l),l.isResizable(f)){const v=co.fromTable(f),C=Sm(v),A=id(v);zA(v,l,f,C,A)}},UA=(l,f)=>{const v=qn(l.parent(),"."+xg);nt(v,f)},il=l=>{UA(l,f=>{Kr(f,"display","none")})},Ki=l=>{UA(l,f=>{Kr(f,"display","block")})},Rp=l=>w0(l,kC),NM=l=>w0(l,rb),WA=bt("resizer-bar-dragging"),DC=l=>{const f=NE(),v=A0(f,{});let C=ve.none();const A=(Dt,ln)=>ve.from(Tr(Dt,ln));f.events.drag.bind(Dt=>{A(Dt.target,"data-row").each(ln=>{const ht=pi(Dt.target,"top");Kr(Dt.target,"top",ht+Dt.yDelta+"px")}),A(Dt.target,"data-column").each(ln=>{const ht=pi(Dt.target,"left");Kr(Dt.target,"left",ht+Dt.xDelta+"px")})});const B=(Dt,ln)=>{const ht=pi(Dt,ln),_t=js(Dt,"data-initial-"+ln,0);return ht-_t};v.events.stop.bind(()=>{f.get().each(Dt=>{C.each(ln=>{A(Dt,"data-row").each(ht=>{const _t=B(Dt,"top");fe(Dt,"data-initial-top"),Ft.trigger.adjustHeight(ln,_t,parseInt(ht,10))}),A(Dt,"data-column").each(ht=>{const _t=B(Dt,"left");fe(Dt,"data-initial-left"),Ft.trigger.adjustWidth(ln,_t,parseInt(ht,10))}),OC(l,ln)})})});const U=(Dt,ln)=>{Ft.trigger.startAdjust(),f.assign(Dt),Zs(Dt,"data-initial-"+ln,pi(Dt,ln)),Qf(Dt,WA),Kr(Dt,"opacity","0.2"),v.go(l.parent())},J=Dp(l.parent(),"mousedown",Dt=>{Rp(Dt.target)&&U(Dt.target,"top"),NM(Dt.target)&&U(Dt.target,"left")}),ae=Dt=>Zo(Dt,l.view()),Ce=Dt=>lr(Dt,"table",ae).filter(C1),Le=Dp(l.view(),"mouseover",Dt=>{Ce(Dt.target).fold(()=>{pn(Dt.target)&&ab(l)},ln=>{v.isActive()&&(C=ve.some(ln),OC(l,ln))})}),wt=()=>{J.unbind(),Le.unbind(),v.destroy(),ab(l)},Vt=Dt=>{OC(l,Dt)},Ft=sf({adjustHeight:al(["table","delta","row"]),adjustWidth:al(["table","delta","column"]),startAdjust:al([])});return{destroy:wt,refresh:Vt,on:v.on,off:v.off,hideBars:jt(il,l),showBars:jt(Ki,l),events:Ft.registry}},ZA={create:(l,f,v)=>{const C=Bi,A=Wh,B=DC(l),U=sf({beforeResize:al(["table","type"]),afterResize:al(["table","type"]),startDrag:al([])});return B.events.adjustHeight.bind(J=>{const ae=J.table;U.trigger.beforeResize(ae,"row");const Ce=C.delta(J.delta,ae);_w(ae,Ce,J.row),U.trigger.afterResize(ae,"row")}),B.events.startAdjust.bind(J=>{U.trigger.startDrag()}),B.events.adjustWidth.bind(J=>{const ae=J.table;U.trigger.beforeResize(ae,"col");const Ce=A.delta(J.delta,ae),Le=v(ae);Ew(ae,Ce,J.column,f,Le),U.trigger.afterResize(ae,"col")}),{on:B.on,off:B.off,refreshBars:B.refresh,hideBars:B.hideBars,showBars:B.showBars,destroy:B.destroy,events:U.registry}}},rf={only:(l,f)=>{const v=ul(l)?Ko(l):l;return{parent:ce(v),view:ce(l),origin:ce(Dn(0,0)),isResizable:f}},detached:(l,f,v)=>{const C=()=>xr(f);return{parent:ce(f),view:ce(l),origin:C,isResizable:v}},body:(l,f,v)=>({parent:ce(f),view:ce(l),origin:ce(Dn(0,0)),isResizable:v})},O0=()=>{const l=_e.fromTag("div");return Fa(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ls(Dr(),l),l},qA=(l,f)=>l.inline?rf.body(_e.fromDom(l.getBody()),O0(),f):rf.only(_e.fromDom(l.getDoc()),f),GA=(l,f)=>{l.inline&&br(f.parent())},FE=l=>Lt(l)&&l.nodeName==="TABLE",ib="bar-",RC=l=>Tr(l,"data-mce-resize")!=="false",$E=l=>{const f=co.fromTable(l);co.hasColumns(f)||nt(xc(l),v=>{const C=Yr(v,"width");Kr(v,"width",C),fe(v,"width")})},BM=l=>ga(l,"corner-"),Mp=l=>pm(l,"corner-"),MC=l=>{const f=_p(),v=_p(),C=_p();let A,B,U,J;const ae=_t=>wa(l,_t),Ce=()=>Nr(l)?Bm():tg(),Le=_t=>Jd(_t).columns,wt=_t=>Jd(_t).rows,Vt=(_t,Mn,In,bn)=>{const ir=Mp(Mn),ds=Wc(ir,"e"),Br=ga(ir,"n");if(B===""&&F1(_t),J===""&&sA(_t),In!==A&&B!==""){Kr(_t,"width",B);const Al=Ce(),ki=ae(_t),Eg=Nr(l)||ds?Le(_t)-1:0;Ew(_t,In-A,Eg,Al,ki)}else if(WS(B)){const Al=parseFloat(B.replace("%","")),ki=In*Al/A;Kr(_t,"width",ki+"%")}if(ZS(B)&&$E(_t),bn!==U&&J!==""){Kr(_t,"height",J);const Al=Br?0:wt(_t)-1;_w(_t,bn-U,Al)}},Ft=()=>{v.on(_t=>{_t.destroy()}),C.on(_t=>{GA(l,_t)})};return l.on("init",()=>{const _t=qA(l,RC);if(C.set(_t),ud(l)&&Jl(l)){const Mn=Ce(),In=ZA.create(_t,Mn,ae);In.on(),In.events.startDrag.bind(bn=>{f.set(l.selection.getRng())}),In.events.beforeResize.bind(bn=>{const ir=bn.table.dom;eA(l,ir,Om(ir),jy(ir),ib+bn.type)}),In.events.afterResize.bind(bn=>{const ir=bn.table,ds=ir.dom;sc(ir),f.on(Br=>{l.selection.setRng(Br),l.focus()}),ya(l,ds,Om(ds),jy(ds),ib+bn.type),l.undoManager.add()}),v.set(In)}}),l.on("ObjectResizeStart",_t=>{const Mn=_t.target;if(FE(Mn)){const In=_e.fromDom(Mn);nt(l.dom.select(".mce-clonedresizable"),bn=>{l.dom.addClass(bn,"mce-"+Uy(l)+"-columns")}),!zw(In)&&$f(l)?$1(In):!Px(In)&&Am(l)&&F1(In),Bx(In)&&ga(_t.origin,ib)&&F1(In),A=_t.width,B=Xl(l)?"":qy(l,Mn).getOr(""),U=_t.height,J=US(l,Mn).getOr("")}}),l.on("ObjectResized",_t=>{const Mn=_t.target;if(FE(Mn)){const In=_e.fromDom(Mn),bn=_t.origin;BM(bn)&&Vt(In,bn,_t.width,_t.height),sc(In),qf(l,In.dom,Pr)}}),l.on("SwitchMode",()=>{v.on(_t=>{l.mode.isReadOnly()?_t.hideBars():_t.showBars()})}),l.on("dragstart dragend",_t=>{v.on(Mn=>{_t.type==="dragstart"?(Mn.hideBars(),Mn.off()):(Mn.on(),Mn.showBars())})}),l.on("remove",()=>{Ft()}),{refresh:_t=>{v.on(Mn=>Mn.refreshBars(_e.fromDom(_t)))},hide:()=>{v.on(_t=>_t.hideBars())},show:()=>{v.on(_t=>_t.showBars())}}},IM=l=>{Kh(l);const f=MC(l),v=_C(l,f),C=Ca(l,f,v);return bp(l,C),qx(l,C),ap(l,C),{getSelectedCells:v.getSelectedCells,clearSelectedCells:v.clearSelectedCells}},HE=l=>({table:IM(l)});var KA=()=>{p.add("dom",HE)};KA()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(_,R,j)=>{var te;return j(_,R.prototype)?!0:((te=_.constructor)===null||te===void 0?void 0:te.name)===R.name},w=_=>{const R=typeof _;return _===null?"null":R==="object"&&Array.isArray(_)?"array":R==="object"&&g(_,String,(j,te)=>te.isPrototypeOf(j))?"string":R},E=_=>R=>w(R)===_,M=_=>R=>typeof R===_,z=_=>R=>_===R,K=E("string"),Z=E("array"),ie=M("boolean"),Ee=z(void 0),de=_=>_==null,Ye=_=>!de(_),Ut=M("function"),Lt=M("number"),Mt=()=>{},Ct=(_,R)=>j=>_(R(j)),Xe=_=>()=>_,dn=_=>_,Nt=(_,R)=>_===R;function ce(_,...R){return(...j)=>{const te=R.concat(j);return _.apply(null,te)}}const Ke=_=>{_()},Kn=Xe(!1),jt=Xe(!0);class ne{constructor(R,j){this.tag=R,this.value=j}static some(R){return new ne(!0,R)}static none(){return ne.singletonNone}fold(R,j){return this.tag?j(this.value):R()}isSome(){return this.tag}isNone(){return!this.tag}map(R){return this.tag?ne.some(R(this.value)):ne.none()}bind(R){return this.tag?R(this.value):ne.none()}exists(R){return this.tag&&R(this.value)}forall(R){return!this.tag||R(this.value)}filter(R){return!this.tag||R(this.value)?this:ne.none()}getOr(R){return this.tag?this.value:R}or(R){return this.tag?this:R}getOrThunk(R){return this.tag?this.value:R()}orThunk(R){return this.tag?this:R()}getOrDie(R){if(this.tag)return this.value;throw new Error(R??"Called getOrDie on None")}static from(R){return Ye(R)?ne.some(R):ne.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(R){this.tag&&R(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ne.singletonNone=new ne(!1);const Jt=Object.keys,Bn=Object.hasOwnProperty,Qt=(_,R)=>{const j=Jt(_);for(let te=0,Te=j.length;te<Te;te++){const ot=j[te],At=_[ot];R(At,ot)}},Fe=_=>(R,j)=>{_[j]=R},ve=(_,R,j,te)=>{Qt(_,(Te,ot)=>{(R(Te,ot)?j:te)(Te,ot)})},so=(_,R)=>{const j={};return ve(_,R,Fe(j),Mt),j},Me=(_,R)=>{const j=[];return Qt(_,(te,Te)=>{j.push(R(te,Te))}),j},Pe=_=>Me(_,dn),N=_=>Jt(_).length,an=(_,R)=>ct(_,R)?ne.from(_[R]):ne.none(),ct=(_,R)=>Bn.call(_,R),$n=(_,R)=>ct(_,R)&&_[R]!==void 0&&_[R]!==null,sn=_=>{for(const R in _)if(Bn.call(_,R))return!1;return!0},nt=Array.prototype.indexOf,eo=Array.prototype.push,ms=(_,R)=>nt.call(_,R),to=(_,R)=>ms(_,R)>-1,os=(_,R)=>{for(let j=0,te=_.length;j<te;j++){const Te=_[j];if(R(Te,j))return!0}return!1},tt=(_,R)=>{const j=[];for(let te=0;te<_;te++)j.push(R(te));return j},yt=(_,R)=>{const j=_.length,te=new Array(j);for(let Te=0;Te<j;Te++){const ot=_[Te];te[Te]=R(ot,Te)}return te},W=(_,R)=>{for(let j=0,te=_.length;j<te;j++){const Te=_[j];R(Te,j)}},ta=(_,R)=>{for(let j=_.length-1;j>=0;j--){const te=_[j];R(te,j)}},uo=(_,R)=>{const j=[],te=[];for(let Te=0,ot=_.length;Te<ot;Te++){const At=_[Te];(R(At,Te)?j:te).push(At)}return{pass:j,fail:te}},qo=(_,R)=>{const j=[];for(let te=0,Te=_.length;te<Te;te++){const ot=_[te];R(ot,te)&&j.push(ot)}return j},Ho=(_,R,j)=>(ta(_,(te,Te)=>{j=R(j,te,Te)}),j),Wi=(_,R,j)=>(W(_,(te,Te)=>{j=R(j,te,Te)}),j),et=(_,R,j)=>{for(let te=0,Te=_.length;te<Te;te++){const ot=_[te];if(R(ot,te))return ne.some(ot);if(j(ot,te))break}return ne.none()},Tt=(_,R)=>et(_,R,Kn),dt=_=>{const R=[];for(let j=0,te=_.length;j<te;++j){if(!Z(_[j]))throw new Error("Arr.flatten item "+j+" was not an array, input: "+_);eo.apply(R,_[j])}return R},Se=(_,R)=>dt(yt(_,R)),_o=(_,R)=>{for(let j=0,te=_.length;j<te;++j){const Te=_[j];if(R(Te,j)!==!0)return!1}return!0},To=(_,R)=>{const j={};for(let te=0,Te=_.length;te<Te;te++){const ot=_[te];j[String(ot)]=R(ot,te)}return j},Zt=(_,R)=>R>=0&&R<_.length?ne.some(_[R]):ne.none(),ss=_=>Zt(_,0),Mo=_=>Zt(_,_.length-1),$r=(_,R)=>{for(let j=0;j<_.length;j++){const te=R(_[j],j);if(te.isSome())return te}return ne.none()},Po=8,Is=9,Xa=11,ws=1,bs=3,vs=(_,R)=>{const te=(R||document).createElement("div");if(te.innerHTML=_,!te.hasChildNodes()||te.childNodes.length>1){const Te="HTML does not have a single root node";throw console.error(Te,_),new Error(Te)}return Vo(te.childNodes[0])},qr=(_,R)=>{const te=(R||document).createElement(_);return Vo(te)},Cs=(_,R)=>{const te=(R||document).createTextNode(_);return Vo(te)},Vo=_=>{if(_==null)throw new Error("Node cannot be null or undefined");return{dom:_}},fo={fromHtml:vs,fromTag:qr,fromText:Cs,fromDom:Vo,fromPoint:(_,R,j)=>ne.from(_.dom.elementFromPoint(R,j)).map(Vo)},cs=(_,R)=>{const j=_.dom;if(j.nodeType!==ws)return!1;{const te=j;if(te.matches!==void 0)return te.matches(R);if(te.msMatchesSelector!==void 0)return te.msMatchesSelector(R);if(te.webkitMatchesSelector!==void 0)return te.webkitMatchesSelector(R);if(te.mozMatchesSelector!==void 0)return te.mozMatchesSelector(R);throw new Error("Browser lacks native selectors")}},_r=_=>_.nodeType!==ws&&_.nodeType!==Is&&_.nodeType!==Xa||_.childElementCount===0,Oi=(_,R)=>{const j=R===void 0?document:R.dom;return _r(j)?[]:yt(j.querySelectorAll(_),fo.fromDom)},Zi=(_,R)=>{const j=R===void 0?document:R.dom;return _r(j)?ne.none():ne.from(j.querySelector(_)).map(fo.fromDom)},Go=(_,R)=>_.dom===R.dom,Vc=cs;typeof window<"u"||Function("return this;")();const kt=_=>_.dom.nodeName.toLowerCase(),po=_=>_.dom.nodeType,Hr=_=>R=>po(R)===_,Vr=_=>po(_)===Po||kt(_)==="#comment",Ba=Hr(ws),Ja=Hr(bs),Wo=Hr(Is),hi=Hr(Xa),Di=_=>R=>Ba(R)&&kt(R)===_,zo=_=>fo.fromDom(_.dom.ownerDocument),Sn=_=>Wo(_)?_:zo(_),Ys=_=>ne.from(_.dom.parentNode).map(fo.fromDom),Qa=(_,R)=>{const j=Ut(R)?R:Kn;let te=_.dom;const Te=[];for(;te.parentNode!==null&&te.parentNode!==void 0;){const ot=te.parentNode,At=fo.fromDom(ot);if(Te.push(At),j(At)===!0)break;te=ot}return Te},ul=_=>ne.from(_.dom.previousSibling).map(fo.fromDom),dl=_=>ne.from(_.dom.nextSibling).map(fo.fromDom),hs=_=>yt(_.dom.childNodes,fo.fromDom),pr=(_,R)=>{const j=_.dom.childNodes;return ne.from(j[R]).map(fo.fromDom)},Zs=_=>pr(_,0),Ta=_=>hi(_)&&Ye(_.dom.host),yc=_=>fo.fromDom(_.dom.getRootNode()),Tr=_=>{const R=yc(_);return Ta(R)?ne.some(R):ne.none()},pe=_=>fo.fromDom(_.dom.host),fe=_=>{const R=Ja(_)?_.dom.parentNode:_.dom;if(R==null||R.ownerDocument===null)return!1;const j=R.ownerDocument;return Tr(fo.fromDom(R)).fold(()=>j.body.contains(R),Ct(fe,pe))};var He=(_,R,j,te,Te)=>_(j,te)?ne.some(j):Ut(Te)&&Te(j)?ne.none():R(j,te,Te);const qe=(_,R,j)=>{let te=_.dom;const Te=Ut(j)?j:Kn;for(;te.parentNode;){te=te.parentNode;const ot=fo.fromDom(te);if(R(ot))return ne.some(ot);if(Te(ot))break}return ne.none()},gn=(_,R,j)=>He((Te,ot)=>ot(Te),qe,_,R,j),Nn=(_,R)=>{const j=Te=>R(fo.fromDom(Te));return Tt(_.dom.childNodes,j).map(fo.fromDom)},Un=(_,R,j)=>qe(_,te=>cs(te,R),j),or=(_,R)=>Nn(_,j=>cs(j,R)),_e=(_,R)=>Zi(R,_),Wn=(_,R,j)=>He((Te,ot)=>cs(Te,ot),Un,_,R,j),Xs=_=>Wn(_,"[contenteditable]"),ur=(_,R=!1)=>fe(_)?_.dom.isContentEditable:Xs(_).fold(Xe(R),j=>ka(j)==="true"),ka=_=>_.dom.contentEditable,Zo=_=>_.nodeName.toLowerCase(),zc=_=>fo.fromDom(_.getBody()),Gr=_=>R=>Go(R,zc(_)),Aa=_=>_?_.replace(/px$/,""):"",Ps=_=>/^\d+(\.\d+)?$/.test(_)?_+"px":_,Ko=_=>fo.fromDom(_.selection.getStart()),es=_=>fo.fromDom(_.selection.getEnd()),na=_=>gn(_,Di("table")).forall(ur),oa=(_,R)=>qo(hs(_),R),kr=(_,R)=>{let j=[];return W(hs(_),te=>{R(te)&&(j=j.concat([te])),j=j.concat(kr(te,R))}),j},Ji=(_,R)=>oa(_,j=>cs(j,R)),Ri=(_,R)=>Oi(R,_),xo=(_,R,j)=>{if(K(j)||ie(j)||Lt(j))_.setAttribute(R,j+"");else throw console.error("Invalid call to Attribute.set. Key ",R,":: Value ",j,":: Element ",_),new Error("Attribute value was not simple")},sa=(_,R,j)=>{xo(_.dom,R,j)},zr=(_,R)=>{const j=_.dom;Qt(R,(te,Te)=>{xo(j,Te,te)})},Qi=(_,R)=>{const j=_.dom.getAttribute(R);return j===null?void 0:j},ei=(_,R)=>ne.from(Qi(_,R)),Ar=(_,R)=>{_.dom.removeAttribute(R)},Ls=_=>Wi(_.dom.attributes,(R,j)=>(R[j.name]=j.value,R),{}),Cf=(_,R,j=Nt)=>_.exists(te=>j(te,R)),ji=_=>{const R=[],j=te=>{R.push(te)};for(let te=0;te<_.length;te++)_[te].each(j);return R},Uo=(_,R,j)=>_.isSome()&&R.isSome()?ne.some(j(_.getOrDie(),R.getOrDie())):ne.none(),Oa=_=>_.bind(dn),ma=(_,R)=>_?ne.some(R):ne.none(),br=(_,R)=>_.substring(R),$l=(_,R,j)=>R===""||_.length>=R.length&&_.substr(j,j+R.length)===R,Da=(_,R)=>Ia(_,R)?br(_,R.length):_,Ia=(_,R)=>$l(_,R,0),Mi=(_=>R=>R.replace(_,""))(/^\s+|\s+$/g),uu=_=>_.length>0,fl=_=>!uu(_),Uc=(_,R=10)=>{const j=parseInt(_,R);return isNaN(j)?ne.none():ne.some(j)},ti=_=>{const R=parseFloat(_);return isNaN(R)?ne.none():ne.some(R)},Or=_=>_.style!==void 0&&Ut(_.style.getPropertyValue),du=(_,R,j)=>{if(!K(j))throw console.error("Invalid call to CSS.set. Property ",R,":: Value ",j,":: Element ",_),new Error("CSS value must be a string: "+j);Or(_)&&_.style.setProperty(R,j)},fu=(_,R)=>{Or(_)&&_.style.removeProperty(R)},mu=(_,R,j)=>{const te=_.dom;du(te,R,j)},hu=(_,R)=>{const j=_.dom,Te=window.getComputedStyle(j).getPropertyValue(R);return Te===""&&!fe(_)?vr(j,R):Te},vr=(_,R)=>Or(_)?_.style.getPropertyValue(R):"",gi=(_,R)=>{const j=_.dom,te=vr(j,R);return ne.from(te).filter(Te=>Te.length>0)},X=(_,R)=>{const j=_.dom;fu(j,R),Cf(ei(_,"style").map(Mi),"")&&Ar(_,"style")},he=(_,R,j=0)=>ei(_,R).map(te=>parseInt(te,10)).getOr(j),Re=(_,R)=>at(_,R,jt),at=(_,R,j)=>Se(hs(_),te=>cs(te,R)?j(te)?[te]:[]:at(te,R,j)),St=["tfoot","thead","tbody","colgroup"],en=_=>to(St,_),io=(_,R)=>({rows:_,columns:R}),ls=(_,R,j)=>({element:_,rowspan:R,colspan:j}),vo=(_,R,j,te,Te,ot)=>({element:_,rowspan:R,colspan:j,row:te,column:Te,isLocked:ot}),qt=(_,R,j)=>({element:_,cells:R,section:j}),sr=(_,R,j,te)=>({startRow:_,startCol:R,finishRow:j,finishCol:te}),pn=(_,R,j)=>({element:_,colspan:R,column:j}),Dr=(_,R)=>({element:_,columns:R}),wc=(_,R,j=Kn)=>{if(j(R))return ne.none();if(to(_,kt(R)))return ne.some(R);const te=Te=>cs(Te,"table")||j(Te);return Un(R,_.join(","),te)},H=(_,R)=>wc(["td","th"],_,R),oe=_=>Re(_,"th,td"),ye=_=>cs(_,"colgroup")?Ji(_,"col"):Se(qn(_),R=>Ji(R,"col")),Ie=(_,R)=>Wn(_,"table",R),lt=_=>Re(_,"tr"),qn=_=>Ie(_).fold(Xe([]),R=>Ji(R,"colgroup")),Ss=(_,R)=>yt(_,j=>{if(kt(j)==="colgroup"){const te=yt(ye(j),Te=>{const ot=he(Te,"span",1);return ls(Te,1,ot)});return qt(j,te,"colgroup")}else{const te=yt(oe(j),Te=>{const ot=he(Te,"rowspan",1),At=he(Te,"colspan",1);return ls(Te,ot,At)});return qt(j,te,R(j))}}),rs=_=>Ys(_).map(R=>{const j=kt(R);return en(j)?j:"tbody"}).getOr("tbody"),vt=_=>{const R=lt(_),te=[...qn(_),...R];return Ss(te,rs)},Os="data-snooker-locked-cols",ha=_=>ei(_,Os).bind(R=>ne.from(R.match(/\d+/g))).map(R=>To(R,jt)),ni=(_,R)=>_+","+R,Xn=(_,R,j)=>ne.from(_.access[ni(R,j)]),oi=(_,R,j)=>{const te=lr(_,Te=>j(R,Te.element));return te.length>0?ne.some(te[0]):ne.none()},lr=(_,R)=>{const j=Se(_.all,te=>te.cells);return qo(j,R)},ed=_=>{const R={};let j=0;return W(_.cells,te=>{const Te=te.colspan;tt(Te,ot=>{const At=j+ot;R[At]=pn(te.element,Te,At)}),j+=Te}),R},xs=_=>{const R={},j=[],Te=ss(_).map(Rc=>Rc.element).bind(Ie).bind(ha).getOr({});let ot=0,At=0,on=0;const{pass:Zn,fail:oo}=uo(_,Rc=>Rc.section==="colgroup");W(oo,Rc=>{const Va=[];W(Rc.cells,Kl=>{let yl=0;for(;R[ni(on,yl)]!==void 0;)yl++;const Ou=$n(Te,yl.toString()),Gh=vo(Kl.element,Kl.rowspan,Kl.colspan,on,yl,Ou);for(let Gc=0;Gc<Kl.colspan;Gc++)for(let km=0;km<Kl.rowspan;km++){const Qg=on+km,ep=yl+Gc,If=ni(Qg,ep);R[If]=Gh,At=Math.max(At,ep+1)}Va.push(Gh)}),ot++,j.push(qt(Rc.element,Va,Rc.section)),on++});const{columns:Yo,colgroups:Xo}=Mo(Zn).map(Rc=>{const Va=ed(Rc);return{colgroups:[Dr(Rc.element,Pe(Va))],columns:Va}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:io(ot,At),access:R,all:j,columns:Yo,colgroups:Xo}},yr={fromTable:_=>{const R=vt(_);return xs(R)},generate:xs,getAt:Xn,findItem:oi,filterItems:lr,justCells:_=>Se(_.all,R=>R.cells),justColumns:_=>Pe(_.columns),hasColumns:_=>Jt(_.columns).length>0,getColumnAt:(_,R)=>ne.from(_.columns[R])};var ga=tinymce.util.Tools.resolve("tinymce.util.Tools");const Wc=(_,R,j)=>{const te=_.select("td,th",R);let Te;for(let ot=0;ot<te.length;ot++){const At=_.getStyle(te[ot],j);if(Ee(Te)&&(Te=At),Te!==At)return""}return Te},Cc=(_,R,j)=>{ga.each("left center right".split(" "),te=>{te!==j&&_.formatter.remove("align"+te,{},R)}),j&&_.formatter.apply("align"+j,{},R)},Ld=(_,R,j)=>{ga.each("top middle bottom".split(" "),te=>{te!==j&&_.formatter.remove("valign"+te,{},R)}),j&&_.formatter.apply("valign"+j,{},R)},La=(_,R,j)=>{_.dispatch("TableModified",{...j,table:R})},yo=(_,R)=>ti(_).getOr(R),hl=(_,R,j)=>yo(hu(_,R),j),Sc=(_,R,j,te)=>{const Te=hl(_,`padding-${j}`,0),ot=hl(_,`padding-${te}`,0),At=hl(_,`border-${j}-width`,0),on=hl(_,`border-${te}-width`,0);return R-Te-ot-At-on},h1=(_,R)=>{const j=_.dom,te=j.getBoundingClientRect().width||j.offsetWidth;return R==="border-box"?te:Sc(_,te,"left","right")},Fa=_=>h1(_,"content-box");var Yr=tinymce.util.Tools.resolve("tinymce.Env");const Oh="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Sf=tt(5,_=>{const R=`${_+1}px`;return{title:R,value:R}}),si=yt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],_=>({title:_,value:_.toLowerCase()})),Dh="100%",js=_=>{var R;const j=_.dom,te=(R=j.getParent(_.selection.getStart(),j.isBlock))!==null&&R!==void 0?R:_.getBody();return Fa(fo.fromDom(te))+"px"},Zc=(_,R)=>Bh(_)||!Sr(_)?R:Hl(_)?{...R,width:js(_)}:{...R,width:Dh},ri=(_,R)=>Bh(_)||Sr(_)?R:Hl(_)?{...R,width:js(_)}:{...R,width:Dh},wr=_=>R=>R.options.get(_),pi=_=>{const R=_.options.register;R("table_border_widths",{processor:"object[]",default:Sf}),R("table_border_styles",{processor:"object[]",default:si}),R("table_cell_advtab",{processor:"boolean",default:!0}),R("table_row_advtab",{processor:"boolean",default:!0}),R("table_advtab",{processor:"boolean",default:!0}),R("table_appearance_options",{processor:"boolean",default:!0}),R("table_grid",{processor:"boolean",default:!Yr.deviceType.isTouch()}),R("table_cell_class_list",{processor:"object[]",default:[]}),R("table_row_class_list",{processor:"object[]",default:[]}),R("table_class_list",{processor:"object[]",default:[]}),R("table_toolbar",{processor:"string",default:Oh}),R("table_background_color_map",{processor:"object[]",default:[]}),R("table_border_color_map",{processor:"object[]",default:[]})},Cr=wr("table_sizing_mode"),Rh=wr("table_border_widths"),gu=wr("table_border_styles"),pu=wr("table_cell_advtab"),xf=wr("table_row_advtab"),bu=wr("table_advtab"),xc=wr("table_appearance_options"),Ef=wr("table_grid"),Sr=wr("table_style_by_css"),_f=wr("table_cell_class_list"),Mh=wr("table_row_class_list"),gl=wr("table_class_list"),Nh=wr("table_toolbar"),vu=wr("table_background_color_map"),Ph=wr("table_border_color_map"),Hl=_=>Cr(_)==="fixed",Bh=_=>Cr(_)==="responsive",Tf=_=>{const R=_.options,j=R.get("table_default_styles");return R.isSet("table_default_styles")?j:Zc(_,j)},bm=_=>{const R=_.options,j=R.get("table_default_attributes");return R.isSet("table_default_attributes")?j:ri(_,j)},yu=(_,R)=>R.column>=_.startCol&&R.column+R.colspan-1<=_.finishCol&&R.row>=_.startRow&&R.row+R.rowspan-1<=_.finishRow,vm=(_,R)=>{let j=!0;const te=ce(yu,R);for(let Te=R.startRow;Te<=R.finishRow;Te++)for(let ot=R.startCol;ot<=R.finishCol;ot++)j=j&&yr.getAt(_,Te,ot).exists(te);return j?ne.some(R):ne.none()},be=(_,R)=>sr(Math.min(_.row,R.row),Math.min(_.column,R.column),Math.max(_.row+_.rowspan-1,R.row+R.rowspan-1),Math.max(_.column+_.colspan-1,R.column+R.colspan-1)),Vl=(_,R,j)=>{const te=yr.findItem(_,R,Go),Te=yr.findItem(_,j,Go);return te.bind(ot=>Te.map(At=>be(ot,At)))},pl=(_,R,j)=>Vl(_,R,j).bind(te=>vm(_,te)),Ih=(_,R,j)=>{const te=g1(_);return pl(te,R,j)},g1=yr.fromTable,wu=(_,R)=>{Ys(_).each(te=>{te.dom.insertBefore(R.dom,_.dom)})},ro=(_,R)=>{dl(_).fold(()=>{Ys(_).each(Te=>{Ec(Te,R)})},te=>{wu(te,R)})},Rr=(_,R)=>{Zs(_).fold(()=>{Ec(_,R)},te=>{_.dom.insertBefore(R.dom,te.dom)})},Ec=(_,R)=>{_.dom.appendChild(R.dom)},Cu=(_,R)=>{wu(_,R),Ec(R,_)},kf=(_,R)=>{W(R,(j,te)=>{const Te=te===0?_:R[te-1];ro(Te,j)})},Fd=(_,R)=>{W(R,j=>{Ec(_,j)})},$a=_=>{const R=_.dom;R.parentNode!==null&&R.parentNode.removeChild(R)},Af=_=>{const R=hs(_);R.length>0&&kf(_,R),$a(_)},Of=((_,R)=>{const j=ot=>{if(!_(ot))throw new Error("Can only get "+R+" value of a "+R+" node");return te(ot).getOr("")},te=ot=>_(ot)?ne.from(ot.dom.nodeValue):ne.none();return{get:j,getOption:te,set:(ot,At)=>{if(!_(ot))throw new Error("Can only set raw "+R+" value of a "+R+" node");ot.dom.nodeValue=At}}})(Ja,"text"),Ul=_=>Of.get(_),bi=(_,R)=>Of.set(_,R);var Lh=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],$d=()=>{const _=oo=>fo.fromDom(oo.dom.cloneNode(!1)),R=oo=>Sn(oo).dom,j=oo=>Ba(oo)?kt(oo)==="body"?!0:to(Lh,kt(oo)):!1,te=oo=>Ba(oo)?to(["br","img","hr","input"],kt(oo)):!1,Te=oo=>Ba(oo)&&Qi(oo,"contenteditable")==="false",ot=(oo,Yo)=>oo.dom.compareDocumentPosition(Yo.dom),At=(oo,Yo)=>{const Xo=Ls(oo);zr(Yo,Xo)},on=oo=>{const Yo=kt(oo);return to(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Yo)},Zn=oo=>Ba(oo)?ei(oo,"lang"):ne.none();return{up:Xe({selector:Un,closest:Wn,predicate:qe,all:Qa}),down:Xe({selector:Ri,predicate:kr}),styles:Xe({get:hu,getRaw:gi,set:mu,remove:X}),attrs:Xe({get:Qi,set:sa,remove:Ar,copyTo:At}),insert:Xe({before:wu,after:ro,afterAll:kf,append:Ec,appendAll:Fd,prepend:Rr,wrap:Cu}),remove:Xe({unwrap:Af,remove:$a}),create:Xe({nu:fo.fromTag,clone:_,text:fo.fromText}),query:Xe({comparePosition:ot,prevSibling:ul,nextSibling:dl}),property:Xe({children:hs,name:kt,parent:Ys,document:R,isText:Ja,isComment:Vr,isElement:Ba,isSpecial:on,getLanguage:Zn,getText:Ul,setText:bi,isBoundary:j,isEmptyTag:te,isNonEditable:Te}),eq:Go,is:Vc}};const ra=(_,R,j,te)=>{const Te=j[0],ot=j.slice(1);return te(_,R,Te,ot)},Ni=(_,R,j)=>j.length>0?ra(_,R,j,ai):ne.none(),ai=(_,R,j,te)=>{const Te=R(_,j);return Ho(te,(ot,At)=>{const on=R(_,At);return td(_,ot,on)},Te)},td=(_,R,j)=>R.bind(te=>j.filter(ce(_.eq,te))),Hd=Ni,Fh=$d(),Vd=(_,R)=>Hd(Fh,(j,te)=>_(te),R),jc=_=>Un(_,"table"),Df=(_,R)=>{const j=Ri(_,R);return j.length>0?ne.some(j):ne.none()},Wg=(_,R,j)=>_e(_,R).bind(te=>_e(_,j).bind(Te=>Vd(jc,[te,Te]).map(ot=>({first:te,last:Te,table:ot})))),$h=(_,R)=>Df(_,R),Xb=(_,R,j)=>Wg(_,R,j).bind(te=>{const Te=Zn=>Go(_,Zn),ot="thead,tfoot,tbody,table",At=Un(te.first,ot,Te),on=Un(te.last,ot,Te);return At.bind(Zn=>on.bind(oo=>Go(Zn,oo)?Ih(te.table,te.first,te.last):ne.none()))}),ym=_=>yt(_,fo.fromDom),zd="data-mce-selected",nd="td["+zd+"],th["+zd+"]",Ud="data-mce-first-selected",qs="td["+Ud+"],th["+Ud+"]",Qs="data-mce-last-selected",tc="td["+Qs+"],th["+Qs+"]",od={selected:zd,selectedSelector:nd,firstSelected:Ud,firstSelectedSelector:qs,lastSelected:Qs,lastSelectedSelector:tc},Hh=_=>Ie(_).bind(R=>$h(R,od.firstSelectedSelector)).fold(Xe(_),R=>R[0]),Ur=_=>(R,j)=>{const te=kt(R),Te=te==="col"||te==="colgroup"?Hh(R):R;return Wn(Te,_,j)},mn=Ur("th,td,caption"),Wl=Ur("th,td"),wm=_=>ym(_.model.table.getSelectedCells()),pa=(_,R)=>{const j=Wl(_),te=j.bind(Te=>Ie(Te)).map(Te=>lt(Te));return Uo(j,te,(Te,ot)=>qo(ot,At=>os(ym(At.dom.cells),on=>Qi(on,R)==="1"||Go(on,Te)))).getOr([])},ts=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Su=_=>({value:Yn(_)}),Vh=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Wd=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Zg=_=>Vh.test(_)||Wd.test(_),Yn=_=>Da(_,"#").toUpperCase(),Wr=_=>Zg(_)?ne.some({value:Yn(_)}):ne.none(),sd=_=>{const R=_.toString(16);return(R.length===1?"0"+R:R).toUpperCase()},Ra=_=>{const R=sd(_.red)+sd(_.green)+sd(_.blue);return Su(R)},vi=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,nc=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,aa=(_,R,j,te)=>({red:_,green:R,blue:j,alpha:te}),ii=(_,R,j,te)=>{const Te=parseInt(_,10),ot=parseInt(R,10),At=parseInt(j,10),on=parseFloat(te);return aa(Te,ot,At,on)},qi=_=>{const R=vi.exec(_);if(R!==null)return ne.some(ii(R[1],R[2],R[3],"1"));const j=nc.exec(_);return j!==null?ne.some(ii(j[1],j[2],j[3],j[4])):ne.none()},Cm=_=>Wr(_).orThunk(()=>qi(_).map(Ra)).getOrThunk(()=>{const R=document.createElement("canvas");R.height=1,R.width=1;const j=R.getContext("2d");j.clearRect(0,0,R.width,R.height),j.fillStyle="#FFFFFF",j.fillStyle=_,j.fillRect(0,0,1,1);const te=j.getImageData(0,0,1,1).data,Te=te[0],ot=te[1],At=te[2],on=te[3];return Ra(aa(Te,ot,At,on))}),rr=_=>qi(_).map(Ra).map(R=>"#"+R.value).getOr(_),rd=_=>{let R=_;return{get:()=>R,set:Te=>{R=Te}}},dr=_=>{const R=rd(ne.none()),j=()=>R.get().each(_);return{clear:()=>{j(),R.set(ne.none())},isSet:()=>R.get().isSome(),get:()=>R.get(),set:on=>{j(),R.set(ne.some(on))}}},xu=()=>dr(_=>_.unbind()),ad=(_,R,j)=>te=>{const Te=xu(),ot=fl(j),At=()=>{const on=wm(_),Zn=oo=>_.formatter.match(R,{value:j},oo.dom,ot);ot?(te.setActive(!os(on,Zn)),Te.set(_.formatter.formatChanged(R,oo=>te.setActive(!oo),!0))):(te.setActive(_o(on,Zn)),Te.set(_.formatter.formatChanged(R,te.setActive,!1,{value:j})))};return _.initialized?At():_.on("init",At),Te.clear},gs=_=>$n(_,"menu"),_c=_=>yt(_,R=>{const j=R.text||R.title||"";return gs(R)?{text:j,items:_c(R.menu)}:{text:j,value:R.value}}),jg=_=>_.length?ne.some(_c([{text:"Select...",value:"mce-no-match"},..._])):ne.none(),Zl=(_,R,j,te)=>yt(R,Te=>{const ot=Te.text||Te.title;return gs(Te)?{type:"nestedmenuitem",text:ot,getSubmenuItems:()=>Zl(_,Te.menu,j,te)}:{text:ot,type:"togglemenuitem",onAction:()=>te(Te.value),onSetup:ad(_,j,Te.value)}}),Ds=(_,R)=>j=>{_.execCommand("mceTableApplyCellStyle",!1,{[R]:j})},Eu=_=>Se(_,R=>gs(R)?[{...R,menu:Eu(R.menu)}]:uu(R.value)?[R]:[]),Pi=(_,R,j,te)=>Te=>Te(Zl(_,R,j,te)),co=(_,R,j)=>{const te=yt(R,Te=>({text:Te.title,value:"#"+Cm(Te.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:te.length>0?te:void 0,allowCustomColors:!1},onAction:Te=>{const ot=Te.value==="remove"?"":Te.value;_.execCommand("mceTableApplyCellStyle",!1,{[j]:ot})}}]},id=_=>()=>{const j=_.queryCommandValue("mceTableRowType")==="header"?"body":"header";_.execCommand("mceTableRowType",!1,{type:j})},Rf=_=>()=>{const j=_.queryCommandValue("mceTableColType")==="th"?"td":"th";_.execCommand("mceTableColType",!1,{type:j})},Sm=_=>jg(_f(_)).map(R=>({name:"class",type:"listbox",label:"Class",items:R})),k=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:ts}],I=_=>k.concat(Sm(_).toArray()),q=(_,R)=>{const te=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(_c(gu(_)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:R==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(te):te}},xe={normal:(_,R)=>{const j=_.dom;return{setAttrib:(At,on)=>{j.setAttrib(R,At,on)},setStyle:(At,on)=>{j.setStyle(R,At,on)},setFormat:(At,on)=>{on===""?_.formatter.remove(At,{value:null},R,!0):_.formatter.apply(At,{value:on},R)}}}},mt=Di("th"),kn=(_,R)=>_&&R?"sectionCells":_?"section":"cells",Jn=_=>{const R=_.section==="thead",j=Cf(Dn(_.cells),"th");return _.section==="tfoot"?{type:"footer"}:R||j?{type:"header",subType:kn(R,j)}:{type:"body"}},Dn=_=>{const R=qo(_,j=>mt(j.element));return R.length===0?ne.some("td"):R.length===_.length?ne.some("th"):ne.none()},An=_=>{const R=yt(_,Te=>Jn(Te).type),j=to(R,"header"),te=to(R,"footer");if(!j&&!te)return ne.some("body");{const Te=to(R,"body");return j&&!Te&&!te?ne.some("header"):!j&&!Te&&te?ne.some("footer"):ne.none()}},Rs=_=>{let R=!1,j;return(...te)=>(R||(R=!0,j=_.apply(null,te)),j)},xr=(_,R)=>$r(_.all,j=>Tt(j.cells,te=>Go(R,te.element))),oc=(_,R,j)=>{const te=yt(R.selection,ot=>H(ot).bind(At=>xr(_,At)).filter(j)),Te=ji(te);return ma(Te.length>0,Te)},jl=(_,R)=>R.mergable,Mf=(_,R)=>R.unmergable,zh=(_,R)=>oc(_,R,jt),ci=(_,R)=>xr(_,R).exists(j=>!j.isLocked),Uh=(_,R)=>_o(R,j=>ci(_,j)),Jb=(_,R)=>jl(_,R).filter(j=>Uh(_,j.cells)),qg=(_,R)=>Mf(_,R).filter(j=>Uh(_,j));({...{generate:_=>{if(!Z(_))throw new Error("cases must be an array");if(_.length===0)throw new Error("there must be at least one case");const R=[],j={};return W(_,(te,Te)=>{const ot=Jt(te);if(ot.length!==1)throw new Error("one and only one name per case");const At=ot[0],on=te[At];if(j[At]!==void 0)throw new Error("duplicate key detected:"+At);if(At==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Z(on))throw new Error("case arguments must be an array");R.push(At),j[At]=(...Zn)=>{const oo=Zn.length;if(oo!==on.length)throw new Error("Wrong number of arguments to case "+At+". Expected "+on.length+" ("+on+"), got "+oo);return{fold:(...Xo)=>{if(Xo.length!==_.length)throw new Error("Wrong number of arguments to fold. Expected "+_.length+", got "+Xo.length);return Xo[Te].apply(null,Zn)},match:Xo=>{const er=Jt(Xo);if(R.length!==er.length)throw new Error("Wrong number of arguments to match. Expected: "+R.join(",")+`
Actual: `+er.join(","));if(!_o(R,Va=>to(er,Va)))throw new Error("Not all branches were specified when using match. Specified: "+er.join(", ")+`
Required: `+R.join(", "));return Xo[At].apply(null,Zn)},log:Xo=>{console.log(Xo,{constructors:R,constructor:At,params:Zn})}}}}),j}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const Bi=(_,R)=>{const j=yr.fromTable(_);return zh(j,R).bind(Te=>{const ot=Te[Te.length-1],At=Te[0].row,on=ot.row+ot.rowspan,Zn=j.all.slice(At,on);return An(Zn)}).getOr("")},On=_=>Ia(_,"rgb")?rr(_):_,Tc=_=>{const R=fo.fromDom(_);return{borderwidth:gi(R,"border-width").getOr(""),borderstyle:gi(R,"border-style").getOr(""),bordercolor:gi(R,"border-color").map(On).getOr(""),backgroundcolor:gi(R,"background-color").map(On).getOr("")}},xm=_=>{const R=_[0],j=_.slice(1);return W(j,te=>{W(Jt(R),Te=>{Qt(te,(ot,At)=>{const on=R[Te];on!==""&&Te===At&&on!==ot&&(R[Te]=Te==="class"?"mce-no-match":"")})})}),R},Wh=(_,R,j,te)=>Tt(_,Te=>!Ee(j.formatter.matchNode(te,R+Te))).getOr(""),Kg=ce(Wh,["left","center","right"],"align"),p1=ce(Wh,["top","middle","bottom"],"valign"),bl=(_,R)=>{const j=Tf(_),te=bm(_),Te=()=>({borderstyle:an(j,"border-style").getOr(""),bordercolor:On(an(j,"border-color").getOr("")),backgroundcolor:On(an(j,"background-color").getOr(""))}),ot={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},At=()=>{const Yo=j["border-width"];return Sr(_)&&Yo?{border:Yo}:an(te,"border").fold(()=>({}),Xo=>({border:Xo}))},on=R?Te():{},Zn=()=>{const Yo=an(j,"border-spacing").or(an(te,"cellspacing")).fold(()=>({}),er=>({cellspacing:er})),Xo=an(j,"border-padding").or(an(te,"cellpadding")).fold(()=>({}),er=>({cellpadding:er}));return{...Yo,...Xo}};return{...ot,...j,...te,...on,...At(),...Zn()}},_u=_=>Ie(fo.fromDom(_)).map(R=>{const j={selection:ym(_.cells)};return Bi(R,j)}).getOr(""),Zd=(_,R,j)=>{const te=(on,Zn)=>{const oo=gi(fo.fromDom(Zn),"border-width");return Sr(_)&&oo.isSome()?oo.getOr(""):on.getAttrib(Zn,"border")||Wc(_.dom,Zn,"border-width")||Wc(_.dom,Zn,"border")||""},Te=_.dom,ot=Sr(_)?Te.getStyle(R,"border-spacing")||Te.getAttrib(R,"cellspacing"):Te.getAttrib(R,"cellspacing")||Te.getStyle(R,"border-spacing"),At=Sr(_)?Wc(Te,R,"padding")||Te.getAttrib(R,"cellpadding"):Te.getAttrib(R,"cellpadding")||Wc(Te,R,"padding");return{width:Te.getStyle(R,"width")||Te.getAttrib(R,"width"),height:Te.getStyle(R,"height")||Te.getAttrib(R,"height"),cellspacing:ot??"",cellpadding:At??"",border:te(Te,R),caption:!!Te.select("caption",R)[0],class:Te.getAttrib(R,"class",""),align:Kg(_,R),...j?Tc(R):{}}},Wt=(_,R,j)=>{const te=_.dom;return{height:te.getStyle(R,"height")||te.getAttrib(R,"height"),class:te.getAttrib(R,"class",""),type:_u(R),align:Kg(_,R),...j?Tc(R):{}}},qc=(_,R,j,te)=>{const Te=_.dom,ot=te.getOr(R);return{width:((on,Zn)=>Te.getStyle(on,Zn)||Te.getAttrib(on,Zn))(ot,"width"),scope:Te.getAttrib(R,"scope"),celltype:Zo(R),class:Te.getAttrib(R,"class",""),halign:Kg(_,R),valign:p1(_,R),...j?Tc(R):{}}},Yg=(_,R)=>{const j=yr.fromTable(_),te=yr.justCells(j),Te=qo(te,ot=>os(R,At=>Go(ot.element,At)));return yt(Te,ot=>({element:ot.element.dom,column:yr.getColumnAt(j,ot.column).map(At=>At.element.dom)}))},Nf=(_,R,j,te)=>{te("scope")&&_.setAttrib("scope",j.scope),te("class")&&j.class!=="mce-no-match"&&_.setAttrib("class",j.class),te("width")&&R.setStyle("width",Ps(j.width))},vl=(_,R,j)=>{j("backgroundcolor")&&_.setFormat("tablecellbackgroundcolor",R.backgroundcolor),j("bordercolor")&&_.setFormat("tablecellbordercolor",R.bordercolor),j("borderstyle")&&_.setFormat("tablecellborderstyle",R.borderstyle),j("borderwidth")&&_.setFormat("tablecellborderwidth",Ps(R.borderwidth))},Zh=(_,R,j,te)=>{const Te=R.length===1;W(R,ot=>{const At=ot.element,on=Te?jt:te,Zn=xe.normal(_,At),oo=ot.column.map(Yo=>xe.normal(_,Yo)).getOr(Zn);Nf(Zn,oo,j,on),pu(_)&&vl(Zn,j,on),te("halign")&&Cc(_,At,j.halign),te("valign")&&Ld(_,At,j.valign)})},jd=(_,R)=>{_.execCommand("mceTableCellType",!1,{type:R.celltype,no_events:!0})},Pf=(_,R,j,te)=>{const Te=so(te,(ot,At)=>j[At]!==ot);N(Te)>0&&R.length>=1&&Ie(R[0]).each(ot=>{const At=Yg(ot,R),on=N(so(Te,(oo,Yo)=>Yo!=="scope"&&Yo!=="celltype"))>0,Zn=ct(Te,"celltype");(on||ct(Te,"scope"))&&Zh(_,At,te,ce(ct,Te)),Zn&&jd(_,te),La(_,ot.dom,{structure:Zn,style:on})})},jh=(_,R,j,te)=>{const Te=te.getData();te.close(),_.undoManager.transact(()=>{Pf(_,R,j,Te),_.focus()})},ql=(_,R)=>{const j=Ie(R[0]).map(te=>yt(Yg(te,R),Te=>qc(_,Te.element,pu(_),Te.column)));return xm(j.getOrDie())},ev=_=>{const R=wm(_);if(R.length===0)return;const j=ql(_,R),te={type:"tabpanel",tabs:[{title:"General",name:"general",items:I(_)},q(_,"cell")]},Te={type:"panel",items:[{type:"grid",columns:2,items:I(_)}]};_.windowManager.open({title:"Cell Properties",size:"normal",body:pu(_)?te:Te,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:j,onSubmit:ce(jh,_,R,j)})},ar=_=>jg(Mh(_)).map(R=>({name:"class",type:"listbox",label:"Class",items:R})),pt=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],yi=_=>pt.concat(ar(_).toArray()),Gl=(_,R,j)=>{j("class")&&R.class!=="mce-no-match"&&_.setAttrib("class",R.class),j("height")&&_.setStyle("height",Ps(R.height))},ba=(_,R,j)=>{j("backgroundcolor")&&_.setStyle("background-color",R.backgroundcolor),j("bordercolor")&&_.setStyle("border-color",R.bordercolor),j("borderstyle")&&_.setStyle("border-style",R.borderstyle)},Em=(_,R,j,te)=>{const ot=R.length===1?jt:te;W(R,At=>{const on=Ji(fo.fromDom(At),"td,th"),Zn=xe.normal(_,At);Gl(Zn,j,ot),xf(_)&&ba(Zn,j,ot),te("height")&&W(on,oo=>{_.dom.setStyle(oo.dom,"height",null)}),te("align")&&Cc(_,At,j.align)})},ia=(_,R)=>{_.execCommand("mceTableRowType",!1,{type:R.type,no_events:!0})},Lo=(_,R,j,te)=>{const Te=so(te,(ot,At)=>j[At]!==ot);if(N(Te)>0){const ot=ct(Te,"type"),At=ot?N(Te)>1:!0;At&&Em(_,R,te,ce(ct,Te)),ot&&ia(_,te),Ie(fo.fromDom(R[0])).each(on=>La(_,on.dom,{structure:ot,style:At}))}},Xg=(_,R,j,te)=>{const Te=te.getData();te.close(),_.undoManager.transact(()=>{Lo(_,R,j,Te),_.focus()})},rt=_=>{const R=pa(Ko(_),od.selected);if(R.length===0)return;const j=yt(R,At=>Wt(_,At.dom,xf(_))),te=xm(j),Te={type:"tabpanel",tabs:[{title:"General",name:"general",items:yi(_)},q(_,"row")]},ot={type:"panel",items:[{type:"grid",columns:2,items:yi(_)}]};_.windowManager.open({title:"Row Properties",size:"normal",body:xf(_)?Te:ot,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:te,onSubmit:ce(Xg,_,yt(R,At=>At.dom),te)})},Fo=(_,R,j)=>{const te=j?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],Te=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],ot=xc(_)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],At=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],on=R.length>0?[{name:"class",type:"listbox",label:"Class",items:R}]:[];return te.concat(Te).concat(ot).concat(At).concat(on)},qh=(_,R,j,te)=>{if(R.tagName==="TD"||R.tagName==="TH")K(j)&&Ye(te)?_.setStyle(R,j,te):_.setStyles(R,j);else if(R.children)for(let Te=0;Te<R.children.length;Te++)qh(_,R.children[Te],j,te)},Jr=(_,R,j,te)=>{const Te=_.dom,ot={},At={},on=Sr(_),Zn=bu(_),oo=parseFloat(j.border)===0;if(!Ee(j.class)&&j.class!=="mce-no-match"&&(ot.class=j.class),At.height=Ps(j.height),on?At.width=Ps(j.width):Te.getAttrib(R,"width")&&(ot.width=Aa(j.width)),on?(oo?(ot.border=0,At["border-width"]=""):(At["border-width"]=Ps(j.border),ot.border=1),At["border-spacing"]=Ps(j.cellspacing)):(ot.border=oo?0:j.border,ot.cellpadding=j.cellpadding,ot.cellspacing=j.cellspacing),on&&R.children){const Yo={};if(oo?Yo["border-width"]="":te.border&&(Yo["border-width"]=Ps(j.border)),te.cellpadding&&(Yo.padding=Ps(j.cellpadding)),Zn&&te.bordercolor&&(Yo["border-color"]=j.bordercolor),!sn(Yo))for(let Xo=0;Xo<R.children.length;Xo++)qh(Te,R.children[Xo],Yo)}if(Zn){const Yo=j;At["background-color"]=Yo.backgroundcolor,At["border-color"]=Yo.bordercolor,At["border-style"]=Yo.borderstyle}Te.setStyles(R,{...Tf(_),...At}),Te.setAttribs(R,{...bm(_),...ot})},wi=(_,R,j,te)=>{const Te=_.dom,ot=te.getData(),At=so(ot,(on,Zn)=>j[Zn]!==on);te.close(),_.undoManager.transact(()=>{if(!R){const on=Uc(ot.cols).getOr(1),Zn=Uc(ot.rows).getOr(1);_.execCommand("mceInsertTable",!1,{rows:Zn,columns:on}),R=Wl(Ko(_),Gr(_)).bind(oo=>Ie(oo,Gr(_))).map(oo=>oo.dom).getOrDie()}if(N(At)>0){const on={border:ct(At,"border"),bordercolor:ct(At,"bordercolor"),cellpadding:ct(At,"cellpadding")};Jr(_,R,ot,on);const Zn=Te.select("caption",R)[0];(Zn&&!ot.caption||!Zn&&ot.caption)&&_.execCommand("mceTableToggleCaption"),Cc(_,R,ot.align)}if(_.focus(),_.addVisual(),N(At)>0){const on=ct(At,"caption"),Zn=on?N(At)>1:!0;La(_,R,{structure:on,style:Zn})}})},tv=(_,R)=>{const j=_.dom;let te,Te=bl(_,bu(_));R?(Te.cols="1",Te.rows="1",bu(_)&&(Te.borderstyle="",Te.bordercolor="",Te.backgroundcolor="")):(te=j.getParent(_.selection.getStart(),"table",_.getBody()),te?Te=Zd(_,te,bu(_)):bu(_)&&(Te.borderstyle="",Te.bordercolor="",Te.backgroundcolor=""));const ot=jg(gl(_));ot.isSome()&&Te.class&&(Te.class=Te.class.replace(/\s*mce\-item\-table\s*/g,""));const At={type:"grid",columns:2,items:Fo(_,ot.getOr([]),R)},on=()=>({type:"panel",items:[At]}),Zn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[At]},q(_,"table")]}),oo=bu(_)?Zn():on();_.windowManager.open({title:"Table Properties",size:"normal",body:oo,onSubmit:ce(wi,_,te,Te),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Te})},kc=_=>{const R=j=>{na(Ko(_))&&j()};Qt({mceTableProps:ce(tv,_,!1),mceTableRowProps:ce(rt,_),mceTableCellProps:ce(ev,_),mceInsertTableDialog:ce(tv,_,!0)},(j,te)=>_.addCommand(te,()=>R(j)))},Vy=(_,R)=>or(_,R).isSome(),cd=dn,nv=_=>{const R=(te,Te)=>ei(te,Te).exists(ot=>parseInt(ot,10)>1),j=te=>R(te,"rowspan")||R(te,"colspan");return _.length>0&&_o(_,j)?ne.some(_):ne.none()},Ac=(_,R,j)=>R.length<=1?ne.none():Xb(_,j.firstSelectedSelector,j.lastSelectedSelector).map(te=>({bounds:te,cells:R})),Bo=_=>({element:_,mergable:ne.none(),unmergable:ne.none(),selection:[_]}),Tu=(_,R,j)=>({element:j,mergable:Ac(R,_,od),unmergable:nv(_),selection:cd(_)}),Bf=_=>{const R=rd(ne.none()),j=rd([]);let te=ne.none();const Te=Di("caption"),ot=No=>te.forall(Ms=>!Ms[No]),At=()=>mn(Ko(_),Gr(_)),on=()=>mn(es(_),Gr(_)),Zn=()=>At().bind(No=>Oa(Uo(Ie(No),on().bind(Ie),(Ms,Ii)=>Go(Ms,Ii)?Te(No)?ne.some(Bo(No)):ne.some(Tu(wm(_),Ms,No)):ne.none()))),oo=No=>Ie(No.element).map(Ii=>{const Er=yr.fromTable(Ii),tp=zh(Er,No).getOr([]),Lf=Wi(tp,(Ff,Kc)=>(Kc.isLocked&&(Ff.onAny=!0,Kc.column===0?Ff.onFirst=!0:Kc.column+Kc.colspan>=Er.grid.columns&&(Ff.onLast=!0)),Ff),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Jb(Er,No).isSome(),unmergeable:qg(Er,No).isSome(),locked:Lf}}),Yo=()=>{R.set(Rs(Zn)()),te=R.get().bind(oo),W(j.get(),Ke)},Xo=No=>(No(),j.set(j.get().concat([No])),()=>{j.set(qo(j.get(),Ms=>Ms!==No))}),er=(No,Ms)=>Xo(()=>R.get().fold(()=>{No.setEnabled(!1)},Ii=>{No.setEnabled(!Ms(Ii)&&_.selection.isEditable())})),Rc=(No,Ms,Ii)=>Xo(()=>R.get().fold(()=>{No.setEnabled(!1),No.setActive(!1)},Er=>{No.setEnabled(!Ms(Er)&&_.selection.isEditable()),No.setActive(Ii(Er))})),Va=No=>te.exists(Ms=>Ms.locked[No]),Kl=No=>er(No,Ms=>!1),yl=No=>er(No,Ms=>Te(Ms.element)),Ou=No=>Ms=>er(Ms,Ii=>Te(Ii.element)||Va(No)),Gh=No=>Ms=>er(Ms,Ii=>Te(Ii.element)||No().isNone()),Gc=(No,Ms)=>Ii=>er(Ii,Er=>Te(Er.element)||No().isNone()||Va(Ms)),km=No=>er(No,Ms=>ot("mergeable")),Qg=No=>er(No,Ms=>ot("unmergeable")),ep=No=>Rc(No,Kn,Ms=>Ie(Ms.element,Gr(_)).exists(Er=>Vy(Er,"caption"))),If=(No,Ms)=>Ii=>Rc(Ii,Er=>Te(Er.element),()=>_.queryCommandValue(No)===Ms),va=If("mceTableRowType","header"),Yl=If("mceTableColType","th");return _.on("NodeChange ExecCommand TableSelectorChange",Yo),{onSetupTable:Kl,onSetupCellOrRow:yl,onSetupColumn:Ou,onSetupPasteable:Gh,onSetupPasteableColumn:Gc,onSetupMergeable:km,onSetupUnmergeable:Qg,resetTargets:Yo,onSetupTableWithCaption:ep,onSetupTableRowHeaders:va,onSetupTableColumnHeaders:Yl,targets:R.get}};var ca=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Jg="x-tinymce/dom-table-",ku=Jg+"rows",Au=Jg+"columns",Bs=_=>{var R;const j=(R=ca.read())!==null&&R!==void 0?R:[];return $r(j,te=>ne.from(te.getType(_)))},_m=()=>Bs(ku),Be=()=>Bs(Au),Oc=_=>R=>{const j=()=>{R.setEnabled(_.selection.isEditable())};return _.on("NodeChange",j),j(),()=>{_.off("NodeChange",j)}},Tm=(_,R)=>{_.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Oc(_),fetch:on=>on("inserttable | cell row column | advtablesort | tableprops deletetable")});const j=on=>()=>_.execCommand(on),te=(on,Zn)=>{_.queryCommandSupported(Zn.command)&&_.ui.registry.addButton(on,{...Zn,onAction:Ut(Zn.onAction)?Zn.onAction:j(Zn.command)})},Te=(on,Zn)=>{_.queryCommandSupported(Zn.command)&&_.ui.registry.addToggleButton(on,{...Zn,onAction:Ut(Zn.onAction)?Zn.onAction:j(Zn.command)})};te("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:R.onSetupTable}),te("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:R.onSetupTable}),te("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:R.onSetupCellOrRow}),te("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:R.onSetupMergeable}),te("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:R.onSetupUnmergeable}),te("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:R.onSetupCellOrRow}),te("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:R.onSetupCellOrRow}),te("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:R.onSetupCellOrRow}),te("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:R.onSetupCellOrRow}),te("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:R.onSetupColumn("onFirst")}),te("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:R.onSetupColumn("onLast")}),te("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:R.onSetupColumn("onAny")}),te("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:R.onSetupCellOrRow}),te("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:R.onSetupCellOrRow}),te("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:R.onSetupPasteable(_m)}),te("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:R.onSetupPasteable(_m)}),te("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:R.onSetupColumn("onAny")}),te("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:R.onSetupColumn("onAny")}),te("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:R.onSetupPasteableColumn(Be,"onFirst")}),te("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:R.onSetupPasteableColumn(Be,"onLast")}),te("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Oc(_)});const ot=Eu(gl(_));ot.length!==0&&_.queryCommandSupported("mceTableToggleClass")&&_.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Pi(_,ot,"tableclass",on=>_.execCommand("mceTableToggleClass",!1,on)),onSetup:R.onSetupTable});const At=Eu(_f(_));At.length!==0&&_.queryCommandSupported("mceTableCellToggleClass")&&_.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Pi(_,At,"tablecellclass",on=>_.execCommand("mceTableCellToggleClass",!1,on)),onSetup:R.onSetupCellOrRow}),_.queryCommandSupported("mceTableApplyCellStyle")&&(_.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Pi(_,ts,"tablecellverticalalign",Ds(_,"vertical-align")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Pi(_,Rh(_),"tablecellborderwidth",Ds(_,"border-width")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Pi(_,gu(_),"tablecellborderstyle",Ds(_,"border-style")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:on=>on(co(_,vu(_),"background-color")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:on=>on(co(_,Ph(_),"border-color")),onSetup:R.onSetupCellOrRow})),Te("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:R.onSetupTableWithCaption}),Te("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:id(_),onSetup:R.onSetupTableRowHeaders}),Te("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Rf(_),onSetup:R.onSetupTableColumnHeaders})},Ci=_=>{const R=te=>_.dom.is(te,"table")&&_.getBody().contains(te)&&_.dom.isEditable(te.parentNode),j=Nh(_);j.length>0&&_.ui.registry.addContextToolbar("table",{predicate:R,items:j,scope:"node",position:"node"})},Dc=_=>R=>{const j=()=>{R.setEnabled(_.selection.isEditable())};return _.on("NodeChange",j),j(),()=>{_.off("NodeChange",j)}},Mr=(_,R)=>{const j=Xo=>()=>_.execCommand(Xo),te=(Xo,er)=>_.queryCommandSupported(er.command)?(_.ui.registry.addMenuItem(Xo,{...er,onAction:Ut(er.onAction)?er.onAction:j(er.command)}),!0):!1,Te=(Xo,er)=>{_.queryCommandSupported(er.command)&&_.ui.registry.addToggleMenuItem(Xo,{...er,onAction:Ut(er.onAction)?er.onAction:j(er.command)})},ot=Xo=>{_.execCommand("mceInsertTable",!1,{rows:Xo.numRows,columns:Xo.numColumns})},At=[te("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:R.onSetupCellOrRow}),te("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:R.onSetupCellOrRow}),te("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:R.onSetupCellOrRow}),te("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:R.onSetupCellOrRow}),te("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:R.onSetupCellOrRow}),te("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:R.onSetupCellOrRow}),te("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:R.onSetupPasteable(_m)}),te("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:R.onSetupPasteable(_m)})],on=[te("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:R.onSetupColumn("onFirst")}),te("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:R.onSetupColumn("onLast")}),te("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:R.onSetupColumn("onAny")}),te("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:R.onSetupColumn("onAny")}),te("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:R.onSetupColumn("onAny")}),te("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:R.onSetupPasteableColumn(Be,"onFirst")}),te("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:R.onSetupPasteableColumn(Be,"onLast")})],Zn=[te("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:R.onSetupCellOrRow}),te("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:R.onSetupMergeable}),te("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:R.onSetupUnmergeable})];Ef(_)?_.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:ot}],onSetup:Dc(_)}):_.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:j("mceInsertTableDialog"),onSetup:Dc(_)}),_.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:j("mceInsertTableDialog"),onSetup:Dc(_)}),te("tableprops",{text:"Table properties",onSetup:R.onSetupTable,command:"mceTableProps"}),te("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:R.onSetupTable,command:"mceTableDelete"}),to(At,!0)&&_.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Xe("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),to(on,!0)&&_.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Xe("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),to(Zn,!0)&&_.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Xe("tablecellprops tablemergecells tablesplitcells")}),_.ui.registry.addContextMenu("table",{update:()=>(R.resetTargets(),R.targets().fold(Xe(""),Xo=>kt(Xo.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const oo=Eu(gl(_));oo.length!==0&&_.queryCommandSupported("mceTableToggleClass")&&_.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Zl(_,oo,"tableclass",Xo=>_.execCommand("mceTableToggleClass",!1,Xo)),onSetup:R.onSetupTable});const Yo=Eu(_f(_));Yo.length!==0&&_.queryCommandSupported("mceTableCellToggleClass")&&_.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Zl(_,Yo,"tablecellclass",Xo=>_.execCommand("mceTableCellToggleClass",!1,Xo)),onSetup:R.onSetupCellOrRow}),_.queryCommandSupported("mceTableApplyCellStyle")&&(_.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Zl(_,ts,"tablecellverticalalign",Ds(_,"vertical-align")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Zl(_,Rh(_),"tablecellborderwidth",Ds(_,"border-width")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Zl(_,gu(_),"tablecellborderstyle",Ds(_,"border-style")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>co(_,vu(_),"background-color"),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>co(_,Ph(_),"border-color"),onSetup:R.onSetupCellOrRow})),Te("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:R.onSetupTableWithCaption}),Te("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:id(_),onSetup:R.onSetupTableRowHeaders}),Te("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Rf(_),onSetup:R.onSetupTableRowHeaders})},fr=_=>{const R=Bf(_);pi(_),kc(_),Mr(_,R),Tm(_,R),Ci(_)};var zy=()=>{p.add("table",fr)};zy()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(X,he,Re)=>{var at;return Re(X,he.prototype)?!0:((at=X.constructor)===null||at===void 0?void 0:at.name)===he.name},w=X=>{const he=typeof X;return X===null?"null":he==="object"&&Array.isArray(X)?"array":he==="object"&&g(X,String,(Re,at)=>at.isPrototypeOf(Re))?"string":he},E=X=>he=>w(he)===X,M=X=>he=>typeof he===X,z=X=>he=>X===he,K=E("string"),Z=E("object"),ie=E("array"),Ee=z(null),de=M("boolean"),Ye=X=>X==null,Ut=X=>!Ye(X),Lt=M("function"),Mt=(X,he)=>{if(ie(X)){for(let Re=0,at=X.length;Re<at;++Re)if(!he(X[Re]))return!1;return!0}return!1},Ct=()=>{},Xe=X=>()=>X,dn=(X,he)=>X===he;class Nt{constructor(he,Re){this.tag=he,this.value=Re}static some(he){return new Nt(!0,he)}static none(){return Nt.singletonNone}fold(he,Re){return this.tag?Re(this.value):he()}isSome(){return this.tag}isNone(){return!this.tag}map(he){return this.tag?Nt.some(he(this.value)):Nt.none()}bind(he){return this.tag?he(this.value):Nt.none()}exists(he){return this.tag&&he(this.value)}forall(he){return!this.tag||he(this.value)}filter(he){return!this.tag||he(this.value)?this:Nt.none()}getOr(he){return this.tag?this.value:he}or(he){return this.tag?this:he}getOrThunk(he){return this.tag?this.value:he()}orThunk(he){return this.tag?this:he()}getOrDie(he){if(this.tag)return this.value;throw new Error(he??"Called getOrDie on None")}static from(he){return Ut(he)?Nt.some(he):Nt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(he){this.tag&&he(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Nt.singletonNone=new Nt(!1);const ce=Array.prototype.indexOf,Ke=Array.prototype.push,Kn=(X,he)=>ce.call(X,he),jt=(X,he)=>Kn(X,he)>-1,ne=(X,he)=>{const Re=X.length,at=new Array(Re);for(let St=0;St<Re;St++){const en=X[St];at[St]=he(en,St)}return at},Jt=(X,he)=>{for(let Re=0,at=X.length;Re<at;Re++){const St=X[Re];he(St,Re)}},Bn=(X,he,Re)=>(Jt(X,(at,St)=>{Re=he(Re,at,St)}),Re),Qt=X=>{const he=[];for(let Re=0,at=X.length;Re<at;++Re){if(!ie(X[Re]))throw new Error("Arr.flatten item "+Re+" was not an array, input: "+X);Ke.apply(he,X[Re])}return he},Fe=(X,he)=>Qt(ne(X,he)),ve=(X,he)=>{for(let Re=0;Re<X.length;Re++){const at=he(X[Re],Re);if(at.isSome())return at}return Nt.none()},so=(X,he,Re=dn)=>X.exists(at=>Re(at,he)),Me=X=>{const he=[],Re=at=>{he.push(at)};for(let at=0;at<X.length;at++)X[at].each(Re);return he},Pe=(X,he)=>X?Nt.some(he):Nt.none(),N=X=>he=>he.options.get(X),an=X=>{const he=X.options.register;he("link_assume_external_targets",{processor:Re=>{const at=K(Re)||de(Re);return at?Re===!0?{value:1,valid:at}:Re==="http"||Re==="https"?{value:Re,valid:at}:{value:0,valid:at}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),he("link_context_toolbar",{processor:"boolean",default:!1}),he("link_list",{processor:Re=>K(Re)||Lt(Re)||Mt(Re,Z)}),he("link_default_target",{processor:"string"}),he("link_default_protocol",{processor:"string",default:"https"}),he("link_target_list",{processor:Re=>de(Re)||Mt(Re,Z),default:!0}),he("link_rel_list",{processor:"object[]",default:[]}),he("link_class_list",{processor:"object[]",default:[]}),he("link_title",{processor:"boolean",default:!0}),he("allow_unsafe_link_target",{processor:"boolean",default:!1}),he("link_quicklink",{processor:"boolean",default:!1})},ct=N("link_assume_external_targets"),$n=N("link_context_toolbar"),sn=N("link_list"),nt=N("link_default_target"),eo=N("link_default_protocol"),ms=N("link_target_list"),to=N("link_rel_list"),os=N("link_class_list"),tt=N("link_title"),yt=N("allow_unsafe_link_target"),W=N("link_quicklink"),ta=Object.keys,uo=Object.hasOwnProperty,qo=(X,he)=>{const Re=ta(X);for(let at=0,St=Re.length;at<St;at++){const en=Re[at],io=X[en];he(io,en)}},Ho=X=>(he,Re)=>{X[Re]=he},Wi=(X,he,Re,at)=>{qo(X,(St,en)=>{(he(St,en)?Re:at)(St,en)})},et=(X,he)=>{const Re={};return Wi(X,he,Ho(Re),Ct),Re},Tt=(X,he)=>uo.call(X,he),dt=(X,he)=>Tt(X,he)&&X[he]!==void 0&&X[he]!==null;var Se=tinymce.util.Tools.resolve("tinymce.util.URI"),_o=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),To=tinymce.util.Tools.resolve("tinymce.util.Tools");const Zt=X=>Ut(X)&&X.nodeName.toLowerCase()==="a",ss=X=>Zt(X)&&!!Po(X),Mo=(X,he)=>{if(X.collapsed)return[];{const Re=X.cloneContents(),at=Re.firstChild,St=new _o(at,Re),en=[];let io=at;do he(io)&&en.push(io);while(io=St.next());return en}},$r=X=>/^\w+:/i.test(X),Po=X=>{var he,Re;return(Re=(he=X.getAttribute("data-mce-href"))!==null&&he!==void 0?he:X.getAttribute("href"))!==null&&Re!==void 0?Re:""},Is=(X,he)=>{const Re=["noopener"],at=X?X.split(/\s+/):[],St=vo=>To.trim(vo.sort().join(" ")),en=vo=>(vo=io(vo),vo.length>0?vo.concat(Re):Re),io=vo=>vo.filter(qt=>To.inArray(Re,qt)===-1),ls=he?en(at):io(at);return ls.length>0?St(ls):""},Xa=X=>X.replace(/\uFEFF/g,""),ws=(X,he)=>(he=he||qr(X.selection.getRng())[0]||X.selection.getNode(),cs(he)?Nt.from(X.dom.select("a[href]",he)[0]):Nt.from(X.dom.getParent(he,"a[href]"))),bs=(X,he)=>ws(X,he).isSome(),vs=(X,he)=>{const Re=he.fold(()=>X.getContent({format:"text"}),at=>at.innerText||at.textContent||"");return Xa(Re)},qr=X=>Mo(X,ss),Cs=X=>To.grep(X,ss),Vo=X=>Cs(X).length>0,vc=X=>qr(X).length>0,fo=X=>{const he=X.schema.getTextInlineElements(),Re=en=>en.nodeType===1&&!Zt(en)&&!Tt(he,en.nodeName.toLowerCase());if(ws(X).exists(en=>en.hasAttribute("data-mce-block")))return!1;const St=X.selection.getRng();return St.collapsed?!0:Mo(St,Re).length===0},cs=X=>Ut(X)&&X.nodeName==="FIGURE"&&/\bimage\b/i.test(X.className),_r=X=>Bn(["title","rel","class","target"],(Re,at)=>(X[at].each(St=>{Re[at]=St.length>0?St:null}),Re),{href:X.href}),Oi=(X,he)=>(he==="http"||he==="https")&&!$r(X)?he+"://"+X:X,Zi=(X,he)=>{const Re={...he};if(to(X).length===0&&!yt(X)){const at=Is(Re.rel,Re.target==="_blank");Re.rel=at||null}return Nt.from(Re.target).isNone()&&ms(X)===!1&&(Re.target=nt(X)),Re.href=Oi(Re.href,ct(X)),Re},Go=(X,he,Re,at)=>{Re.each(St=>{Tt(he,"innerText")?he.innerText=St:he.textContent=St}),X.dom.setAttribs(he,at),X.selection.select(he)},Vc=(X,he,Re,at)=>{const St=X.dom;cs(he)?Di(St,he,at):Re.fold(()=>{X.execCommand("mceInsertLink",!1,at)},en=>{X.insertContent(St.createHTML("a",at,St.encode(en)))})},kt=(X,he,Re)=>{const at=X.selection.getNode(),St=ws(X,at),en=Zi(X,_r(Re));X.undoManager.transact(()=>{Re.href===he.href&&he.attach(),St.fold(()=>{Vc(X,at,Re.text,en)},io=>{X.focus(),Go(X,io,Re.text,en)})})},po=X=>{const he=X.dom,Re=X.selection,at=Re.getBookmark(),St=Re.getRng().cloneRange(),en=he.getParent(St.startContainer,"a[href]",X.getBody()),io=he.getParent(St.endContainer,"a[href]",X.getBody());en&&St.setStartBefore(en),io&&St.setEndAfter(io),Re.setRng(St),X.execCommand("unlink"),Re.moveToBookmark(at)},Hr=X=>{X.undoManager.transact(()=>{const he=X.selection.getNode();cs(he)?hi(X,he):po(X),X.focus()})},Vr=X=>{const{class:he,href:Re,rel:at,target:St,text:en,title:io}=X;return et({class:he.getOrNull(),href:Re,rel:at.getOrNull(),target:St.getOrNull(),text:en.getOrNull(),title:io.getOrNull()},(ls,vo)=>Ee(ls)===!1)},Ba=(X,he)=>{const Re=X.options.get,at={allow_html_data_urls:Re("allow_html_data_urls"),allow_script_urls:Re("allow_script_urls"),allow_svg_data_urls:Re("allow_svg_data_urls")},St=he.href;return{...he,href:Se.isDomSafe(St,"a",at)?St:""}},Ja=(X,he,Re)=>{const at=Ba(X,Re);X.hasPlugin("rtc",!0)?X.execCommand("createlink",!1,Vr(at)):kt(X,he,at)},Wo=X=>{X.hasPlugin("rtc",!0)?X.execCommand("unlink"):Hr(X)},hi=(X,he)=>{var Re;const at=X.dom.select("img",he)[0];if(at){const St=X.dom.getParents(at,"a[href]",he)[0];St&&((Re=St.parentNode)===null||Re===void 0||Re.insertBefore(at,St),X.dom.remove(St))}},Di=(X,he,Re)=>{var at;const St=X.select("img",he)[0];if(St){const en=X.create("a",Re);(at=St.parentNode)===null||at===void 0||at.insertBefore(en,St),en.appendChild(St)}},zo=X=>K(X.value)?X.value:"",Sn=X=>K(X.text)?X.text:K(X.title)?X.title:"",Ys=(X,he)=>{const Re=[];return To.each(X,at=>{const St=Sn(at);if(at.menu!==void 0){const en=Ys(at.menu,he);Re.push({text:St,items:en})}else{const en=he(at);Re.push({text:St,value:en})}}),Re},Qa=(X=zo)=>he=>Nt.from(he).map(Re=>Ys(Re,X)),hs={sanitize:X=>Qa(zo)(X),sanitizeWith:Qa,createUi:(X,he)=>Re=>({name:X,type:"listbox",label:he,items:Re}),getValue:zo},pr=X=>dt(X,"items"),Zs=(X,he)=>ve(he,Re=>pr(Re)?Zs(X,Re.items):Pe(Re.value===X,Re)),Ta=(X,he,Re,at)=>{const St=at[he],en=X.length>0;return St!==void 0?Zs(St,Re).map(io=>({url:{value:io.value,meta:{text:en?X:io.text,attach:Ct}},text:en?X:io.text})):Nt.none()},yc=(X,he)=>he==="link"?X.link:he==="anchor"?X.anchor:Nt.none(),pe={init:(X,he)=>{const Re={text:X.text,title:X.title},at=vo=>{var qt;return Pe(Re.title.length<=0,Nt.from((qt=vo.meta)===null||qt===void 0?void 0:qt.title).getOr(""))},St=vo=>{var qt;return Pe(Re.text.length<=0,Nt.from((qt=vo.meta)===null||qt===void 0?void 0:qt.text).getOr(vo.value))},en=vo=>{const qt=St(vo.url),sr=at(vo.url);return qt.isSome()||sr.isSome()?Nt.some({...qt.map(pn=>({text:pn})).getOr({}),...sr.map(pn=>({title:pn})).getOr({})}):Nt.none()},io=(vo,qt)=>{const sr=yc(he,qt).getOr([]);return Ta(Re.text,qt,sr,vo)};return{onChange:(vo,qt)=>{const sr=qt.name;return sr==="url"?en(vo()):jt(["anchor","link"],sr)?io(vo(),sr):((sr==="text"||sr==="title")&&(Re[sr]=vo()[sr]),Nt.none())}}},getDelta:Ta};var fe=tinymce.util.Tools.resolve("tinymce.util.Delay");const He=(X,he,Re)=>{const at=X.selection.getRng();fe.setEditorTimeout(X,()=>{X.windowManager.confirm(he,St=>{X.selection.setRng(at),Re(St)})})},qe=X=>{const he=X.href;return he.indexOf("@")>0&&he.indexOf("/")===-1&&he.indexOf("mailto:")===-1?Nt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:at=>({...at,href:"mailto:"+he})}):Nt.none()},gn=(X,he)=>Re=>{const at=Re.href;return X===1&&!$r(at)||X===0&&/^\s*www(\.|\d\.)/i.test(at)?Nt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${he}:// prefix?`,preprocess:en=>({...en,href:he+"://"+at})}):Nt.none()},Un={preprocess:(X,he)=>ve([qe,gn(ct(X),eo(X))],Re=>Re(he)).fold(()=>Promise.resolve(he),Re=>new Promise(at=>{He(X,Re.message,St=>{at(St?Re.preprocess(he):he)})}))},_e={getAnchors:X=>{const he=X.dom.select("a:not([href])"),Re=Fe(he,at=>{const St=at.name||at.id;return St?[{text:St,value:"#"+St}]:[]});return Re.length>0?Nt.some([{text:"None",value:""}].concat(Re)):Nt.none()}},Xs={getClasses:X=>{const he=os(X);return he.length>0?hs.sanitize(he):Nt.none()}},ur=X=>{try{return Nt.some(JSON.parse(X))}catch{return Nt.none()}},Zo={getLinks:X=>{const he=at=>X.convertURL(at.value||at.url||"","href"),Re=sn(X);return new Promise(at=>{K(Re)?fetch(Re).then(St=>St.ok?St.text().then(ur):Promise.reject()).then(at,()=>at(Nt.none())):Lt(Re)?Re(St=>at(Nt.some(St))):at(Nt.from(Re))}).then(at=>at.bind(hs.sanitizeWith(he)).map(St=>St.length>0?[{text:"None",value:""}].concat(St):St))}},Gr={getRels:(X,he)=>{const Re=to(X);if(Re.length>0){const at=so(he,"_blank"),St=yt(X)===!1,en=ls=>Is(hs.getValue(ls),at);return(St?hs.sanitizeWith(en):hs.sanitize)(Re)}return Nt.none()}},Aa=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Ko={getTargets:X=>{const he=ms(X);return ie(he)?hs.sanitize(he).orThunk(()=>Nt.some(Aa)):he===!1?Nt.none():Nt.some(Aa)}},es=(X,he,Re)=>{const at=X.getAttrib(he,Re);return at!==null&&at.length>0?Nt.some(at):Nt.none()},na=(X,he)=>{const Re=X.dom,St=fo(X)?Nt.some(vs(X.selection,he)):Nt.none(),en=he.bind(sr=>Nt.from(Re.getAttrib(sr,"href"))),io=he.bind(sr=>Nt.from(Re.getAttrib(sr,"target"))),ls=he.bind(sr=>es(Re,sr,"rel")),vo=he.bind(sr=>es(Re,sr,"class")),qt=he.bind(sr=>es(Re,sr,"title"));return{url:en,text:St,title:qt,target:io,rel:ls,linkClass:vo}},kr={collect:(X,he)=>Zo.getLinks(X).then(Re=>{const at=na(X,he);return{anchor:at,catalogs:{targets:Ko.getTargets(X),rels:Gr.getRels(X,at.target),classes:Xs.getClasses(X),anchor:_e.getAnchors(X),link:Re},optNode:he,flags:{titleEnabled:tt(X)}}})},Ji=(X,he)=>Re=>{const at=Re.getData();if(!at.url.value){Wo(X),Re.close();return}const St=ls=>Nt.from(at[ls]).filter(vo=>!so(he.anchor[ls],vo)),en={href:at.url.value,text:St("text"),target:St("target"),rel:St("rel"),class:St("linkClass"),title:St("title")},io={href:at.url.value,attach:at.url.meta!==void 0&&at.url.meta.attach?at.url.meta.attach:Ct};Un.preprocess(X,en).then(ls=>{Ja(X,io,ls)}),Re.close()},Ri=X=>{const he=ws(X);return kr.collect(X,he)},xo=(X,he)=>{const Re=X.anchor,at=Re.url.getOr("");return{url:{value:at,meta:{original:{value:at}}},text:Re.text.getOr(""),title:Re.title.getOr(""),anchor:at,link:at,rel:Re.rel.getOr(""),target:Re.target.or(he).getOr(""),linkClass:Re.linkClass.getOr("")}},sa=(X,he,Re)=>{const at=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],St=X.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),en=X.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],io=Nt.from(nt(Re)),ls=xo(X,io),vo=X.catalogs,qt=pe.init(ls,vo);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Qt([at,St,en,Me([vo.anchor.map(hs.createUi("anchor","Anchors")),vo.rels.map(hs.createUi("rel","Rel")),vo.targets.map(hs.createUi("target","Open link in...")),vo.link.map(hs.createUi("link","Link list")),vo.classes.map(hs.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ls,onChange:(pn,{name:Dr})=>{qt.onChange(pn.getData,{name:Dr}).each(wc=>{pn.setData(wc)})},onSubmit:he}},zr=X=>{Ri(X).then(Re=>{const at=Ji(X,Re);return sa(Re,at,X)}).then(Re=>{X.windowManager.open(Re)})},Qi=X=>{X.addCommand("mceLink",(he,Re)=>{(Re==null?void 0:Re.dialog)===!0||!W(X)?zr(X):X.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},ei=X=>{X.addShortcut("Meta+K","",()=>{X.execCommand("mceLink")})},Ar=X=>{let he=X;return{get:()=>he,set:St=>{he=St}}},Ls=X=>{const he=Ar(Nt.none()),Re=()=>he.get().each(X);return{clear:()=>{Re(),he.set(Nt.none())},isSet:()=>he.get().isSome(),get:()=>he.get(),set:ls=>{Re(),he.set(Nt.some(ls))}}},Cf=()=>{const X=Ls(Ct);return{...X,on:Re=>X.get().each(Re)}};var ji=tinymce.util.Tools.resolve("tinymce.util.VK");const Uo=(X,he)=>{document.body.appendChild(X),X.dispatchEvent(he),document.body.removeChild(X)},Oa=X=>{const he=document.createElement("a");he.target="_blank",he.href=X,he.rel="noreferrer noopener";const Re=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(Re),Uo(he,Re)},ma=X=>X.altKey===!0&&X.shiftKey===!1&&X.ctrlKey===!1&&X.metaKey===!1,br=(X,he)=>{if(he){const Re=Po(he);if(/^#/.test(Re)){const at=X.dom.select(Re);at.length&&X.selection.scrollIntoView(at[0],!0)}else Oa(he.href)}},$l=X=>{const he=X.selection.getRng(),Re=he.startContainer;return ss(Re)&&he.startContainer===he.endContainer&&X.dom.select("img",Re).length===1},Da=(X,he)=>{const Re=Cs(X.dom.getParents(he));return Pe(Re.length===1,Re[0])},Ia=X=>{const he=qr(X.selection.getRng());return Pe(he.length>0,he[0]).or(Da(X,X.selection.getNode()))},ec=X=>X.selection.isCollapsed()||$l(X)?Da(X,X.selection.getStart()):Ia(X),Mi=X=>{const he=Cf(),Re=()=>he.get().or(ec(X)),at=()=>Re().each(St=>br(X,St));return X.on("contextmenu",St=>{Da(X,St.target).each(he.set)}),X.on("SelectionChange",()=>{he.isSet()||ec(X).each(he.set)}),X.on("click",St=>{he.clear();const en=Cs(X.dom.getParents(St.target));en.length===1&&ji.metaKeyPressed(St)&&(St.preventDefault(),br(X,en[0]))}),X.on("keydown",St=>{he.clear(),!St.isDefaultPrevented()&&St.keyCode===13&&ma(St)&&Re().each(en=>{St.preventDefault(),br(X,en)})}),{gotoSelectedLink:at}},uu=X=>()=>{X.execCommand("mceLink",!1,{dialog:!0})},fl=(X,he)=>(X.on("NodeChange",he),()=>X.off("NodeChange",he)),Uc=X=>he=>{const Re=()=>{he.setActive(!X.mode.isReadOnly()&&bs(X,X.selection.getNode())),he.setEnabled(X.selection.isEditable())};return Re(),fl(X,Re)},ti=X=>he=>{const Re=()=>{he.setEnabled(X.selection.isEditable())};return Re(),fl(X,Re)},Or=X=>he=>{const Re=en=>Vo(en)||vc(X.selection.getRng()),at=X.dom.getParents(X.selection.getStart()),St=en=>{he.setEnabled(Re(en)&&X.selection.isEditable())};return St(at),fl(X,en=>St(en.parents))},du=(X,he)=>{X.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:uu(X),onSetup:Uc(X)}),X.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:he.gotoSelectedLink,onSetup:Or(X)}),X.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Wo(X),onSetup:Or(X)})},fu=(X,he)=>{X.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:he.gotoSelectedLink,onSetup:Or(X)}),X.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:uu(X),onSetup:ti(X)}),X.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Wo(X),onSetup:Or(X)})},mu=X=>{const he="link unlink openlink",Re="link";X.ui.registry.addContextMenu("link",{update:at=>X.dom.isEditable(at)?Vo(X.dom.getParents(at,"a"))?he:Re:""})},hu=(X,he)=>{const Re=en=>{en.selection.collapse(!1)},at=en=>{const io=X.selection.getNode();return en.setEnabled(bs(X,io)),Ct},St=en=>{const io=ws(X),ls=fo(X);if(io.isNone()&&ls){const vo=vs(X.selection,io);return Pe(vo.length===0,en)}else return Nt.none()};X.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Uc(X)},label:"Link",predicate:en=>$n(X)&&bs(X,en),initValue:()=>ws(X).fold(Xe(""),Po),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:en=>{const io=X.selection.getNode();return en.setActive(bs(X,io)),Uc(X)(en)},onAction:en=>{const io=en.getValue(),ls=St(io);Ja(X,{href:io,attach:Ct},{href:io,text:ls,title:Nt.none(),rel:Nt.none(),target:Nt.from(nt(X)),class:Nt.none()}),Re(X),en.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:at,onAction:en=>{Wo(X),en.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:at,onAction:en=>{he.gotoSelectedLink(),en.hide()}}]})},vr=X=>{const he=Mi(X);du(X,he),fu(X,he),mu(X),hu(X,he)};var gi=()=>{p.add("link",X=>{an(X),Qi(X),vr(X),ei(X)})};gi()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(k,I,q)=>{var me;return q(k,I.prototype)?!0:((me=k.constructor)===null||me===void 0?void 0:me.name)===I.name},w=k=>{const I=typeof k;return k===null?"null":I==="object"&&Array.isArray(k)?"array":I==="object"&&g(k,String,(q,me)=>me.isPrototypeOf(q))?"string":I},E=k=>I=>w(I)===k,M=k=>I=>typeof I===k,z=E("string"),K=E("object"),Z=E("array"),ie=M("boolean"),Ee=k=>k==null,de=k=>!Ee(k),Ye=M("function"),Ut=M("number"),Lt=()=>{},Mt=(k,I)=>q=>k(I(q)),Ct=k=>()=>k,Xe=(k,I)=>k===I;function dn(k,...I){return(...q)=>{const me=I.concat(q);return k.apply(null,me)}}const Nt=k=>I=>!k(I),ce=Ct(!1);class Ke{constructor(I,q){this.tag=I,this.value=q}static some(I){return new Ke(!0,I)}static none(){return Ke.singletonNone}fold(I,q){return this.tag?q(this.value):I()}isSome(){return this.tag}isNone(){return!this.tag}map(I){return this.tag?Ke.some(I(this.value)):Ke.none()}bind(I){return this.tag?I(this.value):Ke.none()}exists(I){return this.tag&&I(this.value)}forall(I){return!this.tag||I(this.value)}filter(I){return!this.tag||I(this.value)?this:Ke.none()}getOr(I){return this.tag?this.value:I}or(I){return this.tag?this:I}getOrThunk(I){return this.tag?this.value:I()}orThunk(I){return this.tag?this:I()}getOrDie(I){if(this.tag)return this.value;throw new Error(I??"Called getOrDie on None")}static from(I){return de(I)?Ke.some(I):Ke.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(I){this.tag&&I(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ke.singletonNone=new Ke(!1);const Kn=Array.prototype.slice,jt=Array.prototype.indexOf,ne=Array.prototype.push,Jt=(k,I)=>jt.call(k,I),Bn=(k,I)=>Jt(k,I)>-1,Qt=(k,I)=>{for(let q=0,me=k.length;q<me;q++){const xe=k[q];if(I(xe,q))return!0}return!1},Fe=(k,I)=>{const q=k.length,me=new Array(q);for(let xe=0;xe<q;xe++){const mt=k[xe];me[xe]=I(mt,xe)}return me},ve=(k,I)=>{for(let q=0,me=k.length;q<me;q++){const xe=k[q];I(xe,q)}},so=(k,I)=>{const q=[];for(let me=0,xe=k.length;me<xe;me++){const mt=k[me];I(mt,me)&&q.push(mt)}return q},Me=(k,I)=>{if(k.length===0)return[];{let q=I(k[0]);const me=[];let xe=[];for(let mt=0,kn=k.length;mt<kn;mt++){const Jn=k[mt],Dn=I(Jn);Dn!==q&&(me.push(xe),xe=[]),q=Dn,xe.push(Jn)}return xe.length!==0&&me.push(xe),me}},Pe=(k,I,q)=>(ve(k,(me,xe)=>{q=I(q,me,xe)}),q),N=(k,I,q)=>{for(let me=0,xe=k.length;me<xe;me++){const mt=k[me];if(I(mt,me))return Ke.some(mt);if(q(mt,me))break}return Ke.none()},an=(k,I)=>N(k,I,ce),ct=k=>{const I=[];for(let q=0,me=k.length;q<me;++q){if(!Z(k[q]))throw new Error("Arr.flatten item "+q+" was not an array, input: "+k);ne.apply(I,k[q])}return I},$n=(k,I)=>ct(Fe(k,I)),sn=k=>{const I=Kn.call(k,0);return I.reverse(),I},nt=(k,I)=>I>=0&&I<k.length?Ke.some(k[I]):Ke.none(),eo=k=>nt(k,0),ms=k=>nt(k,k.length-1),to=(k,I)=>{const q=[],me=Ye(I)?xe=>Qt(q,mt=>I(mt,xe)):xe=>Bn(q,xe);for(let xe=0,mt=k.length;xe<mt;xe++){const kn=k[xe];me(kn)||q.push(kn)}return q},os=(k,I,q=Xe)=>k.exists(me=>q(me,I)),tt=(k,I,q=Xe)=>yt(k,I,q).getOr(k.isNone()&&I.isNone()),yt=(k,I,q)=>k.isSome()&&I.isSome()?Ke.some(q(k.getOrDie(),I.getOrDie())):Ke.none(),W=8,ta=11,uo=1,qo=3,Ho=(k,I)=>{const me=(I||document).createElement("div");if(me.innerHTML=k,!me.hasChildNodes()||me.childNodes.length>1){const xe="HTML does not have a single root node";throw console.error(xe,k),new Error(xe)}return Tt(me.childNodes[0])},Wi=(k,I)=>{const me=(I||document).createElement(k);return Tt(me)},et=(k,I)=>{const me=(I||document).createTextNode(k);return Tt(me)},Tt=k=>{if(k==null)throw new Error("Node cannot be null or undefined");return{dom:k}},Se={fromHtml:Ho,fromTag:Wi,fromText:et,fromDom:Tt,fromPoint:(k,I,q)=>Ke.from(k.dom.elementFromPoint(I,q)).map(Tt)},_o=(k,I)=>{const q=k.dom;if(q.nodeType!==uo)return!1;{const me=q;if(me.matches!==void 0)return me.matches(I);if(me.msMatchesSelector!==void 0)return me.msMatchesSelector(I);if(me.webkitMatchesSelector!==void 0)return me.webkitMatchesSelector(I);if(me.mozMatchesSelector!==void 0)return me.mozMatchesSelector(I);throw new Error("Browser lacks native selectors")}},To=(k,I)=>k.dom===I.dom,Zt=(k,I)=>{const q=k.dom,me=I.dom;return q===me?!1:q.contains(me)},ss=_o,Mo=typeof window<"u"?window:Function("return this;")(),$r=(k,I)=>{let q=I??Mo;for(let me=0;me<k.length&&q!==void 0&&q!==null;++me)q=q[k[me]];return q},Po=(k,I)=>{const q=k.split(".");return $r(q,I)},Is=(k,I)=>Po(k,I),Xa=(k,I)=>{const q=Is(k,I);if(q==null)throw new Error(k+" not available on this browser");return q},ws=Object.getPrototypeOf,bs=k=>Xa("HTMLElement",k),vs=k=>{const I=Po("ownerDocument.defaultView",k);return K(k)&&(bs(I).prototype.isPrototypeOf(k)||/^HTML\w*Element$/.test(ws(k).constructor.name))},qr=k=>k.dom.nodeName.toLowerCase(),Cs=k=>k.dom.nodeType,Vo=k=>I=>Cs(I)===k,vc=k=>Cs(k)===W||qr(k)==="#comment",fo=k=>cs(k)&&vs(k.dom),cs=Vo(uo),_r=Vo(qo),Oi=Vo(ta),Zi=k=>I=>cs(I)&&qr(I)===k,Go=k=>Ke.from(k.dom.parentNode).map(Se.fromDom),Vc=k=>Ke.from(k.dom.parentElement).map(Se.fromDom),kt=k=>Ke.from(k.dom.nextSibling).map(Se.fromDom),po=k=>Fe(k.dom.childNodes,Se.fromDom),Hr=(k,I)=>{const q=k.dom.childNodes;return Ke.from(q[I]).map(Se.fromDom)},Vr=k=>Hr(k,0),Ba=k=>Hr(k,k.dom.childNodes.length-1),Ja=k=>Oi(k)&&de(k.dom.host),Wo=k=>Se.fromDom(k.dom.getRootNode()),hi=k=>{const I=Wo(k);return Ja(I)?Ke.some(I):Ke.none()},Di=k=>Se.fromDom(k.dom.host),zo=k=>{const I=_r(k)?k.dom.parentNode:k.dom;if(I==null||I.ownerDocument===null)return!1;const q=I.ownerDocument;return hi(Se.fromDom(I)).fold(()=>q.body.contains(I),Mt(zo,Di))};var Sn=(k,I,q,me,xe)=>k(q,me)?Ke.some(q):Ye(xe)&&xe(q)?Ke.none():I(q,me,xe);const Ys=(k,I,q)=>{let me=k.dom;const xe=Ye(q)?q:ce;for(;me.parentNode;){me=me.parentNode;const mt=Se.fromDom(me);if(I(mt))return Ke.some(mt);if(xe(mt))break}return Ke.none()},Qa=(k,I,q)=>Sn((xe,mt)=>mt(xe),Ys,k,I,q),ul=(k,I,q)=>Ys(k,me=>_o(me,I),q),dl=(k,I,q)=>Sn((xe,mt)=>_o(xe,mt),ul,k,I,q),hs=k=>dl(k,"[contenteditable]"),pr=(k,I=!1)=>zo(k)?k.dom.isContentEditable:hs(k).fold(Ct(I),q=>Zs(q)==="true"),Zs=k=>k.dom.contentEditable,Ta=(k,I)=>{Go(k).each(me=>{me.dom.insertBefore(I.dom,k.dom)})},yc=(k,I)=>{kt(k).fold(()=>{Go(k).each(xe=>{pe(xe,I)})},me=>{Ta(me,I)})},Tr=(k,I)=>{Vr(k).fold(()=>{pe(k,I)},me=>{k.dom.insertBefore(I.dom,me.dom)})},pe=(k,I)=>{k.dom.appendChild(I.dom)},fe=(k,I)=>{ve(I,q=>{Ta(k,q)})},He=(k,I)=>{ve(I,q=>{pe(k,q)})},qe=k=>{k.dom.textContent="",ve(po(k),I=>{gn(I)})},gn=k=>{const I=k.dom;I.parentNode!==null&&I.parentNode.removeChild(I)};var Nn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Un=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),or=tinymce.util.Tools.resolve("tinymce.util.VK");const _e=k=>Fe(k,Se.fromDom),Wn=Object.keys,Xs=(k,I)=>{const q=Wn(k);for(let me=0,xe=q.length;me<xe;me++){const mt=q[me],kn=k[mt];I(kn,mt)}},ur=k=>(I,q)=>{k[q]=I},ka=(k,I,q,me)=>{Xs(k,(xe,mt)=>{(I(xe,mt)?q:me)(xe,mt)})},Zo=(k,I)=>{const q={};return ka(k,I,ur(q),Lt),q},zc=(k,I,q)=>{if(z(q)||ie(q)||Ut(q))k.setAttribute(I,q+"");else throw console.error("Invalid call to Attribute.set. Key ",I,":: Value ",q,":: Element ",k),new Error("Attribute value was not simple")},Gr=(k,I)=>{const q=k.dom;Xs(I,(me,xe)=>{zc(q,xe,me)})},Aa=k=>Pe(k.dom.attributes,(I,q)=>(I[q.name]=q.value,I),{}),Ps=(k,I)=>Se.fromDom(k.dom.cloneNode(I)),Ko=k=>Ps(k,!0),es=(k,I)=>{const q=Se.fromTag(I),me=Aa(k);return Gr(q,me),q},na=(k,I)=>{const q=es(k,I);yc(k,q);const me=po(k);return He(q,me),gn(k),q};var oa=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),kr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ji=k=>I=>de(I)&&I.nodeName.toLowerCase()===k,Ri=k=>I=>de(I)&&k.test(I.nodeName),xo=k=>de(k)&&k.nodeType===3,sa=k=>de(k)&&k.nodeType===1,zr=Ri(/^(OL|UL|DL)$/),Qi=Ri(/^(OL|UL)$/),ei=Ji("ol"),Ar=Ri(/^(LI|DT|DD)$/),Ls=Ri(/^(DT|DD)$/),Cf=Ri(/^(TH|TD)$/),ji=Ji("br"),Uo=k=>{var I;return((I=k.parentNode)===null||I===void 0?void 0:I.firstChild)===k},Oa=(k,I)=>de(I)&&I.nodeName in k.schema.getTextBlockElements(),ma=(k,I)=>de(k)&&k.nodeName in I,br=(k,I)=>de(I)&&I.nodeName in k.schema.getVoidElements(),$l=(k,I)=>ji(I)?k.isBlock(I.nextSibling)&&!ji(I.previousSibling):!1,Da=(k,I,q)=>{const me=k.isEmpty(I);return q&&k.select("span[data-mce-type=bookmark]",I).length>0?!1:me},Ia=(k,I)=>k.isChildOf(I,k.getRoot()),ec=k=>I=>I.options.get(k),Mi=k=>{const I=k.options.register;I("lists_indent_on_tab",{processor:"boolean",default:!0})},uu=ec("lists_indent_on_tab"),fl=ec("forced_root_block"),Uc=ec("forced_root_block_attrs"),ti=(k,I,q={})=>{const me=k.dom,xe=k.schema.getBlockElements(),mt=me.createFragment(),kn=fl(k),Jn=Uc(k);let Dn,An,Rs=!1;for(An=me.create(kn,{...Jn,...q.style?{style:q.style}:{}}),ma(I.firstChild,xe)||mt.appendChild(An);Dn=I.firstChild;){const xr=Dn.nodeName;!Rs&&(xr!=="SPAN"||Dn.getAttribute("data-mce-type")!=="bookmark")&&(Rs=!0),ma(Dn,xe)?(mt.appendChild(Dn),An=null):(An||(An=me.create(kn,Jn),mt.appendChild(An)),An.appendChild(Dn))}return!Rs&&An&&An.appendChild(me.create("br",{"data-mce-bogus":"1"})),mt},Or=oa.DOM,du=(k,I,q)=>{const me=An=>{const Rs=An.parentNode;Rs&&kr.each(xe,xr=>{Rs.insertBefore(xr,q.parentNode)}),Or.remove(An)},xe=Or.select('span[data-mce-type="bookmark"]',I),mt=ti(k,q),kn=Or.createRng();kn.setStartAfter(q),kn.setEndAfter(I);const Jn=kn.extractContents();for(let An=Jn.firstChild;An;An=An.firstChild)if(An.nodeName==="LI"&&k.dom.isEmpty(An)){Or.remove(An);break}k.dom.isEmpty(Jn)||Or.insertAfter(Jn,I),Or.insertAfter(mt,I);const Dn=q.parentElement;Dn&&Da(k.dom,Dn)&&me(Dn),Or.remove(q),Da(k.dom,I)&&Or.remove(I)},fu=Zi("dd"),mu=Zi("dt"),hu=(k,I)=>{fu(I)?na(I,"dt"):mu(I)&&Vc(I).each(q=>du(k,q.dom,I.dom))},vr=k=>{mu(k)&&na(k,"dd")},gi=(k,I,q)=>{I==="Indent"?ve(q,vr):ve(q,me=>hu(k,me))},X=(k,I)=>{if(xo(k))return{container:k,offset:I};const q=Nn.getNode(k,I);return xo(q)?{container:q,offset:I>=k.childNodes.length?q.data.length:0}:q.previousSibling&&xo(q.previousSibling)?{container:q.previousSibling,offset:q.previousSibling.data.length}:q.nextSibling&&xo(q.nextSibling)?{container:q.nextSibling,offset:0}:{container:k,offset:I}},he=k=>{const I=k.cloneRange(),q=X(k.startContainer,k.startOffset);I.setStart(q.container,q.offset);const me=X(k.endContainer,k.endOffset);return I.setEnd(me.container,me.offset),I},Re=["OL","UL","DL"],at=Re.join(","),St=(k,I)=>{const q=I||k.selection.getStart(!0);return k.dom.getParent(q,at,wc(k,q))},en=(k,I)=>de(k)&&I.length===1&&I[0]===k,io=k=>so(k.querySelectorAll(at),zr),ls=k=>{const I=St(k),q=k.selection.getSelectedBlocks();return en(I,q)?io(I):so(q,me=>zr(me)&&I!==me)},vo=(k,I)=>{const q=kr.map(I,me=>{const xe=k.dom.getParent(me,"li,dd,dt",wc(k,me));return xe||me});return to(q)},qt=k=>{const I=k.selection.getSelectedBlocks();return so(vo(k,I),Ar)},sr=k=>so(qt(k),Ls),pn=(k,I)=>{const q=k.dom.getParents(I,"TD,TH");return q.length>0?q[0]:k.getBody()},Dr=(k,I)=>!zr(I)&&!Ar(I)&&Qt(Re,q=>k.isValidChild(I.nodeName,q)),wc=(k,I)=>{const q=k.dom.getParents(I,k.dom.isBlock),me=mt=>mt.nodeName.toLowerCase()!==fl(k);return an(q,mt=>me(mt)&&Dr(k.schema,mt)).getOr(k.getBody())},H=k=>Go(k).exists(I=>Ar(I.dom)&&Vr(I).exists(q=>!zr(q.dom))&&Ba(I).exists(q=>!zr(q.dom))),oe=(k,I)=>{const q=k.dom.getParents(I,"ol,ul",wc(k,I));return ms(q)},ye=k=>{const I=oe(k,k.selection.getStart()),q=so(k.selection.getSelectedBlocks(),Qi);return I.toArray().concat(q)},Ie=k=>{const I=k.selection.getStart();return k.dom.getParents(I,"ol,ul",wc(k,I))},lt=k=>{const I=ye(k),q=Ie(k);return an(q,me=>H(Se.fromDom(me))).fold(()=>qn(k,I),me=>[me])},qn=(k,I)=>{const q=Fe(I,me=>oe(k,me).getOr(me));return to(q)},Ss=k=>/\btox\-/.test(k.className),rs=(k,I)=>N(k,zr,Cf).exists(q=>q.nodeName===I&&!Ss(q)),vt=(k,I)=>I!==null&&!k.dom.isEditable(I),Os=k=>{const I=St(k);return vt(k,I)},ha=(k,I)=>{const q=k.dom.getParent(I,"ol,ul,dl");return vt(k,q)},ni=(k,I)=>{const q=k.selection.getNode();return I({parents:k.dom.getParents(q),element:q}),k.on("NodeChange",I),()=>k.off("NodeChange",I)},Xn=(k,I)=>{const me=document.createDocumentFragment();return ve(k,xe=>{me.appendChild(xe.dom)}),Se.fromDom(me)},oi=(k,I,q)=>k.dispatch("ListMutation",{action:I,element:q}),ed=(k=>I=>I.replace(k,""))(/^\s+|\s+$/g),xs=k=>k.length>0,ml=k=>!xs(k),gm=k=>k.style!==void 0&&Ye(k.style.getPropertyValue),m1=(k,I,q)=>{if(!z(q))throw console.error("Invalid call to CSS.set. Property ",I,":: Value ",q,":: Element ",k),new Error("CSS value must be a string: "+q);gm(k)&&k.style.setProperty(I,q)},Js=(k,I,q)=>{const me=k.dom;m1(me,I,q)},pm=k=>ss(k,"OL,UL"),yr=k=>ss(k,"LI"),ga=k=>Vr(k).exists(pm),Wc=k=>Ba(k).exists(pm),Cc=k=>"listAttributes"in k,Ld=k=>"isComment"in k,La=k=>"isFragment"in k,yo=k=>k.depth>0,hl=k=>k.isSelected,Sc=k=>{const I=po(k),q=Wc(k)?I.slice(0,-1):I;return Fe(q,Ko)},h1=(k,I,q)=>Go(k).filter(cs).map(me=>({depth:I,dirty:!1,isSelected:q,content:Sc(k),itemAttributes:Aa(k),listAttributes:Aa(me),listType:qr(me),isInPreviousLi:!1})),Kr=(k,I)=>{pe(k.item,I.list)},Fa=k=>{for(let I=1;I<k.length;I++)Kr(k[I-1],k[I])},Yr=(k,I)=>{yt(ms(k),eo(I),Kr)},Oh=(k,I)=>{const q={list:Se.fromTag(I,k),item:Se.fromTag("li",k)};return pe(q.list,q.item),q},Sf=(k,I,q)=>{const me=[];for(let xe=0;xe<q;xe++)me.push(Oh(k,Cc(I)?I.listType:I.parentListType));return me},si=(k,I)=>{for(let q=0;q<k.length-1;q++)Js(k[q].item,"list-style-type","none");ms(k).each(q=>{Cc(I)&&(Gr(q.list,I.listAttributes),Gr(q.item,I.itemAttributes)),He(q.item,I.content)})},Dh=(k,I)=>{qr(k.list)!==I.listType&&(k.list=na(k.list,I.listType)),Gr(k.list,I.listAttributes)},js=(k,I,q)=>{const me=Se.fromTag("li",k);return Gr(me,I),He(me,q),me},Zc=(k,I)=>{pe(k.list,I),k.item=I},ri=(k,I,q)=>{const me=I.slice(0,q.depth);return ms(me).each(xe=>{if(Cc(q)){const mt=js(k,q.itemAttributes,q.content);Zc(xe,mt),Dh(xe,q)}else if(La(q))He(xe.item,q.content);else{const mt=Se.fromHtml(`<!--${q.content}-->`);pe(xe.list,mt)}}),me},wr=(k,I,q)=>{const me=Sf(k,q,q.depth-I.length);return Fa(me),si(me,q),Yr(I,me),I.concat(me)},pi=(k,I)=>{let q=Ke.none();const me=Pe(I,(xe,mt,kn)=>Ld(mt)?kn===0?(q=Ke.some(mt),xe):ri(k,xe,mt):mt.depth>xe.length?wr(k,xe,mt):ri(k,xe,mt),[]);return q.each(xe=>{const mt=Se.fromHtml(`<!--${xe.content}-->`);eo(me).each(kn=>{Tr(kn.list,mt)})}),eo(me).map(xe=>xe.list)},Cr=(k,I)=>{switch(k){case"Indent":I.depth++;break;case"Outdent":I.depth--;break;case"Flatten":I.depth=0}I.dirty=!0},Rh=(k,I)=>{Cc(k)&&Cc(I)&&(k.listType=I.listType,k.listAttributes={...I.listAttributes})},gu=k=>{k.listAttributes=Zo(k.listAttributes,(I,q)=>q!=="start")},pu=(k,I)=>{const q=k[I].depth,me=mt=>mt.depth===q&&!mt.dirty,xe=mt=>mt.depth<q;return N(sn(k.slice(0,I)),me,xe).orThunk(()=>N(k.slice(I+1),me,xe))},xf=k=>(ve(k,(I,q)=>{pu(k,q).fold(()=>{I.dirty&&Cc(I)&&gu(I)},me=>Rh(I,me))}),k),bu=k=>{let I=k;return{get:()=>I,set:xe=>{I=xe}}},xc=(k,I,q,me)=>{var xe;if(vc(me))return[{depth:k+1,content:(xe=me.dom.nodeValue)!==null&&xe!==void 0?xe:"",dirty:!1,isSelected:!1,isComment:!0}];I.each(Jn=>{To(Jn.start,me)&&q.set(!0)});const mt=h1(me,k,q.get());I.each(Jn=>{To(Jn.end,me)&&q.set(!1)});const kn=Ba(me).filter(pm).map(Jn=>Sr(k,I,q,Jn)).getOr([]);return mt.toArray().concat(kn)},Ef=(k,I,q,me)=>Vr(me).filter(pm).fold(()=>xc(k,I,q,me),xe=>{const mt=Pe(po(me),(kn,Jn,Dn)=>{if(Dn===0)return kn;if(yr(Jn))return kn.concat(xc(k,I,q,Jn));{const An={isFragment:!0,depth:k,content:[Jn],isSelected:!1,dirty:!1,parentListType:qr(xe)};return kn.concat(An)}},[]);return Sr(k,I,q,xe).concat(mt)}),Sr=(k,I,q,me)=>$n(po(me),xe=>{const mt=pm(xe)?Sr:Ef,kn=k+1;return mt(kn,I,q,xe)}),_f=(k,I)=>{const q=bu(!1),me=0;return Fe(k,xe=>({sourceList:xe,entries:Sr(me,I,q,xe)}))},Mh=(k,I)=>{const q=xf(I);return Fe(q,me=>{const xe=Ld(me)?Xn([Se.fromHtml(`<!--${me.content}-->`)]):Xn(me.content),mt=Cc(me)?me.itemAttributes:{};return Se.fromDom(ti(k,xe.dom,mt))})},gl=(k,I)=>{const q=xf(I);return pi(k.contentDocument,q).toArray()},Nh=(k,I)=>$n(Me(I,yo),q=>eo(q).exists(yo)?gl(k,q):Mh(k,q)),vu=(k,I)=>{ve(so(k,hl),q=>Cr(I,q))},Ph=k=>{const I=Fe(qt(k),Se.fromDom);return yt(an(I,Nt(ga)),an(sn(I),Nt(ga)),(q,me)=>({start:q,end:me}))},Hl=(k,I,q)=>{const me=_f(I,Ph(k));ve(me,xe=>{vu(xe.entries,q);const mt=Nh(k,xe.entries);ve(mt,kn=>{oi(k,q==="Indent"?"IndentList":"OutdentList",kn.dom)}),fe(xe.sourceList,mt),gn(xe.sourceList)})},Bh=(k,I)=>{const q=_e(lt(k)),me=_e(sr(k));let xe=!1;if(q.length||me.length){const mt=k.selection.getBookmark();Hl(k,q,I),gi(k,I,me),k.selection.moveToBookmark(mt),k.selection.setRng(he(k.selection.getRng())),k.nodeChanged(),xe=!0}return xe},Tf=(k,I)=>!Os(k)&&Bh(k,I),bm=k=>Tf(k,"Indent"),yu=k=>Tf(k,"Outdent"),vm=k=>Tf(k,"Flatten"),be="\uFEFF",Vl=k=>k===be,pl=(k,I,q)=>Ys(k,I,q).isSome(),Ih=(k,I)=>pl(k,dn(To,I));var g1=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const wu=oa.DOM,ro=k=>{const I={},q=me=>{let xe=k[me?"startContainer":"endContainer"],mt=k[me?"startOffset":"endOffset"];if(sa(xe)){const kn=wu.create("span",{"data-mce-type":"bookmark"});xe.hasChildNodes()?(mt=Math.min(mt,xe.childNodes.length-1),me?xe.insertBefore(kn,xe.childNodes[mt]):wu.insertAfter(kn,xe.childNodes[mt])):xe.appendChild(kn),xe=kn,mt=0}I[me?"startContainer":"endContainer"]=xe,I[me?"startOffset":"endOffset"]=mt};return q(!0),k.collapsed||q(),I},Rr=k=>{const I=me=>{const xe=Jn=>{var Dn;let An=(Dn=Jn.parentNode)===null||Dn===void 0?void 0:Dn.firstChild,Rs=0;for(;An;){if(An===Jn)return Rs;(!sa(An)||An.getAttribute("data-mce-type")!=="bookmark")&&Rs++,An=An.nextSibling}return-1};let mt=k[me?"startContainer":"endContainer"],kn=k[me?"startOffset":"endOffset"];if(mt){if(sa(mt)&&mt.parentNode){const Jn=mt;kn=xe(mt),mt=mt.parentNode,wu.remove(Jn),!mt.hasChildNodes()&&wu.isBlock(mt)&&mt.appendChild(wu.create("br"))}k[me?"startContainer":"endContainer"]=mt,k[me?"startOffset":"endOffset"]=kn}};I(!0),I();const q=wu.createRng();return q.setStart(k.startContainer,k.startOffset),k.endContainer&&q.setEnd(k.endContainer,k.endOffset),he(q)},Ec=k=>{switch(k){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Cu=(k,I,q)=>{const me=q["list-style-type"]?q["list-style-type"]:null;k.setStyle(I,"list-style-type",me)},kf=(k,I)=>{kr.each(I,(q,me)=>{k.setAttribute(me,q)})},Fd=(k,I,q)=>{kf(I,q["list-attributes"]),kr.each(k.select("li",I),me=>{kf(me,q["list-item-attributes"])})},$a=(k,I,q)=>{Cu(k,I,q),Fd(k,I,q)},Af=(k,I,q)=>{kr.each(q,me=>k.setStyle(I,me,""))},zl=(k,I)=>de(I)&&!ma(I,k.schema.getBlockElements()),Of=(k,I,q,me)=>{let xe=I[q?"startContainer":"endContainer"];const mt=I[q?"startOffset":"endOffset"];sa(xe)&&(xe=xe.childNodes[Math.min(mt,xe.childNodes.length-1)]||xe),!q&&ji(xe.nextSibling)&&(xe=xe.nextSibling);const kn=Dn=>{for(;!k.dom.isBlock(Dn)&&Dn.parentNode&&me!==Dn;)Dn=Dn.parentNode;return Dn},Jn=(Dn,An)=>{var Rs;const xr=new Un(Dn,kn(Dn)),oc=An?"next":"prev";let jl;for(;jl=xr[oc]();)if(!(br(k,jl)||Vl(jl.textContent)||((Rs=jl.textContent)===null||Rs===void 0?void 0:Rs.length)===0))return Ke.some(jl);return Ke.none()};if(q&&xo(xe))if(Vl(xe.textContent))xe=Jn(xe,!1).getOr(xe);else for(xe.parentNode!==null&&zl(k,xe.parentNode)&&(xe=xe.parentNode);xe.previousSibling!==null&&(zl(k,xe.previousSibling)||xo(xe.previousSibling));)xe=xe.previousSibling;if(!q&&xo(xe))if(Vl(xe.textContent))xe=Jn(xe,!0).getOr(xe);else for(xe.parentNode!==null&&zl(k,xe.parentNode)&&(xe=xe.parentNode);xe.nextSibling!==null&&(zl(k,xe.nextSibling)||xo(xe.nextSibling));)xe=xe.nextSibling;for(;xe.parentNode!==me;){const Dn=xe.parentNode;if(Oa(k,xe)||/^(TD|TH)$/.test(Dn.nodeName))return xe;xe=Dn}return xe},Ul=(k,I,q)=>{const me=[],xe=k.dom,mt=Of(k,I,!0,q),kn=Of(k,I,!1,q);let Jn;const Dn=[];for(let An=mt;An&&(Dn.push(An),An!==kn);An=An.nextSibling);return kr.each(Dn,An=>{var Rs;if(Oa(k,An)){me.push(An),Jn=null;return}if(xe.isBlock(An)||ji(An)){ji(An)&&xe.remove(An),Jn=null;return}const xr=An.nextSibling;if(g1.isBookmarkNode(An)&&(zr(xr)||Oa(k,xr)||!xr&&An.parentNode===q)){Jn=null;return}Jn||(Jn=xe.create("p"),(Rs=An.parentNode)===null||Rs===void 0||Rs.insertBefore(Jn,An),me.push(Jn)),Jn.appendChild(An)}),me},bi=(k,I,q)=>{const me=k.getStyle(I,"list-style-type");let xe=q?q["list-style-type"]:"";return xe=xe===null?"":xe,me===xe},Lh=(k,I)=>{const q=k.selection.getStart(!0),me=Of(k,I,!0,k.getBody());return Ih(Se.fromDom(me),Se.fromDom(I.commonAncestorContainer))?I.commonAncestorContainer:q},$d=(k,I,q)=>{const me=k.selection.getRng();let xe="LI";const mt=wc(k,Lh(k,me)),kn=k.dom;if(kn.getContentEditable(k.selection.getNode())==="false")return;I=I.toUpperCase(),I==="DL"&&(xe="DT");const Jn=ro(me),Dn=so(Ul(k,me,mt),k.dom.isEditable);kr.each(Dn,An=>{let Rs;const xr=An.previousSibling,oc=An.parentNode;Ar(oc)||(xr&&zr(xr)&&xr.nodeName===I&&bi(kn,xr,q)?(Rs=xr,An=kn.rename(An,xe),xr.appendChild(An)):(Rs=kn.create(I),oc.insertBefore(Rs,An),Rs.appendChild(An),An=kn.rename(An,xe)),Af(kn,An,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),$a(kn,Rs,q),Hd(k.dom,Rs))}),k.selection.setRng(Rr(Jn))},ra=(k,I)=>zr(k)&&k.nodeName===(I==null?void 0:I.nodeName),Ni=(k,I,q)=>{const me=k.getStyle(I,"list-style-type",!0),xe=k.getStyle(q,"list-style-type",!0);return me===xe},ai=(k,I)=>k.className===I.className,td=(k,I,q)=>ra(I,q)&&Ni(k,I,q)&&ai(I,q),Hd=(k,I)=>{let q,me=I.nextSibling;if(td(k,I,me)){const xe=me;for(;q=xe.firstChild;)I.appendChild(q);k.remove(xe)}if(me=I.previousSibling,td(k,I,me)){const xe=me;for(;q=xe.lastChild;)I.insertBefore(q,I.firstChild);k.remove(xe)}},Fh=(k,I,q,me)=>{if(I.nodeName!==q){const xe=k.dom.rename(I,q);$a(k.dom,xe,me),oi(k,Ec(q),xe)}else $a(k.dom,I,me),oi(k,Ec(q),I)},Vd=(k,I,q,me)=>{if(I.classList.forEach((xe,mt,kn)=>{xe.startsWith("tox-")&&(kn.remove(xe),kn.length===0&&I.removeAttribute("class"))}),I.nodeName!==q){const xe=k.dom.rename(I,q);$a(k.dom,xe,me),oi(k,Ec(q),xe)}else $a(k.dom,I,me),oi(k,Ec(q),I)},jc=(k,I,q,me,xe)=>{const mt=zr(I);if(mt&&I.nodeName===me&&!Df(xe)&&!Ss(I))vm(k);else{$d(k,me,xe);const kn=ro(k.selection.getRng()),Jn=mt?[I,...q]:q,Dn=mt&&Ss(I)?Vd:Fh;kr.each(Jn,An=>{Dn(k,An,me,xe)}),k.selection.setRng(Rr(kn))}},Df=k=>"list-style-type"in k,Wg=(k,I,q,me)=>{if(I!==k.getBody())if(I)if(I.nodeName===q&&!Df(me)&&!Ss(I))vm(k);else{const xe=ro(k.selection.getRng());Ss(I)&&I.classList.forEach((kn,Jn,Dn)=>{kn.startsWith("tox-")&&(Dn.remove(kn),Dn.length===0&&I.removeAttribute("class"))}),$a(k.dom,I,me);const mt=k.dom.rename(I,q);Hd(k.dom,mt),k.selection.setRng(Rr(xe)),$d(k,q,me),oi(k,Ec(q),mt)}else $d(k,q,me),oi(k,Ec(q),I)},$h=(k,I,q)=>{const me=St(k);if(ha(k,me))return;const xe=ls(k),mt=K(q)?q:{};xe.length>0?jc(k,me,xe,I,mt):Wg(k,me,I,mt)},Xb=oa.DOM,ym=(k,I)=>{const q=I.parentElement;if(q&&q.nodeName==="LI"&&q.firstChild===I){const me=q.previousSibling;me&&me.nodeName==="LI"?(me.appendChild(I),Da(k,q)&&Xb.remove(q)):Xb.setStyle(q,"listStyleType","none")}if(zr(q)){const me=q.previousSibling;me&&me.nodeName==="LI"&&me.appendChild(I)}},zd=(k,I)=>{const q=kr.grep(k.select("ol,ul",I));kr.each(q,me=>{ym(k,me)})},nd=(k,I,q,me)=>{let xe=I.startContainer;const mt=I.startOffset;if(xo(xe)&&(q?mt<xe.data.length:mt>0))return xe;const kn=k.schema.getNonEmptyElements();sa(xe)&&(xe=Nn.getNode(xe,mt));const Jn=new Un(xe,me);q&&$l(k.dom,xe)&&Jn.next();const Dn=q?Jn.next.bind(Jn):Jn.prev2.bind(Jn);for(;xe=Dn();)if(xe.nodeName==="LI"&&!xe.hasChildNodes()||kn[xe.nodeName]||xo(xe)&&xe.data.length>0)return xe;return null},Ud=(k,I)=>{const q=I.childNodes;return q.length===1&&!zr(q[0])&&k.isBlock(q[0])},qs=k=>Ke.from(k).map(Se.fromDom).filter(fo).exists(I=>pr(I)&&!Bn(["details"],qr(I))),Qs=(k,I)=>{Ud(k,I)&&qs(I.firstChild)&&k.remove(I.firstChild,!0)},tc=(k,I,q)=>{let me;const xe=Ud(k,q)?q.firstChild:q;if(Qs(k,I),!Da(k,I,!0))for(;me=I.firstChild;)xe.appendChild(me)},od=(k,I,q)=>{let me;const xe=I.parentNode;if(!Ia(k,I)||!Ia(k,q))return;zr(q.lastChild)&&(me=q.lastChild),xe===q.lastChild&&ji(xe.previousSibling)&&k.remove(xe.previousSibling);const mt=q.lastChild;mt&&ji(mt)&&I.hasChildNodes()&&k.remove(mt),Da(k,q,!0)&&qe(Se.fromDom(q)),tc(k,I,q),me&&q.appendChild(me);const Jn=Zt(Se.fromDom(q),Se.fromDom(I))?k.getParents(I,zr,q):[];k.remove(I),ve(Jn,Dn=>{Da(k,Dn)&&Dn!==k.getRoot()&&k.remove(Dn)})},Hh=(k,I,q)=>{qe(Se.fromDom(q)),od(k.dom,I,q),k.selection.setCursorLocation(q,0)},Ur=(k,I,q,me)=>{const xe=k.dom;if(xe.isEmpty(me))Hh(k,q,me);else{const mt=ro(I);od(xe,q,me),k.selection.setRng(Rr(mt))}},mn=(k,I,q,me)=>{const xe=ro(I);od(k.dom,q,me);const mt=Rr(xe);k.selection.setRng(mt)},Wl=(k,I)=>{const q=k.dom,me=k.selection,xe=me.getStart(),mt=pn(k,xe),kn=q.getParent(me.getStart(),"LI",mt);if(kn){const Jn=kn.parentElement;if(Jn===k.getBody()&&Da(q,Jn))return!0;const Dn=he(me.getRng()),An=q.getParent(nd(k,Dn,I,mt),"LI",mt),Rs=An&&(I?q.isChildOf(kn,An):q.isChildOf(An,kn));if(An&&An!==kn&&!Rs)return k.undoManager.transact(()=>{I?Ur(k,Dn,An,kn):Uo(kn)?yu(k):mn(k,Dn,kn,An)}),!0;if(Rs&&!I&&An!==kn)return k.undoManager.transact(()=>{if(Dn.commonAncestorContainer.parentElement){const xr=ro(Dn),oc=Dn.commonAncestorContainer.parentElement;tc(q,Dn.commonAncestorContainer.parentElement,An),oc.remove();const jl=Rr(xr);k.selection.setRng(jl)}}),!0;if(!An&&!I&&Dn.startOffset===0&&Dn.endOffset===0)return k.undoManager.transact(()=>{vm(k)}),!0}return!1},wm=(k,I,q)=>{const me=k.getParent(I.parentNode,k.isBlock,q);k.remove(I),me&&k.isEmpty(me)&&k.remove(me)},pa=(k,I)=>{const q=k.dom,me=k.selection.getStart(),xe=pn(k,me),mt=q.getParent(me,q.isBlock,xe);if(mt&&q.isEmpty(mt,void 0,{checkRootAsContent:!0})){const kn=he(k.selection.getRng()),Jn=q.getParent(nd(k,kn,I,xe),"LI",xe);if(Jn){const Dn=oc=>Bn(["td","th","caption"],qr(oc)),An=oc=>oc.dom===xe,Rs=Qa(Se.fromDom(Jn),Dn,An),xr=Qa(Se.fromDom(kn.startContainer),Dn,An);return tt(Rs,xr,To)?(k.undoManager.transact(()=>{const oc=Jn.parentNode;wm(q,mt,xe),Hd(q,oc),k.selection.select(Jn,!0),k.selection.collapse(I)}),!0):!1}}return!1},ts=(k,I)=>Wl(k,I)||pa(k,I),Su=k=>{const I=k.selection.getStart(),q=pn(k,I);return k.dom.getParent(I,"LI,DT,DD",q)||qt(k).length>0},Vh=k=>Su(k)?(k.undoManager.transact(()=>{k.execCommand("Delete"),zd(k.dom,k.getBody())}),!0):!1,Wd=(k,I)=>{const q=k.selection;return!ha(k,q.getNode())&&(q.isCollapsed()?ts(k,I):Vh(k))},Zg=k=>{k.on("ExecCommand",I=>{const q=I.command.toLowerCase();(q==="delete"||q==="forwarddelete")&&Su(k)&&zd(k.dom,k.getBody())}),k.on("keydown",I=>{I.keyCode===or.BACKSPACE?Wd(k,!1)&&I.preventDefault():I.keyCode===or.DELETE&&Wd(k,!0)&&I.preventDefault()})},Yn=k=>({backspaceDelete:I=>{Wd(k,I)}}),Wr=(k,I)=>{const q=St(k);q===null||ha(k,q)||k.undoManager.transact(()=>{K(I.styles)&&k.dom.setStyles(q,I.styles),K(I.attrs)&&Xs(I.attrs,(me,xe)=>k.dom.setAttrib(q,xe,me))})},sd=k=>{const I=sn(ed(k).split("")),q=Fe(I,(me,xe)=>{const mt=me.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,xe)*mt});return Pe(q,(me,xe)=>me+xe,0)},Ra=k=>{if(k--,k<0)return"";{const I=k%26,q=Math.floor(k/26),me=Ra(q),xe=String.fromCharCode(65+I);return me+xe}},vi=k=>/^[A-Z]+$/.test(k),nc=k=>/^[a-z]+$/.test(k),aa=k=>/^[0-9]+$/.test(k),ii=k=>aa(k)?2:vi(k)?0:nc(k)?1:ml(k)?3:4,qi=k=>{switch(ii(k)){case 2:return Ke.some({listStyleType:Ke.none(),start:k});case 0:return Ke.some({listStyleType:Ke.some("upper-alpha"),start:sd(k).toString()});case 1:return Ke.some({listStyleType:Ke.some("lower-alpha"),start:sd(k).toString()});case 3:return Ke.some({listStyleType:Ke.none(),start:""});case 4:return Ke.none()}},Cm=k=>{const I=parseInt(k.start,10);return os(k.listStyleType,"upper-alpha")?Ra(I):os(k.listStyleType,"lower-alpha")?Ra(I).toLowerCase():k.start},rr=k=>{const I=St(k);!ei(I)||ha(k,I)||k.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Cm({start:k.dom.getAttrib(I,"start","1"),listStyleType:Ke.from(k.dom.getStyle(I,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:q=>{const me=q.getData();qi(me.start).each(xe=>{k.execCommand("mceListUpdate",!1,{attrs:{start:xe.start==="1"?"":xe.start},styles:{"list-style-type":xe.listStyleType.getOr("")}})}),q.close()}})},rd=(k,I)=>()=>{const q=St(k);return de(q)&&q.nodeName===I},dr=k=>{k.addCommand("mceListProps",()=>{rr(k)})},xu=k=>{k.on("BeforeExecCommand",I=>{const q=I.command.toLowerCase();q==="indent"?bm(k):q==="outdent"&&yu(k)}),k.addCommand("InsertUnorderedList",(I,q)=>{$h(k,"UL",q)}),k.addCommand("InsertOrderedList",(I,q)=>{$h(k,"OL",q)}),k.addCommand("InsertDefinitionList",(I,q)=>{$h(k,"DL",q)}),k.addCommand("RemoveList",()=>{vm(k)}),dr(k),k.addCommand("mceListUpdate",(I,q)=>{K(q)&&Wr(k,q)}),k.addQueryStateHandler("InsertUnorderedList",rd(k,"UL")),k.addQueryStateHandler("InsertOrderedList",rd(k,"OL")),k.addQueryStateHandler("InsertDefinitionList",rd(k,"DL"))};var ad=tinymce.util.Tools.resolve("tinymce.html.Node");const gs=k=>k.type===3,_c=k=>k.length===0,jg=k=>{const I=(xe,mt)=>{const kn=ad.create("li");ve(xe,Jn=>kn.append(Jn)),mt?k.insert(kn,mt,!0):k.append(kn)},q=(xe,mt)=>gs(mt)?[...xe,mt]:!_c(xe)&&!gs(mt)?(I(xe,mt),[]):xe,me=Pe(k.children(),q,[]);_c(me)||I(me)},Zl=k=>{k.on("PreInit",()=>{const{parser:I}=k;I.addNodeFilter("ul,ol",q=>ve(q,jg))})},Ds=k=>{k.on("keydown",I=>{I.keyCode!==or.TAB||or.metaKeyPressed(I)||k.undoManager.transact(()=>{(I.shiftKey?yu(k):bm(k))&&I.preventDefault()})})},Eu=k=>{uu(k)&&Ds(k),Zg(k)},Pi=(k,I)=>q=>{const me=xe=>{q.setActive(rs(xe.parents,I)),q.setEnabled(!ha(k,xe.element)&&k.selection.isEditable())};return q.setEnabled(k.selection.isEditable()),ni(k,me)},co=k=>{const I=q=>()=>k.execCommand(q);k.hasPlugin("advlist")||(k.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:I("InsertOrderedList"),onSetup:Pi(k,"OL")}),k.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:I("InsertUnorderedList"),onSetup:Pi(k,"UL")}))},id=(k,I)=>q=>ni(k,xe=>q.setEnabled(rs(xe.parents,I)&&!ha(k,xe.element))),Rf=k=>{const I={text:"List properties...",icon:"ordered-list",onAction:()=>k.execCommand("mceListProps"),onSetup:id(k,"OL")};k.ui.registry.addMenuItem("listprops",I),k.ui.registry.addContextMenu("lists",{update:q=>{const me=St(k,q);return ei(me)?["listprops"]:[]}})};var Sm=()=>{p.add("lists",k=>(Mi(k),Zl(k),k.hasPlugin("rtc",!0)?dr(k):(Eu(k),xu(k)),co(k),Rf(k),Yn(k)))};Sm()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=Object.getPrototypeOf,w=(H,oe,ye)=>{var Ie;return ye(H,oe.prototype)?!0:((Ie=H.constructor)===null||Ie===void 0?void 0:Ie.name)===oe.name},E=H=>{const oe=typeof H;return H===null?"null":oe==="object"&&Array.isArray(H)?"array":oe==="object"&&w(H,String,(ye,Ie)=>Ie.isPrototypeOf(ye))?"string":oe},M=H=>oe=>E(oe)===H,z=H=>oe=>typeof oe===H,K=H=>oe=>H===oe,Z=(H,oe)=>Ee(H)&&w(H,oe,(ye,Ie)=>g(ye)===Ie),ie=M("string"),Ee=M("object"),de=H=>Z(H,Object),Ye=M("array"),Ut=K(null),Lt=z("boolean"),Mt=H=>H==null,Ct=H=>!Mt(H),Xe=z("function"),dn=z("number"),Nt=(H,oe)=>{if(Ye(H)){for(let ye=0,Ie=H.length;ye<Ie;++ye)if(!oe(H[ye]))return!1;return!0}return!1},ce=()=>{};class Ke{constructor(oe,ye){this.tag=oe,this.value=ye}static some(oe){return new Ke(!0,oe)}static none(){return Ke.singletonNone}fold(oe,ye){return this.tag?ye(this.value):oe()}isSome(){return this.tag}isNone(){return!this.tag}map(oe){return this.tag?Ke.some(oe(this.value)):Ke.none()}bind(oe){return this.tag?oe(this.value):Ke.none()}exists(oe){return this.tag&&oe(this.value)}forall(oe){return!this.tag||oe(this.value)}filter(oe){return!this.tag||oe(this.value)?this:Ke.none()}getOr(oe){return this.tag?this.value:oe}or(oe){return this.tag?this:oe}getOrThunk(oe){return this.tag?this.value:oe()}orThunk(oe){return this.tag?this:oe()}getOrDie(oe){if(this.tag)return this.value;throw new Error(oe??"Called getOrDie on None")}static from(oe){return Ct(oe)?Ke.some(oe):Ke.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(oe){this.tag&&oe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ke.singletonNone=new Ke(!1);const Kn=Object.keys,jt=Object.hasOwnProperty,ne=(H,oe)=>{const ye=Kn(H);for(let Ie=0,lt=ye.length;Ie<lt;Ie++){const qn=ye[Ie],Ss=H[qn];oe(Ss,qn)}},Jt=H=>(oe,ye)=>{H[ye]=oe},Bn=(H,oe,ye,Ie)=>{ne(H,(lt,qn)=>{(oe(lt,qn)?ye:Ie)(lt,qn)})},Qt=(H,oe)=>{const ye={};return Bn(H,oe,Jt(ye),ce),ye},Fe=(H,oe)=>jt.call(H,oe),ve=(H,oe)=>Fe(H,oe)&&H[oe]!==void 0&&H[oe]!==null,so=Array.prototype.push,Me=H=>{const oe=[];for(let ye=0,Ie=H.length;ye<Ie;++ye){if(!Ye(H[ye]))throw new Error("Arr.flatten item "+ye+" was not an array, input: "+H);so.apply(oe,H[ye])}return oe},Pe=(H,oe)=>oe>=0&&oe<H.length?Ke.some(H[oe]):Ke.none(),N=H=>Pe(H,0),an=(H,oe)=>{for(let ye=0;ye<H.length;ye++){const Ie=oe(H[ye],ye);if(Ie.isSome())return Ie}return Ke.none()};typeof window<"u"||Function("return this;")();const ct=(H,oe,ye)=>{if(ie(ye)||Lt(ye)||dn(ye))H.setAttribute(oe,ye+"");else throw console.error("Invalid call to Attribute.set. Key ",oe,":: Value ",ye,":: Element ",H),new Error("Attribute value was not simple")},$n=(H,oe,ye)=>{ct(H.dom,oe,ye)},sn=(H,oe)=>{H.dom.removeAttribute(oe)},nt=(H,oe)=>{const Ie=(oe||document).createElement("div");if(Ie.innerHTML=H,!Ie.hasChildNodes()||Ie.childNodes.length>1){const lt="HTML does not have a single root node";throw console.error(lt,H),new Error(lt)}return to(Ie.childNodes[0])},eo=(H,oe)=>{const Ie=(oe||document).createElement(H);return to(Ie)},ms=(H,oe)=>{const Ie=(oe||document).createTextNode(H);return to(Ie)},to=H=>{if(H==null)throw new Error("Node cannot be null or undefined");return{dom:H}},tt={fromHtml:nt,fromTag:eo,fromText:ms,fromDom:to,fromPoint:(H,oe,ye)=>Ke.from(H.dom.elementFromPoint(oe,ye)).map(to)};var yt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),W=tinymce.util.Tools.resolve("tinymce.util.URI");const ta=H=>H.length>0,uo=H=>oe=>oe.options.get(H),qo=H=>{const oe=H.options.register;oe("image_dimensions",{processor:"boolean",default:!0}),oe("image_advtab",{processor:"boolean",default:!1}),oe("image_uploadtab",{processor:"boolean",default:!0}),oe("image_prepend_url",{processor:"string",default:""}),oe("image_class_list",{processor:"object[]"}),oe("image_description",{processor:"boolean",default:!0}),oe("image_title",{processor:"boolean",default:!1}),oe("image_caption",{processor:"boolean",default:!1}),oe("image_list",{processor:ye=>{const Ie=ye===!1||ie(ye)||Nt(ye,Ee)||Xe(ye);return Ie?{value:ye,valid:Ie}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},Ho=uo("image_dimensions"),Wi=uo("image_advtab"),et=uo("image_uploadtab"),Tt=uo("image_prepend_url"),dt=uo("image_class_list"),Se=uo("image_description"),_o=uo("image_title"),To=uo("image_caption"),Zt=uo("image_list"),ss=uo("a11y_advanced_options"),Mo=uo("automatic_uploads"),$r=H=>ta(H.options.get("images_upload_url")),Po=H=>Ct(H.options.get("images_upload_handler")),Is=(H,oe)=>Math.max(parseInt(H,10),parseInt(oe,10)),Xa=H=>new Promise(oe=>{const ye=document.createElement("img"),Ie=qn=>{ye.onload=ye.onerror=null,ye.parentNode&&ye.parentNode.removeChild(ye),oe(qn)};ye.onload=()=>{const qn=Is(ye.width,ye.clientWidth),Ss=Is(ye.height,ye.clientHeight),rs={width:qn,height:Ss};Ie(Promise.resolve(rs))},ye.onerror=()=>{Ie(Promise.reject(`Failed to get image dimensions for: ${H}`))};const lt=ye.style;lt.visibility="hidden",lt.position="fixed",lt.bottom=lt.left="0px",lt.width=lt.height="auto",document.body.appendChild(ye),ye.src=H}),ws=H=>(H&&(H=H.replace(/px$/,"")),H),bs=H=>(H.length>0&&/^[0-9]+$/.test(H)&&(H+="px"),H),vs=H=>{if(H.margin){const oe=String(H.margin).split(" ");switch(oe.length){case 1:H["margin-top"]=H["margin-top"]||oe[0],H["margin-right"]=H["margin-right"]||oe[0],H["margin-bottom"]=H["margin-bottom"]||oe[0],H["margin-left"]=H["margin-left"]||oe[0];break;case 2:H["margin-top"]=H["margin-top"]||oe[0],H["margin-right"]=H["margin-right"]||oe[1],H["margin-bottom"]=H["margin-bottom"]||oe[0],H["margin-left"]=H["margin-left"]||oe[1];break;case 3:H["margin-top"]=H["margin-top"]||oe[0],H["margin-right"]=H["margin-right"]||oe[1],H["margin-bottom"]=H["margin-bottom"]||oe[2],H["margin-left"]=H["margin-left"]||oe[1];break;case 4:H["margin-top"]=H["margin-top"]||oe[0],H["margin-right"]=H["margin-right"]||oe[1],H["margin-bottom"]=H["margin-bottom"]||oe[2],H["margin-left"]=H["margin-left"]||oe[3]}delete H.margin}return H},qr=(H,oe)=>{const ye=Zt(H);ie(ye)?fetch(ye).then(Ie=>{Ie.ok&&Ie.json().then(oe)}):Xe(ye)?ye(oe):oe(ye)},Cs=(H,oe,ye)=>{const Ie=()=>{ye.onload=ye.onerror=null,H.selection&&(H.selection.select(ye),H.nodeChanged())};ye.onload=()=>{!oe.width&&!oe.height&&Ho(H)&&H.dom.setAttribs(ye,{width:String(ye.clientWidth),height:String(ye.clientHeight)}),Ie()},ye.onerror=Ie},Vo=H=>new Promise((oe,ye)=>{const Ie=new FileReader;Ie.onload=()=>{oe(Ie.result)},Ie.onerror=()=>{var lt;ye((lt=Ie.error)===null||lt===void 0?void 0:lt.message)},Ie.readAsDataURL(H)}),vc=H=>H.nodeName==="IMG"&&(H.hasAttribute("data-mce-object")||H.hasAttribute("data-mce-placeholder")),fo=(H,oe)=>{const ye=H.options.get;return W.isDomSafe(oe,"img",{allow_html_data_urls:ye("allow_html_data_urls"),allow_script_urls:ye("allow_script_urls"),allow_svg_data_urls:ye("allow_svg_data_urls")})},cs=yt.DOM,_r=H=>H.style.marginLeft&&H.style.marginRight&&H.style.marginLeft===H.style.marginRight?ws(H.style.marginLeft):"",Oi=H=>H.style.marginTop&&H.style.marginBottom&&H.style.marginTop===H.style.marginBottom?ws(H.style.marginTop):"",Zi=H=>H.style.borderWidth?ws(H.style.borderWidth):"",Go=(H,oe)=>{var ye;return H.hasAttribute(oe)&&(ye=H.getAttribute(oe))!==null&&ye!==void 0?ye:""},Vc=H=>H.parentNode!==null&&H.parentNode.nodeName==="FIGURE",kt=(H,oe,ye)=>{ye===""||ye===null?H.removeAttribute(oe):H.setAttribute(oe,ye)},po=H=>{const oe=cs.create("figure",{class:"image"});cs.insertAfter(oe,H),oe.appendChild(H),oe.appendChild(cs.create("figcaption",{contentEditable:"true"},"Caption")),oe.contentEditable="false"},Hr=H=>{const oe=H.parentNode;Ct(oe)&&(cs.insertAfter(H,oe),cs.remove(oe))},Vr=H=>{Vc(H)?Hr(H):po(H)},Ba=(H,oe)=>{const ye=H.getAttribute("style"),Ie=oe(ye!==null?ye:"");Ie.length>0?(H.setAttribute("style",Ie),H.setAttribute("data-mce-style",Ie)):H.removeAttribute("style")},Ja=(H,oe)=>(ye,Ie,lt)=>{const qn=ye.style;qn[Ie]?(qn[Ie]=bs(lt),Ba(ye,oe)):kt(ye,Ie,lt)},Wo=(H,oe)=>H.style[oe]?ws(H.style[oe]):Go(H,oe),hi=(H,oe)=>{const ye=bs(oe);H.style.marginLeft=ye,H.style.marginRight=ye},Di=(H,oe)=>{const ye=bs(oe);H.style.marginTop=ye,H.style.marginBottom=ye},zo=(H,oe)=>{const ye=bs(oe);H.style.borderWidth=ye},Sn=(H,oe)=>{H.style.borderStyle=oe},Ys=H=>{var oe;return(oe=H.style.borderStyle)!==null&&oe!==void 0?oe:""},Qa=H=>Ct(H)&&H.nodeName==="FIGURE",ul=H=>H.nodeName==="IMG",dl=H=>cs.getAttrib(H,"alt").length===0&&cs.getAttrib(H,"role")==="presentation",hs=H=>dl(H)?"":Go(H,"alt"),pr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Zs=(H,oe)=>{var ye;const Ie=document.createElement("img");return kt(Ie,"style",oe.style),(_r(Ie)||oe.hspace!=="")&&hi(Ie,oe.hspace),(Oi(Ie)||oe.vspace!=="")&&Di(Ie,oe.vspace),(Zi(Ie)||oe.border!=="")&&zo(Ie,oe.border),(Ys(Ie)||oe.borderStyle!=="")&&Sn(Ie,oe.borderStyle),H((ye=Ie.getAttribute("style"))!==null&&ye!==void 0?ye:"")},Ta=(H,oe)=>{const ye=document.createElement("img");if(qe(H,{...oe,caption:!1},ye),pe(ye,oe.alt,oe.isDecorative),oe.caption){const Ie=cs.create("figure",{class:"image"});return Ie.appendChild(ye),Ie.appendChild(cs.create("figcaption",{contentEditable:"true"},"Caption")),Ie.contentEditable="false",Ie}else return ye},yc=(H,oe)=>({src:Go(oe,"src"),alt:hs(oe),title:Go(oe,"title"),width:Wo(oe,"width"),height:Wo(oe,"height"),class:Go(oe,"class"),style:H(Go(oe,"style")),caption:Vc(oe),hspace:_r(oe),vspace:Oi(oe),border:Zi(oe),borderStyle:Ys(oe),isDecorative:dl(oe)}),Tr=(H,oe,ye,Ie,lt)=>{ye[Ie]!==oe[Ie]&&lt(H,Ie,String(ye[Ie]))},pe=(H,oe,ye)=>{if(ye){cs.setAttrib(H,"role","presentation");const Ie=tt.fromDom(H);$n(Ie,"alt","")}else{if(Ut(oe)){const Ie=tt.fromDom(H);sn(Ie,"alt")}else{const Ie=tt.fromDom(H);$n(Ie,"alt",oe)}cs.getAttrib(H,"role")==="presentation"&&cs.setAttrib(H,"role","")}},fe=(H,oe,ye)=>{(ye.alt!==oe.alt||ye.isDecorative!==oe.isDecorative)&&pe(H,ye.alt,ye.isDecorative)},He=(H,oe)=>(ye,Ie,lt)=>{H(ye,lt),Ba(ye,oe)},qe=(H,oe,ye)=>{const Ie=yc(H,ye);Tr(ye,Ie,oe,"caption",(lt,qn,Ss)=>Vr(lt)),Tr(ye,Ie,oe,"src",kt),Tr(ye,Ie,oe,"title",kt),Tr(ye,Ie,oe,"width",Ja("width",H)),Tr(ye,Ie,oe,"height",Ja("height",H)),Tr(ye,Ie,oe,"class",kt),Tr(ye,Ie,oe,"style",He((lt,qn)=>kt(lt,"style",qn),H)),Tr(ye,Ie,oe,"hspace",He(hi,H)),Tr(ye,Ie,oe,"vspace",He(Di,H)),Tr(ye,Ie,oe,"border",He(zo,H)),Tr(ye,Ie,oe,"borderStyle",He(Sn,H)),fe(ye,Ie,oe)},gn=(H,oe)=>{const ye=H.dom.styles.parse(oe),Ie=vs(ye),lt=H.dom.styles.parse(H.dom.styles.serialize(Ie));return H.dom.styles.serialize(lt)},Nn=H=>{const oe=H.selection.getNode(),ye=H.dom.getParent(oe,"figure.image");return ye?H.dom.select("img",ye)[0]:oe&&(oe.nodeName!=="IMG"||vc(oe))?null:oe},Un=(H,oe)=>{var ye;const Ie=H.dom,lt=Qt(H.schema.getTextBlockElements(),(Ss,rs)=>!H.schema.isValidChild(rs,"figure")),qn=Ie.getParent(oe.parentNode,Ss=>ve(lt,Ss.nodeName),H.getBody());return qn&&(ye=Ie.split(qn,oe))!==null&&ye!==void 0?ye:oe},or=H=>{const oe=Nn(H);return oe?yc(ye=>gn(H,ye),oe):pr()},_e=(H,oe)=>{const ye=Ta(lt=>gn(H,lt),oe);H.dom.setAttrib(ye,"data-mce-id","__mcenew"),H.focus(),H.selection.setContent(ye.outerHTML);const Ie=H.dom.select('*[data-mce-id="__mcenew"]')[0];if(H.dom.setAttrib(Ie,"data-mce-id",null),Qa(Ie)){const lt=Un(H,Ie);H.selection.select(lt)}else H.selection.select(Ie)},Wn=(H,oe)=>{H.dom.setAttrib(oe,"src",oe.getAttribute("src"))},Xs=(H,oe)=>{if(oe){const ye=H.dom.is(oe.parentNode,"figure.image")?oe.parentNode:oe;H.dom.remove(ye),H.focus(),H.nodeChanged(),H.dom.isEmpty(H.getBody())&&(H.setContent(""),H.selection.setCursorLocation())}},ur=(H,oe)=>{const ye=Nn(H);if(ye)if(qe(Ie=>gn(H,Ie),oe,ye),Wn(H,ye),Qa(ye.parentNode)){const Ie=ye.parentNode;Un(H,Ie),H.selection.select(ye.parentNode)}else H.selection.select(ye),Cs(H,oe,ye)},ka=(H,oe)=>{const ye=oe.src;return{...oe,src:fo(H,ye)?ye:""}},Zo=(H,oe)=>{const ye=Nn(H);if(ye){const lt={...yc(Ss=>gn(H,Ss),ye),...oe},qn=ka(H,lt);lt.src?ur(H,qn):Xs(H,ye)}else oe.src&&_e(H,{...pr(),...oe})},Aa=(H=>(...oe)=>{if(oe.length===0)throw new Error("Can't merge zero objects");const ye={};for(let Ie=0;Ie<oe.length;Ie++){const lt=oe[Ie];for(const qn in lt)Fe(lt,qn)&&(ye[qn]=H(ye[qn],lt[qn]))}return ye})((H,oe)=>de(H)&&de(oe)?Aa(H,oe):oe);var Ps=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Ko=tinymce.util.Tools.resolve("tinymce.util.Tools");const es=H=>ie(H.value)?H.value:"",na=H=>ie(H.text)?H.text:ie(H.title)?H.title:"",oa=(H,oe)=>{const ye=[];return Ko.each(H,Ie=>{const lt=na(Ie);if(Ie.menu!==void 0){const qn=oa(Ie.menu,oe);ye.push({text:lt,items:qn})}else{const qn=oe(Ie);ye.push({text:lt,value:qn})}}),ye},kr=(H=es)=>oe=>oe?Ke.from(oe).map(ye=>oa(ye,H)):Ke.none(),Ji=H=>kr(es)(H),Ri=H=>Fe(H,"items"),xo=(H,oe)=>an(H,ye=>Ri(ye)?xo(ye.items,oe):ye.value===oe?Ke.some(ye):Ke.none()),zr={sanitizer:kr,sanitize:Ji,findEntry:(H,oe)=>H.bind(ye=>xo(ye,oe))},ei={makeTab:H=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Ar=H=>{const oe=zr.sanitizer(xs=>H.convertURL(xs.value||xs.url||"","src")),ye=new Promise(xs=>{qr(H,ml=>{xs(oe(ml).map(gm=>Me([[{text:"None",value:""}],gm])))})}),Ie=zr.sanitize(dt(H)),lt=Wi(H),qn=et(H),Ss=$r(H),rs=Po(H),vt=or(H),Os=Se(H),ha=_o(H),ni=Ho(H),Xn=To(H),oi=ss(H),lr=Mo(H),ed=Ke.some(Tt(H)).filter(xs=>ie(xs)&&xs.length>0);return ye.then(xs=>({image:vt,imageList:xs,classList:Ie,hasAdvTab:lt,hasUploadTab:qn,hasUploadUrl:Ss,hasUploadHandler:rs,hasDescription:Os,hasImageTitle:ha,hasDimensions:ni,hasImageCaption:Xn,prependURL:ed,hasAccessibilityOptions:oi,automaticUploads:lr}))},Ls=H=>{const oe={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},ye=H.imageList.map(ha=>({name:"images",type:"listbox",label:"Image list",items:ha})),Ie={name:"alt",type:"input",label:"Alternative description",enabled:!(H.hasAccessibilityOptions&&H.image.isDecorative)},lt={name:"title",type:"input",label:"Image title"},qn={name:"dimensions",type:"sizeinput"},Ss={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},rs=H.classList.map(ha=>({name:"classes",type:"listbox",label:"Class",items:ha})),vt={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Os=ha=>ha?{type:"grid",columns:2}:{type:"panel"};return Me([[oe],ye.toArray(),H.hasAccessibilityOptions&&H.hasDescription?[Ss]:[],H.hasDescription?[Ie]:[],H.hasImageTitle?[lt]:[],H.hasDimensions?[qn]:[],[{...Os(H.classList.isSome()&&H.hasImageCaption),items:Me([rs.toArray(),H.hasImageCaption?[vt]:[]])}]])},ji={makeTab:H=>({title:"General",name:"general",items:Ls(H)}),makeItems:Ls},Oa={makeTab:H=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},ma=H=>({prevImage:zr.findEntry(H.imageList,H.image.src),prevAlt:H.image.alt,open:!0}),br=H=>({src:{value:H.src,meta:{}},images:H.src,alt:H.alt,title:H.title,dimensions:{width:H.width,height:H.height},classes:H.class,caption:H.caption,style:H.style,vspace:H.vspace,border:H.border,hspace:H.hspace,borderstyle:H.borderStyle,fileinput:[],isDecorative:H.isDecorative}),$l=(H,oe)=>({src:H.src.value,alt:(H.alt===null||H.alt.length===0)&&oe?null:H.alt,title:H.title,width:H.dimensions.width,height:H.dimensions.height,class:H.classes,style:H.style,caption:H.caption,hspace:H.hspace,vspace:H.vspace,border:H.border,borderStyle:H.borderstyle,isDecorative:H.isDecorative}),Da=(H,oe)=>/^(?:[a-zA-Z]+:)?\/\//.test(oe)?Ke.none():H.prependURL.bind(ye=>oe.substring(0,ye.length)!==ye?Ke.some(ye+oe):Ke.none()),Ia=(H,oe)=>{const ye=oe.getData();Da(H,ye.src.value).each(Ie=>{oe.setData({src:{value:Ie,meta:ye.src.meta}})})},ec=(H,oe,ye)=>{H.hasDescription&&ie(ye.alt)&&(oe.alt=ye.alt),H.hasAccessibilityOptions&&(oe.isDecorative=ye.isDecorative||oe.isDecorative||!1),H.hasImageTitle&&ie(ye.title)&&(oe.title=ye.title),H.hasDimensions&&(ie(ye.width)&&(oe.dimensions.width=ye.width),ie(ye.height)&&(oe.dimensions.height=ye.height)),ie(ye.class)&&zr.findEntry(H.classList,ye.class).each(Ie=>{oe.classes=Ie.value}),H.hasImageCaption&&Lt(ye.caption)&&(oe.caption=ye.caption),H.hasAdvTab&&(ie(ye.style)&&(oe.style=ye.style),ie(ye.vspace)&&(oe.vspace=ye.vspace),ie(ye.border)&&(oe.border=ye.border),ie(ye.hspace)&&(oe.hspace=ye.hspace),ie(ye.borderstyle)&&(oe.borderstyle=ye.borderstyle))},Mi=(H,oe)=>{const ye=oe.getData(),Ie=ye.src.meta;if(Ie!==void 0){const lt=Aa({},ye);ec(H,lt,Ie),oe.setData(lt)}},uu=(H,oe,ye,Ie)=>{const lt=Ie.getData(),qn=lt.src.value,Ss=lt.src.meta||{};!Ss.width&&!Ss.height&&oe.hasDimensions&&(ta(qn)?H.imageSize(qn).then(rs=>{ye.open&&Ie.setData({dimensions:rs})}).catch(rs=>console.error(rs)):Ie.setData({dimensions:{width:"",height:""}}))},fl=(H,oe,ye)=>{const Ie=ye.getData(),lt=zr.findEntry(H.imageList,Ie.src.value);oe.prevImage=lt,ye.setData({images:lt.map(qn=>qn.value).getOr("")})},Uc=(H,oe,ye,Ie)=>{Ia(oe,Ie),Mi(oe,Ie),uu(H,oe,ye,Ie),fl(oe,ye,Ie)},ti=(H,oe,ye,Ie)=>{const lt=Ie.getData(),qn=zr.findEntry(oe.imageList,lt.images);qn.each(Ss=>{lt.alt===""||ye.prevImage.map(vt=>vt.text===lt.alt).getOr(!1)?Ss.value===""?Ie.setData({src:Ss,alt:ye.prevAlt}):Ie.setData({src:Ss,alt:Ss.text}):Ie.setData({src:Ss})}),ye.prevImage=qn,Uc(H,oe,ye,Ie)},Or=(H,oe,ye,Ie)=>{const lt=Ie.getData();Ie.block("Uploading image"),N(lt.fileinput).fold(()=>{Ie.unblock()},qn=>{const Ss=URL.createObjectURL(qn),rs=()=>{Ie.unblock(),URL.revokeObjectURL(Ss)},vt=Os=>{Ie.setData({src:{value:Os,meta:{}}}),Ie.showTab("general"),Uc(H,oe,ye,Ie),Ie.focus("src")};Vo(qn).then(Os=>{const ha=H.createBlobCache(qn,Ss,Os);oe.automaticUploads?H.uploadImage(ha).then(ni=>{vt(ni.url),rs()}).catch(ni=>{rs(),H.alertErr(ni)}):(H.addToBlobCache(ha),vt(ha.blobUri()),Ie.unblock())})})},du=(H,oe,ye)=>(Ie,lt)=>{lt.name==="src"?Uc(H,oe,ye,Ie):lt.name==="images"?ti(H,oe,ye,Ie):lt.name==="alt"?ye.prevAlt=Ie.getData().alt:lt.name==="fileinput"?Or(H,oe,ye,Ie):lt.name==="isDecorative"&&Ie.setEnabled("alt",!Ie.getData().isDecorative)},fu=H=>()=>{H.open=!1},mu=H=>H.hasAdvTab||H.hasUploadUrl||H.hasUploadHandler?{type:"tabpanel",tabs:Me([[ji.makeTab(H)],H.hasAdvTab?[ei.makeTab(H)]:[],H.hasUploadTab&&(H.hasUploadUrl||H.hasUploadHandler)?[Oa.makeTab(H)]:[]])}:{type:"panel",items:ji.makeItems(H)},hu=(H,oe,ye)=>Ie=>{const lt=Aa(br(oe.image),Ie.getData()),qn={...lt,style:Zs(ye.normalizeCss,$l(lt,!1))};H.execCommand("mceUpdateImage",!1,$l(qn,oe.hasAccessibilityOptions)),H.editorUpload.uploadImagesAuto(),Ie.close()},vr=H=>oe=>fo(H,oe)?Xa(H.documentBaseURI.toAbsolute(oe)).then(ye=>({width:String(ye.width),height:String(ye.height)})):Promise.resolve({width:"",height:""}),gi=H=>(oe,ye,Ie)=>{var lt;return H.editorUpload.blobCache.create({blob:oe,blobUri:ye,name:(lt=oe.name)===null||lt===void 0?void 0:lt.replace(/\.[^\.]+$/,""),filename:oe.name,base64:Ie.split(",")[1]})},X=H=>oe=>{H.editorUpload.blobCache.add(oe)},he=H=>oe=>{H.windowManager.alert(oe)},Re=H=>oe=>gn(H,oe),at=H=>oe=>H.dom.parseStyle(oe),St=H=>(oe,ye)=>H.dom.serializeStyle(oe,ye),en=H=>oe=>Ps(H).upload([oe],!1).then(ye=>{var Ie;return ye.length===0?Promise.reject("Failed to upload image"):ye[0].status===!1?Promise.reject((Ie=ye[0].error)===null||Ie===void 0?void 0:Ie.message):ye[0]}),io=H=>{const oe={imageSize:vr(H),addToBlobCache:X(H),createBlobCache:gi(H),alertErr:he(H),normalizeCss:Re(H),parseStyle:at(H),serializeStyle:St(H),uploadImage:en(H)};return{open:()=>{Ar(H).then(Ie=>{const lt=ma(Ie);return{title:"Insert/Edit Image",size:"normal",body:mu(Ie),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:br(Ie.image),onSubmit:hu(H,Ie,oe),onChange:du(oe,Ie,lt),onClose:fu(lt)}}).then(H.windowManager.open)}}},ls=H=>{H.addCommand("mceImage",io(H).open),H.addCommand("mceUpdateImage",(oe,ye)=>{H.undoManager.transact(()=>Zo(H,ye))})},vo=H=>{const oe=H.attr("class");return Ct(oe)&&/\bimage\b/.test(oe)},qt=H=>oe=>{let ye=oe.length;const Ie=lt=>{lt.attr("contenteditable",H?"true":null)};for(;ye--;){const lt=oe[ye];vo(lt)&&(lt.attr("contenteditable",H?"false":null),Ko.each(lt.getAll("figcaption"),Ie))}},sr=H=>{H.on("PreInit",()=>{H.parser.addNodeFilter("figure",qt(!0)),H.serializer.addNodeFilter("figure",qt(!1))})},pn=H=>oe=>{const ye=()=>{oe.setEnabled(H.selection.isEditable())};return H.on("NodeChange",ye),ye(),()=>{H.off("NodeChange",ye)}},Dr=H=>{H.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:io(H).open,onSetup:oe=>{oe.setActive(Ct(Nn(H)));const ye=H.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",oe.setActive).unbind,Ie=pn(H)(oe);return()=>{ye(),Ie()}}}),H.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:io(H).open,onSetup:pn(H)}),H.ui.registry.addContextMenu("image",{update:oe=>H.selection.isEditable()&&(Qa(oe)||ul(oe)&&!vc(oe))?["image"]:[]})};var wc=()=>{p.add("image",H=>{qo(H),sr(H),Dr(H),ls(H)})};wc()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager"),g=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),w=tinymce.util.Tools.resolve("tinymce.util.Tools");const E=Me=>Pe=>Pe.options.get(Me),M=Me=>{const Pe=Me.options.register;Pe("allow_html_in_named_anchor",{processor:"boolean",default:!1})},z=E("allow_html_in_named_anchor"),K="a:not([href])",Z=Me=>!Me,ie=Me=>Me.getAttribute("id")||Me.getAttribute("name")||"",Ee=Me=>Me.nodeName.toLowerCase()==="a",de=Me=>Ee(Me)&&!Me.getAttribute("href")&&ie(Me)!=="",Ye=Me=>de(Me)&&!Me.firstChild,Ut=Me=>{const Pe=Me.dom;g(Pe).walk(Me.selection.getRng(),N=>{w.each(N,an=>{Ye(an)&&Pe.remove(an,!1)})})},Lt=Me=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(Me),Mt=Me=>Me.dom.getParent(Me.selection.getStart(),K),Ct=Me=>{const Pe=Mt(Me);return Pe?ie(Pe):""},Xe=(Me,Pe)=>{Me.undoManager.transact(()=>{z(Me)||Me.selection.collapse(!0),Me.selection.isCollapsed()?Me.insertContent(Me.dom.createHTML("a",{id:Pe})):(Ut(Me),Me.formatter.remove("namedAnchor",void 0,void 0,!0),Me.formatter.apply("namedAnchor",{value:Pe}),Me.addVisual())})},dn=(Me,Pe,N)=>{N.removeAttribute("name"),N.id=Pe,Me.addVisual(),Me.undoManager.add()},Nt=(Me,Pe)=>{const N=Mt(Me);N?dn(Me,Pe,N):Xe(Me,Pe),Me.focus()},ce=(Me,Pe)=>Lt(Pe)?(Nt(Me,Pe),!0):(Me.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),Ke=Me=>{const Pe=Ct(Me);Me.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:Pe},onSubmit:N=>{ce(Me,N.getData().id)&&N.close()}})},Kn=Me=>{Me.addCommand("mceAnchor",()=>{Ke(Me)})},jt=Me=>Z(Me.attr("href"))&&!Z(Me.attr("id")||Me.attr("name")),ne=Me=>jt(Me)&&!Me.firstChild,Jt=Me=>Pe=>{for(let N=0;N<Pe.length;N++){const an=Pe[N];ne(an)&&an.attr("contenteditable",Me)}},Bn=Me=>{Me.on("PreInit",()=>{Me.parser.addNodeFilter("a",Jt("false")),Me.serializer.addNodeFilter("a",Jt(null))})},Qt=Me=>{Me.formatter.register("namedAnchor",{inline:"a",selector:K,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(Pe,N,an)=>de(Pe)})},Fe=Me=>Pe=>{const N=()=>{Pe.setEnabled(Me.selection.isEditable())};return Me.on("NodeChange",N),N(),()=>{Me.off("NodeChange",N)}},ve=Me=>{const Pe=()=>Me.execCommand("mceAnchor");Me.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:Pe,onSetup:N=>{const an=Me.selection.selectorChangedWithUnbind("a:not([href])",N.setActive).unbind,ct=Fe(Me)(N);return()=>{an(),ct()}}}),Me.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:Pe,onSetup:Fe(Me)})};var so=()=>{p.add("anchor",Me=>{M(Me),Bn(Me),Kn(Me),ve(Me),Me.on("PreInit",()=>{Qt(Me)})})};so()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const w=(et=>Tt=>et===Tt)(null),E=et=>et,M=(et,Tt)=>{const dt=et.length,Se=new Array(dt);for(let _o=0;_o<dt;_o++){const To=et[_o];Se[_o]=Tt(To,_o)}return Se},K={aletter:"[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]",midnumlet:"[-'\\.]",midletter:"[:]",midnum:"[+*/,;;]",numeric:"[0-9---------------------------------]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[------------------------------------------------------------------------------------------------------]",format:"[----\uFEFF-]",katakana:"[-------]",extendnumlet:"[=_--<>]",punctuation:"[~|!-*+-\\/:;?@\\[-`{};----------------------------------------------]"},Z={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},ie=[new RegExp(K.aletter),new RegExp(K.midnumlet),new RegExp(K.midletter),new RegExp(K.midnum),new RegExp(K.numeric),new RegExp(K.cr),new RegExp(K.lf),new RegExp(K.newline),new RegExp(K.extend),new RegExp(K.format),new RegExp(K.katakana),new RegExp(K.extendnumlet),new RegExp("@")],Ee="",de=new RegExp("^"+K.punctuation+"$"),Ye=/^\s+$/,Ut=ie,Lt=Z.OTHER,Mt=et=>{let Tt=Lt;const dt=Ut.length;for(let Se=0;Se<dt;++Se){const _o=Ut[Se];if(_o&&_o.test(et)){Tt=Se;break}}return Tt},Ct=et=>{const Tt={};return dt=>{if(Tt[dt])return Tt[dt];{const Se=et(dt);return Tt[dt]=Se,Se}}},Xe=et=>{const Tt=Ct(Mt);return M(et,Tt)},dn=(et,Tt)=>{const dt=et[Tt],Se=et[Tt+1];if(Tt<0||Tt>et.length-1&&Tt!==0||dt===Z.ALETTER&&Se===Z.ALETTER)return!1;const _o=et[Tt+2];if(dt===Z.ALETTER&&(Se===Z.MIDLETTER||Se===Z.MIDNUMLET||Se===Z.AT)&&_o===Z.ALETTER)return!1;const To=et[Tt-1];return(dt===Z.MIDLETTER||dt===Z.MIDNUMLET||Se===Z.AT)&&Se===Z.ALETTER&&To===Z.ALETTER||(dt===Z.NUMERIC||dt===Z.ALETTER)&&(Se===Z.NUMERIC||Se===Z.ALETTER)||(dt===Z.MIDNUM||dt===Z.MIDNUMLET)&&Se===Z.NUMERIC&&To===Z.NUMERIC||dt===Z.NUMERIC&&(Se===Z.MIDNUM||Se===Z.MIDNUMLET)&&_o===Z.NUMERIC||(dt===Z.EXTEND||dt===Z.FORMAT)&&(Se===Z.ALETTER||Se===Z.NUMERIC||Se===Z.KATAKANA||Se===Z.EXTEND||Se===Z.FORMAT)||(Se===Z.EXTEND||Se===Z.FORMAT&&(_o===Z.ALETTER||_o===Z.NUMERIC||_o===Z.KATAKANA||_o===Z.EXTEND||_o===Z.FORMAT))&&(dt===Z.ALETTER||dt===Z.NUMERIC||dt===Z.KATAKANA||dt===Z.EXTEND||dt===Z.FORMAT)||dt===Z.CR&&Se===Z.LF?!1:dt===Z.NEWLINE||dt===Z.CR||dt===Z.LF||Se===Z.NEWLINE||Se===Z.CR||Se===Z.LF?!0:!(dt===Z.KATAKANA&&Se===Z.KATAKANA||Se===Z.EXTENDNUMLET&&(dt===Z.ALETTER||dt===Z.NUMERIC||dt===Z.KATAKANA||dt===Z.EXTENDNUMLET)||dt===Z.EXTENDNUMLET&&(Se===Z.ALETTER||Se===Z.NUMERIC||Se===Z.KATAKANA)||dt===Z.AT)},Nt=Ee,ce=Ye,Ke=de,Kn=et=>et==="http"||et==="https",jt=(et,Tt)=>{let dt;for(dt=Tt;dt<et.length&&!ce.test(et[dt]);dt++);return dt},ne=(et,Tt)=>{const dt=jt(et,Tt+1);return et.slice(Tt+1,dt).join(Nt).substr(0,3)==="://"?dt:Tt},Jt=(et,Tt,dt,Se)=>{const _o=[],To=[];let Zt=[];for(let ss=0;ss<dt.length;++ss)if(Zt.push(et[ss]),dn(dt,ss)){const Mo=Tt[ss];if((Se.includeWhitespace||!ce.test(Mo))&&(Se.includePunctuation||!Ke.test(Mo))){const $r=ss-Zt.length+1,Po=ss+1,Is=Tt.slice($r,Po).join(Nt);if(Kn(Is)){const Xa=ne(Tt,ss),ws=et.slice(Po,Xa);Array.prototype.push.apply(Zt,ws),ss=Xa}Tt[ss+1]==="."&&/^([a-zA-Z]\.)+$/.test(Is+".")?(Zt.push(et[ss+1]),To.push({start:$r,end:Po+1})):To.push({start:$r,end:Po}),_o.push(Zt)}Zt=[]}return{words:_o,indices:To}},Bn=()=>({includeWhitespace:!1,includePunctuation:!1}),Qt=(et,Tt,dt)=>{dt={...Bn(),...dt};const Se=M(et,Tt),_o=Xe(Se);return Jt(et,Se,_o,dt)},ve=(et,Tt,dt)=>Qt(et,Tt,dt).words,so=et=>et.replace(/\uFEFF/g,"");var Me=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Pe=(et,Tt)=>{const dt=Tt.getBlockElements(),Se=Tt.getVoidElements(),_o=$r=>dt[$r.nodeName]||Se[$r.nodeName],To=[];let Zt="";const ss=new Me(et,et);let Mo;for(;Mo=ss.next();)Mo.nodeType===3?Zt+=so(Mo.data):_o(Mo)&&Zt.length&&(To.push(Zt),Zt="");return Zt.length&&To.push(Zt),To},N=et=>et.replace(/\u200B/g,""),an=et=>et.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,ct=(et,Tt)=>{const dt=N(Pe(et,Tt).join(`
`));return ve(dt.split(""),E).length},$n=(et,Tt)=>{const dt=Pe(et,Tt).join("");return an(dt)},sn=(et,Tt)=>{const dt=Pe(et,Tt).join("").replace(/\s/g,"");return an(dt)},nt=(et,Tt)=>()=>Tt(et.getBody(),et.schema),eo=(et,Tt)=>()=>Tt(et.selection.getRng().cloneContents(),et.schema),ms=et=>nt(et,ct),to=et=>({body:{getWordCount:ms(et),getCharacterCount:nt(et,$n),getCharacterCountWithoutSpaces:nt(et,sn)},selection:{getWordCount:eo(et,ct),getCharacterCount:eo(et,$n),getCharacterCountWithoutSpaces:eo(et,sn)},getCount:ms(et)}),os=(et,Tt)=>{et.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(Tt.body.getWordCount()),String(Tt.selection.getWordCount())],["Characters (no spaces)",String(Tt.body.getCharacterCountWithoutSpaces()),String(Tt.selection.getCharacterCountWithoutSpaces())],["Characters",String(Tt.body.getCharacterCount()),String(Tt.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},tt=(et,Tt)=>{et.addCommand("mceWordCount",()=>os(et,Tt))},yt=(et,Tt)=>{let dt=null;return{cancel:()=>{w(dt)||(clearTimeout(dt),dt=null)},throttle:(...To)=>{w(dt)&&(dt=setTimeout(()=>{dt=null,et.apply(null,To)},Tt))}}};var W=tinymce.util.Tools.resolve("tinymce.util.Delay");const ta=(et,Tt)=>{et.dispatch("wordCountUpdate",{wordCount:{words:Tt.body.getWordCount(),characters:Tt.body.getCharacterCount(),charactersWithoutSpaces:Tt.body.getCharacterCountWithoutSpaces()}})},uo=(et,Tt)=>{ta(et,Tt)},qo=(et,Tt,dt)=>{const Se=yt(()=>uo(et,Tt),dt);et.on("init",()=>{uo(et,Tt),W.setEditorTimeout(et,()=>{et.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",Se.throttle)},0),et.on("remove",Se.cancel)})},Ho=et=>{const Tt=()=>et.execCommand("mceWordCount");et.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:Tt}),et.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:Tt})};var Wi=(et=300)=>{p.add("wordcount",Tt=>{const dt=to(Tt);return tt(Tt,dt),Ho(Tt),qo(Tt,dt,et),dt})};Wi()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(pe,fe,He)=>{var qe;return He(pe,fe.prototype)?!0:((qe=pe.constructor)===null||qe===void 0?void 0:qe.name)===fe.name},w=pe=>{const fe=typeof pe;return pe===null?"null":fe==="object"&&Array.isArray(pe)?"array":fe==="object"&&g(pe,String,(He,qe)=>qe.isPrototypeOf(He))?"string":fe},E=pe=>fe=>w(fe)===pe,M=E("string"),z=E("object"),K=E("array"),Z=pe=>pe==null,ie=pe=>!Z(pe);class Ee{constructor(fe,He){this.tag=fe,this.value=He}static some(fe){return new Ee(!0,fe)}static none(){return Ee.singletonNone}fold(fe,He){return this.tag?He(this.value):fe()}isSome(){return this.tag}isNone(){return!this.tag}map(fe){return this.tag?Ee.some(fe(this.value)):Ee.none()}bind(fe){return this.tag?fe(this.value):Ee.none()}exists(fe){return this.tag&&fe(this.value)}forall(fe){return!this.tag||fe(this.value)}filter(fe){return!this.tag||fe(this.value)?this:Ee.none()}getOr(fe){return this.tag?this.value:fe}or(fe){return this.tag?this:fe}getOrThunk(fe){return this.tag?this.value:fe()}orThunk(fe){return this.tag?this:fe()}getOrDie(fe){if(this.tag)return this.value;throw new Error(fe??"Called getOrDie on None")}static from(fe){return ie(fe)?Ee.some(fe):Ee.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(fe){this.tag&&fe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ee.singletonNone=new Ee(!1);const de=Array.prototype.push,Ye=(pe,fe)=>{for(let He=0,qe=pe.length;He<qe;He++){const gn=pe[He];fe(gn,He)}},Ut=pe=>{const fe=[];for(let He=0,qe=pe.length;He<qe;++He){if(!K(pe[He]))throw new Error("Arr.flatten item "+He+" was not an array, input: "+pe);de.apply(fe,pe[He])}return fe},Lt=pe=>{let fe=pe;return{get:()=>fe,set:gn=>{fe=gn}}},Mt=Object.keys,Ct=Object.hasOwnProperty,Xe=(pe,fe)=>{const He=Mt(pe);for(let qe=0,gn=He.length;qe<gn;qe++){const Nn=He[qe],Un=pe[Nn];fe(Un,Nn)}},dn=(pe,fe)=>Nt(pe,fe)?Ee.from(pe[fe]):Ee.none(),Nt=(pe,fe)=>Ct.call(pe,fe),ce=pe=>fe=>fe.options.get(pe),Ke=pe=>{const fe=pe.options.register;fe("audio_template_callback",{processor:"function"}),fe("video_template_callback",{processor:"function"}),fe("iframe_template_callback",{processor:"function"}),fe("media_live_embeds",{processor:"boolean",default:!0}),fe("media_filter_html",{processor:"boolean",default:!0}),fe("media_url_resolver",{processor:"function"}),fe("media_alt_source",{processor:"boolean",default:!0}),fe("media_poster",{processor:"boolean",default:!0}),fe("media_dimensions",{processor:"boolean",default:!0})},Kn=ce("audio_template_callback"),jt=ce("video_template_callback"),ne=ce("iframe_template_callback"),Jt=ce("media_live_embeds"),Bn=ce("media_filter_html"),Qt=ce("media_url_resolver"),Fe=ce("media_alt_source"),ve=ce("media_poster"),so=ce("media_dimensions");var Me=tinymce.util.Tools.resolve("tinymce.util.Tools"),Pe=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),N=tinymce.util.Tools.resolve("tinymce.html.DomParser");const an=Pe.DOM,ct=pe=>pe.replace(/px$/,""),$n=pe=>{const fe=pe.attr("style"),He=fe?an.parseStyle(fe):{};return{type:"ephox-embed-iri",source:pe.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:dn(He,"max-width").map(ct).getOr(""),height:dn(He,"max-height").map(ct).getOr("")}},sn=(pe,fe)=>{let He={};const gn=N({validate:!1,forced_root_block:!1},fe).parse(pe);for(let Nn=gn;Nn;Nn=Nn.walk())if(Nn.type===1){const Un=Nn.name;if(Nn.attr("data-ephox-embed-iri")){He=$n(Nn);break}else!He.source&&Un==="param"&&(He.source=Nn.attr("movie")),(Un==="iframe"||Un==="object"||Un==="embed"||Un==="video"||Un==="audio")&&(He.type||(He.type=Un),He=Me.extend(Nn.attributes.map,He)),Un==="source"&&(He.source?He.altsource||(He.altsource=Nn.attr("src")):He.source=Nn.attr("src")),Un==="img"&&!He.poster&&(He.poster=Nn.attr("src"))}return He.source=He.source||He.src||"",He.altsource=He.altsource||"",He.poster=He.poster||"",He},nt=pe=>{var fe;const He={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},qe=(fe=pe.toLowerCase().split(".").pop())!==null&&fe!==void 0?fe:"";return dn(He,qe).getOr("")};var eo=tinymce.util.Tools.resolve("tinymce.html.Node"),ms=tinymce.util.Tools.resolve("tinymce.html.Serializer");const to=(pe,fe={})=>N({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...fe},pe),os=Pe.DOM,tt=pe=>/^[0-9.]+$/.test(pe)?pe+"px":pe,yt=(pe,fe)=>{const He=fe.attr("style"),qe=He?os.parseStyle(He):{};ie(pe.width)&&(qe["max-width"]=tt(pe.width)),ie(pe.height)&&(qe["max-height"]=tt(pe.height)),fe.attr("style",os.serializeStyle(qe))},W=["source","altsource"],ta=(pe,fe,He,qe)=>{let gn=0,Nn=0;const Un=to(qe);Un.addNodeFilter("source",_e=>gn=_e.length);const or=Un.parse(pe);for(let _e=or;_e;_e=_e.walk())if(_e.type===1){const Wn=_e.name;if(_e.attr("data-ephox-embed-iri")){yt(fe,_e);break}else{switch(Wn){case"video":case"object":case"embed":case"img":case"iframe":fe.height!==void 0&&fe.width!==void 0&&(_e.attr("width",fe.width),_e.attr("height",fe.height));break}if(He)switch(Wn){case"video":_e.attr("poster",fe.poster),_e.attr("src",null);for(let ur=gn;ur<2;ur++)if(fe[W[ur]]){const ka=new eo("source",1);ka.attr("src",fe[W[ur]]),ka.attr("type",fe[W[ur]+"mime"]||null),_e.append(ka)}break;case"iframe":_e.attr("src",fe.source);break;case"object":const Xs=_e.getAll("img").length>0;if(fe.poster&&!Xs){_e.attr("src",fe.poster);const ur=new eo("img",1);ur.attr("src",fe.poster),ur.attr("width",fe.width),ur.attr("height",fe.height),_e.append(ur)}break;case"source":if(Nn<2&&(_e.attr("src",fe[W[Nn]]),_e.attr("type",fe[W[Nn]+"mime"]||null),!fe[W[Nn]])){_e.remove();continue}Nn++;break;case"img":fe.poster||_e.remove();break}}}return ms({},qe).serialize(or)},uo=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],qo=pe=>{const fe=pe.match(/^(https?:\/\/|www\.)(.+)$/i);return fe&&fe.length>1?fe[1]==="www."?"https://":fe[1]:"https://"},Ho=(pe,fe)=>{const He=qo(fe),qe=pe.regex.exec(fe);let gn=He+pe.url;if(ie(qe))for(let Nn=0;Nn<qe.length;Nn++)gn=gn.replace("$"+Nn,()=>qe[Nn]?qe[Nn]:"");return gn.replace(/\?$/,"")},Wi=pe=>{const fe=uo.filter(He=>He.regex.test(pe));return fe.length>0?Me.extend({},fe[0],{url:Ho(fe[0],pe)}):null},et=(pe,fe)=>{if(fe)return fe(pe);{const He=pe.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+pe.source+'" width="'+pe.width+'" height="'+pe.height+'"'+He+"></iframe>"}},Tt=pe=>{let fe='<object data="'+pe.source+'" width="'+pe.width+'" height="'+pe.height+'" type="application/x-shockwave-flash">';return pe.poster&&(fe+='<img src="'+pe.poster+'" width="'+pe.width+'" height="'+pe.height+'" />'),fe+="</object>",fe},dt=(pe,fe)=>fe?fe(pe):'<audio controls="controls" src="'+pe.source+'">'+(pe.altsource?`
<source src="`+pe.altsource+'"'+(pe.altsourcemime?' type="'+pe.altsourcemime+'"':"")+` />
`:"")+"</audio>",Se=(pe,fe)=>fe?fe(pe):'<video width="'+pe.width+'" height="'+pe.height+'"'+(pe.poster?' poster="'+pe.poster+'"':"")+` controls="controls">
<source src="`+pe.source+'"'+(pe.sourcemime?' type="'+pe.sourcemime+'"':"")+` />
`+(pe.altsource?'<source src="'+pe.altsource+'"'+(pe.altsourcemime?' type="'+pe.altsourcemime+'"':"")+` />
`:"")+"</video>",_o=(pe,fe)=>{var He;const qe=Me.extend({},fe);if(!qe.source&&(Me.extend(qe,sn((He=qe.embed)!==null&&He!==void 0?He:"",pe.schema)),!qe.source))return"";qe.altsource||(qe.altsource=""),qe.poster||(qe.poster=""),qe.source=pe.convertURL(qe.source,"source"),qe.altsource=pe.convertURL(qe.altsource,"source"),qe.sourcemime=nt(qe.source),qe.altsourcemime=nt(qe.altsource),qe.poster=pe.convertURL(qe.poster,"poster");const gn=Wi(qe.source);if(gn&&(qe.source=gn.url,qe.type=gn.type,qe.allowfullscreen=gn.allowFullscreen,qe.width=qe.width||String(gn.w),qe.height=qe.height||String(gn.h)),qe.embed)return ta(qe.embed,qe,!0,pe.schema);{const Nn=Kn(pe),Un=jt(pe),or=ne(pe);return qe.width=qe.width||"300",qe.height=qe.height||"150",Me.each(qe,(_e,Wn)=>{qe[Wn]=pe.dom.encode(""+_e)}),qe.type==="iframe"?et(qe,or):qe.sourcemime==="application/x-shockwave-flash"?Tt(qe):qe.sourcemime.indexOf("audio")!==-1?dt(qe,Nn):Se(qe,Un)}},To=pe=>pe.hasAttribute("data-mce-object")||pe.hasAttribute("data-ephox-embed-iri"),Zt=pe=>{pe.on("mousedown",fe=>{const He=pe.dom.getParent(fe.target,".mce-preview-object");He&&pe.dom.getAttrib(He,"data-mce-selected")==="2"&&fe.stopImmediatePropagation()}),pe.on("click keyup touchend",()=>{const fe=pe.selection.getNode();fe&&pe.dom.hasClass(fe,"mce-preview-object")&&pe.dom.getAttrib(fe,"data-mce-selected")&&fe.setAttribute("data-mce-selected","2")}),pe.on("ObjectResized",fe=>{const He=fe.target;if(He.getAttribute("data-mce-object")){let qe=He.getAttribute("data-mce-html");qe&&(qe=unescape(qe),He.setAttribute("data-mce-html",escape(ta(qe,{width:String(fe.width),height:String(fe.height)},!1,pe.schema))))}})},ss={},Mo=(pe,fe,He)=>new Promise((qe,gn)=>{const Nn=Un=>(Un.html&&(ss[pe.source]=Un),qe({url:pe.source,html:Un.html?Un.html:fe(pe)}));ss[pe.source]?Nn(ss[pe.source]):He({url:pe.source}).then(Nn).catch(gn)}),$r=(pe,fe)=>Promise.resolve({html:fe(pe),url:pe.source}),Po=pe=>fe=>_o(pe,fe),Is=(pe,fe)=>{const He=Qt(pe);return He?Mo(fe,Po(pe),He):$r(fe,Po(pe))},Xa=pe=>Nt(ss,pe),ws=(pe,fe)=>dn(fe,pe).bind(He=>dn(He,"meta")),bs=(pe,fe,He)=>qe=>{const gn=()=>dn(pe,qe),Nn=()=>dn(fe,qe),Un=Wn=>dn(Wn,"value").bind(Xs=>Xs.length>0?Ee.some(Xs):Ee.none()),or=()=>gn().bind(Wn=>z(Wn)?Un(Wn).orThunk(Nn):Nn().orThunk(()=>Ee.from(Wn))),_e=()=>Nn().orThunk(()=>gn().bind(Wn=>z(Wn)?Un(Wn):Ee.from(Wn)));return{[qe]:(qe===He?or():_e()).getOr("")}},vs=(pe,fe)=>{const He={};return dn(pe,"dimensions").each(qe=>{Ye(["width","height"],gn=>{dn(fe,gn).orThunk(()=>dn(qe,gn)).each(Nn=>He[gn]=Nn)})}),He},qr=(pe,fe)=>{const He=fe&&fe!=="dimensions"?ws(fe,pe).getOr({}):{},qe=bs(pe,He,fe);return{...qe("source"),...qe("altsource"),...qe("poster"),...qe("embed"),...vs(pe,He)}},Cs=pe=>{const fe={...pe,source:{value:dn(pe,"source").getOr("")},altsource:{value:dn(pe,"altsource").getOr("")},poster:{value:dn(pe,"poster").getOr("")}};return Ye(["width","height"],He=>{dn(pe,He).each(qe=>{const gn=fe.dimensions||{};gn[He]=qe,fe.dimensions=gn})}),fe},Vo=pe=>fe=>{const He=fe&&fe.msg?"Media embed handler error: "+fe.msg:"Media embed handler threw unknown error.";pe.notificationManager.open({type:"error",text:He})},vc=pe=>{const fe=pe.selection.getNode(),He=To(fe)?pe.serializer.serialize(fe,{selection:!0}):"",qe=sn(He,pe.schema),Nn=(()=>{if(Oi(qe.source,qe.type)){const Un=pe.dom.getRect(fe);return{width:Un.w.toString().replace(/px$/,""),height:Un.h.toString().replace(/px$/,"")}}else return{}})();return{embed:He,...qe,...Nn}},fo=(pe,fe)=>He=>{if(M(He.url)&&He.url.trim().length>0){const qe=He.html,Nn={...sn(qe,fe.schema),source:He.url,embed:qe};pe.setData(Cs(Nn))}},cs=(pe,fe)=>{const He=pe.dom.select("*[data-mce-object]");for(let qe=0;qe<fe.length;qe++)for(let gn=He.length-1;gn>=0;gn--)fe[qe]===He[gn]&&He.splice(gn,1);pe.selection.select(He[0])},_r=(pe,fe)=>{const He=pe.dom.select("*[data-mce-object]");pe.insertContent(fe),cs(pe,He),pe.nodeChanged()},Oi=(pe,fe)=>ie(fe)&&fe==="ephox-embed-iri"&&ie(Wi(pe)),Zi=(pe,fe)=>((qe,gn)=>qe.width!==gn.width||qe.height!==gn.height)(pe,fe)&&Oi(fe.source,pe.type),Go=(pe,fe,He)=>{var qe;fe.embed=Zi(pe,fe)&&so(He)?_o(He,{...fe,embed:""}):ta((qe=fe.embed)!==null&&qe!==void 0?qe:"",fe,!1,He.schema),fe.embed&&(pe.source===fe.source||Xa(fe.source))?_r(He,fe.embed):Is(He,fe).then(gn=>{_r(He,gn.html)}).catch(Vo(He))},Vc=pe=>{const fe=vc(pe),He=Lt(fe),qe=Cs(fe),gn=(Ps,Ko)=>{const es=qr(Ko.getData(),"source");Ps.source!==es.source&&(fo(Aa,pe)({url:es.source,html:""}),Is(pe,es).then(fo(Aa,pe)).catch(Vo(pe)))},Nn=Ps=>{var Ko;const es=qr(Ps.getData()),na=sn((Ko=es.embed)!==null&&Ko!==void 0?Ko:"",pe.schema);Ps.setData(Cs(na))},Un=(Ps,Ko,es)=>{const na=qr(Ps.getData(),Ko),oa=Zi(es,na)&&so(pe)?{...na,embed:""}:na,kr=_o(pe,oa);Ps.setData(Cs({...oa,embed:kr}))},or=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],_e=so(pe)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Wn={title:"General",name:"general",items:Ut([or,_e])},ur={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},ka=[];Fe(pe)&&ka.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),ve(pe)&&ka.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const Zo={title:"Advanced",name:"advanced",items:ka},zc=[Wn,ur];ka.length>0&&zc.push(Zo);const Gr={type:"tabpanel",tabs:zc},Aa=pe.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Gr,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Ps=>{const Ko=qr(Ps.getData());Go(He.get(),Ko,pe),Ps.close()},onChange:(Ps,Ko)=>{switch(Ko.name){case"source":gn(He.get(),Ps);break;case"embed":Nn(Ps);break;case"dimensions":case"altsource":case"poster":Un(Ps,Ko.name,He.get());break}He.set(qr(Ps.getData()))},initialData:qe})},kt=pe=>({showDialog:()=>{Vc(pe)}}),po=pe=>{const fe=()=>{Vc(pe)};pe.addCommand("mceMedia",fe)},Hr=(pe,fe,He)=>pe.length>=fe.length&&pe.substr(He,He+fe.length)===fe,Vr=(pe,fe)=>Hr(pe,fe,0);var Ba=tinymce.util.Tools.resolve("tinymce.Env");const Ja=pe=>{const fe=pe.name;return fe==="iframe"||fe==="video"||fe==="audio"},Wo=(pe,fe,He,qe=null)=>{const gn=pe.attr(He);return ie(gn)?gn:Nt(fe,He)?null:qe},hi=(pe,fe,He)=>{const qe=fe.name==="img"||pe.name==="video",gn=qe?"300":null,Nn=pe.name==="audio"?"30":"150",Un=qe?Nn:null;fe.attr({width:Wo(pe,He,"width",gn),height:Wo(pe,He,"height",Un)})},Di=(pe,fe,He,qe)=>{const gn=to(pe.schema).parse(qe,{context:fe});for(;gn.firstChild;)He.append(gn.firstChild)},zo=(pe,fe)=>{const He=fe.name,qe=new eo("img",1);return Ys(pe,fe,qe),hi(fe,qe,{}),qe.attr({style:fe.attr("style"),src:Ba.transparentSrc,"data-mce-object":He,class:"mce-object mce-object-"+He}),qe},Sn=(pe,fe)=>{var He;const qe=fe.name,gn=new eo("span",1);gn.attr({contentEditable:"false",style:fe.attr("style"),"data-mce-object":qe,class:"mce-preview-object mce-object-"+qe}),Ys(pe,fe,gn);const Nn=pe.dom.parseStyle((He=fe.attr("style"))!==null&&He!==void 0?He:""),Un=new eo(qe,1);if(hi(fe,Un,Nn),Un.attr({src:fe.attr("src"),style:fe.attr("style"),class:fe.attr("class")}),qe==="iframe")Un.attr({allowfullscreen:fe.attr("allowfullscreen"),frameborder:"0",sandbox:fe.attr("sandbox"),referrerpolicy:fe.attr("referrerpolicy")});else{Ye(["controls","crossorigin","currentTime","loop","muted","poster","preload"],Xs=>{Un.attr(Xs,fe.attr(Xs))});const Wn=gn.attr("data-mce-html");ie(Wn)&&Di(pe,qe,Un,unescape(Wn))}const or=new eo("span",1);return or.attr("class","mce-shim"),gn.append(Un),gn.append(or),gn},Ys=(pe,fe,He)=>{var qe;const gn=(qe=fe.attributes)!==null&&qe!==void 0?qe:[];let Nn=gn.length;for(;Nn--;){const Wn=gn[Nn].name;let Xs=gn[Nn].value;Wn!=="width"&&Wn!=="height"&&Wn!=="style"&&!Vr(Wn,"data-mce-")&&((Wn==="data"||Wn==="src")&&(Xs=pe.convertURL(Xs,Wn)),He.attr("data-mce-p-"+Wn,Xs))}const Un=ms({inner:!0},pe.schema),or=new eo("div",1);Ye(fe.children(),Wn=>or.append(Wn));const _e=Un.serialize(or);_e&&(He.attr("data-mce-html",escape(_e)),He.empty())},Qa=pe=>{const fe=pe.attr("class");return M(fe)&&/\btiny-pageembed\b/.test(fe)},ul=pe=>{let fe=pe;for(;fe=fe.parent;)if(fe.attr("data-ephox-embed-iri")||Qa(fe))return!0;return!1},dl=pe=>fe=>{let He=fe.length,qe;for(;He--;)qe=fe[He],qe.parent&&(qe.parent.attr("data-mce-object")||(Ja(qe)&&Jt(pe)?ul(qe)||qe.replace(Sn(pe,qe)):ul(qe)||qe.replace(zo(pe,qe))))},hs=(pe,fe,He)=>{const qe=pe.options.get,gn=qe("xss_sanitization"),Nn=Bn(pe);return to(pe.schema,{sanitize:gn,validate:Nn}).parse(He,{context:fe})},pr=pe=>{pe.on("PreInit",()=>{const{schema:fe,serializer:He,parser:qe}=pe,gn=fe.getBoolAttrs();Ye("webkitallowfullscreen mozallowfullscreen".split(" "),Nn=>{gn[Nn]={}}),Xe({embed:["wmode"]},(Nn,Un)=>{const or=fe.getElementRule(Un);or&&Ye(Nn,_e=>{or.attributes[_e]={},or.attributesOrder.push(_e)})}),qe.addNodeFilter("iframe,video,audio,object,embed",dl(pe)),He.addAttributeFilter("data-mce-object",(Nn,Un)=>{var or;let _e=Nn.length;for(;_e--;){const Wn=Nn[_e];if(!Wn.parent)continue;const Xs=Wn.attr(Un),ur=new eo(Xs,1);if(Xs!=="audio"){const Gr=Wn.attr("class");Gr&&Gr.indexOf("mce-preview-object")!==-1&&Wn.firstChild?ur.attr({width:Wn.firstChild.attr("width"),height:Wn.firstChild.attr("height")}):ur.attr({width:Wn.attr("width"),height:Wn.attr("height")})}ur.attr({style:Wn.attr("style")});const ka=(or=Wn.attributes)!==null&&or!==void 0?or:[];let Zo=ka.length;for(;Zo--;){const Gr=ka[Zo].name;Gr.indexOf("data-mce-p-")===0&&ur.attr(Gr.substr(11),ka[Zo].value)}const zc=Wn.attr("data-mce-html");if(zc){const Gr=hs(pe,Xs,unescape(zc));Ye(Gr.children(),Aa=>ur.append(Aa))}Wn.replace(ur)}})}),pe.on("SetContent",()=>{const fe=pe.dom;Ye(fe.select("span.mce-preview-object"),He=>{fe.select("span.mce-shim",He).length===0&&fe.add(He,"span",{class:"mce-shim"})})})},Zs=pe=>{pe.on("ResolveName",fe=>{let He;fe.target.nodeType===1&&(He=fe.target.getAttribute("data-mce-object"))&&(fe.name=He)})},Ta=pe=>fe=>{const He=()=>{fe.setEnabled(pe.selection.isEditable())};return pe.on("NodeChange",He),He(),()=>{pe.off("NodeChange",He)}},yc=pe=>{const fe=()=>pe.execCommand("mceMedia");pe.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:fe,onSetup:He=>{const qe=pe.selection;He.setActive(To(qe.getNode()));const gn=qe.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",He.setActive).unbind,Nn=Ta(pe)(He);return()=>{gn(),Nn()}}}),pe.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:fe,onSetup:Ta(pe)})};var Tr=()=>{p.add("media",pe=>(Ke(pe),po(pe),yc(pe),Zs(pe),pr(pe),Zt(pe),kt(pe)))};Tr()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(Z,ie)=>{Z.focus(),Z.undoManager.transact(()=>{Z.setContent(ie)}),Z.selection.setCursorLocation(),Z.nodeChanged()},w=Z=>Z.getContent({source_view:!0}),E=Z=>{const ie=w(Z);Z.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:ie},onSubmit:Ee=>{g(Z,Ee.getData().code),Ee.close()}})},M=Z=>{Z.addCommand("mceCodeEditor",()=>{E(Z)})},z=Z=>{const ie=()=>Z.execCommand("mceCodeEditor");Z.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:ie}),Z.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:ie})};var K=()=>{p.add("code",Z=>(M(Z),z(Z),{}))};K()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(Me,Pe,N)=>{const an=Pe==="UL"?"InsertUnorderedList":"InsertOrderedList";Me.execCommand(an,!1,N===!1?null:{"list-style-type":N})},w=Me=>{Me.addCommand("ApplyUnorderedListStyle",(Pe,N)=>{g(Me,"UL",N["list-style-type"])}),Me.addCommand("ApplyOrderedListStyle",(Pe,N)=>{g(Me,"OL",N["list-style-type"])})},E=Me=>Pe=>Pe.options.get(Me),M=Me=>{const Pe=Me.options.register;Pe("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),Pe("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},z=E("advlist_number_styles"),K=E("advlist_bullet_styles"),Z=Me=>Me==null,ie=Me=>!Z(Me);var Ee=tinymce.util.Tools.resolve("tinymce.util.Tools");class de{constructor(Pe,N){this.tag=Pe,this.value=N}static some(Pe){return new de(!0,Pe)}static none(){return de.singletonNone}fold(Pe,N){return this.tag?N(this.value):Pe()}isSome(){return this.tag}isNone(){return!this.tag}map(Pe){return this.tag?de.some(Pe(this.value)):de.none()}bind(Pe){return this.tag?Pe(this.value):de.none()}exists(Pe){return this.tag&&Pe(this.value)}forall(Pe){return!this.tag||Pe(this.value)}filter(Pe){return!this.tag||Pe(this.value)?this:de.none()}getOr(Pe){return this.tag?this.value:Pe}or(Pe){return this.tag?this:Pe}getOrThunk(Pe){return this.tag?this.value:Pe()}orThunk(Pe){return this.tag?this:Pe()}getOrDie(Pe){if(this.tag)return this.value;throw new Error(Pe??"Called getOrDie on None")}static from(Pe){return ie(Pe)?de.some(Pe):de.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Pe){this.tag&&Pe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}de.singletonNone=new de(!1);const Ye=(Me,Pe,N)=>{for(let an=0,ct=Me.length;an<ct;an++){const $n=Me[an];if(Pe($n,an))return de.some($n);if(N($n,an))break}return de.none()},Ut=Me=>/\btox\-/.test(Me.className),Lt=(Me,Pe)=>Me.dom.isChildOf(Pe,Me.getBody()),Mt=Me=>Pe=>ie(Pe)&&Me.test(Pe.nodeName),Ct=Mt(/^(OL|UL|DL)$/),Xe=Mt(/^(TH|TD)$/),dn=(Me,Pe,N)=>Ye(Pe,an=>Ct(an)&&!Ut(an),Xe).exists(an=>an.nodeName===N&&Lt(Me,an)),Nt=Me=>{const Pe=Me.dom.getParent(Me.selection.getNode(),"ol,ul"),N=Me.dom.getStyle(Pe,"listStyleType");return de.from(N)},ce=(Me,Pe)=>Pe!==null&&!Me.dom.isEditable(Pe),Ke=(Me,Pe)=>{const N=Me.dom.getParent(Pe,"ol,ul,dl");return ce(Me,N)&&Me.selection.isEditable()},Kn=(Me,Pe)=>{const N=Me.selection.getNode();return Pe({parents:Me.dom.getParents(N),element:N}),Me.on("NodeChange",Pe),()=>Me.off("NodeChange",Pe)},jt=Me=>Me.replace(/\-/g," ").replace(/\b\w/g,Pe=>Pe.toUpperCase()),ne=Me=>Z(Me)||Me==="default"?"":Me,Jt=(Me,Pe)=>N=>{const an=($n,sn)=>{const nt=$n.selection.getStart(!0);N.setActive(dn($n,sn,Pe)),N.setEnabled(!Ke($n,nt)&&$n.selection.isEditable())};return Kn(Me,$n=>an(Me,$n.parents))},Bn=(Me,Pe,N,an,ct,$n)=>{Me.ui.registry.addSplitButton(Pe,{tooltip:N,icon:ct==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:sn=>{const nt=Ee.map($n,eo=>{const ms=ct==="OL"?"num":"bull",to=eo==="disc"||eo==="decimal"?"default":eo,os=ne(eo),tt=jt(eo);return{type:"choiceitem",value:os,icon:"list-"+ms+"-"+to,text:tt}});sn(nt)},onAction:()=>Me.execCommand(an),onItemAction:(sn,nt)=>{g(Me,ct,nt)},select:sn=>Nt(Me).map(eo=>sn===eo).getOr(!1),onSetup:Jt(Me,ct)})},Qt=(Me,Pe,N,an,ct,$n)=>{Me.ui.registry.addToggleButton(Pe,{active:!1,tooltip:N,icon:ct==="OL"?"ordered-list":"unordered-list",onSetup:Jt(Me,ct),onAction:()=>Me.queryCommandState(an)||$n===""?Me.execCommand(an):g(Me,ct,$n)})},Fe=(Me,Pe,N,an,ct,$n)=>{$n.length>1?Bn(Me,Pe,N,an,ct,$n):Qt(Me,Pe,N,an,ct,ne($n[0]))},ve=Me=>{Fe(Me,"numlist","Numbered list","InsertOrderedList","OL",z(Me)),Fe(Me,"bullist","Bullet list","InsertUnorderedList","UL",K(Me))};var so=()=>{p.add("advlist",Me=>{Me.hasPlugin("lists")?(M(Me),ve(Me),w(Me)):console.error("Please use the Lists plugin together with the List Styles plugin.")})};so()})();
